{"componentChunkName":"component---src-templates-posts-tsx","path":"/","result":{"pageContext":{"posts":[{"id":"2b5958e2-9d86-5f36-98f1-271a53b9bd19","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":3},{"depth":3}],"frontmatter":{"title":"Web Storage","path":"/web-storage","tags":["Web"],"excerpt":"Web Storage는 HTML5에서 추가된 간단한 키와 값을 저장(key-value storage) 할 수 있는 저장소이다.","created":"2021-04-11T00:00:00.000Z","createdPretty":"11 April, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"11 April, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAAy0lEQVQY02P4jwH+/fsHJC/eurN62865y1c9fvUWLogGGLBo/vsXSN5bNPlcddqp2pT7SyaRoBmoG0h8mNn8ZlbLrznlXyYX/gPrJk4z2Ob3q2a8WDTh6875n9dOhQsS1vz3zx8g+XHD/Ccl4e86kj6tnwWy+M9vIp0NcuHf719+ndj9+8SOf18//ifS2T9//b5048G1O49fvP5w782XJ59/P3/3+f7jF89fvSdK8637z85duXvv4fO7959evfng1oOnu49eBBqHqRkASsnE738BTeIAAAAASUVORK5CYII=","aspectRatio":2.5,"src":"/static/b06ba6efc64c4ca80aa5ac260f48ab29/0853f/cover.png","srcSet":"/static/b06ba6efc64c4ca80aa5ac260f48ab29/14156/cover.png 125w,\n/static/b06ba6efc64c4ca80aa5ac260f48ab29/d6e47/cover.png 250w,\n/static/b06ba6efc64c4ca80aa5ac260f48ab29/0853f/cover.png 500w,\n/static/b06ba6efc64c4ca80aa5ac260f48ab29/25cdd/cover.png 624w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h3 id=\"web-storage\" style=\"position:relative;\"><a href=\"#web-storage\" aria-label=\"web storage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Storage</h3>\n<p>Web Storage는 HTML5에서 추가된 간단한 키와 값을 저장(key-value storage) 할 수 있는 저장소이다.\n데이터의 지속성에 따라 영구저장소(LocalStorage)와 임시저장소(SessionStorage) 두가지를 지원한다. 그 동안 많이 사용해 왔던 쿠키와 거의 차이가 없어 보이지만\n몇 가지 쿠키의 단점을 극복하는 개선점이 도입이 되었다.</p>\n<h3 id=\"web-storage-특징\" style=\"position:relative;\"><a href=\"#web-storage-%ED%8A%B9%EC%A7%95\" aria-label=\"web storage 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Storage 특징</h3>\n<p>Web Storage는 다음과 같은 특징이 있다.</p>\n<ul>\n<li>키와 값은 무조건 문자열로 변환되어 저장된다. (객체를 읽고 쓰려면 JSON.stringify, JSON.parse를 사용)</li>\n<li>브라우저별 용량제한이 다르다. (용량 제한은 대략 5MB)</li>\n<li>도메인별 Storage는 다르며 도메인별로 용량 제한이 있다. (Protocal, host, port가 같으면 같은 스토리지를 공유)</li>\n<li>이것 마저 용량이 부족하다면 indexedDB가 있다.</li>\n</ul>\n<p> (indexedDB에 대해서는 다음에 좀더 자세히 알아보도록 하고,,)</p>\n<h3 id=\"localstorage와-sessionstorage\" style=\"position:relative;\"><a href=\"#localstorage%EC%99%80-sessionstorage\" aria-label=\"localstorage와 sessionstorage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>localStorage와 sessionStorage</h3>\n<p>Web Storage는 데이터의 지속성에 따라 두 가지 용도의 저장소를 제공한다.</p>\n<h2 id=\"localstorage\" style=\"position:relative;\"><a href=\"#localstorage\" aria-label=\"localstorage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LocalStorage</h2>\n<p>저장한 데이터를 명시적으로 지우지 않는 이상 영구적으로 보관이 가능하다. 앞서 말한 것처럼 도메인별로 스토리지가 생성이 되고 Windows 전역 객체의 LocalStorage라는 컬렉션을 통해 저장과 조회가 이루어진다.</p>\n<h2 id=\"sessionstorage\" style=\"position:relative;\"><a href=\"#sessionstorage\" aria-label=\"sessionstorage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SessionStorage</h2>\n<p>SessionStorage는 데이터가 지속적으로 보관이 되지 않는다. 이는 마치 브라우저 기반 세션 쿠키와 그 성질이 비슷한데, 현재 페이지가 브라우징되고 있는 브라우저 컨텍스트 내에서만 데이터가 유지된다.\n쉽게 말하자면, 탭 브라우징이나 브라우저를 하나 더 실행해서 같은 페이지를 실행했을 때, 이 두 페이지의 SessionStorage는 각각 별개의 영역으로 서로 침범하지 못한다는 의미이다. 이는 도메인만 같으면 전역적으로 공유 가능한 LocalStorage와 구분 되는 가장 큰 특징이다.</p>\n<h3 id=\"cookie\" style=\"position:relative;\"><a href=\"#cookie\" aria-label=\"cookie permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cookie</h3>\n<ul>\n<li>후속 요청으로 서버로 다시 보내야하는 데이터를 저장한다. 만료는 유형에 따라 다르며 만료 기간은 서버 측 또는 클라이언트 측 (일반적으로 서버 측)에서 설정할 수 있다.</li>\n<li>쿠키는 주로 서버 측에서 읽기(클라이언트 측에서 읽을 수도 있음) 위한 것이며, Local Storage 및 Session Storage는 클라이언트 측에서만 읽을 수 있다.</li>\n<li>크기는 4KB보다 작아야 한다.</li>\n<li>해당 쿠키에 대해 httpOnly 플래그를 true로 설정하여 쿠키를 안전하게 만들 수 있다. 이렇게하면 쿠키에 대한 클라이언트 측 액세스가 차단된다.</li>\n</ul>\n<p>각 저장소별로 데이터가 어떻게 저장되고 있는지를 보고 싶다면 디버깅모드(F12) > Application에서 확인 할 수 있다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/675054cbe4fe7acc0a81e683003daa94/9cea8/web-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAlklEQVQI14WMWQ6DMAxEc/8zNlDRhZDYjrOVUgjUgNTfjkbW82hs1d3ugTnnXEp2yM/ehJhyeRF5Yyx5JmKZgwML6BAFgHxIiWNScuycY+YQQj/ApemMRR+LBf8YwCILiOXvwefK0uBYlG5arTUAMEtKqYzjNC/r9v4s4mmuh3+w+8gX6aimvSJCyrs853XdTtVat3/6Atg/42pkKIieAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/675054cbe4fe7acc0a81e683003daa94/c1b63/web-01.png\"\n        srcset=\"/static/675054cbe4fe7acc0a81e683003daa94/5a46d/web-01.png 300w,\n/static/675054cbe4fe7acc0a81e683003daa94/0a47e/web-01.png 600w,\n/static/675054cbe4fe7acc0a81e683003daa94/c1b63/web-01.png 1200w,\n/static/675054cbe4fe7acc0a81e683003daa94/9cea8/web-01.png 1278w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며...</h3>\n<p>WebStorage의 보안은 서로 다른 도메인의 데이터 침범을 막고는 있지만 클라이언트, 즉 사용자를 막고 있지는 않다. 클라이언트는 얼마든지 저장된 값을 임의로 수정이 가능하다. 이것은 쿠키와 동일한 개념이다. 그렇다고 쿠키에 비해 별다른 보안 취약점을 더 가진 것은 아니다. 따라서 개발자는 사용자에 의한 이러한 임의 변경에 항상 예의 주시하고 방어 코드의 작성을 잊지 말아야 한다.</p>"},{"id":"05a3aea1-6c02-5466-8d7a-0f71b92198cc","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"Python 병렬 처리를 위한 Dask","path":"/python-dask","tags":["Python"],"excerpt":"시계열 자료는 인덱스가 날짜 혹은 시간인 데이터를 말한다. Pandas에서 시계열 자료를 생성하려면 인덱스를 `DatetimeIndex` 자료형으로 만들어야 한다.","created":"2020-11-01T00:00:00.000Z","createdPretty":"01 November, 2020","updated":"2020-11-01T00:00:00.000Z","updatedPretty":"01 November, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>큰 데이터를 처리하기 위해서는 병렬처리가 효율적인데, 그래서 Apache Spark의 pyspark를 많이들 사용한다. 속도는 매우 빠르지만 Pandas에 익숙한 사람들은 불편한 점이 있다. 이를 해소시켜 줄만한 라이브러리가 바로 Dask이다.\n(그 외 modin, ray, vaex등이 있는듯 하니 관심있다면 찾아보자.)</p>\n<h2 id=\"병렬-컴퓨팅parallel-computing이란\" style=\"position:relative;\"><a href=\"#%EB%B3%91%EB%A0%AC-%EC%BB%B4%ED%93%A8%ED%8C%85parallel-computing%EC%9D%B4%EB%9E%80\" aria-label=\"병렬 컴퓨팅parallel computing이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>병렬 컴퓨팅(Parallel Computing)이란?</h2>\n<p>여러 단계 별로 구성된 작업을 수행할 때 각 단계에서 이전 작업이 완료되기를 기다리지 않고 이들이 동시에 처리되도록 하는 것이다.</p>\n<p>따라서 난이도는 각 작업의 특징에 따라 달라지는데, 각 작업의 시작과 끝을 제외하고 각 단계가 서로 독립적으로 수행되는 작업은 병렬화가 쉽고, 각 단계 사이의 많은 데이터가 전송되고 교환되어야 하는 작업은 병렬화가 어렵다.</p>\n<h2 id=\"dask-란\" style=\"position:relative;\"><a href=\"#dask-%EB%9E%80\" aria-label=\"dask 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dask 란?</h2>\n<p>Dask는 Python 라이브러리로 기능면에서는 Apache Spark와 비슷하지만 numpy, pandas와 긴밀하게 연결되어 있어서 python 사용자들이 Spark보다 훨씬 쉽게 배우고 활용할 수 있고, 다임과 같은 두 가지 기능을 가진다.</p>\n<ol>\n<li>가상 데이터프레임</li>\n<li>병렬처리용 작업 스케줄러</li>\n</ol>\n<h2 id=\"가상-데이터프레임\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81-%EB%8D%B0%EC%9D%B4%ED%84%B0%ED%94%84%EB%A0%88%EC%9E%84\" aria-label=\"가상 데이터프레임 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가상 데이터프레임</h2>\n<p>가상 데이터프레임은 Pandas 데이터프레임과 비슷한 기능을 제공하지만 실제로 모든 데이터가 메모리 상에 로드되어 있는 것이 아니라 하나 이상의 파일 혹인 데이터베이스에 존재하는 채로 처리할 수 있는 기능이다. 따라서 메모리 크기와 관계 없이 엄청나게 큰 CSV 파일을 가상 데이터프레임으로 로드하거나 같은 형식의 데이터를 가진 여러개의 CSV 파일을 하나의 가상 데이터프레임에 로드할 수 있다.</p>\n<p>실제로 Dask의 가상 데이터프레임을 어떻게 쓸 수 있는지  알아보기 위해 간단한 CSV 파일을 만들어 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>writefile data1<span class=\"token punctuation\">.</span>csv\ntime<span class=\"token punctuation\">,</span>temperature<span class=\"token punctuation\">,</span>humidity\n<span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">,</span><span class=\"token number\">58</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">21</span><span class=\"token punctuation\">,</span><span class=\"token number\">57</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">25</span><span class=\"token punctuation\">,</span><span class=\"token number\">57</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">26</span><span class=\"token punctuation\">,</span><span class=\"token number\">55</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">,</span><span class=\"token number\">53</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">23</span><span class=\"token punctuation\">,</span><span class=\"token number\">59</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Writing data1.csv</code></pre></div>\n<p>Dask 패키지가 설치 되어 있지 않다면 설치를 하고 해당 패키지를 임포트하자.</p>\n<p>Install</p>\n<ul>\n<li>conda install dask (anaconda environment)</li>\n<li>pip install \"dask[complete]\" (pip based installation)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> dask<span class=\"token punctuation\">.</span>dataframe <span class=\"token keyword\">as</span> dd</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> dd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">\"data1.csv\"</span><span class=\"token punctuation\">)</span>\ndf</code></pre></div>\n<div><strong>Dask DataFrame Structure:</strong></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>time</th>\n      <th>temperature</th>\n      <th>humidity</th>\n    </tr>\n    <tr>\n      <th>npartitions=1</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th></th>\n      <td>int64</td>\n      <td>int64</td>\n      <td>int64</td>\n    </tr>\n    <tr>\n      <th></th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div>Dask Name: read-csv, 1 tasks</div>\n<p>사용법을 보면 기존에 Pandas 데이터프레임과 유사하지만 실제 결과를 보면 아직 데이터를 메모리에 읽지 않았기 때문에 값은 표시되지 않는다.</p>\n<p>값을 실제로 표시하려면 <code class=\"language-text\">head</code>, <code class=\"language-text\">tail</code> 명령을 내리면 해당 데이터를 읽어서 표시한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>time</th>\n      <th>temperature</th>\n      <th>humidity</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0</td>\n      <td>22</td>\n      <td>58</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1</td>\n      <td>21</td>\n      <td>57</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2</td>\n      <td>25</td>\n      <td>57</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3</td>\n      <td>26</td>\n      <td>55</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>4</td>\n      <td>22</td>\n      <td>53</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">dd.Scalar&lt;series-..., dtype=float64&gt;</code></pre></div>\n<p>위의 경우 temperature 열의 평균을 구하기 위해 명령 입력하였지만 결과가 나오지 않는다. 그 이유는 <code class=\"language-text\">mean</code>는 연산 반환값의 결과가 아닌 작업(task)이기 때문이다. 구체적으로 어떤 작업인지를 보려면 <code class=\"language-text\">visualize</code> 매서드를 사용하여 작업 그래프(graph)를 볼 수 있다. 작업 그래프란 이 계산을 하기 위해 실제로 CPU가 해야할 일들의 순서도라고 생각하면 된다.</p>\n<p>이 작업의 값을 실제로 구하려면 결과로 받은 작업 객체의 <code class=\"language-text\">compute</code> 매서드를 호출해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>compute<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">23.166666666666668</code></pre></div>\n<p>이번에는 이 값을 화씨로 변환해 보자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>temperature <span class=\"token operator\">*</span> <span class=\"token number\">9</span> <span class=\"token operator\">/</span> <span class=\"token number\">5</span> <span class=\"token operator\">+</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>compute<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    71.6\n1    69.8\n2    77.0\n3    78.8\n4    71.6\n5    73.4\nName: temperature, dtype: float64</code></pre></div>\n<p>이번에는 이 값으로 원래의 temperature 열을 갱신해보자. 이 때는 Pandas의 문법을 쓰지 못하고 다음과 같이 <code class=\"language-text\">assign</code> 메서드를 사용해야 한다. <code class=\"language-text\">assign</code> 메서드를 사용할 때는 <code class=\"language-text\">compute</code>를 할 필요가 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>assign<span class=\"token punctuation\">(</span>temperature<span class=\"token operator\">=</span>df<span class=\"token punctuation\">.</span>temperature <span class=\"token operator\">*</span> <span class=\"token number\">9</span> <span class=\"token operator\">/</span> <span class=\"token number\">5</span> <span class=\"token operator\">+</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>time</th>\n      <th>temperature</th>\n      <th>humidity</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0</td>\n      <td>71.6</td>\n      <td>58</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1</td>\n      <td>69.8</td>\n      <td>57</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2</td>\n      <td>77.0</td>\n      <td>57</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3</td>\n      <td>78.8</td>\n      <td>55</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>4</td>\n      <td>71.6</td>\n      <td>53</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>자료형을 변환하거나 새로운 열을 추가하는 것도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>assign<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span>df<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" degree\"</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>time</th>\n      <th>temperature</th>\n      <th>humidity</th>\n      <th>title</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0</td>\n      <td>71.6</td>\n      <td>58</td>\n      <td>71.6 degree</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1</td>\n      <td>69.8</td>\n      <td>57</td>\n      <td>69.8 degree</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2</td>\n      <td>77.0</td>\n      <td>57</td>\n      <td>77.0 degree</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3</td>\n      <td>78.8</td>\n      <td>55</td>\n      <td>78.8 degree</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>4</td>\n      <td>71.6</td>\n      <td>53</td>\n      <td>71.6 degree</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>Apache Spark를 사용해본 사람이라면 Transformation과 Action의 개념과 유사하다는 것을 눈치 챘을것이다!</p>\n<h2 id=\"복수-데이터에-대한-가상-데이터프레임\" style=\"position:relative;\"><a href=\"#%EB%B3%B5%EC%88%98-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%80%EC%83%81-%EB%8D%B0%EC%9D%B4%ED%84%B0%ED%94%84%EB%A0%88%EC%9E%84\" aria-label=\"복수 데이터에 대한 가상 데이터프레임 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>복수 데이터에 대한 가상 데이터프레임</h2>\n<p>Dask는 가상 데이터프레임으로 원천 데이터 파일을 하나가 아닌 복수로 설정할 수도 있다. 예를 들어 앞서 보았던 <code class=\"language-text\">data1.dsv</code> 파일 이외에도 다음과 같이 <code class=\"language-text\">data2.csv</code>, <code class=\"language-text\">data3.csv</code> 파일이 있을 경우, 이 파일을 한 번에 하나의 데이터프레임으로 읽어들일 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>writefile data2<span class=\"token punctuation\">.</span>csv\ntime<span class=\"token punctuation\">,</span>temperature<span class=\"token punctuation\">,</span>humidity\n<span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">,</span><span class=\"token number\">58</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">21</span><span class=\"token punctuation\">,</span><span class=\"token number\">57</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">25</span><span class=\"token punctuation\">,</span><span class=\"token number\">57</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">26</span><span class=\"token punctuation\">,</span><span class=\"token number\">55</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">,</span><span class=\"token number\">53</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">23</span><span class=\"token punctuation\">,</span><span class=\"token number\">59</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Writing data2.csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>writefile data3<span class=\"token punctuation\">.</span>csv\ntime<span class=\"token punctuation\">,</span>temperature<span class=\"token punctuation\">,</span>humidity\n<span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">,</span><span class=\"token number\">58</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">21</span><span class=\"token punctuation\">,</span><span class=\"token number\">57</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">25</span><span class=\"token punctuation\">,</span><span class=\"token number\">57</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">26</span><span class=\"token punctuation\">,</span><span class=\"token number\">55</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">,</span><span class=\"token number\">53</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">23</span><span class=\"token punctuation\">,</span><span class=\"token number\">59</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Writing data3.csv</code></pre></div>\n<p>복수 파일은 와일드카드(*) 기호를 이용하여 읽는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> dd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'data*.csv'</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>compute<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">time           18\ntemperature    18\nhumidity       18\ndtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>compute<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">count    18.000000\nmean     23.166667\nstd       1.823055\nmin      21.000000\n25%      22.000000\n50%      22.500000\n75%      24.500000\nmax      26.000000\nName: temperature, dtype: float64</code></pre></div>\n<h2 id=\"대량-데이터의-병렬-처리\" style=\"position:relative;\"><a href=\"#%EB%8C%80%EB%9F%89-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98-%EB%B3%91%EB%A0%AC-%EC%B2%98%EB%A6%AC\" aria-label=\"대량 데이터의 병렬 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>대량 데이터의 병렬 처리</h2>\n<p>자 이제 Dask로 대량의 데이터를 처리해보자. 샘플로 쓸 데이터는 미국 정부가 발표하는 공개 정보 중 하나로 시카고의 범죄 관련 데이터이다.</p>\n<ul>\n<li><a href=\"https://catalog.data.gov/dataset/crimes-2001-to-present-398a4\">https://catalog.data.gov/dataset/crimes-2001-to-present-398a4</a></li>\n</ul>\n<p>다음 명령으로 이 데이터를 다운로드 받을 수 있다. CSV 파일의 크기가 1.3GB가 넘으므로 다운로드에 10분 이상 걸릴수 있다.</p>\n<p>(만약 윈도우라면 wget을 사용하기 위해 <a href=\"https://eternallybored.org/misc/wget/\">https://eternallybored.org/misc/wget/</a> 여기에서 wget 최신 버전을 받고 c:\\windows\\system32에 위치시키면 된다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">!wget <span class=\"token operator\">-</span>O crime<span class=\"token punctuation\">.</span>csv https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>data<span class=\"token punctuation\">.</span>cityofchicago<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>views<span class=\"token operator\">/</span>ijzp<span class=\"token operator\">-</span>q8t2<span class=\"token operator\">/</span>rows<span class=\"token punctuation\">.</span>csv?accessType<span class=\"token operator\">=</span>DOWNLOAD</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">...... .......... .......... ..........  291K\n1218900K .......... .......... .......... .......... .......... 11.7M\n1218950K .......... .......... .......... .......... .......... 9.51M\n1219000K .......... .......... .......... .......... .......... 14.1M\n1219050K .......... .......... .......... .......... .......... 12.5M\n1219100K .......... .......... .......... .......... .......... 10.1M\n1219150K .......... .......... .......... .......... ..........  292K\n1219200K .......... .......... .......... .......... .......... 9.68M\n1219250K .......... .......... .......... .......... .......... 11.6M\n1219300K .......... .......... .......... .......... .......... 12.1M\n1219350K .......... .......... .......... .......... .......... 11.0M\n1219400K .......... .......... .......... .......... .......... 10.7M\n1219450K .......... .......... .......... .......... ..........  293K\n1219500K .......... .......... .......... .......... .......... 11.5M\n1219550K .......... .......... .......... .......... .......... 11.2M\n1219600K .......... .......... .......... .......... .......... 9.82M\n1219650K .......... .......... .......... .......... .......... 11.7M\n1219700K .......... .......... .......... .......... .......... 11.9M\n1219750K .......... .......... .......... .......... ..........  238K\n1219800K .......... .......... .......... .......... .......... 11.3M\n1219850K .......... .......... .......... .......... .......... 11.7M\n1219900K .......... .......... .......... .......... .......... 12.0M\n1219950K .......... .......... .......... .......... .......... 11.7M\n1220000K .......... .......... .......... .......... .......... 9.24M\n1220050K .......... .......... .......... .......... ..........  293K\n1220100K .......... .......... .......... .......... .......... 11.9M\n1220150K .......... .......... .......... .......... .......... 12.2M\n1220200K .......... .......... .......... .......... .......... 11.2M\n1220250K .......... .......... .......... .......... .......... 11.3M\n1220300K .......... .......... .......... .......... .......... 12.1M\n1220350K .......... .......... .......... .......... ..........  292K\n1220400K .......... .......... .......... .......... .......... 11.8M\n1220450K .......... .......... .......... .......... .......... 11.6M\n1220500K .......... .......... .......... .......... .......... 9.90M\n1220550K .......... .......... .......... .......... .......... 8.73M\n1220600K .......... .......... .......... .......... .......... 12.4M\n1220650K .......... .......... .......... .......... .......... 3.45M\n1220700K .......... .......... .......... .......... ..........  315K\n1220750K .......... .......... .......... .......... .......... 12.7M\n1220800K .......... .......... .......... .......... .......... 9.12M\n1220850K .......... .......... .......... .......... .......... 9.26M\n1220900K .......... .......... .......... .......... .......... 11.2M\n1220950K .......... .......... .......... .......... .......... 12.1M\n1221000K .......... .......... .......... .......... ..........  296K\n1221050K .......... .......... .......... .......... .......... 13.0M\n1221100K .......... .......... .......... .......... .......... 12.3M\n1221150K .......... .......... .......... .......... .......... 10.1M\n1221200K .......... .......... .......... .......... .......... 8.55M\n1221250K .......... .......... .......... .......... .......... 11.6M\n1221300K .......... .......... .......... .......... ..........  249K\n1221350K .......... .......... .......... .......... .......... 12.1M\n1221400K .......... .......... .......... .......... .......... 10.8M\n1221450K .......... .......... .......... .......... .......... 10.7M\n1221500K .......... .......... .......... .......... .......... 13.7M\n1221550K .......... .......... .......... .......... .......... 11.8M\n1221600K .......... .......... .......... .......... ..........  665K\n1221650K .......... .......... .......... .......... ..........  502K\n1221700K .......... .......... .......... .......... .......... 12.0M\n1221750K .......... .......... .......... .......... .......... 9.97M\n1221800K .......... .......... .......... .......... .......... 13.0M\n1221850K .......... .......... .......... .......... .......... 11.0M\n1221900K .......... .......... .......... .......... .......... 12.7M\n1221950K .......... .......... .......... .......... ..........  293K\n1222000K .......... .......... .......... .......... .......... 12.0M\n1222050K .......... .......... .......... .......... .......... 11.6M\n1222100K .......... .......... .......... .......... .......... 11.7M\n1222150K .......... .......... .......... .......... .......... 12.0M\n1222200K .......... .......... .......... .......... .......... 11.1M\n1222250K .......... .......... .......... .......... .......... 1.50M\n1222300K .......... .......... .......... .......... ..........  355K\n1222350K .......... .......... .......... .......... .......... 10.3M\n1222400K .......... .......... .......... .......... .......... 8.38M\n1222450K .......... .......... .......... .......... .......... 11.3M\n1222500K .......... .......... .......... .......... .......... 12.0M\n1222550K .......... .......... .......... .......... .......... 10.6M\n1222600K .......... .......... .......... .......... ..........  297K\n1222650K .......... .......... .......... .......... .......... 14.1M\n1222700K .......... .......... .......... .......... .......... 9.30M\n1222750K .......... .......... .......... .......... .......... 11.5M\n1222800K .......... .......... .......... .......... .......... 9.04M\n1222850K .......... .......... .......... .......... .......... 11.0M\n1222900K .......... .......... .......... .......... ..........  685K\n1222950K .......... .......... .......... .......... ..........  376K\n1223000K .......... .......... .......... .......... .......... 10.8M\n1223050K .......... .......... .......... .......... .......... 11.9M\n1223100K .......... .......... .......... .......... .......... 11.5M\n1223150K .......... .......... .......... .......... .......... 12.4M\n1223200K .......... .......... .......... .......... .......... 9.14M\n1223250K .......... .......... .......... .......... ..........  296K\n1223300K .......... .......... .......... .......... .......... 11.7M\n1223350K .......... .......... .......... .......... .......... 12.1M\n1223400K .......... .......... .......... .......... .......... 10.1M\n1223450K .......... .......... .......... .......... .......... 13.1M\n1223500K .......... .......... .......... .......... .......... 11.4M\n1223550K .......... .......... .......... .......... .......... 12.3M\n1223600K .......... .......... .......... .......... ..........  294K\n1223650K .......... .......... .......... .......... .......... 12.2M\n1223700K .......... .......... .......... .......... .......... 11.6M\n1223750K .......... .......... .......... .......... .......... 11.6M\n1223800K .......... .......... .......... .......... .......... 10.2M\n1223850K .......... .......... .......... .......... .......... 12.9M\n1223900K .......... .......... .......... .......... ..........  294K\n1223950K .......... .......... .......... .......... .......... 16.0M\n1224000K .......... .......... .......... .......... .......... 9.55M\n1224050K .......... .......... .......... .......... .......... 11.6M\n1224100K .......... .......... .......... .......... .......... 11.2M\n1224150K .......... .......... .......... .......... .......... 11.9M\n1224200K .......... .......... .......... .......... .......... 1.24M\n1224250K .......... .......... .......... .......... ..........  372K\n1224300K .......... .......... .......... .......... .......... 13.5M\n1224350K .......... .......... .......... .......... .......... 12.1M\n1224400K .......... .......... .......... .......... .......... 8.88M\n1224450K .......... .......... .......... .......... .......... 11.2M\n1224500K .......... .......... .......... .......... .......... 11.7M\n1224550K .......... .......... .......... .......... ..........  244K\n1224600K .......... .......... .......... .......... .......... 11.3M\n1224650K .......... .......... .......... .......... .......... 10.3M\n1224700K .......... .......... .......... .......... .......... 13.8M\n1224750K .......... .......... .......... .......... .......... 12.3M\n1224800K .......... .......... .......... .......... .......... 9.29M\n1224850K .......... .......... .......... .......... .......... 11.6M\n1224900K .......... .......... .......... .......... ..........  296K\n1224950K .......... .......... .......... .......... .......... 7.57M\n1225000K .......... .......... .......... .......... .......... 11.0M\n1225050K .......... .......... .......... .......... .......... 14.8M\n1225100K .......... .......... .......... .......... .......... 11.1M\n1225150K .......... .......... .......... .......... .......... 12.4M\n1225200K .......... .......... .......... .......... ..........  297K\n1225250K .......... .......... .......... .......... .......... 11.7M\n1225300K .......... .......... .......... .......... .......... 8.52M\n1225350K .......... .......... .......... .......... .......... 11.6M\n1225400K .......... .......... .......... .......... .......... 11.4M\n1225450K .......... .......... .......... .......... .......... 8.07M\n1225500K .......... .......... .......... .......... .......... 11.7M\n1225550K .......... .......... .......... .......... ..........  301K\n1225600K .......... .......... .......... .......... .......... 7.09M\n1225650K .......... .......... .......... .......... .......... 14.4M\n1225700K .......... .......... .......... .......... .......... 9.71M\n1225750K .......... .......... .......... .......... .......... 9.20M\n1225800K .......... .......... .......... .......... .......... 11.6M\n1225850K .......... .......... .......... .......... ..........  302K\n1225900K .......... .......... .......... .......... .......... 10.3M\n1225950K .......... .......... .......... .......... .......... 9.68M\n1226000K .......... .......... .......... .......... .......... 9.45M\n1226050K .......... .......... .......... .......... .......... 11.7M\n1226100K .......... .......... .......... .......... .......... 8.02M\n1226150K .......... .......... .......... .......... .......... 11.8M\n1226200K .......... .......... .......... .......... ..........  247K\n1226250K .......... .......... .......... .......... .......... 12.0M\n1226300K .......... .......... .......... .......... .......... 11.7M\n1226350K .......... .......... .......... .......... .......... 11.3M\n1226400K .......... .......... .......... .......... .......... 9.61M\n1226450K .......... .......... .......... .......... .......... 12.1M\n1226500K .......... .......... .......... .......... ..........  295K\n1226550K .......... .......... .......... .......... .......... 13.4M\n1226600K .......... .......... .......... .......... .......... 10.9M\n1226650K .......... .......... .......... .......... .......... 12.1M\n1226700K .......... .......... .......... .......... .......... 9.85M\n1226750K .......... .......... .......... .......... .......... 14.1M\n1226800K .......... .......... .......... .......... .......... 2.31M\n1226850K .......... .......... .......... .......... ..........  327K\n1226900K .......... .......... .......... .......... .......... 11.7M\n1226950K .......... .......... .......... .......... .......... 11.4M\n1227000K .......... .......... .......... .......... .......... 11.1M\n1227050K .......... .......... .......... .......... .......... 9.91M\n1227100K .......... .......... .......... .......... .......... 13.9M\n1227150K .......... .......... .......... .......... ..........  296K\n1227200K .......... .......... .......... .......... .......... 8.93M\n1227250K .......... .......... .......... .......... .......... 12.0M\n1227300K .......... .......... .......... .......... .......... 11.2M\n1227350K .......... .......... .......... .......... .......... 12.1M\n1227400K .......... .......... .......... .......... .......... 11.2M\n1227450K .......... .......... .......... .......... .......... 9.48M\n1227500K .......... .......... .......... .......... ..........  299K\n1227550K .......... .......... .......... .......... .......... 10.4M\n1227600K .......... .......... .......... .......... .......... 9.38M\n1227650K .......... .......... .......... .......... .......... 12.0M\n1227700K .......... .......... .......... .......... .......... 11.5M\n1227750K .......... .......... .......... .......... .......... 9.85M\n1227800K .......... .......... .......... .......... ..........  247K\n1227850K .......... .......... .......... .......... .......... 13.2M\n1227900K .......... .......... .......... .......... ..........  532K\n1227950K .......... .......... .......... .......... .......... 15.7M\n1228000K .......... .......... .......... .......... .......... 19.8M\n1228050K .......... .......... .......... .......... .......... 23.8M\n1228100K .......... .......... .......... .......... .......... 33.4M\n1228150K .......... .......... .......... .......... ..........  571K\n1228200K .......... .......... .......... .......... .......... 11.0M\n1228250K .......... .......... .......... .......... .......... 10.5M\n1228300K .......... .......... .......... .......... .......... 12.0M\n1228350K .......... .......... .......... .......... .......... 11.1M\n1228400K .......... .......... .......... .......... .......... 10.6M\n1228450K .......... .......... .......... .......... .......... 1.27M\n1228500K .......... .......... .......... .......... ..........  374K\n1228550K .......... .......... .......... .......... .......... 11.0M\n1228600K .......... .......... .......... .......... .......... 11.2M\n1228650K .......... .......... .......... .......... .......... 12.3M\n1228700K .......... .......... .......... .......... .......... 11.6M\n1228750K .......... .......... .......... .......... .......... 11.6M\n1228800K .......... .......... .......... .......... ..........  295K\n1228850K .......... .......... .......... .......... .......... 11.6M\n1228900K .......... .......... .......... .......... .......... 11.9M\n1228950K .......... .......... .......... .......... .......... 9.56M\n1229000K .......... .......... .......... .......... .......... 10.9M\n1229050K .......... .......... .......... .......... .......... 14.5M\n1229100K .......... .......... .......... .......... .......... 12.2M\n1229150K .......... .......... .......... .......... ..........  296K\n1229200K .......... .......... .......... .......... .......... 11.8M\n1229250K .......... .......... .......... .......... .......... 11.2M\n1229300K .......... .......... .......... .......... .......... 12.0M\n1229350K .......... .......... .......... .......... .......... 10.5M\n1229400K .......... .......... .......... .......... .......... 12.1M\n1229450K .......... .......... .......... .......... .......... 11.9M\n1229500K .......... .......... .......... .......... ..........  245K\n1229550K .......... .......... .......... .......... .......... 10.8M\n1229600K .......... .......... .......... .......... .......... 11.7M\n1229650K .......... .......... .......... .......... .......... 11.6M\n1229700K .......... .......... .......... .......... .......... 12.0M\n1229750K .......... .......... .......... .......... .......... 11.0M\n1229800K .......... .......... .......... .......... ..........  297K\n1229850K .......... .......... .......... .......... .......... 13.2M\n1229900K .......... .......... .......... .......... .......... 11.9M\n1229950K .......... .......... .......... .......... .......... 8.50M\n1230000K .......... .......... .......... .......... .......... 13.2M\n1230050K .......... .......... .......... .......... .......... 11.5M\n1230100K .......... .......... .......... .......... .......... 12.3M\n1230150K .......... .......... .......... .......... ..........  296K\n1230200K .......... .......... .......... .......... .......... 14.5M\n1230250K .......... .......... .......... .......... .......... 11.9M\n1230300K .......... .......... .......... .......... .......... 10.7M\n1230350K .......... .......... .......... .......... .......... 10.3M\n1230400K .......... .......... .......... .......... .......... 11.6M\n1230450K .......... .......... .......... .......... .......... 11.4M\n1230500K .......... .......... .......... .......... ..........  299K\n1230550K .......... .......... .......... .......... .......... 11.4M\n1230600K .......... .......... .......... .......... .......... 11.9M\n1230650K .......... .......... .......... .......... .......... 8.88M\n1230700K .......... .......... .......... .......... .......... 17.3M\n1230750K .......... .......... .......... .......... .......... 9.29M\n1230800K .......... .......... .......... .......... .......... 11.7M\n1230850K .......... .......... .......... .......... ..........  298K\n1230900K .......... .......... .......... .......... .......... 13.7M\n1230950K .......... .......... .......... .......... .......... 8.85M\n1231000K .......... .......... .......... .......... .......... 12.1M\n1231050K .......... .......... .......... .......... .......... 15.8M\n1231100K .......... .......... .......... .......... .......... 10.8M\n1231150K .......... .......... .......... .......... .......... 9.94M\n1231200K .......... .......... .......... .......... ..........  247K\n1231250K .......... .......... .......... .......... .......... 11.8M\n1231300K .......... .......... .......... .......... .......... 9.64M\n1231350K .......... .......... .......... .......... .......... 13.5M\n1231400K .......... .......... .......... .......... .......... 12.5M\n1231450K .......... .......... .......... .......... .......... 11.5M\n1231500K .......... .......... .......... .......... .......... 11.7M\n1231550K .......... .......... .......... .......... ..........  139K\n1231600K .......... .......... .......... .......... .......... 17.9M\n1231650K .......... .......... .......... .......... .......... 28.4M\n1231700K .......... .......... .......... .......... .......... 21.4M\n1231750K .......... .......... .......... .......... .......... 21.0M\n1231800K .......... .......... .......... .......... .......... 14.8M\n1231850K .......... .......... .......... .......... .......... 22.9M\n1231900K .......... .......... .......... .......... .......... 27.3M\n1231950K .......... .......... .......... .......... .......... 26.0M\n1232000K .......... .......... .......... .......... .......... 20.2M\n1232050K .......... .......... .......... .......... .......... 21.5M\n1232100K .......... .......... .......... .......... .......... 24.6M\n1232150K .......... .......... .......... .......... ..........  297K\n1232200K .......... .......... .......... .......... .......... 8.90M\n1232250K .......... .......... .......... .......... .......... 7.73M\n1232300K .......... .......... .......... .......... .......... 9.98M\n1232350K .......... .......... .......... .......... .......... 6.42M\n1232400K .......... .......... .......... .......... ..........  298K\n1232450K .......... .......... .......... .......... .......... 9.66M\n1232500K .......... .......... .......... .......... .......... 8.40M\n1232550K .......... .......... .......... .......... .......... 7.90M\n1232600K .......... .......... .......... .......... .......... 9.12M\n1232650K .......... .......... .......... .......... .......... 7.96M\n1232700K .......... .......... .......... .......... ..........  248K\n1232750K .......... .......... .......... .......... .......... 9.37M\n1232800K .......... .......... .......... .......... .......... 12.2M\n1232850K .......... .......... .......... .......... .......... 11.7M\n1232900K .......... .......... .......... .......... .......... 11.8M\n1232950K .......... .......... .......... .......... ..........  668K\n1233000K .......... .......... .......... .......... ..........  486K\n1233050K .......... .......... ..                               15.4M=13m22s\n\n2020-11-10 11:06:21 (1.50 MB/s) - &#39;crime.csv&#39; saved [1262665799]</code></pre></div>\n<p>파일을 다운로드 받은 후에는 가상 데이터프레임으로 읽어들인다. 구체적인 데이터를 아직 모르기 때문에 우선 문자열 자료형으로 읽어들인다. 또 <code class=\"language-text\">error_bad_lines</code> 옵션을 <code class=\"language-text\">False</code>로 해서 오류가 나는 데이터는 생략하도록 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> dd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">\"crime.csv\"</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> error_bad_lines<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> warn_bad_lines<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\ndf</code></pre></div>\n<div><strong>Dask DataFrame Structure:</strong></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>ID</th>\n      <th>Case Number</th>\n      <th>Date</th>\n      <th>Block</th>\n      <th>IUCR</th>\n      <th>Primary Type</th>\n      <th>Description</th>\n      <th>Location Description</th>\n      <th>Arrest</th>\n      <th>Domestic</th>\n      <th>Beat</th>\n      <th>District</th>\n      <th>Ward</th>\n      <th>Community Area</th>\n      <th>FBI Code</th>\n      <th>X Coordinate</th>\n      <th>Y Coordinate</th>\n      <th>Year</th>\n      <th>Updated On</th>\n      <th>Latitude</th>\n      <th>Longitude</th>\n      <th>Location</th>\n    </tr>\n    <tr>\n      <th>npartitions=20</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th></th>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n      <td>object</td>\n    </tr>\n    <tr>\n      <th></th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th></th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th></th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div>Dask Name: read-csv, 20 tasks</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>tail<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>ID</th>\n      <th>Case Number</th>\n      <th>Date</th>\n      <th>Block</th>\n      <th>IUCR</th>\n      <th>Primary Type</th>\n      <th>Description</th>\n      <th>Location Description</th>\n      <th>Arrest</th>\n      <th>Domestic</th>\n      <th>...</th>\n      <th>Ward</th>\n      <th>Community Area</th>\n      <th>FBI Code</th>\n      <th>X Coordinate</th>\n      <th>Y Coordinate</th>\n      <th>Year</th>\n      <th>Updated On</th>\n      <th>Latitude</th>\n      <th>Longitude</th>\n      <th>Location</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>196819</th>\n      <td>7026076</td>\n      <td>HR432572</td>\n      <td>07/15/2009 04:00:00 PM</td>\n      <td>007XX E 79TH ST</td>\n      <td>0620</td>\n      <td>BURGLARY</td>\n      <td>UNLAWFUL ENTRY</td>\n      <td>APARTMENT</td>\n      <td>false</td>\n      <td>false</td>\n      <td>...</td>\n      <td>6</td>\n      <td>44</td>\n      <td>05</td>\n      <td>1182734</td>\n      <td>1852793</td>\n      <td>2009</td>\n      <td>02/28/{</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>196820</th>\n      <td>\"error\" : true</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>...</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>196821</th>\n      <td>\"message\" : \"Internal error\"</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>...</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>196822</th>\n      <td>\"status\" : 500</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>...</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>196823</th>\n      <td>}</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>...</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows × 22 columns</p>\n</div>\n<p>이제 이 데이터프레임으로 분석을 시작해보자. 데이터 크기가 큰 만큼 시간이 오래 걸리기 때문에 친절하게도 Dask는 작업 진행도를 알 수 있는 <code class=\"language-text\">ProgressBar</code>라는 것을 제공한다. 다음과 같이 <code class=\"language-text\">ProgressBar</code>를 만들고 등록한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> dask<span class=\"token punctuation\">.</span>diagnostics <span class=\"token keyword\">import</span> ProgressBar \n\npbar <span class=\"token operator\">=</span> ProgressBar<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\npbar<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>일단 등록하면 작업의 진행도를 프로그레스바 형태로 알려준다. 우선 각 열의 데이터 개수를 세어보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>time\ndf<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>compute<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[########################################] | 100% Completed | 21.9s\nWall time: 21.9 s\n\n\n\n\n\nID                      5366005\nCase Number             5365999\nDate                    5366001\nBlock                   5366001\nIUCR                    5366001\nPrimary Type            5366001\nDescription             5366001\nLocation Description    5359222\nArrest                  5366001\nDomestic                5366001\nBeat                    5366001\nDistrict                5365954\nWard                    4751265\nCommunity Area          4753051\nFBI Code                5366001\nX Coordinate            5285054\nY Coordinate            5285054\nYear                    5366001\nUpdated On              5366001\nLatitude                5285053\nLongitude               5285053\nLocation                5285053\ndtype: int64</code></pre></div>\n<p>데이터양이 많은 경우 이렇게 데이터 수를 세는 것만으로도 20초가 넘게 걸렸다.</p>\n<p>Dask는 이러한 대량 데이터의 분석 작업을 돕기 위한 작업 스케줄러(task scheduler)라는 것을 제공한다. 작업 스케줄러는 하나의 작업을 여러개의 쓰레드, 프로세스, 노드 등이 나누어 분담하도록 한다.</p>\n<p>현재 Dask에서 제공하는 스케줄러의 종류는 다음과 같다.</p>\n<ul>\n<li>dask.get : 단일 쓰레드</li>\n<li>dask.threaded.get : 멀티 쓰레드 풀(pool)</li>\n<li>dask.mutiprocessing.get : 멀티 프로세스 풀</li>\n<li>distributed.Client.get : 여러대의 컴퓨터에서 분산 처리</li>\n</ul>\n<p>병렬처리를 위해서는 어떠한 병렬 처리 방식을 사용할지, 작업 프로세스의 갯수는 어떻게 할지 등은 <code class=\"language-text\">compute</code> 명령에서 인수로 설정해야 한다.</p>\n<p>다음 코드는 멀티프로세싱을 하고 2개의 CPU 코어를 동시에 사용하도록 설정한 예이다. (물론 이 코드가 실행되는 컴튜터가 실제로 2개 이상의 코어를 가지고 있어야 성능이 개선된다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>time\ndf<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>compute<span class=\"token punctuation\">(</span>scheduler<span class=\"token operator\">=</span><span class=\"token string\">'processes'</span><span class=\"token punctuation\">,</span> num_workers<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[########################################] | 100% Completed | 15.6s\nWall time: 15.6 s\n\n\n\n\n\nID                      5366005\nCase Number             5365999\nDate                    5366001\nBlock                   5366001\nIUCR                    5366001\nPrimary Type            5366001\nDescription             5366001\nLocation Description    5359222\nArrest                  5366001\nDomestic                5366001\nBeat                    5366001\nDistrict                5365954\nWard                    4751265\nCommunity Area          4753051\nFBI Code                5366001\nX Coordinate            5285054\nY Coordinate            5285054\nYear                    5366001\nUpdated On              5366001\nLatitude                5285053\nLongitude               5285053\nLocation                5285053\ndtype: int64</code></pre></div>\n<p>실행되는 컴퓨터의 사양에 따라 다르긴 하겠지만, 처리속도가 빨라진 것을 볼 수 있다. </p>\n<p>좀더 자세히 알아 보고 싶다면, 공식 문서를 살펴보자.</p>\n<blockquote>\n<p>DASK Document (<a href=\"https://docs.dask.org/\">https://docs.dask.org/</a>)</p>\n</blockquote>\n<p>출처 : 데이터사이언스 스쿨(<a href=\"http://datascienceschool.net\">http://datascienceschool.net</a>)</p>"},{"id":"96cd1786-0868-59a4-b69e-1d5f978a731a","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"DataFrame 시계열 자료 다루기","path":"/pandas-08","tags":["Python"],"excerpt":"시계열 자료는 인덱스가 날짜 혹은 시간인 데이터를 말한다. Pandas에서 시계열 자료를 생성하려면 인덱스를 `DatetimeIndex` 자료형으로 만들어야 한다.","created":"2020-10-31T00:00:00.000Z","createdPretty":"31 October, 2020","updated":"2020-10-31T00:00:00.000Z","updatedPretty":"31 October, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"datetimeindex-인덱스\" style=\"position:relative;\"><a href=\"#datetimeindex-%EC%9D%B8%EB%8D%B1%EC%8A%A4\" aria-label=\"datetimeindex 인덱스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DatetimeIndex 인덱스</h2>\n<p>시계열 자료는 인덱스가 날짜 혹은 시간인 데이터를 말한다. Pandas에서 시계열 자료를 생성하려면 인덱스를 <code class=\"language-text\">DatetimeIndex</code> 자료형으로 만들어야 한다. <code class=\"language-text\">DatetimeIndex</code>는 특정한 순간에 기록된 타임스탬프(timestamp) 형식의 시계열 자료를 다루기 위한 인덱스이다. 타임스탬프 인덱스의 라벨값이 반드시 일정한 간격일 필요는 없다.</p>\n<p><code class=\"language-text\">DatetimeIndex</code> 인덱스는 다음과 같은 보조 함수를 사용하여 생성한다.</p>\n<ul>\n<li>pd.to_datetime 함수</li>\n<li>pd.date_range 함수</li>\n</ul>\n<p><code class=\"language-text\">pd.to_datetime</code> 함수를 쓰면 날짜/시간을 나타내는 문자열을 자동으로 datetime 자료형으로 바꾼 후 <code class=\"language-text\">DatetimeIndex</code> 자료형 인덱스를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd \ndate_str <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"2018, 1, 1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018, 1, 4\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018, 1, 5\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018, 1, 6\"</span><span class=\"token punctuation\">]</span>\nidx <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>to_datetime<span class=\"token punctuation\">(</span>date_str<span class=\"token punctuation\">)</span>\nidx</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DatetimeIndex([&#39;2018-01-01&#39;, &#39;2018-01-04&#39;, &#39;2018-01-05&#39;, &#39;2018-01-06&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</code></pre></div>\n<p>이렇게 만들어진 인덱스를 사용하여 시리즈나 데이터프레임을 생성하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np \nnp<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\ns <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span>idx<span class=\"token punctuation\">)</span>\ns</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-01    1.764052\n2018-01-04    0.400157\n2018-01-05    0.978738\n2018-01-06    2.240893\ndtype: float64</code></pre></div>\n<p><code class=\"language-text\">pd.to_datetime</code> 함수를 쓰면 모든 날짜/시간을 일일히 입력할 필요없이 시작일과 종료일 또는 시작일과 기간을 입력하면 범위 내의 인덱스를 생성해 준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-4-1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018-4-30\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DatetimeIndex([&#39;2018-04-01&#39;, &#39;2018-04-02&#39;, &#39;2018-04-03&#39;, &#39;2018-04-04&#39;,\n               &#39;2018-04-05&#39;, &#39;2018-04-06&#39;, &#39;2018-04-07&#39;, &#39;2018-04-08&#39;,\n               &#39;2018-04-09&#39;, &#39;2018-04-10&#39;, &#39;2018-04-11&#39;, &#39;2018-04-12&#39;,\n               &#39;2018-04-13&#39;, &#39;2018-04-14&#39;, &#39;2018-04-15&#39;, &#39;2018-04-16&#39;,\n               &#39;2018-04-17&#39;, &#39;2018-04-18&#39;, &#39;2018-04-19&#39;, &#39;2018-04-20&#39;,\n               &#39;2018-04-21&#39;, &#39;2018-04-22&#39;, &#39;2018-04-23&#39;, &#39;2018-04-24&#39;,\n               &#39;2018-04-25&#39;, &#39;2018-04-26&#39;, &#39;2018-04-27&#39;, &#39;2018-04-28&#39;,\n               &#39;2018-04-29&#39;, &#39;2018-04-30&#39;],\n              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span>start<span class=\"token operator\">=</span><span class=\"token string\">\"2018-4-1\"</span><span class=\"token punctuation\">,</span> periods<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DatetimeIndex([&#39;2018-04-01&#39;, &#39;2018-04-02&#39;, &#39;2018-04-03&#39;, &#39;2018-04-04&#39;,\n               &#39;2018-04-05&#39;, &#39;2018-04-06&#39;, &#39;2018-04-07&#39;, &#39;2018-04-08&#39;,\n               &#39;2018-04-09&#39;, &#39;2018-04-10&#39;, &#39;2018-04-11&#39;, &#39;2018-04-12&#39;,\n               &#39;2018-04-13&#39;, &#39;2018-04-14&#39;, &#39;2018-04-15&#39;, &#39;2018-04-16&#39;,\n               &#39;2018-04-17&#39;, &#39;2018-04-18&#39;, &#39;2018-04-19&#39;, &#39;2018-04-20&#39;,\n               &#39;2018-04-21&#39;, &#39;2018-04-22&#39;, &#39;2018-04-23&#39;, &#39;2018-04-24&#39;,\n               &#39;2018-04-25&#39;, &#39;2018-04-26&#39;, &#39;2018-04-27&#39;, &#39;2018-04-28&#39;,\n               &#39;2018-04-29&#39;, &#39;2018-04-30&#39;],\n              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)</code></pre></div>\n<p><code class=\"language-text\">freq</code> 인수로 특정한 날짜만 생성되도록 할 수도 있다. 많이 사용되는 <code class=\"language-text\">freq</code> 인수값은 다음과 같다.</p>\n<ul>\n<li>s: 초</li>\n<li>T: 분</li>\n<li>H: 시간</li>\n<li>D: 일(day)</li>\n<li>B: 주말이 아닌 평일</li>\n<li>W: 주(일요일)</li>\n<li>W-MON: 주(월요일)</li>\n<li>M: 각 달(month)의 마지막 날</li>\n<li>MS: 각 달의 첫날</li>\n<li>BM: 주말이 아닌 평일 중에서 각 달의 마지막 날</li>\n<li>BMS: 주말이 아닌 평일 중에서 각 달의 첫날</li>\n<li>WOM-2THU: 각 달의 두번째 목요일</li>\n<li>Q-JAN: 각 분기의 첫달의 마지막 날</li>\n<li>Q-DEC: 각 분기의 마지막 달의 마지막 날</li>\n</ul>\n<p>보다 자세한 내용은 다음 웹사이트를 참조하자.</p>\n<ul>\n<li><a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#dateoffset-objects\">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#dateoffset-objects</a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-4-1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018-4-30\"</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 평일만..</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DatetimeIndex([&#39;2018-04-02&#39;, &#39;2018-04-03&#39;, &#39;2018-04-04&#39;, &#39;2018-04-05&#39;,\n               &#39;2018-04-06&#39;, &#39;2018-04-09&#39;, &#39;2018-04-10&#39;, &#39;2018-04-11&#39;,\n               &#39;2018-04-12&#39;, &#39;2018-04-13&#39;, &#39;2018-04-16&#39;, &#39;2018-04-17&#39;,\n               &#39;2018-04-18&#39;, &#39;2018-04-19&#39;, &#39;2018-04-20&#39;, &#39;2018-04-23&#39;,\n               &#39;2018-04-24&#39;, &#39;2018-04-25&#39;, &#39;2018-04-26&#39;, &#39;2018-04-27&#39;,\n               &#39;2018-04-30&#39;],\n              dtype=&#39;datetime64[ns]&#39;, freq=&#39;B&#39;)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018-12-31\"</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"W\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 일요일만</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DatetimeIndex([&#39;2018-01-07&#39;, &#39;2018-01-14&#39;, &#39;2018-01-21&#39;, &#39;2018-01-28&#39;,\n               &#39;2018-02-04&#39;, &#39;2018-02-11&#39;, &#39;2018-02-18&#39;, &#39;2018-02-25&#39;,\n               &#39;2018-03-04&#39;, &#39;2018-03-11&#39;, &#39;2018-03-18&#39;, &#39;2018-03-25&#39;,\n               &#39;2018-04-01&#39;, &#39;2018-04-08&#39;, &#39;2018-04-15&#39;, &#39;2018-04-22&#39;,\n               &#39;2018-04-29&#39;, &#39;2018-05-06&#39;, &#39;2018-05-13&#39;, &#39;2018-05-20&#39;,\n               &#39;2018-05-27&#39;, &#39;2018-06-03&#39;, &#39;2018-06-10&#39;, &#39;2018-06-17&#39;,\n               &#39;2018-06-24&#39;, &#39;2018-07-01&#39;, &#39;2018-07-08&#39;, &#39;2018-07-15&#39;,\n               &#39;2018-07-22&#39;, &#39;2018-07-29&#39;, &#39;2018-08-05&#39;, &#39;2018-08-12&#39;,\n               &#39;2018-08-19&#39;, &#39;2018-08-26&#39;, &#39;2018-09-02&#39;, &#39;2018-09-09&#39;,\n               &#39;2018-09-16&#39;, &#39;2018-09-23&#39;, &#39;2018-09-30&#39;, &#39;2018-10-07&#39;,\n               &#39;2018-10-14&#39;, &#39;2018-10-21&#39;, &#39;2018-10-28&#39;, &#39;2018-11-04&#39;,\n               &#39;2018-11-11&#39;, &#39;2018-11-18&#39;, &#39;2018-11-25&#39;, &#39;2018-12-02&#39;,\n               &#39;2018-12-09&#39;, &#39;2018-12-16&#39;, &#39;2018-12-23&#39;, &#39;2018-12-30&#39;],\n              dtype=&#39;datetime64[ns]&#39;, freq=&#39;W-SUN&#39;)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018-12-31\"</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"W-MON\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 월요일</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DatetimeIndex([&#39;2018-01-01&#39;, &#39;2018-01-08&#39;, &#39;2018-01-15&#39;, &#39;2018-01-22&#39;,\n               &#39;2018-01-29&#39;, &#39;2018-02-05&#39;, &#39;2018-02-12&#39;, &#39;2018-02-19&#39;,\n               &#39;2018-02-26&#39;, &#39;2018-03-05&#39;, &#39;2018-03-12&#39;, &#39;2018-03-19&#39;,\n               &#39;2018-03-26&#39;, &#39;2018-04-02&#39;, &#39;2018-04-09&#39;, &#39;2018-04-16&#39;,\n               &#39;2018-04-23&#39;, &#39;2018-04-30&#39;, &#39;2018-05-07&#39;, &#39;2018-05-14&#39;,\n               &#39;2018-05-21&#39;, &#39;2018-05-28&#39;, &#39;2018-06-04&#39;, &#39;2018-06-11&#39;,\n               &#39;2018-06-18&#39;, &#39;2018-06-25&#39;, &#39;2018-07-02&#39;, &#39;2018-07-09&#39;,\n               &#39;2018-07-16&#39;, &#39;2018-07-23&#39;, &#39;2018-07-30&#39;, &#39;2018-08-06&#39;,\n               &#39;2018-08-13&#39;, &#39;2018-08-20&#39;, &#39;2018-08-27&#39;, &#39;2018-09-03&#39;,\n               &#39;2018-09-10&#39;, &#39;2018-09-17&#39;, &#39;2018-09-24&#39;, &#39;2018-10-01&#39;,\n               &#39;2018-10-08&#39;, &#39;2018-10-15&#39;, &#39;2018-10-22&#39;, &#39;2018-10-29&#39;,\n               &#39;2018-11-05&#39;, &#39;2018-11-12&#39;, &#39;2018-11-19&#39;, &#39;2018-11-26&#39;,\n               &#39;2018-12-03&#39;, &#39;2018-12-10&#39;, &#39;2018-12-17&#39;, &#39;2018-12-24&#39;,\n               &#39;2018-12-31&#39;],\n              dtype=&#39;datetime64[ns]&#39;, freq=&#39;W-MON&#39;)</code></pre></div>\n<h2 id=\"shift-연산\" style=\"position:relative;\"><a href=\"#shift-%EC%97%B0%EC%82%B0\" aria-label=\"shift 연산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>shift 연산</h2>\n<p>시계열 데이터의 인덱스는 시간이나 날짜를 나타내기 때문에 날짜 이동 등의 다양한 연산이 가능하다. 예를 들어 <code class=\"language-text\">shift</code>연산을 사용하면 인덱스는 그대로 두고 데이터만 이동할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\nts <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span>pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">,</span> periods<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"M\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nts</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-31    1.764052\n2018-02-28    0.400157\n2018-03-31    0.978738\n2018-04-30    2.240893\nFreq: M, dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>shift<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-31         NaN\n2018-02-28    1.764052\n2018-03-31    0.400157\n2018-04-30    0.978738\nFreq: M, dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>shift<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-31    0.400157\n2018-02-28    0.978738\n2018-03-31    2.240893\n2018-04-30         NaN\nFreq: M, dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>shift<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"M\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-02-28    1.764052\n2018-03-31    0.400157\n2018-04-30    0.978738\n2018-05-31    2.240893\nFreq: M, dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>shift<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"W\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-02-04    1.764052\n2018-03-04    0.400157\n2018-04-01    0.978738\n2018-05-06    2.240893\ndtype: float64</code></pre></div>\n<h2 id=\"resample-연산\" style=\"position:relative;\"><a href=\"#resample-%EC%97%B0%EC%82%B0\" aria-label=\"resample 연산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>resample 연산</h2>\n<p><strong>resample</strong> 연산을 쓰면 시간 간격을 재조정하는 리샘플링(resampling)이 가능하다. 이 때 시간 구간이 작아지면 데이터 양이 증가한다고 해서 업-샘플링(up-sampling)이라 하고 시간 구간이 커지면 데이터 양이 감소한다고 해서 다운-샘플링(down-sampling)이라 부른다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span>pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">,</span> periods<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"D\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nts<span class=\"token punctuation\">.</span>tail<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-03-22    0.625231\n2018-03-23   -1.602058\n2018-03-24   -1.104383\n2018-03-25    0.052165\n2018-03-26   -0.739563\n2018-03-27    1.543015\n2018-03-28   -1.292857\n2018-03-29    0.267051\n2018-03-30   -0.039283\n2018-03-31   -1.168093\n2018-04-01    0.523277\n2018-04-02   -0.171546\n2018-04-03    0.771791\n2018-04-04    0.823504\n2018-04-05    2.163236\n2018-04-06    1.336528\n2018-04-07   -0.369182\n2018-04-08   -0.239379\n2018-04-09    1.099660\n2018-04-10    0.655264\nFreq: D, dtype: float64</code></pre></div>\n<p>다운-샘플링의 경우에는 원래의 데이터가 그룹으로 묶이기 때문에 그룹바이(groupby)때와 같이 그룹 연산을 해서 대표값을 구해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>resample<span class=\"token punctuation\">(</span><span class=\"token string\">'W'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-07    0.697206\n2018-01-14    0.468797\n2018-01-21    0.249052\n2018-01-28    0.301938\n2018-02-04    0.023198\n2018-02-11    0.283486\n2018-02-18   -0.096136\n2018-02-25   -0.446708\n2018-03-04    0.155312\n2018-03-11    0.200799\n2018-03-18   -0.376808\n2018-03-25   -0.895860\n2018-04-01   -0.129493\n2018-04-08    0.616422\n2018-04-15    0.877462\nFreq: W-SUN, dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>resample<span class=\"token punctuation\">(</span><span class=\"token string\">'M'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-31   -1.173123\n2018-02-28    0.676433\n2018-03-31    0.087551\n2018-04-30    0.523277\nFreq: M, dtype: float64</code></pre></div>\n<p>날짜가 아닌 시/분 단위에서는 구간위 왼쪽 한계값(가장 빠른 값)은 포함하고 오른쪽 한계값(가장 늦은 값)은 포함하지 않는다. 즉, 가장 늦은 값은 다음 구간에 포함된다. 예를 들어 10분 간경으로 구간을 만들면 10의 배수가 되는 시각은 구간의 시작점이 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span>pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">,</span> periods<span class=\"token operator\">=</span><span class=\"token number\">60</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"T\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nts<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-01 00:00:00    2.259309\n2018-01-01 00:01:00   -0.042257\n2018-01-01 00:02:00   -0.955945\n2018-01-01 00:03:00   -0.345982\n2018-01-01 00:04:00   -0.463596\n2018-01-01 00:05:00    0.481481\n2018-01-01 00:06:00   -1.540797\n2018-01-01 00:07:00    0.063262\n2018-01-01 00:08:00    0.156507\n2018-01-01 00:09:00    0.232181\n2018-01-01 00:10:00   -0.597316\n2018-01-01 00:11:00   -0.237922\n2018-01-01 00:12:00   -1.424061\n2018-01-01 00:13:00   -0.493320\n2018-01-01 00:14:00   -0.542861\n2018-01-01 00:15:00    0.416050\n2018-01-01 00:16:00   -1.156182\n2018-01-01 00:17:00    0.781198\n2018-01-01 00:18:00    1.494485\n2018-01-01 00:19:00   -2.069985\nFreq: T, dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>resample<span class=\"token punctuation\">(</span><span class=\"token string\">'10T'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-01 00:00:00   -0.155837\n2018-01-01 00:10:00   -3.829915\n2018-01-01 00:20:00   -0.115280\n2018-01-01 00:30:00   -3.234560\n2018-01-01 00:40:00   -4.452304\n2018-01-01 00:50:00   -0.906751\nFreq: 10T, dtype: float64</code></pre></div>\n<p>왼쪽이 아니라 오른쪽 한계값을 구간에 포함하려면 <code class=\"language-text\">closed=&quot;right&quot;</code> 인수를 사용한다. 이 때는 10의 배수가 되는 시각이 앞 구간에 포함된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>resample<span class=\"token punctuation\">(</span><span class=\"token string\">'10T'</span><span class=\"token punctuation\">,</span> closed<span class=\"token operator\">=</span><span class=\"token string\">\"right\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2017-12-31 23:50:00    2.259309\n2018-01-01 00:00:00   -3.012462\n2018-01-01 00:10:00   -2.806340\n2018-01-01 00:20:00   -1.354903\n2018-01-01 00:30:00   -4.004135\n2018-01-01 00:40:00   -3.180252\n2018-01-01 00:50:00   -0.595865\nFreq: 10T, dtype: float64</code></pre></div>\n<p><code class=\"language-text\">ohlc</code> 매서드는 구간의 시고저종(open, high, low, close)값을 구한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>resample<span class=\"token punctuation\">(</span><span class=\"token string\">'5T'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>ohlc<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>open</th>\n      <th>high</th>\n      <th>low</th>\n      <th>close</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2018-01-01 00:00:00</th>\n      <td>2.259309</td>\n      <td>2.259309</td>\n      <td>-0.955945</td>\n      <td>-0.463596</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:05:00</th>\n      <td>0.481481</td>\n      <td>0.481481</td>\n      <td>-1.540797</td>\n      <td>0.232181</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:10:00</th>\n      <td>-0.597316</td>\n      <td>-0.237922</td>\n      <td>-1.424061</td>\n      <td>-0.542861</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:15:00</th>\n      <td>0.416050</td>\n      <td>1.494485</td>\n      <td>-2.069985</td>\n      <td>-2.069985</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:20:00</th>\n      <td>0.426259</td>\n      <td>0.676908</td>\n      <td>-0.637437</td>\n      <td>-0.132881</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:25:00</th>\n      <td>-0.297791</td>\n      <td>1.152332</td>\n      <td>-1.676004</td>\n      <td>1.079619</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:30:00</th>\n      <td>-0.813364</td>\n      <td>0.521065</td>\n      <td>-1.466424</td>\n      <td>0.141953</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:35:00</th>\n      <td>-0.319328</td>\n      <td>0.694749</td>\n      <td>-1.383364</td>\n      <td>-1.383364</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:40:00</th>\n      <td>-1.582938</td>\n      <td>0.610379</td>\n      <td>-1.582938</td>\n      <td>-0.596314</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:45:00</th>\n      <td>-0.052567</td>\n      <td>0.523891</td>\n      <td>-1.936280</td>\n      <td>0.088422</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:50:00</th>\n      <td>-0.310886</td>\n      <td>1.955912</td>\n      <td>-2.772593</td>\n      <td>1.955912</td>\n    </tr>\n    <tr>\n      <th>2018-01-01 00:55:00</th>\n      <td>0.390093</td>\n      <td>0.493742</td>\n      <td>-0.652409</td>\n      <td>-0.116104</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>업-샘플링의 경우에는 실제로 존재하지 않는 데이터를 만들어야 한다. 이 때는 앞에서 나온 데이터를 뒤에서 그대로 쓰는 forward filling 방식과 뒤에서 나올 데이터를 앞에서 미리 쓰는 backward filling 방식을 사용할 수 있다. 각각 <code class=\"language-text\">ffill</code>, <code class=\"language-text\">bfill</code> 매서드를 이용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ts<span class=\"token punctuation\">.</span>resample<span class=\"token punctuation\">(</span><span class=\"token string\">'30s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>ffill<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-01 00:00:00    2.259309\n2018-01-01 00:00:30    2.259309\n2018-01-01 00:01:00   -0.042257\n2018-01-01 00:01:30   -0.042257\n2018-01-01 00:02:00   -0.955945\n2018-01-01 00:02:30   -0.955945\n2018-01-01 00:03:00   -0.345982\n2018-01-01 00:03:30   -0.345982\n2018-01-01 00:04:00   -0.463596\n2018-01-01 00:04:30   -0.463596\n2018-01-01 00:05:00    0.481481\n2018-01-01 00:05:30    0.481481\n2018-01-01 00:06:00   -1.540797\n2018-01-01 00:06:30   -1.540797\n2018-01-01 00:07:00    0.063262\n2018-01-01 00:07:30    0.063262\n2018-01-01 00:08:00    0.156507\n2018-01-01 00:08:30    0.156507\n2018-01-01 00:09:00    0.232181\n2018-01-01 00:09:30    0.232181\nFreq: 30S, dtype: float64</code></pre></div>\n<h2 id=\"dt-접근자\" style=\"position:relative;\"><a href=\"#dt-%EC%A0%91%EA%B7%BC%EC%9E%90\" aria-label=\"dt 접근자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dt 접근자</h2>\n<p>datetime 자료형 시리즈에는 dt접근자가 있어 datetime 자료형이 가진 몇가지 유용한 속성과 매서드를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span>pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2020-12-25\"</span><span class=\"token punctuation\">,</span> periods<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"D\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ns</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    2020-12-25\n1    2020-12-26\n2    2020-12-27\n3    2020-12-28\n4    2020-12-29\n        ...    \n95   2021-03-30\n96   2021-03-31\n97   2021-04-01\n98   2021-04-02\n99   2021-04-03\nLength: 100, dtype: datetime64[ns]</code></pre></div>\n<p>예를 들어 <code class=\"language-text\">year</code>, <code class=\"language-text\">month</code>, <code class=\"language-text\">day</code>, <code class=\"language-text\">weekday</code> 등의 속성을 이용하면 년, 월, 일, 요일 정보를 빼낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>dt<span class=\"token punctuation\">.</span>year</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0     2020\n1     2020\n2     2020\n3     2020\n4     2020\n      ... \n95    2021\n96    2021\n97    2021\n98    2021\n99    2021\nLength: 100, dtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>dt<span class=\"token punctuation\">.</span>weekday</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0     4\n1     5\n2     6\n3     0\n4     1\n     ..\n95    1\n96    2\n97    3\n98    4\n99    5\nLength: 100, dtype: int64</code></pre></div>\n<p><code class=\"language-text\">strftime</code> 매서드를 이용하여 문자열을 만드는 것도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>dt<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y년 %m월 %d일\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0     2020년 12월 25일\n1     2020년 12월 26일\n2     2020년 12월 27일\n3     2020년 12월 28일\n4     2020년 12월 29일\n          ...      \n95    2021년 03월 30일\n96    2021년 03월 31일\n97    2021년 04월 01일\n98    2021년 04월 02일\n99    2021년 04월 03일\nLength: 100, dtype: object</code></pre></div>\n<p>Quiz, 다음 명령으로 만들어진 데이터프레임에 대해 월별 value의 합계를 구하라. (힌트 : <code class=\"language-text\">groupby</code> 매서드와 <code class=\"language-text\">dt</code> 접근자를 사용))</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\ndf <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"date\"</span><span class=\"token punctuation\">:</span> pd<span class=\"token punctuation\">.</span>date_range<span class=\"token punctuation\">(</span><span class=\"token string\">\"2020-12-25\"</span><span class=\"token punctuation\">,</span> periods<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token string\">\"D\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token string\">\"value\"</span><span class=\"token punctuation\">:</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>출처 : 데이터사이언스 스쿨(<a href=\"http://datascienceschool.net\">http://datascienceschool.net</a>)</p>"},{"id":"985c624f-31fe-58ec-a381-d128b1f199d2","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"DataFrame 피봇과 그룹","path":"/pandas-07","tags":["Python"],"excerpt":"피봇테이블(pivot table)이란 데이터 열 중에서 두개의 열을 각각 행 인덱스, 열 인덱스로 사용하여 데이터를 조회하여 펼쳐놓은 것을 말한다.","created":"2020-10-18T00:00:00.000Z","createdPretty":"18 October, 2020","updated":"2020-10-18T00:00:00.000Z","updatedPretty":"18 October, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"피봇테이블\" style=\"position:relative;\"><a href=\"#%ED%94%BC%EB%B4%87%ED%85%8C%EC%9D%B4%EB%B8%94\" aria-label=\"피봇테이블 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>피봇테이블</h2>\n<p>피봇테이블(pivot table)이란 데이터 열 중에서 두개의 열을 각각 행 인덱스, 열 인덱스로 사용하여 데이터를 조회하여 펼쳐놓은 것을 말한다.</p>\n<p>Pandas는 피봇테이블을 만들기 위한 <code class=\"language-text\">pivot</code> 매서드를 제공한다. 첫번째 인수로는 행 인덱스로 사용할 열 이름, 두뻔째 인수로는 열 인덱스로 사용할 열 이름, 그리고 마지막으로 데이터로 사용할 열 이름을 넣는다.</p>\n<p>Pandas는 지정된 두 열을 각각 행 인덱스와 열 인덱스로 바꾼 후 행 인덱스 라벨 값이 첫번째 키의 값과 같고 열 인덱스의 라벨 값이 두번째 키의 값과 같은 데이터를 찾아서 해당 칸에 넣는다. 만약 주어진 데이터가 존재하지 않으면 해당 칸에 <code class=\"language-text\">NaN</code> 값을 넣는다.</p>\n<p>다음 데이터는 각 도시의 연도별 인구를 나타낸 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd \ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"도시\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인천\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인천\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2005\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2005\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9904312</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9631482</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9762546</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3448737</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3393191</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3512547</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2890451</span><span class=\"token punctuation\">,</span> <span class=\"token number\">263203</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"지역\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"수도권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"수도권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"수도권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"경상권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"경상권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"경상권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"수도권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"수도권\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\ncolumns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"도시\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"지역\"</span><span class=\"token punctuation\">]</span>\ndf1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span>columns<span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>도시</th>\n      <th>연도</th>\n      <th>인구</th>\n      <th>지역</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>서울</td>\n      <td>2015</td>\n      <td>9904312</td>\n      <td>수도권</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>서울</td>\n      <td>2010</td>\n      <td>9631482</td>\n      <td>수도권</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>서울</td>\n      <td>2005</td>\n      <td>9762546</td>\n      <td>수도권</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>부산</td>\n      <td>2015</td>\n      <td>3448737</td>\n      <td>경상권</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>부산</td>\n      <td>2010</td>\n      <td>3393191</td>\n      <td>경상권</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>부산</td>\n      <td>2005</td>\n      <td>3512547</td>\n      <td>경상권</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>인천</td>\n      <td>2015</td>\n      <td>2890451</td>\n      <td>수도권</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>인천</td>\n      <td>2010</td>\n      <td>263203</td>\n      <td>수도권</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>이 데이터를 도시 이름이 열 인덱스가 되고 연도가 행 인덱스가 되어 행과 열 인덱스만 보면 어떤 도시의 어떤 시점의 인구를 쉽게 알수 있도록 피봇테이블로 만들어 보자. <code class=\"language-text\">pivot</code> 명령으로 사용하고 행 인덱스 인수로는 <code class=\"language-text\">도시</code>, 열 인덱스 인수로는 <code class=\"language-text\">연도</code>, 데이터 이름으로 <code class=\"language-text\">인구</code>를 입력하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">.</span>pivot<span class=\"token punctuation\">(</span><span class=\"token string\">\"도시\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>연도</th>\n      <th>2005</th>\n      <th>2010</th>\n      <th>2015</th>\n    </tr>\n    <tr>\n      <th>도시</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>부산</th>\n      <td>3512547.0</td>\n      <td>3393191.0</td>\n      <td>3448737.0</td>\n    </tr>\n    <tr>\n      <th>서울</th>\n      <td>9762546.0</td>\n      <td>9631482.0</td>\n      <td>9904312.0</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>NaN</td>\n      <td>263203.0</td>\n      <td>2890451.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>이 피봇테이블의 값 3512547은 \"도시\"가 부산이고 \"연도\"가 2005년인 데이터를 \"인구\"열에서 찾은 값이다. 2005년 인천의 인구는 데이터에 없기 때문에 <code class=\"language-text\">NaN</code>으로 표시된다.</p>\n<p>피봇테이블은 다음과 같이 <code class=\"language-text\">set_index</code> 명령과 <code class=\"language-text\">unstack</code> 명령을 사용하서 만들 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"도시\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>unstack<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"3\" halign=\"left\">인구</th>\n    </tr>\n    <tr>\n      <th>연도</th>\n      <th>2005</th>\n      <th>2010</th>\n      <th>2015</th>\n    </tr>\n    <tr>\n      <th>도시</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>부산</th>\n      <td>3512547.0</td>\n      <td>3393191.0</td>\n      <td>3448737.0</td>\n    </tr>\n    <tr>\n      <th>서울</th>\n      <td>9762546.0</td>\n      <td>9631482.0</td>\n      <td>9904312.0</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>NaN</td>\n      <td>263203.0</td>\n      <td>2890451.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>행 인덱스나 열 인덱스를 리스트로 주는 경우에는 다중 인덱스 피봇 테이블을 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">.</span>pivot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"지역\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"도시\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>연도</th>\n      <th>2005</th>\n      <th>2010</th>\n      <th>2015</th>\n    </tr>\n    <tr>\n      <th>지역</th>\n      <th>도시</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>경상권</th>\n      <th>부산</th>\n      <td>3512547.0</td>\n      <td>3393191.0</td>\n      <td>3448737.0</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">수도권</th>\n      <th>서울</th>\n      <td>9762546.0</td>\n      <td>9631482.0</td>\n      <td>9904312.0</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>NaN</td>\n      <td>263203.0</td>\n      <td>2890451.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>행 인덱스와 열 인덱스는 데이터를 찾는 키(key)의 역할을 한다. 따라서 키 값으로 데이터가 단 하나만 찾아져야 한다. 만약 행 인덱스와 열 인덱스 조건을 만족하는 데이터가 2개 이상인 경우에는 에러가 발생한다. 예를 들어 위 데이터프레임에서 (\"지역\", \"연도\")를 키로 하면 (\"수도권\", \"2015\")에 해당하는 값이 두개 이상이므로 다음과 같이 에러가 발생한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    df1<span class=\"token punctuation\">.</span>pivot<span class=\"token punctuation\">(</span><span class=\"token string\">\"지역\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> ValueError <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ValueError:\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ValueError: Index contains duplicate entries, cannot reshape</code></pre></div>\n<h2 id=\"그룹분석\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%A3%B9%EB%B6%84%EC%84%9D\" aria-label=\"그룹분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그룹분석</h2>\n<p>만약 키가 지정하는 조건에 맞는 데이터가 하나 이상이라서 데이터 그룹을 이루는 경우에는 그룹의 특성을 보여주는 그룹분석(group analysis)을 해야 한다.</p>\n<p>그룹분석은 피봇테이블과 달리 키에 의해서 결정되는 데이터가 여러개가 있을 경우 미리 지정한 연선을 통해 그 그룹 데이터의 대표값을 계산한다. Pandas에서는 <code class=\"language-text\">groupby</code> 매서드를 사용하여 다음처럼 그룹분석을 한다.</p>\n<blockquote>\n<ol>\n<li>분석하고자 하는 시리즈나 데이터프레임에 <code class=\"language-text\">groupby</code> 매서드를 호출하여 그룹화를 한다.</li>\n<li>그룹 객체에 대해 그룹연산을 수행한다.</li>\n</ol>\n</blockquote>\n<h2 id=\"그룹연산-매서드\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%A3%B9%EC%97%B0%EC%82%B0-%EB%A7%A4%EC%84%9C%EB%93%9C\" aria-label=\"그룹연산 매서드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그룹연산 매서드</h2>\n<p><code class=\"language-text\">groupby</code> 결과, 즉 <code class=\"language-text\">GroupBy</code> 클래스 객체의 뒤에 붙일 수 있는 그룹연산 매서드는 다양하다. 다음은 자주 사용되는 그룹연산 매서드들이다.</p>\n<ul>\n<li><code class=\"language-text\">size</code>, <code class=\"language-text\">count</code> : 그룹 데이터의 개수</li>\n<li><code class=\"language-text\">mean</code>, <code class=\"language-text\">median</code>, <code class=\"language-text\">min</code>, <code class=\"language-text\">max</code> : 그룹 데이터의 평균, 중앙값, 최소, 최대</li>\n<li><code class=\"language-text\">sum</code>, <code class=\"language-text\">prod</code>, <code class=\"language-text\">std</code>, <code class=\"language-text\">var</code>, <code class=\"language-text\">quantile</code> : 그룹 데이터의 합계, 곱, 표준편차, 분산, 사분위수</li>\n<li><code class=\"language-text\">first</code>, <code class=\"language-text\">last</code> : 그룹 데이터중 가장 첫번째 데이터와 가장 나중 데이터와</li>\n</ul>\n<p>이 외에도 많이 사용되는 것으로는 다음과 같은 그룹 연산이 있다.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">agg</code>, <code class=\"language-text\">aggregate</code></p>\n<ul>\n<li>만약 원하는 구릅연산이 없는 경우 함수를 만들고 이 함수를 <code class=\"language-text\">agg</code>에 전달한다.</li>\n<li>또는 여러가지 그룹연산을 동시에 하고 싶은 경우 함수 이름 문자열의 리스트를 전달한다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">describe</code></p>\n<ul>\n<li>하나의 그룹 대표값이 아니라 여러개의 값을 데이터프레임으로 구한다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">apply</code></p>\n<ul>\n<li><code class=\"language-text\">describe</code> 처럼 하나의 대표값이 아닌 데이터프레임을 출력하지만 원하는 그룹연산이 없는 경우에 사용한다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">transform</code></p>\n<ul>\n<li>그룹에 대한 대표값을 만드는 것이 아니라 그룹별 계산을 통해 데이터 자체를 변형한다.</li>\n</ul>\n</li>\n</ul>\n<p>예를 들어 다음과 같은 데이터가 있을 때 key1의 값(A 또는 B)에 따른 data1의 평균은 어떻게 구할까?</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np \nnp<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\ndf2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'key1'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'key2'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'one'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'data1'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'data2'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>key1</th>\n      <th>key2</th>\n      <th>data1</th>\n      <th>data2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>one</td>\n      <td>1</td>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>A</td>\n      <td>two</td>\n      <td>2</td>\n      <td>20</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>B</td>\n      <td>one</td>\n      <td>3</td>\n      <td>30</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>B</td>\n      <td>two</td>\n      <td>4</td>\n      <td>40</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>A</td>\n      <td>one</td>\n      <td>5</td>\n      <td>50</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">groupby</code> 명령을 사용하여 그룹 A와 그룹 B로 구분한 그룹 데이터를 만든다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">groups <span class=\"token operator\">=</span> df2<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span>df2<span class=\"token punctuation\">.</span>key1<span class=\"token punctuation\">)</span>\ngroups</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x000002B5DE8DDAC0&gt;</code></pre></div>\n<p>이 <code class=\"language-text\">GroupBy</code> 클래스 객체에는 각 그룹 데이터의 인덱스를 저장한 groups 속성이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">groups<span class=\"token punctuation\">.</span>groups</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{&#39;A&#39;: [0, 1, 4], &#39;B&#39;: [2, 3]}</code></pre></div>\n<p>A그룹과 B그룹 데이터의 합계를 구하기 위해 <code class=\"language-text\">sum</code>이라는 그룹연산을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">groups<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>data1</th>\n      <th>data2</th>\n    </tr>\n    <tr>\n      <th>key1</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>A</th>\n      <td>8</td>\n      <td>80</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>7</td>\n      <td>70</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">GroupBy</code>클래스 객체를 명시적으로 얻을 필요가 없다면 <code class=\"language-text\">groupby</code> 매서드와 그룹연산 메서드를 연속으로 호출한다. 다음 예제는 열 <code class=\"language-text\">data1</code>에 대해서만 그룹연산을 하는 코드 이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>data1<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span>df2<span class=\"token punctuation\">.</span>key1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">key1\nA    8\nB    7\nName: data1, dtype: int64</code></pre></div>\n<p>데이터를 그룹으로 나눈 <code class=\"language-text\">GroupBy</code> 클래스 객체 또는 그룹분석한 결과에서 <code class=\"language-text\">data1</code>만 뽑아도 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span>df2<span class=\"token punctuation\">.</span>key1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"data1\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 'GroupBy' 클래스 객체에서 data1만 선택하여 분석</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">key1\nA    8\nB    7\nName: data1, dtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span>df2<span class=\"token punctuation\">.</span>key1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"data1\"</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 전체 데이터를 분석한 후 data1만 선택한 경우</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">key1\nA    8\nB    7\nName: data1, dtype: int64</code></pre></div>\n<p>이번에는 복합 키 (key1, key2) 값에 따른 data1의 합계를 구하자. 분석하고자 하는 키가 복수이면 리스트를 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>data1<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df2<span class=\"token punctuation\">.</span>key1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">.</span>key2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">key1  key2\nA     one     6\n      two     2\nB     one     3\n      two     4\nName: data1, dtype: int64</code></pre></div>\n<p>이 결과를 <code class=\"language-text\">unstack</code> 명령으로 피봇 테이블 행태로 만들수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>data1<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df2<span class=\"token punctuation\">[</span><span class=\"token string\">'key1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">[</span><span class=\"token string\">'key2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>unstack<span class=\"token punctuation\">(</span><span class=\"token string\">'key2'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>key2</th>\n      <th>one</th>\n      <th>two</th>\n    </tr>\n    <tr>\n      <th>key1</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>A</th>\n      <td>6</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>3</td>\n      <td>4</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>그룹분석 기능을 사용하면 위의 인구 데이터로부터 지역별 합계를 구할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>도시</th>\n      <th>연도</th>\n      <th>인구</th>\n      <th>지역</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>서울</td>\n      <td>2015</td>\n      <td>9904312</td>\n      <td>수도권</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>서울</td>\n      <td>2010</td>\n      <td>9631482</td>\n      <td>수도권</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>서울</td>\n      <td>2005</td>\n      <td>9762546</td>\n      <td>수도권</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>부산</td>\n      <td>2015</td>\n      <td>3448737</td>\n      <td>경상권</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>부산</td>\n      <td>2010</td>\n      <td>3393191</td>\n      <td>경상권</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>부산</td>\n      <td>2005</td>\n      <td>3512547</td>\n      <td>경상권</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>인천</td>\n      <td>2015</td>\n      <td>2890451</td>\n      <td>수도권</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>인천</td>\n      <td>2010</td>\n      <td>263203</td>\n      <td>수도권</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">[</span><span class=\"token string\">'인구'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df1<span class=\"token punctuation\">[</span><span class=\"token string\">'지역'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> df1<span class=\"token punctuation\">[</span><span class=\"token string\">'연도'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>unstack<span class=\"token punctuation\">(</span><span class=\"token string\">'연도'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>연도</th>\n      <th>2005</th>\n      <th>2010</th>\n      <th>2015</th>\n    </tr>\n    <tr>\n      <th>지역</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>경상권</th>\n      <td>3512547</td>\n      <td>3393191</td>\n      <td>3448737</td>\n    </tr>\n    <tr>\n      <th>수도권</th>\n      <td>9762546</td>\n      <td>9894685</td>\n      <td>12794763</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>다음 데이터는 150 송이의 붓꽃(iris)에 대해 붓꽃 종(species)별로 꽃받침길이(sepal<em>langth), 꽃받침폭(sepal</em>width), 꽃잎길이(tetal<em>length), 꽃잎폭(petal</em>width)을 측정한 데이터이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> seaborn <span class=\"token keyword\">as</span> sns\niris <span class=\"token operator\">=</span> sns<span class=\"token punctuation\">.</span>load_dataset<span class=\"token punctuation\">(</span><span class=\"token string\">\"iris\"</span><span class=\"token punctuation\">)</span>\niris</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>sepal_length</th>\n      <th>sepal_width</th>\n      <th>petal_length</th>\n      <th>petal_width</th>\n      <th>species</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>5.1</td>\n      <td>3.5</td>\n      <td>1.4</td>\n      <td>0.2</td>\n      <td>setosa</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>4.9</td>\n      <td>3.0</td>\n      <td>1.4</td>\n      <td>0.2</td>\n      <td>setosa</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>4.7</td>\n      <td>3.2</td>\n      <td>1.3</td>\n      <td>0.2</td>\n      <td>setosa</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>4.6</td>\n      <td>3.1</td>\n      <td>1.5</td>\n      <td>0.2</td>\n      <td>setosa</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>5.0</td>\n      <td>3.6</td>\n      <td>1.4</td>\n      <td>0.2</td>\n      <td>setosa</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>145</th>\n      <td>6.7</td>\n      <td>3.0</td>\n      <td>5.2</td>\n      <td>2.3</td>\n      <td>virginica</td>\n    </tr>\n    <tr>\n      <th>146</th>\n      <td>6.3</td>\n      <td>2.5</td>\n      <td>5.0</td>\n      <td>1.9</td>\n      <td>virginica</td>\n    </tr>\n    <tr>\n      <th>147</th>\n      <td>6.5</td>\n      <td>3.0</td>\n      <td>5.2</td>\n      <td>2.0</td>\n      <td>virginica</td>\n    </tr>\n    <tr>\n      <th>148</th>\n      <td>6.2</td>\n      <td>3.4</td>\n      <td>5.4</td>\n      <td>2.3</td>\n      <td>virginica</td>\n    </tr>\n    <tr>\n      <th>149</th>\n      <td>5.9</td>\n      <td>3.0</td>\n      <td>5.1</td>\n      <td>1.8</td>\n      <td>virginica</td>\n    </tr>\n  </tbody>\n</table>\n<p>150 rows × 5 columns</p>\n</div>\n<p>각 붓꽃 종별로 가장 큰 값과 가장 작은 값의 비율을 구해보자. 이러한 계산을 하는 그룹연산 매서드는 없으므로 직접 함수로 만들고 <code class=\"language-text\">agg</code> 매서드를 이용해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">peak_to_peak_ratio</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> x<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\niris<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span>iris<span class=\"token punctuation\">.</span>species<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>agg<span class=\"token punctuation\">(</span>peak_to_peak_ratio<span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>sepal_length</th>\n      <th>sepal_width</th>\n      <th>petal_length</th>\n      <th>petal_width</th>\n    </tr>\n    <tr>\n      <th>species</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>setosa</th>\n      <td>1.348837</td>\n      <td>1.913043</td>\n      <td>1.900000</td>\n      <td>6.000000</td>\n    </tr>\n    <tr>\n      <th>versicolor</th>\n      <td>1.428571</td>\n      <td>1.700000</td>\n      <td>1.700000</td>\n      <td>1.800000</td>\n    </tr>\n    <tr>\n      <th>virginica</th>\n      <td>1.612245</td>\n      <td>1.727273</td>\n      <td>1.533333</td>\n      <td>1.785714</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">describe</code> 매서드를 사용하면 다양한 기술 통계(descriptive statistics)값을 한 번에 구한다. 그룹별로 하나의 스칼라 값이 아니라 하나의 데이터프레임이 생성된다는 점에 주의하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">iris<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span>iris<span class=\"token punctuation\">.</span>species<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>T</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>species</th>\n      <th>setosa</th>\n      <th>versicolor</th>\n      <th>virginica</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"8\" valign=\"top\">sepal_length</th>\n      <th>count</th>\n      <td>50.000000</td>\n      <td>50.000000</td>\n      <td>50.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>5.006000</td>\n      <td>5.936000</td>\n      <td>6.588000</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>0.352490</td>\n      <td>0.516171</td>\n      <td>0.635880</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>4.300000</td>\n      <td>4.900000</td>\n      <td>4.900000</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>4.800000</td>\n      <td>5.600000</td>\n      <td>6.225000</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>5.000000</td>\n      <td>5.900000</td>\n      <td>6.500000</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>5.200000</td>\n      <td>6.300000</td>\n      <td>6.900000</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>5.800000</td>\n      <td>7.000000</td>\n      <td>7.900000</td>\n    </tr>\n    <tr>\n      <th rowspan=\"8\" valign=\"top\">sepal_width</th>\n      <th>count</th>\n      <td>50.000000</td>\n      <td>50.000000</td>\n      <td>50.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>3.428000</td>\n      <td>2.770000</td>\n      <td>2.974000</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>0.379064</td>\n      <td>0.313798</td>\n      <td>0.322497</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>2.300000</td>\n      <td>2.000000</td>\n      <td>2.200000</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>3.200000</td>\n      <td>2.525000</td>\n      <td>2.800000</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>3.400000</td>\n      <td>2.800000</td>\n      <td>3.000000</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>3.675000</td>\n      <td>3.000000</td>\n      <td>3.175000</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>4.400000</td>\n      <td>3.400000</td>\n      <td>3.800000</td>\n    </tr>\n    <tr>\n      <th rowspan=\"8\" valign=\"top\">petal_length</th>\n      <th>count</th>\n      <td>50.000000</td>\n      <td>50.000000</td>\n      <td>50.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>1.462000</td>\n      <td>4.260000</td>\n      <td>5.552000</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>0.173664</td>\n      <td>0.469911</td>\n      <td>0.551895</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>1.000000</td>\n      <td>3.000000</td>\n      <td>4.500000</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>1.400000</td>\n      <td>4.000000</td>\n      <td>5.100000</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>1.500000</td>\n      <td>4.350000</td>\n      <td>5.550000</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>1.575000</td>\n      <td>4.600000</td>\n      <td>5.875000</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>1.900000</td>\n      <td>5.100000</td>\n      <td>6.900000</td>\n    </tr>\n    <tr>\n      <th rowspan=\"8\" valign=\"top\">petal_width</th>\n      <th>count</th>\n      <td>50.000000</td>\n      <td>50.000000</td>\n      <td>50.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>0.246000</td>\n      <td>1.326000</td>\n      <td>2.026000</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>0.105386</td>\n      <td>0.197753</td>\n      <td>0.274650</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>0.100000</td>\n      <td>1.000000</td>\n      <td>1.400000</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>0.200000</td>\n      <td>1.200000</td>\n      <td>1.800000</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>0.200000</td>\n      <td>1.300000</td>\n      <td>2.000000</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>0.300000</td>\n      <td>1.500000</td>\n      <td>2.300000</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>0.600000</td>\n      <td>1.800000</td>\n      <td>2.500000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">apply</code> 매서드를 사용하면 <code class=\"language-text\">describe</code> 매서드처럼 하나의 그룹에 대해 하나의 대표값(스칼라 값)을 구하는게 아니라 데이터프레임을 만들 수 있다. 예를 들어 다음처럼 각 붓꽃 종별로 가장 꽃잎길이(petal length)가 큰 3개의 데이터를 뽑아낼 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">top3_petal_length</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> df<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>by<span class=\"token operator\">=</span><span class=\"token string\">\"petal_length\"</span><span class=\"token punctuation\">,</span> ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n\niris<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span>iris<span class=\"token punctuation\">.</span>species<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span>top3_petal_length<span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>sepal_length</th>\n      <th>sepal_width</th>\n      <th>petal_length</th>\n      <th>petal_width</th>\n      <th>species</th>\n    </tr>\n    <tr>\n      <th>species</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">setosa</th>\n      <th>24</th>\n      <td>4.8</td>\n      <td>3.4</td>\n      <td>1.9</td>\n      <td>0.2</td>\n      <td>setosa</td>\n    </tr>\n    <tr>\n      <th>44</th>\n      <td>5.1</td>\n      <td>3.8</td>\n      <td>1.9</td>\n      <td>0.4</td>\n      <td>setosa</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>5.1</td>\n      <td>3.3</td>\n      <td>1.7</td>\n      <td>0.5</td>\n      <td>setosa</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">versicolor</th>\n      <th>83</th>\n      <td>6.0</td>\n      <td>2.7</td>\n      <td>5.1</td>\n      <td>1.6</td>\n      <td>versicolor</td>\n    </tr>\n    <tr>\n      <th>77</th>\n      <td>6.7</td>\n      <td>3.0</td>\n      <td>5.0</td>\n      <td>1.7</td>\n      <td>versicolor</td>\n    </tr>\n    <tr>\n      <th>72</th>\n      <td>6.3</td>\n      <td>2.5</td>\n      <td>4.9</td>\n      <td>1.5</td>\n      <td>versicolor</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">virginica</th>\n      <th>118</th>\n      <td>7.7</td>\n      <td>2.6</td>\n      <td>6.9</td>\n      <td>2.3</td>\n      <td>virginica</td>\n    </tr>\n    <tr>\n      <th>117</th>\n      <td>7.7</td>\n      <td>3.8</td>\n      <td>6.7</td>\n      <td>2.2</td>\n      <td>virginica</td>\n    </tr>\n    <tr>\n      <th>122</th>\n      <td>7.7</td>\n      <td>2.8</td>\n      <td>6.7</td>\n      <td>2.0</td>\n      <td>virginica</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">transform</code> 매서드는 그룹별 대표값을 만드는 것이 아니라 그룹별 계산을 통해 데이터프레임 자체를 변화시킨다. 따라서 만들어진 데이터프레임의 크기는 원래 데이터프레임과 같다. 예를 들어 다음처럼 각 붓꽃 꽃잎길이가 해당 종 내에서 대/중/소 어느 것에 해당되는지에 대한 데이터프레임을 만들 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">q3cut</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> pd<span class=\"token punctuation\">.</span>qcut<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> labels<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"소\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"중\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"대\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span>\n\niris<span class=\"token punctuation\">[</span><span class=\"token string\">\"petal_length_class\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> iris<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span>iris<span class=\"token punctuation\">.</span>species<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>petal_length<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">(</span>q3cut<span class=\"token punctuation\">)</span>\niris<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"petal_length\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"petal_length_class\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>tail<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>petal_length</th>\n      <th>petal_length_class</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>140</th>\n      <td>5.6</td>\n      <td>중</td>\n    </tr>\n    <tr>\n      <th>141</th>\n      <td>5.1</td>\n      <td>소</td>\n    </tr>\n    <tr>\n      <th>142</th>\n      <td>5.1</td>\n      <td>소</td>\n    </tr>\n    <tr>\n      <th>143</th>\n      <td>5.9</td>\n      <td>대</td>\n    </tr>\n    <tr>\n      <th>144</th>\n      <td>5.7</td>\n      <td>중</td>\n    </tr>\n    <tr>\n      <th>145</th>\n      <td>5.2</td>\n      <td>소</td>\n    </tr>\n    <tr>\n      <th>146</th>\n      <td>5.0</td>\n      <td>소</td>\n    </tr>\n    <tr>\n      <th>147</th>\n      <td>5.2</td>\n      <td>소</td>\n    </tr>\n    <tr>\n      <th>148</th>\n      <td>5.4</td>\n      <td>중</td>\n    </tr>\n    <tr>\n      <th>149</th>\n      <td>5.1</td>\n      <td>소</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"pivot_table\" style=\"position:relative;\"><a href=\"#pivot_table\" aria-label=\"pivot_table permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">pivot_table</code></h2>\n<p>Pandas는 <code class=\"language-text\">pivot</code> 명령과 <code class=\"language-text\">groupby</code> 명령의 중간 성격을 가지는 <code class=\"language-text\">pivot_table</code> 명령도 제공한다.</p>\n<p><code class=\"language-text\">pivot_table</code> 명령은 <code class=\"language-text\">groupby</code> 명령처럼 그룹분석을 하지만 최종적으로는 <code class=\"language-text\">pivot</code> 명령처럼 피봇테이블을 만든다. 즉 <code class=\"language-text\">groupby</code> 명령의 결과에 <code class=\"language-text\">unstack</code>을 자동 적용하여 2차원적인 형태로 변형한다. 사용 방법은 다음과 같다.</p>\n<ul>\n<li>pivot<em>table(data, values=None, index=None, columns=None, aggfunc='mean', fill</em>value=None, margins=False, margins_name='All')</li>\n<li>data: 분석할 데이터프레임 (메서드일 때는 필요하지 않음)</li>\n<li>values: 분석할 데이터프레임에서 분석할 열</li>\n<li>index: 행 인덱스로 들어갈 키 열 또는 키 열의 리스트</li>\n<li>columns: 열 인덱스로 들어갈 키 열 또는 키 열의 리스트</li>\n<li>aggfunc: 분석 메서드</li>\n<li>fill_value: NaN 대체 값</li>\n<li>margins: 모든 데이터를 분석한 결과를 오른쪽과 아래에 붙일지 여부</li>\n<li>margins_name: 마진 열(행)의 이름</li>\n</ul>\n<p>만약 조건에 따른 데이터가 유일하게 선택되지 않으면 그룹연산을 하며 이 때 <code class=\"language-text\">aggfunc</code> 인수로 정의된 함수를 수행하여 대표값을 계산한다.</p>\n<p><code class=\"language-text\">pivot_table</code>를 메서드로 사용할 때는 객체 자체가 데이터가 되므로 <code class=\"language-text\">data</code> 인수가 필요하지 않다.</p>\n<p>예를 들어 위에서 만들었던 피봇테이블은 <code class=\"language-text\">pivot_table</code> 명령으로 다음과 같이 만들 수도 있다. 인수의 순서에 주의해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"도시\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>연도</th>\n      <th>2005</th>\n      <th>2010</th>\n      <th>2015</th>\n    </tr>\n    <tr>\n      <th>도시</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>부산</th>\n      <td>3512547.0</td>\n      <td>3393191.0</td>\n      <td>3448737.0</td>\n    </tr>\n    <tr>\n      <th>서울</th>\n      <td>9762546.0</td>\n      <td>9631482.0</td>\n      <td>9904312.0</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>NaN</td>\n      <td>263203.0</td>\n      <td>2890451.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">margins=True</code> 인수를 주면 <code class=\"language-text\">aggfunc</code>로 주어진 분석 방법을 해당 열의 모든 데이터, 해당 행의 모든 데이터 그리고 전체 데이터에 대해 적용한 결과를 같이 보여준다. <code class=\"language-text\">aggfunc</code>가 주어지지 않았으면 평균을 계산한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"도시\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">,</span> margins<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> margins_name<span class=\"token operator\">=</span><span class=\"token string\">\"평균\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>연도</th>\n      <th>2005</th>\n      <th>2010</th>\n      <th>2015</th>\n      <th>평균</th>\n    </tr>\n    <tr>\n      <th>도시</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>부산</th>\n      <td>3512547.0</td>\n      <td>3393191.0</td>\n      <td>3448737.0</td>\n      <td>3.451492e+06</td>\n    </tr>\n    <tr>\n      <th>서울</th>\n      <td>9762546.0</td>\n      <td>9631482.0</td>\n      <td>9904312.0</td>\n      <td>9.766113e+06</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>NaN</td>\n      <td>263203.0</td>\n      <td>2890451.0</td>\n      <td>1.576827e+06</td>\n    </tr>\n    <tr>\n      <th>평균</th>\n      <td>6637546.5</td>\n      <td>4429292.0</td>\n      <td>5414500.0</td>\n      <td>5.350809e+06</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>이 결과에서 가장 오른쪽 합계 열의 첫번째 값 3451492은 모든 부산 인구 데이터의 평균, 두번째 값 9766113은 모든 서울 인구 데이터의 평균이다. 가장 아래의 합계 행의 첫번째 값은 2005년 데이터의 평균값, 두번째 값은 2010년 데이터의 평균값이다. 가장 오른쪽 아래의 값 5350809는 전체 데이터의 평균값이다. 다음 계산을 통해 이를 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">[</span><span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">5350808.625</code></pre></div>\n<p>행 인덱스나 열 인덱스에 리스트를 넣으면 다중 인덱스 테이블을 만든다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token string\">\"인구\"</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"연도\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"도시\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>인구</th>\n    </tr>\n    <tr>\n      <th>연도</th>\n      <th>도시</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">2005</th>\n      <th>부산</th>\n      <td>3512547</td>\n    </tr>\n    <tr>\n      <th>서울</th>\n      <td>9762546</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">2010</th>\n      <th>부산</th>\n      <td>3393191</td>\n    </tr>\n    <tr>\n      <th>서울</th>\n      <td>9631482</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>263203</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">2015</th>\n      <th>부산</th>\n      <td>3448737</td>\n    </tr>\n    <tr>\n      <th>서울</th>\n      <td>9904312</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>2890451</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>식당에서 식사 후 내는 팁(tip)과 관련된 데이터를 이용하여 좀더 구체적으로 그룹분석 방법을 살펴본다. 우선 Seaborn 패키지에 설치된 샘플 데이터를 로드한다. 이 데이터프레임에서 각각의 컬럼은 다음을 뜻한다.</p>\n<ul>\n<li>total_bill: 식사대금</li>\n<li>tip: 팁</li>\n<li>sex: 성별</li>\n<li>smoker: 흡연/금연 여부</li>\n<li>day: 요일</li>\n<li>time: 시간</li>\n<li>size: 인원</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips <span class=\"token operator\">=</span> sns<span class=\"token punctuation\">.</span>load_dataset<span class=\"token punctuation\">(</span><span class=\"token string\">'tips'</span><span class=\"token punctuation\">)</span>\ntips<span class=\"token punctuation\">.</span>tail<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>total_bill</th>\n      <th>tip</th>\n      <th>sex</th>\n      <th>smoker</th>\n      <th>day</th>\n      <th>time</th>\n      <th>size</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>239</th>\n      <td>29.03</td>\n      <td>5.92</td>\n      <td>Male</td>\n      <td>No</td>\n      <td>Sat</td>\n      <td>Dinner</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>240</th>\n      <td>27.18</td>\n      <td>2.00</td>\n      <td>Female</td>\n      <td>Yes</td>\n      <td>Sat</td>\n      <td>Dinner</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>241</th>\n      <td>22.67</td>\n      <td>2.00</td>\n      <td>Male</td>\n      <td>Yes</td>\n      <td>Sat</td>\n      <td>Dinner</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>242</th>\n      <td>17.82</td>\n      <td>1.75</td>\n      <td>Male</td>\n      <td>No</td>\n      <td>Sat</td>\n      <td>Dinner</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>243</th>\n      <td>18.78</td>\n      <td>3.00</td>\n      <td>Female</td>\n      <td>No</td>\n      <td>Thur</td>\n      <td>Dinner</td>\n      <td>2</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>분석의 목표는 식사 대금 대비 팁의 비율이 어떤 경우에 가장 높아지지는 찾는 것이다. 우선 식사대금와 팁의 비율을 나타내는 <code class=\"language-text\">tip_pct</code>를 추가하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">[</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tips<span class=\"token punctuation\">[</span><span class=\"token string\">\"tip\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> tips<span class=\"token punctuation\">[</span><span class=\"token string\">\"total_bill\"</span><span class=\"token punctuation\">]</span>\ntips<span class=\"token punctuation\">.</span>tail<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>total_bill</th>\n      <th>tip</th>\n      <th>sex</th>\n      <th>smoker</th>\n      <th>day</th>\n      <th>time</th>\n      <th>size</th>\n      <th>tip_pct</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>239</th>\n      <td>29.03</td>\n      <td>5.92</td>\n      <td>Male</td>\n      <td>No</td>\n      <td>Sat</td>\n      <td>Dinner</td>\n      <td>3</td>\n      <td>0.203927</td>\n    </tr>\n    <tr>\n      <th>240</th>\n      <td>27.18</td>\n      <td>2.00</td>\n      <td>Female</td>\n      <td>Yes</td>\n      <td>Sat</td>\n      <td>Dinner</td>\n      <td>2</td>\n      <td>0.073584</td>\n    </tr>\n    <tr>\n      <th>241</th>\n      <td>22.67</td>\n      <td>2.00</td>\n      <td>Male</td>\n      <td>Yes</td>\n      <td>Sat</td>\n      <td>Dinner</td>\n      <td>2</td>\n      <td>0.088222</td>\n    </tr>\n    <tr>\n      <th>242</th>\n      <td>17.82</td>\n      <td>1.75</td>\n      <td>Male</td>\n      <td>No</td>\n      <td>Sat</td>\n      <td>Dinner</td>\n      <td>2</td>\n      <td>0.098204</td>\n    </tr>\n    <tr>\n      <th>243</th>\n      <td>18.78</td>\n      <td>3.00</td>\n      <td>Female</td>\n      <td>No</td>\n      <td>Thur</td>\n      <td>Dinner</td>\n      <td>2</td>\n      <td>0.159744</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>다음으로 각 열의 데이터에 대해 간단히 분포를 알아본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>total_bill</th>\n      <th>tip</th>\n      <th>size</th>\n      <th>tip_pct</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>count</th>\n      <td>244.000000</td>\n      <td>244.000000</td>\n      <td>244.000000</td>\n      <td>244.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>19.785943</td>\n      <td>2.998279</td>\n      <td>2.569672</td>\n      <td>0.160803</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>8.902412</td>\n      <td>1.383638</td>\n      <td>0.951100</td>\n      <td>0.061072</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>3.070000</td>\n      <td>1.000000</td>\n      <td>1.000000</td>\n      <td>0.035638</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>13.347500</td>\n      <td>2.000000</td>\n      <td>2.000000</td>\n      <td>0.129127</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>17.795000</td>\n      <td>2.900000</td>\n      <td>2.000000</td>\n      <td>0.154770</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>24.127500</td>\n      <td>3.562500</td>\n      <td>3.000000</td>\n      <td>0.191475</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>50.810000</td>\n      <td>10.000000</td>\n      <td>6.000000</td>\n      <td>0.710345</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>우선 성별로 나누어 데이터 갯수를 세어보자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'sex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>total_bill</th>\n      <th>tip</th>\n      <th>smoker</th>\n      <th>day</th>\n      <th>time</th>\n      <th>size</th>\n      <th>tip_pct</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Male</th>\n      <td>157</td>\n      <td>157</td>\n      <td>157</td>\n      <td>157</td>\n      <td>157</td>\n      <td>157</td>\n      <td>157</td>\n    </tr>\n    <tr>\n      <th>Female</th>\n      <td>87</td>\n      <td>87</td>\n      <td>87</td>\n      <td>87</td>\n      <td>87</td>\n      <td>87</td>\n      <td>87</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>데이터 갯수의 경우 NaN 데이터가 없다면 모두 같은 값이 나올 것이다. 이 때는 <code class=\"language-text\">size</code> 명령을 사용하면 더 간단히 표시된다. <code class=\"language-text\">size</code> 명령은 NaN이 있어도 상관하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'sex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sex\nMale      157\nFemale     87\ndtype: int64</code></pre></div>\n<p>이번에는 성별과 흡연유무로 나누어 데이터 갯수를 알아보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sex     smoker\nMale    Yes       60\n        No        97\nFemale  Yes       33\n        No        54\ndtype: int64</code></pre></div>\n<p>좀더 보기 좋게 피봇 테이블 형태로 바꿀 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">,</span> aggfunc<span class=\"token operator\">=</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">,</span> margins<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>smoker</th>\n      <th>Yes</th>\n      <th>No</th>\n      <th>All</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Male</th>\n      <td>60</td>\n      <td>97</td>\n      <td>157</td>\n    </tr>\n    <tr>\n      <th>Female</th>\n      <td>33</td>\n      <td>54</td>\n      <td>87</td>\n    </tr>\n    <tr>\n      <th>All</th>\n      <td>93</td>\n      <td>151</td>\n      <td>244</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>이제 성별과 흡연 여부에 따른 평균 팁 비율을 살펴보자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>tip_pct</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Male</th>\n      <td>0.157651</td>\n    </tr>\n    <tr>\n      <th>Female</th>\n      <td>0.166491</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>tip_pct</th>\n    </tr>\n    <tr>\n      <th>smoker</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Yes</th>\n      <td>0.163196</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>0.159328</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">pivot_table</code> 명령을 사용할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>tip_pct</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Male</th>\n      <td>0.157651</td>\n    </tr>\n    <tr>\n      <th>Female</th>\n      <td>0.166491</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>tip_pct</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th>smoker</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Male</th>\n      <th>Yes</th>\n      <td>0.152771</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>0.160669</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Female</th>\n      <th>Yes</th>\n      <td>0.182150</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>0.156921</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>smoker</th>\n      <th>Yes</th>\n      <th>No</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Male</th>\n      <td>0.152771</td>\n      <td>0.160669</td>\n    </tr>\n    <tr>\n      <th>Female</th>\n      <td>0.182150</td>\n      <td>0.156921</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>여성 혹은 흡연자의 팁 비율이 높은 것을 볼 수 있다. 하지만 이 데이터에는 평균을 제외한 분산(variance) 등의 다른 통계값이 없으므로 <code class=\"language-text\">describe</code> 명령으로 여러가지 통계값을 한 번에 알아본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"8\" halign=\"left\">tip_pct</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>count</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>min</th>\n      <th>25%</th>\n      <th>50%</th>\n      <th>75%</th>\n      <th>max</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Male</th>\n      <td>157.0</td>\n      <td>0.157651</td>\n      <td>0.064778</td>\n      <td>0.035638</td>\n      <td>0.121389</td>\n      <td>0.153492</td>\n      <td>0.186240</td>\n      <td>0.710345</td>\n    </tr>\n    <tr>\n      <th>Female</th>\n      <td>87.0</td>\n      <td>0.166491</td>\n      <td>0.053632</td>\n      <td>0.056433</td>\n      <td>0.140416</td>\n      <td>0.155581</td>\n      <td>0.194266</td>\n      <td>0.416667</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"8\" halign=\"left\">tip_pct</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>count</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>min</th>\n      <th>25%</th>\n      <th>50%</th>\n      <th>75%</th>\n      <th>max</th>\n    </tr>\n    <tr>\n      <th>smoker</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Yes</th>\n      <td>93.0</td>\n      <td>0.163196</td>\n      <td>0.085119</td>\n      <td>0.035638</td>\n      <td>0.106771</td>\n      <td>0.153846</td>\n      <td>0.195059</td>\n      <td>0.710345</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>151.0</td>\n      <td>0.159328</td>\n      <td>0.039910</td>\n      <td>0.056797</td>\n      <td>0.136906</td>\n      <td>0.155625</td>\n      <td>0.185014</td>\n      <td>0.291990</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"tip_pct\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th></th>\n      <th colspan=\"8\" halign=\"left\">tip_pct</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th></th>\n      <th>count</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>min</th>\n      <th>25%</th>\n      <th>50%</th>\n      <th>75%</th>\n      <th>max</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th>smoker</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Male</th>\n      <th>Yes</th>\n      <td>60.0</td>\n      <td>0.152771</td>\n      <td>0.090588</td>\n      <td>0.035638</td>\n      <td>0.101845</td>\n      <td>0.141015</td>\n      <td>0.191697</td>\n      <td>0.710345</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>97.0</td>\n      <td>0.160669</td>\n      <td>0.041849</td>\n      <td>0.071804</td>\n      <td>0.131810</td>\n      <td>0.157604</td>\n      <td>0.186220</td>\n      <td>0.291990</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Female</th>\n      <th>Yes</th>\n      <td>33.0</td>\n      <td>0.182150</td>\n      <td>0.071595</td>\n      <td>0.056433</td>\n      <td>0.152439</td>\n      <td>0.173913</td>\n      <td>0.198216</td>\n      <td>0.416667</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>54.0</td>\n      <td>0.156921</td>\n      <td>0.036421</td>\n      <td>0.056797</td>\n      <td>0.139708</td>\n      <td>0.149691</td>\n      <td>0.181630</td>\n      <td>0.252672</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>이번에는 각 그룹에서 가장 많은 팁과 가장 적은 팁의 차이를 알아보자. 이 계산을 해 줄 수 있는 그룹연산 함수가 없으므로 함수를 직접 만들고 <code class=\"language-text\">agg</code>메서드를 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">peak_to_peak</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> x<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\ntips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"tip\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>agg<span class=\"token punctuation\">(</span>peak_to_peak<span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>tip</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th>smoker</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Male</th>\n      <th>Yes</th>\n      <td>9.00</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>7.75</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Female</th>\n      <th>Yes</th>\n      <td>5.50</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>4.20</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>만약 여러가지 그룹연산을 동시에 하고 싶다면 다음과 같이 리스트를 이용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>agg<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"mean\"</span><span class=\"token punctuation\">,</span> peak_to_peak<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"total_bill\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">total_bill</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th></th>\n      <th>mean</th>\n      <th>peak_to_peak</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th>smoker</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Male</th>\n      <th>Yes</th>\n      <td>22.284500</td>\n      <td>43.56</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>19.791237</td>\n      <td>40.82</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Female</th>\n      <th>Yes</th>\n      <td>17.977879</td>\n      <td>41.23</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>18.105185</td>\n      <td>28.58</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>만약 데이터 열마다 다른 연산을 하고 싶다면 열 라벨과 연산 이름(또는 함수)를 딕셔너리로 넣는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"smoker\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>agg<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'tip_pct'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'mean'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'total_bill'</span><span class=\"token punctuation\">:</span>peak_to_peak<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>tip_pct</th>\n      <th>total_bill</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th>smoker</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Male</th>\n      <th>Yes</th>\n      <td>0.152771</td>\n      <td>43.56</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>0.160669</td>\n      <td>40.82</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Female</th>\n      <th>Yes</th>\n      <td>0.182150</td>\n      <td>41.23</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>0.156921</td>\n      <td>28.58</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>다음은 <code class=\"language-text\">pivot_table</code> 명령으로 더 복잡한 분석을 한 예이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'tip_pct'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'size'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'sex'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'day'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'smoker'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">size</th>\n      <th colspan=\"2\" halign=\"left\">tip_pct</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>smoker</th>\n      <th>Yes</th>\n      <th>No</th>\n      <th>Yes</th>\n      <th>No</th>\n    </tr>\n    <tr>\n      <th>sex</th>\n      <th>day</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"4\" valign=\"top\">Male</th>\n      <th>Thur</th>\n      <td>2.300000</td>\n      <td>2.500000</td>\n      <td>0.164417</td>\n      <td>0.165706</td>\n    </tr>\n    <tr>\n      <th>Fri</th>\n      <td>2.125000</td>\n      <td>2.000000</td>\n      <td>0.144730</td>\n      <td>0.138005</td>\n    </tr>\n    <tr>\n      <th>Sat</th>\n      <td>2.629630</td>\n      <td>2.656250</td>\n      <td>0.139067</td>\n      <td>0.162132</td>\n    </tr>\n    <tr>\n      <th>Sun</th>\n      <td>2.600000</td>\n      <td>2.883721</td>\n      <td>0.173964</td>\n      <td>0.158291</td>\n    </tr>\n    <tr>\n      <th rowspan=\"4\" valign=\"top\">Female</th>\n      <th>Thur</th>\n      <td>2.428571</td>\n      <td>2.480000</td>\n      <td>0.163073</td>\n      <td>0.155971</td>\n    </tr>\n    <tr>\n      <th>Fri</th>\n      <td>2.000000</td>\n      <td>2.500000</td>\n      <td>0.209129</td>\n      <td>0.165296</td>\n    </tr>\n    <tr>\n      <th>Sat</th>\n      <td>2.200000</td>\n      <td>2.307692</td>\n      <td>0.163817</td>\n      <td>0.147993</td>\n    </tr>\n    <tr>\n      <th>Sun</th>\n      <td>2.500000</td>\n      <td>3.071429</td>\n      <td>0.237075</td>\n      <td>0.165710</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tips<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token string\">'size'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'time'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'smoker'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'day'</span><span class=\"token punctuation\">,</span> aggfunc<span class=\"token operator\">=</span><span class=\"token string\">'sum'</span><span class=\"token punctuation\">,</span> fill_value<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>day</th>\n      <th>Thur</th>\n      <th>Fri</th>\n      <th>Sat</th>\n      <th>Sun</th>\n    </tr>\n    <tr>\n      <th>time</th>\n      <th>sex</th>\n      <th>smoker</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"4\" valign=\"top\">Lunch</th>\n      <th rowspan=\"2\" valign=\"top\">Male</th>\n      <th>Yes</th>\n      <td>23</td>\n      <td>5</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>50</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Female</th>\n      <th>Yes</th>\n      <td>17</td>\n      <td>6</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>60</td>\n      <td>3</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th rowspan=\"4\" valign=\"top\">Dinner</th>\n      <th rowspan=\"2\" valign=\"top\">Male</th>\n      <th>Yes</th>\n      <td>0</td>\n      <td>12</td>\n      <td>71</td>\n      <td>39</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>0</td>\n      <td>4</td>\n      <td>85</td>\n      <td>124</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">Female</th>\n      <th>Yes</th>\n      <td>0</td>\n      <td>8</td>\n      <td>33</td>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>No</th>\n      <td>2</td>\n      <td>2</td>\n      <td>30</td>\n      <td>43</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>피봇테이블과 그룹연산에 대해 알아 보았다. 분석 연습을 해보기 위해 자주 사용되는 타이타닉 승객데이터를 이용해서 연습 해보면 좋을 것 같다.</p>\n<p><code class=\"language-text\">titanic = sns.load_dataset(&quot;titanic&quot;)</code></p>\n<p>출처 : 데이터사이언스 스쿨(<a href=\"http://datascienceschool.net\">http://datascienceschool.net</a>)</p>"},{"id":"a05364ac-a939-560c-a173-11071059e0ec","headings":[{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"DataFrame 합성","path":"/pandas-06","tags":["Python"],"excerpt":"Pandas는 두 개 이상의 DataFrame을 하나로 합치는 데이터 병합(merge)이나 연결(concatenate)을 지원한다.","created":"2020-10-09T00:00:00.000Z","createdPretty":"09 October, 2020","updated":"2020-10-09T00:00:00.000Z","updatedPretty":"09 October, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>Pandas는 두 개 이상의 DataFrame을 하나로 합치는 데이터 병합(merge)이나 연결(concatenate)을 지원한다.</p>\n<h2 id=\"merge-함수를-사용한-dataframe-병합\" style=\"position:relative;\"><a href=\"#merge-%ED%95%A8%EC%88%98%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-dataframe-%EB%B3%91%ED%95%A9\" aria-label=\"merge 함수를 사용한 dataframe 병합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">merge</code> 함수를 사용한 DataFrame 병합</h2>\n<p><code class=\"language-text\">merge</code> 함수는 두 데이터프레임의 공통 열 혹은 인덱스를 기준으로 두 개의 테이블을 합친다. 이 때 기준이 되는 열, 행의 데이터를 키(Key)라고 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd \ndf1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'고객번호'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1002</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1003</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1004</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1005</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1006</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1007</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'이름'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'둘리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'도우너'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'또치'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'길동'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'마이콜'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'희동'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'영희'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'고객번호'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'이름'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객번호</th>\n      <th>이름</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1001</td>\n      <td>둘리</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1002</td>\n      <td>도우너</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1003</td>\n      <td>또치</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1004</td>\n      <td>길동</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1005</td>\n      <td>마이콜</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>1006</td>\n      <td>희동</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>1007</td>\n      <td>영희</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'고객번호'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1005</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1006</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1008</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'금액'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30000</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'고객번호'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'금액'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객번호</th>\n      <th>금액</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1001</td>\n      <td>10000</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1001</td>\n      <td>20000</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1005</td>\n      <td>15000</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1006</td>\n      <td>5000</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1008</td>\n      <td>100000</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>1001</td>\n      <td>30000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">merge</code> 함수로 위의 두 데이터프레임 df1, df2 를 합치면 공통열인 <code class=\"language-text\">고객번호</code> 열을 기준으로 데이터를 찾아서 합친다. 이 때 기본적으로는 양쪽 데이터프레임에 모두 키가 존재하는 데이터만 보여주는 inner join 방식을 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객번호</th>\n      <th>이름</th>\n      <th>금액</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>10000</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>20000</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>30000</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1005</td>\n      <td>마이콜</td>\n      <td>15000</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1006</td>\n      <td>희동</td>\n      <td>5000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>outer join 방식은 키 값이 한쪽에만 있어도 데이터를 보여준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'outer'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객번호</th>\n      <th>이름</th>\n      <th>금액</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>10000.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>20000.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>30000.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1002</td>\n      <td>도우너</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1003</td>\n      <td>또치</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>1004</td>\n      <td>길동</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>1005</td>\n      <td>마이콜</td>\n      <td>15000.0</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>1006</td>\n      <td>희동</td>\n      <td>5000.0</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>1007</td>\n      <td>영희</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>1008</td>\n      <td>NaN</td>\n      <td>100000.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>left, right 방식은 각각 첫번째, 혹은 두번째 데이터프레임의 키 앖을 모두 보여준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객번호</th>\n      <th>이름</th>\n      <th>금액</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>10000.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>20000.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>30000.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1002</td>\n      <td>도우너</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1003</td>\n      <td>또치</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>1004</td>\n      <td>길동</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>1005</td>\n      <td>마이콜</td>\n      <td>15000.0</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>1006</td>\n      <td>희동</td>\n      <td>5000.0</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>1007</td>\n      <td>영희</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객번호</th>\n      <th>이름</th>\n      <th>금액</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>10000</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>20000</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1001</td>\n      <td>둘리</td>\n      <td>30000</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1005</td>\n      <td>마이콜</td>\n      <td>15000</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1006</td>\n      <td>희동</td>\n      <td>5000</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>1008</td>\n      <td>NaN</td>\n      <td>100000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>만약 테이블에 키 값이 같은 데이터가 여러개 있는 경우에는 있을 수 있는 모든 경우의 수를 따져서 조합을 만들어 낸다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'품종'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'setosa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'setosa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'virginica'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'virginica'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'꽃잎길이'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1.4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'품종'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'꽃잎길이'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>품종</th>\n      <th>꽃잎길이</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>setosa</td>\n      <td>1.4</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>setosa</td>\n      <td>1.3</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>virginica</td>\n      <td>1.5</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>virginica</td>\n      <td>1.3</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'품종'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'setosa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'virginica'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'virginica'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'versicolor'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'꽃잎너비'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0.4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'품종'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'꽃잎너비'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>품종</th>\n      <th>꽃잎너비</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>setosa</td>\n      <td>0.4</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>virginica</td>\n      <td>0.3</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>virginica</td>\n      <td>0.5</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>versicolor</td>\n      <td>0.3</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>이 데이터에서 키 값 setosa에 대해 왼쪽 데이터프레임에는 1.4와 1.3 이라는 2개의 데이터, 오른쪽 데이터프레임에는 0.4라는 1개의 데이터가 있으므로 병합된 데이터에는 setosa가 (1.4, 0.4), (1.3, 0.4) 두 개의 데이터가 생긴다. 키값 virginica의 경우에는 왼쪽 데이터프레임에 1.5와 1.3이라는 2개의 데이터, 오른쪽 데이터프레임에 0.3와 0.5라는 2개의 데이터가 있으므로 2개와 2개의 조합에 의해 4가지 값이 생긴다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>품종</th>\n      <th>꽃잎길이</th>\n      <th>꽃잎너비</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>setosa</td>\n      <td>1.4</td>\n      <td>0.4</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>setosa</td>\n      <td>1.3</td>\n      <td>0.4</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>virginica</td>\n      <td>1.5</td>\n      <td>0.3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>virginica</td>\n      <td>1.5</td>\n      <td>0.5</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>virginica</td>\n      <td>1.3</td>\n      <td>0.3</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>virginica</td>\n      <td>1.3</td>\n      <td>0.5</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>두 데이터프레임에서 이름이 같은 열은 모두 키가 된다. 만약 이름이 같아도 키가 되면 안되는 열이 있다면 <code class=\"language-text\">on</code>인수로 기준열을 명시해야 한다. 다음 예에서 첫번째 데이터프레임의 <strong>데이터</strong>는 실제로는 금액을 나타내는 데이터 이고 두번째 데이터프레임의 <strong>데이터</strong>는 실제로 성별을 나타내는 데이터이므로 이름이 같아도 다른 데이터이다. 따라서 이 열은 기준열이 되면 안된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'고객명'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'춘향'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'춘향'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'몽룡'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'날짜'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'2018-01-01'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2018-01-02'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2018-01-01'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'데이터'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'20000'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'30000'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'100000'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객명</th>\n      <th>날짜</th>\n      <th>데이터</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>춘향</td>\n      <td>2018-01-01</td>\n      <td>20000</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>춘향</td>\n      <td>2018-01-02</td>\n      <td>30000</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>몽룡</td>\n      <td>2018-01-01</td>\n      <td>100000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'고객명'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'춘향'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'몽룡'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'데이터'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'여자'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'남자'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객명</th>\n      <th>데이터</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>춘향</td>\n      <td>여자</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>몽룡</td>\n      <td>남자</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'고객명'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>고객명</th>\n      <th>날짜</th>\n      <th>데이터_x</th>\n      <th>데이터_y</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>춘향</td>\n      <td>2018-01-01</td>\n      <td>20000</td>\n      <td>여자</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>춘향</td>\n      <td>2018-01-02</td>\n      <td>30000</td>\n      <td>여자</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>몽룡</td>\n      <td>2018-01-01</td>\n      <td>100000</td>\n      <td>남자</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>이 때 기준 열이 아니면서 이름이 같은 열에는 <code class=\"language-text\">_x</code> 또는 <code class=\"language-text\">_y</code>와 같은 접미사가 붙는다.</p>\n<p>반대로 키가 되는 기준열의 이름이 두 데이터프레임에서 다르면 <code class=\"language-text\">left_on</code>, <code class=\"language-text\">right_on</code> 인수를 사용하여 기준열을 명시해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'이름'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'영희'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'철수'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'철수'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'성정'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>이름</th>\n      <th>성정</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>영희</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>철수</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>철수</td>\n      <td>3</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'성명'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'영희'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'영희'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'철수'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'성적2'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>성명</th>\n      <th>성적2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>영희</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>영희</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>철수</td>\n      <td>6</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> left_on<span class=\"token operator\">=</span><span class=\"token string\">'이름'</span><span class=\"token punctuation\">,</span> right_on<span class=\"token operator\">=</span><span class=\"token string\">'성명'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>이름</th>\n      <th>성정</th>\n      <th>성명</th>\n      <th>성적2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>영희</td>\n      <td>1</td>\n      <td>영희</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>영희</td>\n      <td>1</td>\n      <td>영희</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>철수</td>\n      <td>2</td>\n      <td>철수</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>철수</td>\n      <td>3</td>\n      <td>철수</td>\n      <td>6</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>일반 데이터 열이 아닌 인덱스를 기준열로 사용하여면 <code class=\"language-text\">left_index</code> 또는 <code class=\"language-text\">right_index</code> 인수를 <code class=\"language-text\">True</code>로 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'도시'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'서울'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'서울'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'서울'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'부산'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'부산'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'연도'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2005</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2010</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2005</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'인구'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9853972</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9762546</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9631482</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3655437</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3512547</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>도시</th>\n      <th>연도</th>\n      <th>인구</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>서울</td>\n      <td>2000</td>\n      <td>9853972</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>서울</td>\n      <td>2005</td>\n      <td>9762546</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>서울</td>\n      <td>2010</td>\n      <td>9631482</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>부산</td>\n      <td>2000</td>\n      <td>3655437</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>부산</td>\n      <td>2005</td>\n      <td>3512547</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\ndf2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>\n    np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'부산'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'부산'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'서울'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'서울'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'서울'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'서울'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n           <span class=\"token punctuation\">[</span><span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2005</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2005</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2010</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2015</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'데이터1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'데이터2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>데이터1</th>\n      <th>데이터2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">부산</th>\n      <th>2000</th>\n      <td>0</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>2005</th>\n      <td>2</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th rowspan=\"4\" valign=\"top\">서울</th>\n      <th>2000</th>\n      <td>4</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>2005</th>\n      <td>6</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>2010</th>\n      <td>8</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>2015</th>\n      <td>10</td>\n      <td>11</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> left_on<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'도시'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'연도'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> right_index<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>도시</th>\n      <th>연도</th>\n      <th>인구</th>\n      <th>데이터1</th>\n      <th>데이터2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>서울</td>\n      <td>2000</td>\n      <td>9853972</td>\n      <td>4</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>서울</td>\n      <td>2005</td>\n      <td>9762546</td>\n      <td>6</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>서울</td>\n      <td>2010</td>\n      <td>9631482</td>\n      <td>8</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>부산</td>\n      <td>2000</td>\n      <td>3655437</td>\n      <td>0</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>부산</td>\n      <td>2005</td>\n      <td>3512547</td>\n      <td>2</td>\n      <td>3</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'e'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'서울'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'부산'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>서울</th>\n      <th>부산</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>1.0</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>3.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>e</th>\n      <td>5.0</td>\n      <td>6.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'e'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'대구'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'광주'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>대구</th>\n      <th>광주</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>b</th>\n      <td>7.0</td>\n      <td>8.0</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>9.0</td>\n      <td>10.0</td>\n    </tr>\n    <tr>\n      <th>d</th>\n      <td>11.0</td>\n      <td>12.0</td>\n    </tr>\n    <tr>\n      <th>e</th>\n      <td>13.0</td>\n      <td>14.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'outer'</span><span class=\"token punctuation\">,</span> left_index<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> right_index<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>서울</th>\n      <th>부산</th>\n      <th>대구</th>\n      <th>광주</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>1.0</td>\n      <td>2.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>b</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>7.0</td>\n      <td>8.0</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>9.0</td>\n      <td>10.0</td>\n    </tr>\n    <tr>\n      <th>d</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>11.0</td>\n      <td>12.0</td>\n    </tr>\n    <tr>\n      <th>e</th>\n      <td>5.0</td>\n      <td>6.0</td>\n      <td>13.0</td>\n      <td>14.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"join-매서드\" style=\"position:relative;\"><a href=\"#join-%EB%A7%A4%EC%84%9C%EB%93%9C\" aria-label=\"join 매서드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>join 매서드</h2>\n<p><code class=\"language-text\">merge</code> 명령어 대신 <code class=\"language-text\">join</code> 매서드를 사용할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'outer'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>서울</th>\n      <th>부산</th>\n      <th>대구</th>\n      <th>광주</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>1.0</td>\n      <td>2.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>b</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>7.0</td>\n      <td>8.0</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>9.0</td>\n      <td>10.0</td>\n    </tr>\n    <tr>\n      <th>d</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>11.0</td>\n      <td>12.0</td>\n    </tr>\n    <tr>\n      <th>e</th>\n      <td>5.0</td>\n      <td>6.0</td>\n      <td>13.0</td>\n      <td>14.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"concat-함수를-사용한-데이터-연결\" style=\"position:relative;\"><a href=\"#concat-%ED%95%A8%EC%88%98%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%97%B0%EA%B2%B0\" aria-label=\"concat 함수를 사용한 데이터 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">concat</code> 함수를 사용한 데이터 연결</h2>\n<p><code class=\"language-text\">concat</code> 함수를 사용하면 기준 열(key column)을 사용하지 않고 단순히 데이터를 연결(concatenate)한다.</p>\n<p>기본적으로는 위/아래로 데이터 행을 연결한다. 단순히 두 시리즈나 데이터프레임을 연결하기 때문에 인덱스 값이 중복될 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ns2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s1</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A    0\nB    1\ndtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s2</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A    2\nB    3\nC    4\ndtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A    0\nB    1\nA    2\nB    3\nC    4\ndtype: int64</code></pre></div>\n<p>내부적으로 기본값은 <code class=\"language-text\">axis=0</code> 이기 때문에 만약 옆으로 데이터 열을 연결하고 싶으면 <code class=\"language-text\">axis=1</code>로 인수를 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>\n    np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'데이터1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'데이터2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>데이터1</th>\n      <th>데이터2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>0</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>b</th>\n      <td>2</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>4</td>\n      <td>5</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>\n    <span class=\"token number\">5</span> <span class=\"token operator\">+</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'데이터3'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'데이터4'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>데이터3</th>\n      <th>데이터4</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>5</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>7</td>\n      <td>8</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>데이터1</th>\n      <th>데이터2</th>\n      <th>데이터3</th>\n      <th>데이터4</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>0</td>\n      <td>1</td>\n      <td>5.0</td>\n      <td>6.0</td>\n    </tr>\n    <tr>\n      <th>b</th>\n      <td>2</td>\n      <td>3</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>4</td>\n      <td>5</td>\n      <td>7.0</td>\n      <td>8.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>출처 : 데이터사이언스 스쿨(<a href=\"http://datascienceschool.net\">http://datascienceschool.net</a>)</p>"},{"id":"fa9519ab-c3e2-56c0-a1a0-05f325bcb035","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"DataFrame 인덱스 조작","path":"/pandas-05","tags":["Python"],"excerpt":"DataFrame에 인덱스로 들어가 있어야 할 데이터가 일반 데이터 열에 들어가 있거나 반대로 일반 데이터 열이어야 할 것이 인덱스로 되어 있을 수 있다. 이 때는 `set_index` 명령이나 `reset_index` 명령으로 인덱스와 일반 데이터 열을 교환할 수 있다.","created":"2020-10-06T00:00:00.000Z","createdPretty":"06 October, 2020","updated":"2020-10-06T00:00:00.000Z","updatedPretty":"06 October, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"dataframe-인덱스-설정-및-제거\" style=\"position:relative;\"><a href=\"#dataframe-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%84%A4%EC%A0%95-%EB%B0%8F-%EC%A0%9C%EA%B1%B0\" aria-label=\"dataframe 인덱스 설정 및 제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DataFrame 인덱스 설정 및 제거</h2>\n<p>DataFrame에 인덱스로 들어가 있어야 할 데이터가 일반 데이터 열에 들어가 있거나 반대로 일반 데이터 열이어야 할 것이 인덱스로 되어 있을 수 있다. 이 때는 <code class=\"language-text\">set_index</code> 명령이나 <code class=\"language-text\">reset_index</code> 명령으로 인덱스와 일반 데이터 열을 교환할 수 있다.</p>\n<ul>\n<li>set_index : 기존의 행 인덱스를 제거하고 데이터 열 중 하나를 인덱스로 설정</li>\n<li>reset_index : 기존의 행 인덱스를 제거하고 인덱스를 데이터 열로 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\nnp<span class=\"token punctuation\">.</span>vstack<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ABCDE'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">array([[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;],\n       [&#39;0.67&#39;, &#39;0.21&#39;, &#39;0.13&#39;, &#39;0.32&#39;, &#39;0.36&#39;],\n       [&#39;0.57&#39;, &#39;0.44&#39;, &#39;0.99&#39;, &#39;0.1&#39;, &#39;0.21&#39;],\n       [&#39;0.16&#39;, &#39;0.65&#39;, &#39;0.25&#39;, &#39;0.47&#39;, &#39;0.24&#39;]], dtype=&#39;&lt;U32&#39;)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\nnp<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\ndf1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>\n    np<span class=\"token punctuation\">.</span>vstack<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ABCDE'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span> \n    columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"C1\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"C2\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"C3\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"C4\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf1</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>C1</th>\n      <th>C2</th>\n      <th>C3</th>\n      <th>C4</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>0.55</td>\n      <td>0.65</td>\n      <td>0.79</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>0.72</td>\n      <td>0.44</td>\n      <td>0.53</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>0.6</td>\n      <td>0.89</td>\n      <td>0.57</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>0.54</td>\n      <td>0.96</td>\n      <td>0.93</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>0.42</td>\n      <td>0.38</td>\n      <td>0.07</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">set_index</code> 명령으로 C1열을 인덱스로 설정할 수 있다. 이때 기존 인덱스는 없어진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2 <span class=\"token operator\">=</span> df1<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">\"C1\"</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>C2</th>\n      <th>C3</th>\n      <th>C4</th>\n    </tr>\n    <tr>\n      <th>C1</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>A</th>\n      <td>0.55</td>\n      <td>0.65</td>\n      <td>0.79</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>0.72</td>\n      <td>0.44</td>\n      <td>0.53</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td>0.6</td>\n      <td>0.89</td>\n      <td>0.57</td>\n    </tr>\n    <tr>\n      <th>D</th>\n      <td>0.54</td>\n      <td>0.96</td>\n      <td>0.93</td>\n    </tr>\n    <tr>\n      <th>E</th>\n      <td>0.42</td>\n      <td>0.38</td>\n      <td>0.07</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>마찬가지로 C2열을 인덱스로 지정하면 기존의 인덱스는 사라진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">\"C2\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>C3</th>\n      <th>C4</th>\n    </tr>\n    <tr>\n      <th>C2</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0.55</th>\n      <td>0.65</td>\n      <td>0.79</td>\n    </tr>\n    <tr>\n      <th>0.72</th>\n      <td>0.44</td>\n      <td>0.53</td>\n    </tr>\n    <tr>\n      <th>0.6</th>\n      <td>0.89</td>\n      <td>0.57</td>\n    </tr>\n    <tr>\n      <th>0.54</th>\n      <td>0.96</td>\n      <td>0.93</td>\n    </tr>\n    <tr>\n      <th>0.42</th>\n      <td>0.38</td>\n      <td>0.07</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">reset_index</code> 명령으로 인덱스를 보통의 자료형으로 바꿀 수도 있다. 이 때 인덱스 열은 자료형의 가장 선두로 삽입된다. DataFrame의 인덱스는 정수로 된 디폴트 인덱스로 바뀌게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>C1</th>\n      <th>C2</th>\n      <th>C3</th>\n      <th>C4</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>0.55</td>\n      <td>0.65</td>\n      <td>0.79</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>0.72</td>\n      <td>0.44</td>\n      <td>0.53</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>0.6</td>\n      <td>0.89</td>\n      <td>0.57</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>0.54</td>\n      <td>0.96</td>\n      <td>0.93</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>0.42</td>\n      <td>0.38</td>\n      <td>0.07</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">reset_index</code> 명령 사용시에 <code class=\"language-text\">drop=True</code>로 설정하면 인덱스 열을 보통의 자료열로 올리는 것이 아니라 그냥 버리게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span>drop<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>C2</th>\n      <th>C3</th>\n      <th>C4</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0.55</td>\n      <td>0.65</td>\n      <td>0.79</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>0.72</td>\n      <td>0.44</td>\n      <td>0.53</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>0.6</td>\n      <td>0.89</td>\n      <td>0.57</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.54</td>\n      <td>0.96</td>\n      <td>0.93</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>0.42</td>\n      <td>0.38</td>\n      <td>0.07</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"다중-인덱스\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91-%EC%9D%B8%EB%8D%B1%EC%8A%A4\" aria-label=\"다중 인덱스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중 인덱스</h2>\n<p>행이나 열에 여러 계층을 가지는 인덱스 즉, <strong>다중 인덱스(multi-index)</strong>를 설정할 수도 있다. DataFrame을 생성할 때 <code class=\"language-text\">columns</code>인수에 다음 예제처럼 리스트의 리스트(행렬) 형태로 인덱스를 넣으면 다중 열 인덱스를 가지게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\ndf3 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>\n    np<span class=\"token punctuation\">.</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">[</span><span class=\"token string\">\"C1\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"C2\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"C1\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"C2\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span>\ndf3</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>C1</th>\n      <th>C2</th>\n      <th>C1</th>\n      <th>C2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>다중 인덱스는 이름을 지정하면 더 편리하게 사용할 수 있다. 열 인덱스들의 이름 지정은 <code class=\"language-text\">columns</code>객체의 <code class=\"language-text\">names</code>속성에 리스트를 넣어서 지정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">.</span>names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Cidx1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Cidx2\"</span><span class=\"token punctuation\">]</span>\ndf3</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th>Cidx1</th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th>Cidx2</th>\n      <th>C1</th>\n      <th>C2</th>\n      <th>C1</th>\n      <th>C2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>마찬가지로 DataFrame을 생성할 때 <code class=\"language-text\">index</code> 인수에 리스트의 리스트(행렬) 형태로 인덱스를 넣으면 다중 (행) 인덱스를 가진다. 행 인덱스들의 이름 지정은 <code class=\"language-text\">index</code> 객체의 <code class=\"language-text\">names</code> 속성에 리스트를 넣어서 지정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\ndf4 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                   columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                            <span class=\"token punctuation\">[</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"D\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"D\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                   index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"M\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"M\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"M\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"F\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"F\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"F\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                          <span class=\"token punctuation\">[</span><span class=\"token string\">\"id_\"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf4<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">.</span>names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Cidx1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Cidx2\"</span><span class=\"token punctuation\">]</span>\ndf4<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Ridx1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Ridx2\"</span><span class=\"token punctuation\">]</span>\ndf4</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th>Cidx1</th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>Cidx2</th>\n      <th>C</th>\n      <th>D</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th>Ridx2</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">M</th>\n      <th>id_1</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">F</th>\n      <th>id_1</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-2.55</td>\n      <td>0.65</td>\n      <td>0.86</td>\n      <td>-0.74</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"행-인덱스와-열-인덱스-교환\" style=\"position:relative;\"><a href=\"#%ED%96%89-%EC%9D%B8%EB%8D%B1%EC%8A%A4%EC%99%80-%EC%97%B4-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EA%B5%90%ED%99%98\" aria-label=\"행 인덱스와 열 인덱스 교환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>행 인덱스와 열 인덱스 교환</h2>\n<p><code class=\"language-text\">stack</code> 명령이나 <code class=\"language-text\">unstack</code> 명령을 쓰면 열 인덱스를 행 인덱스로 바꾸거나 반대로 행 인덱스를 열 인덱스로 바꿀 수 있다.</p>\n<ul>\n<li><code class=\"language-text\">stack()</code> : 열 인덱스 -> 행 인덱스로 변환</li>\n<li><code class=\"language-text\">unstack()</code> : 행 인덱스 -> 열 인덱스로 변환</li>\n</ul>\n<p><code class=\"language-text\">stack</code> 명령을 실행하면 열 인덱스가 반시계 방향으로 90도 회전한 것과 비슷한 모양이 된다. 마찬가지로 unstack 명령을 실행하면 행 인덱스가 시계 방향으로 90도 회전한 것과 비슷하다. 인덱스를 지정할 때는 문자열 이름과 순서를 표시하는 숫자 인덱스를 모두 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">(</span><span class=\"token string\">\"Cidx1\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>Cidx2</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th>Ridx2</th>\n      <th>Cidx1</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"6\" valign=\"top\">M</th>\n      <th rowspan=\"2\" valign=\"top\">id_1</th>\n      <th>A</th>\n      <td>1.76</td>\n      <td>0.40</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_2</th>\n      <th>A</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_3</th>\n      <th>A</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th rowspan=\"6\" valign=\"top\">F</th>\n      <th rowspan=\"2\" valign=\"top\">id_1</th>\n      <th>A</th>\n      <td>0.76</td>\n      <td>0.12</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_2</th>\n      <th>A</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_3</th>\n      <th>A</th>\n      <td>-2.55</td>\n      <td>0.65</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>0.86</td>\n      <td>-0.74</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>Cidx1</th>\n      <th>A</th>\n      <th>B</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th>Ridx2</th>\n      <th>Cidx2</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"6\" valign=\"top\">M</th>\n      <th rowspan=\"2\" valign=\"top\">id_1</th>\n      <th>C</th>\n      <td>1.76</td>\n      <td>0.98</td>\n    </tr>\n    <tr>\n      <th>D</th>\n      <td>0.40</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_2</th>\n      <th>C</th>\n      <td>1.87</td>\n      <td>0.95</td>\n    </tr>\n    <tr>\n      <th>D</th>\n      <td>-0.98</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_3</th>\n      <th>C</th>\n      <td>-0.10</td>\n      <td>0.14</td>\n    </tr>\n    <tr>\n      <th>D</th>\n      <td>0.41</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th rowspan=\"6\" valign=\"top\">F</th>\n      <th rowspan=\"2\" valign=\"top\">id_1</th>\n      <th>C</th>\n      <td>0.76</td>\n      <td>0.44</td>\n    </tr>\n    <tr>\n      <th>D</th>\n      <td>0.12</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_2</th>\n      <th>C</th>\n      <td>1.49</td>\n      <td>0.31</td>\n    </tr>\n    <tr>\n      <th>D</th>\n      <td>-0.21</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_3</th>\n      <th>C</th>\n      <td>-2.55</td>\n      <td>0.86</td>\n    </tr>\n    <tr>\n      <th>D</th>\n      <td>0.65</td>\n      <td>-0.74</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4<span class=\"token punctuation\">.</span>unstack<span class=\"token punctuation\">(</span><span class=\"token string\">\"Ridx2\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th>Cidx1</th>\n      <th colspan=\"6\" halign=\"left\">A</th>\n      <th colspan=\"6\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th>Cidx2</th>\n      <th colspan=\"3\" halign=\"left\">C</th>\n      <th colspan=\"3\" halign=\"left\">D</th>\n      <th colspan=\"3\" halign=\"left\">C</th>\n      <th colspan=\"3\" halign=\"left\">D</th>\n    </tr>\n    <tr>\n      <th>Ridx2</th>\n      <th>id_1</th>\n      <th>id_2</th>\n      <th>id_3</th>\n      <th>id_1</th>\n      <th>id_2</th>\n      <th>id_3</th>\n      <th>id_1</th>\n      <th>id_2</th>\n      <th>id_3</th>\n      <th>id_1</th>\n      <th>id_2</th>\n      <th>id_3</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>F</th>\n      <td>0.76</td>\n      <td>1.49</td>\n      <td>-2.55</td>\n      <td>0.12</td>\n      <td>-0.21</td>\n      <td>0.65</td>\n      <td>0.44</td>\n      <td>0.31</td>\n      <td>0.86</td>\n      <td>0.33</td>\n      <td>-0.85</td>\n      <td>-0.74</td>\n    </tr>\n    <tr>\n      <th>M</th>\n      <td>1.76</td>\n      <td>1.87</td>\n      <td>-0.10</td>\n      <td>0.40</td>\n      <td>-0.98</td>\n      <td>0.41</td>\n      <td>0.98</td>\n      <td>0.95</td>\n      <td>0.14</td>\n      <td>2.24</td>\n      <td>-0.15</td>\n      <td>1.45</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4<span class=\"token punctuation\">.</span>unstack<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th>Cidx1</th>\n      <th colspan=\"4\" halign=\"left\">A</th>\n      <th colspan=\"4\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th>Cidx2</th>\n      <th colspan=\"2\" halign=\"left\">C</th>\n      <th colspan=\"2\" halign=\"left\">D</th>\n      <th colspan=\"2\" halign=\"left\">C</th>\n      <th colspan=\"2\" halign=\"left\">D</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th>F</th>\n      <th>M</th>\n      <th>F</th>\n      <th>M</th>\n      <th>F</th>\n      <th>M</th>\n      <th>F</th>\n      <th>M</th>\n    </tr>\n    <tr>\n      <th>Ridx2</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>id_1</th>\n      <td>0.76</td>\n      <td>1.76</td>\n      <td>0.12</td>\n      <td>0.40</td>\n      <td>0.44</td>\n      <td>0.98</td>\n      <td>0.33</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.49</td>\n      <td>1.87</td>\n      <td>-0.21</td>\n      <td>-0.98</td>\n      <td>0.31</td>\n      <td>0.95</td>\n      <td>-0.85</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-2.55</td>\n      <td>-0.10</td>\n      <td>0.65</td>\n      <td>0.41</td>\n      <td>0.86</td>\n      <td>0.14</td>\n      <td>-0.74</td>\n      <td>1.45</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"다중-인덱스가-있는-경우-인덱싱\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91-%EC%9D%B8%EB%8D%B1%EC%8A%A4%EA%B0%80-%EC%9E%88%EB%8A%94-%EA%B2%BD%EC%9A%B0-%EC%9D%B8%EB%8D%B1%EC%8B%B1\" aria-label=\"다중 인덱스가 있는 경우 인덱싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중 인덱스가 있는 경우 인덱싱</h2>\n<p>DataFrame이 다중 인덱스를 가지는 경우에는 인덱스가 하나의 라벨이나 숫자가 아니라 <code class=\"language-text\">()</code>로 둘러싸인 튜플이 되어야 한다. 예를 들어 앞에서 만든 <code class=\"language-text\">df3</code> DataFrame의 경우 다음과 같이 인덱싱할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th>Cidx1</th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th>Cidx2</th>\n      <th>C1</th>\n      <th>C2</th>\n      <th>C1</th>\n      <th>C2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"C1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    0.98\n1    0.95\n2    0.14\n3    0.44\n4    0.31\nName: (B, C1), dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"C1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0.98</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"C1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">100</span>\ndf3</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th>Cidx1</th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th>Cidx2</th>\n      <th>C1</th>\n      <th>C2</th>\n      <th>C1</th>\n      <th>C2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>100.00</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>만약 하나의 레벨 값만 넣으면 다중 인덱스 중에서 가장 상위의 값을 지정한 것으로 본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3<span class=\"token punctuation\">[</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>Cidx2</th>\n      <th>C1</th>\n      <th>C2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1.76</td>\n      <td>0.40</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.76</td>\n      <td>0.12</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">df4</code> DataFrame은 다음과 같이 인덱싱할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th>Cidx1</th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>Cidx2</th>\n      <th>C</th>\n      <th>D</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th>Ridx2</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">M</th>\n      <th>id_1</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">F</th>\n      <th>id_1</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-2.55</td>\n      <td>0.65</td>\n      <td>0.86</td>\n      <td>-0.74</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Ridx1  Ridx2\nM      id_1     1.76\n       id_2     1.87\n       id_3    -0.10\nF      id_1     0.76\n       id_2     1.49\n       id_3    -2.55\nName: (A, C), dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"M\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"id_1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Cidx1  Cidx2\nA      C        1.76\n       D        0.40\nB      C        0.98\n       D        2.24\nName: (M, id_1), dtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"All\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"All\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df4<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ndf4</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th>Cidx1</th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>Cidx2</th>\n      <th>C</th>\n      <th>D</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th>Ridx2</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">M</th>\n      <th>id_1</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">F</th>\n      <th>id_1</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-2.55</td>\n      <td>0.65</td>\n      <td>0.86</td>\n      <td>-0.74</td>\n    </tr>\n    <tr>\n      <th>All</th>\n      <th>All</th>\n      <td>6.46</td>\n      <td>0.78</td>\n      <td>7.36</td>\n      <td>4.56</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"다중-인덱스의-인덱스-순서-교환\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91-%EC%9D%B8%EB%8D%B1%EC%8A%A4%EC%9D%98-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%88%9C%EC%84%9C-%EA%B5%90%ED%99%98\" aria-label=\"다중 인덱스의 인덱스 순서 교환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중 인덱스의 인덱스 순서 교환</h2>\n<p>다중 인덱스의 인덱스 순서를 바꾸고 싶으면 <code class=\"language-text\">swaplevel</code> 명령을 사용한다.</p>\n<ul>\n<li>`swaplevel(i, j, axis)</li>\n</ul>\n<p><code class=\"language-text\">i</code> 와 <code class=\"language-text\">j</code>는 교환하고자 하는 인덱스 라벨(혹은 인덱스 번호)이고 <code class=\"language-text\">axis</code>는 0일 때 행 인덱스, 1일때는 열 인덱스를 뜻한다.(기본값은 0)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df5 <span class=\"token operator\">=</span> df4<span class=\"token punctuation\">.</span>swaplevel<span class=\"token punctuation\">(</span><span class=\"token string\">\"Ridx1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Ridx2\"</span><span class=\"token punctuation\">)</span>\ndf5</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th>Cidx1</th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>Cidx2</th>\n      <th>C</th>\n      <th>D</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n    <tr>\n      <th>Ridx2</th>\n      <th>Ridx1</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>id_1</th>\n      <th>M</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <th>M</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <th>M</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th>id_1</th>\n      <th>F</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <th>F</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <th>F</th>\n      <td>-2.55</td>\n      <td>0.65</td>\n      <td>0.86</td>\n      <td>-0.74</td>\n    </tr>\n    <tr>\n      <th>All</th>\n      <th>All</th>\n      <td>6.46</td>\n      <td>0.78</td>\n      <td>7.36</td>\n      <td>4.56</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df6 <span class=\"token operator\">=</span> df4<span class=\"token punctuation\">.</span>swaplevel<span class=\"token punctuation\">(</span><span class=\"token string\">\"Cidx1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Cidx2\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\ndf6</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th>Cidx2</th>\n      <th>C</th>\n      <th>D</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>Cidx1</th>\n      <th>A</th>\n      <th>A</th>\n      <th>B</th>\n      <th>B</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th>Ridx2</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">M</th>\n      <th>id_1</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">F</th>\n      <th>id_1</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-2.55</td>\n      <td>0.65</td>\n      <td>0.86</td>\n      <td>-0.74</td>\n    </tr>\n    <tr>\n      <th>All</th>\n      <th>All</th>\n      <td>6.46</td>\n      <td>0.78</td>\n      <td>7.36</td>\n      <td>4.56</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"다중-인덱스가-있는-경우의-정렬\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91-%EC%9D%B8%EB%8D%B1%EC%8A%A4%EA%B0%80-%EC%9E%88%EB%8A%94-%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%A0%95%EB%A0%AC\" aria-label=\"다중 인덱스가 있는 경우의 정렬 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중 인덱스가 있는 경우의 정렬</h2>\n<p>다중 인덱스가 있는 데이터프레임을 <code class=\"language-text\">sort_index</code>로 정렬할 때는 <code class=\"language-text\">level</code> 인수를 사용하여 어떤 인덱스를 기준으로 정렬하는지 알려주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df5<span class=\"token punctuation\">.</span>sort_index<span class=\"token punctuation\">(</span>level<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th>Cidx1</th>\n      <th colspan=\"2\" halign=\"left\">A</th>\n      <th colspan=\"2\" halign=\"left\">B</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>Cidx2</th>\n      <th>C</th>\n      <th>D</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n    <tr>\n      <th>Ridx2</th>\n      <th>Ridx1</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>All</th>\n      <th>All</th>\n      <td>6.46</td>\n      <td>0.78</td>\n      <td>7.36</td>\n      <td>4.56</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_1</th>\n      <th>F</th>\n      <td>0.76</td>\n      <td>0.12</td>\n      <td>0.44</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>M</th>\n      <td>1.76</td>\n      <td>0.40</td>\n      <td>0.98</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_2</th>\n      <th>F</th>\n      <td>1.49</td>\n      <td>-0.21</td>\n      <td>0.31</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th>M</th>\n      <td>1.87</td>\n      <td>-0.98</td>\n      <td>0.95</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">id_3</th>\n      <th>F</th>\n      <td>-2.55</td>\n      <td>0.65</td>\n      <td>0.86</td>\n      <td>-0.74</td>\n    </tr>\n    <tr>\n      <th>M</th>\n      <td>-0.10</td>\n      <td>0.41</td>\n      <td>0.14</td>\n      <td>1.45</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df6<span class=\"token punctuation\">.</span>sort_index<span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> level<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead tr th {\n    text-align: left;\n}\n\n.dataframe thead tr:last-of-type th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th>Cidx2</th>\n      <th colspan=\"2\" halign=\"left\">C</th>\n      <th colspan=\"2\" halign=\"left\">D</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>Cidx1</th>\n      <th>A</th>\n      <th>B</th>\n      <th>A</th>\n      <th>B</th>\n    </tr>\n    <tr>\n      <th>Ridx1</th>\n      <th>Ridx2</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">M</th>\n      <th>id_1</th>\n      <td>1.76</td>\n      <td>0.98</td>\n      <td>0.40</td>\n      <td>2.24</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.87</td>\n      <td>0.95</td>\n      <td>-0.98</td>\n      <td>-0.15</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-0.10</td>\n      <td>0.14</td>\n      <td>0.41</td>\n      <td>1.45</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">F</th>\n      <th>id_1</th>\n      <td>0.76</td>\n      <td>0.44</td>\n      <td>0.12</td>\n      <td>0.33</td>\n    </tr>\n    <tr>\n      <th>id_2</th>\n      <td>1.49</td>\n      <td>0.31</td>\n      <td>-0.21</td>\n      <td>-0.85</td>\n    </tr>\n    <tr>\n      <th>id_3</th>\n      <td>-2.55</td>\n      <td>0.86</td>\n      <td>0.65</td>\n      <td>-0.74</td>\n    </tr>\n    <tr>\n      <th>All</th>\n      <th>All</th>\n      <td>6.46</td>\n      <td>7.36</td>\n      <td>0.78</td>\n      <td>4.56</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>출처 : 데이터사이언스 스쿨(datascienceschool.net)</p>"},{"id":"a06d2e2e-4cce-53f1-8e06-c9acc76ca0f4","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"Pandas DataFrame 데이터 조작","path":"/pandas-04","tags":["Python"],"excerpt":"Pandas는 Numpy의 2차원 배열에서 가능한 대부분의 데이터 처리가 가능하며 추가로 데이터 처리 및 변환을 위한 다양한 함수와 메서드를 제공한다.","created":"2020-10-03T00:00:00.000Z","createdPretty":"03 October, 2020","updated":"2020-10-03T00:00:00.000Z","updatedPretty":"03 October, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>Pandas는 Numpy의 2차원 배열에서 가능한 대부분의 데이터 처리가 가능하며 추가로 데이터 처리 및 변환을 위한 다양한 함수와 메서드를 제공한다.</p>\n<h2 id=\"데이터-갯수-세기\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B0%AF%EC%88%98-%EC%84%B8%EA%B8%B0\" aria-label=\"데이터 갯수 세기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 갯수 세기</h2>\n<p>가장 간단한 데이터 분석은 데이터의 갯수를 세는 것이나. <code class=\"language-text\">count</code> 메서드를 사용하는데, 주의할 점은 NaN값은 세지 않는다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd \n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\ns <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>nan\ns</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    0.0\n1    1.0\n2    2.0\n3    NaN\n4    4.0\n5    5.0\n6    6.0\n7    7.0\n8    8.0\n9    9.0\ndtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">9</code></pre></div>\n<p>데이터프레임에서는 각 열마다 별도로 데이터 갯수를 센다. 데이터에서 값이 누락된 부분을 찾을 때 유용하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\ndf <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>nan\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n      <th>2</th>\n      <th>3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>3.0</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>3.0</td>\n      <td>0.0</td>\n      <td>2.0</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3.0</td>\n      <td>2.0</td>\n      <td>4.0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>4.0</td>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    4\n1    4\n2    4\n3    3\ndtype: int64</code></pre></div>\n<h2 id=\"카테고리-값-세기\" style=\"position:relative;\"><a href=\"#%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC-%EA%B0%92-%EC%84%B8%EA%B8%B0\" aria-label=\"카테고리 값 세기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>카테고리 값 세기</h2>\n<p>Series의 값이 정수, 문자열, 카테고리 값인 경우에는 value_counts 매서드로 각각의 값이 나온 횟수를 셀 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\ns2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ns2<span class=\"token punctuation\">.</span>tail<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">95    4\n96    5\n97    2\n98    4\n99    3\ndtype: int32</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s2<span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1    22\n0    18\n4    17\n5    16\n3    14\n2    13\ndtype: int64</code></pre></div>\n<p>DataFrame에는 <code class=\"language-text\">value_counts</code> 매서드가 없으므로 각 열마다 별도 확인 해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">3.0    2\n4.0    1\n0.0    1\nName: 0, dtype: int64</code></pre></div>\n<h2 id=\"정렬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A0%AC\" aria-label=\"정렬 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정렬</h2>\n<p>데이터를 정렬하려면 <code class=\"language-text\">sort_index</code>와 <code class=\"language-text\">sord_values</code>매서드를 사용한다. <code class=\"language-text\">sort_index</code>는 인덱스 값을 기준으로, <code class=\"language-text\">sort_values</code>는 데이터 값을 기준으로 정렬한다.</p>\n<p>앞서 <code class=\"language-text\">s2</code> Series의 각 데이터 값에 따른 데이터 갯수를 보기좋게 정렬하려면 <code class=\"language-text\">sort_index</code>를 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s2<span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    18\n1    22\n2    13\n3    14\n4    17\n5    16\ndtype: int64</code></pre></div>\n<p>NaN값이 있는 경우에는 정렬하면 NaN값은 마지막에 위치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    0.0\n1    1.0\n2    2.0\n4    4.0\n5    5.0\n6    6.0\n7    7.0\n8    8.0\n9    9.0\n3    NaN\ndtype: float64</code></pre></div>\n<p>큰 수에서 작은 수로 반대방향 정렬하려면 <code class=\"language-text\">ascending=False</code>인수를 지정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">9    9.0\n8    8.0\n7    7.0\n6    6.0\n5    5.0\n4    4.0\n2    2.0\n1    1.0\n0    0.0\n3    NaN\ndtype: float64</code></pre></div>\n<p>DataFrame에서 <code class=\"language-text\">sort_values</code> 매서드를 사용하려면 <code class=\"language-text\">by</code> 인수로 정렬 기준이 되는 열을 지정해 주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>by<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n      <th>2</th>\n      <th>3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>3.0</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>3.0</td>\n      <td>0.0</td>\n      <td>2.0</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3.0</td>\n      <td>2.0</td>\n      <td>4.0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>4.0</td>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">by</code> 인수에 리스트 값을 넣으면 이 순서대로 정렬 기준이 우선순위가 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>by<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n      <th>2</th>\n      <th>3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>3.0</td>\n      <td>0.0</td>\n      <td>2.0</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>3.0</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3.0</td>\n      <td>2.0</td>\n      <td>4.0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>4.0</td>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"행열-합계\" style=\"position:relative;\"><a href=\"#%ED%96%89%EC%97%B4-%ED%95%A9%EA%B3%84\" aria-label=\"행열 합계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>행/열 합계</h2>\n<p>행과 열의 합계를 구할 때는 <code class=\"language-text\">sum(axis)</code> 매서드를 사용한다.</p>\n<ul>\n<li>행 합계 : axis=1</li>\n<li>열 합계 : axis=0 (기본값이므로 생략 가능)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\ndf2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n      <th>2</th>\n      <th>3</th>\n      <th>4</th>\n      <th>5</th>\n      <th>6</th>\n      <th>7</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>5</td>\n      <td>8</td>\n      <td>9</td>\n      <td>5</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>6</td>\n      <td>9</td>\n      <td>2</td>\n      <td>4</td>\n      <td>5</td>\n      <td>2</td>\n      <td>4</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>4</td>\n      <td>7</td>\n      <td>7</td>\n      <td>9</td>\n      <td>1</td>\n      <td>7</td>\n      <td>0</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>9</td>\n      <td>9</td>\n      <td>7</td>\n      <td>6</td>\n      <td>9</td>\n      <td>1</td>\n      <td>0</td>\n      <td>1</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    35\n1    34\n2    41\n3    42\ndtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    24\n1    33\n2    25\n3    24\n4    15\n5    10\n6     5\n7    16\ndtype: int64</code></pre></div>\n<p>행과 열의 합을 행/열에 추가해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">[</span><span class=\"token string\">'row_sum'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df2<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n      <th>2</th>\n      <th>3</th>\n      <th>4</th>\n      <th>5</th>\n      <th>6</th>\n      <th>7</th>\n      <th>row_sum</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>5</td>\n      <td>8</td>\n      <td>9</td>\n      <td>5</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>7</td>\n      <td>35</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>6</td>\n      <td>9</td>\n      <td>2</td>\n      <td>4</td>\n      <td>5</td>\n      <td>2</td>\n      <td>4</td>\n      <td>2</td>\n      <td>34</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>4</td>\n      <td>7</td>\n      <td>7</td>\n      <td>9</td>\n      <td>1</td>\n      <td>7</td>\n      <td>0</td>\n      <td>6</td>\n      <td>41</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>9</td>\n      <td>9</td>\n      <td>7</td>\n      <td>6</td>\n      <td>9</td>\n      <td>1</td>\n      <td>0</td>\n      <td>1</td>\n      <td>42</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">'col_sum'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df2<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n      <th>2</th>\n      <th>3</th>\n      <th>4</th>\n      <th>5</th>\n      <th>6</th>\n      <th>7</th>\n      <th>row_sum</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>5.0</td>\n      <td>8.0</td>\n      <td>9.0</td>\n      <td>5.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>1.0</td>\n      <td>7.0</td>\n      <td>35.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>6.0</td>\n      <td>9.0</td>\n      <td>2.0</td>\n      <td>4.0</td>\n      <td>5.0</td>\n      <td>2.0</td>\n      <td>4.0</td>\n      <td>2.0</td>\n      <td>34.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>4.0</td>\n      <td>7.0</td>\n      <td>7.0</td>\n      <td>9.0</td>\n      <td>1.0</td>\n      <td>7.0</td>\n      <td>0.0</td>\n      <td>6.0</td>\n      <td>41.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>9.0</td>\n      <td>9.0</td>\n      <td>7.0</td>\n      <td>6.0</td>\n      <td>9.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>1.0</td>\n      <td>42.0</td>\n    </tr>\n    <tr>\n      <th>col_sum</th>\n      <td>24.0</td>\n      <td>33.0</td>\n      <td>25.0</td>\n      <td>24.0</td>\n      <td>15.0</td>\n      <td>10.0</td>\n      <td>5.0</td>\n      <td>16.0</td>\n      <td>152.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"apply-변환\" style=\"position:relative;\"><a href=\"#apply-%EB%B3%80%ED%99%98\" aria-label=\"apply 변환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>apply 변환</h2>\n<p>행이나 열 단위로 더 복잡한 처리를 하고 싶을 때는 <code class=\"language-text\">apply</code> 매서드를 사용한다. 인수로 행 또는 열을 받는 함수를 <code class=\"language-text\">apply</code>매서드의 인수로 넣으면 각 열(또는 행)을 반복하여 그 함수에 적용시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'A'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'B'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'C'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ndf3</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1</td>\n      <td>2</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>3</td>\n      <td>3</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>4</td>\n      <td>1</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3</td>\n      <td>2</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>4</td>\n      <td>3</td>\n      <td>4</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>예를 들어 각 열의 최대값과 최소값의 차이를 구하고 싶으면 다음과 같은 람다 함수를 넣는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3<span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> x<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># axis=0 기본값</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A    3\nB    2\nC    4\ndtype: int64</code></pre></div>\n<p>마찬가지로 행에 대해 적용하고 싶다면 <code class=\"language-text\">axis=1</code> 인수를 추가해 주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3<span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> x<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    1\n1    2\n2    3\n3    2\n4    1\ndtype: int64</code></pre></div>\n<p>각 열에 대해 어떤값이 얼마나 사용되고 있는지 알고 싶다면 <code class=\"language-text\">value_counts</code> 함수를 넣을 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df3<span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span>pd<span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">)</span> <span class=\"token comment\"># axis=0 </span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>1.0</td>\n      <td>1.0</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>NaN</td>\n      <td>2.0</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2.0</td>\n      <td>2.0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2.0</td>\n      <td>NaN</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>1.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>NaN 값은 fillna 매서드를 사용하여 원하는 값으로 바꿀 수 있다. astype 매서드로 전체 데이터의 자료형을 바꾸는 것도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NaN은 0으로 바꾸고 값의 타입을 int로 변경</span>\ndf3<span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span>pd<span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>1</td>\n      <td>1</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>0</td>\n      <td>2</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2</td>\n      <td>2</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2</td>\n      <td>0</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"실수-값을-카테고리-값으로-변환\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%88%98-%EA%B0%92%EC%9D%84-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC-%EA%B0%92%EC%9C%BC%EB%A1%9C-%EB%B3%80%ED%99%98\" aria-label=\"실수 값을 카테고리 값으로 변환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실수 값을 카테고리 값으로 변환</h2>\n<p>실수 값을 크기 기준으로 하여 카테고리 값으로 변환하고 싶을 때는 다음과 같은 명령을 사용한다.</p>\n<ul>\n<li>cut : 실수 값의 경계선을 지정하는 경우</li>\n<li>qcut : 갯수가 똑같은 구간으로 나누는 경우</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 나이 데이터</span>\nages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">37</span><span class=\"token punctuation\">,</span> <span class=\"token number\">31</span><span class=\"token punctuation\">,</span> <span class=\"token number\">61</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">41</span><span class=\"token punctuation\">,</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">cut</code> 명령을 사용하면 실수값을 다음처럼 카테고리 값으로 바꿀 수 있다. <code class=\"language-text\">bins</code> 인수는 카테고리를 나누는 기준값이 된다. 영역을 넘는 값은 NaN으로 처리된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">bins <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span> <span class=\"token number\">99</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 카테고리 기준값</span>\nlabels <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"미성년자\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"청년\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"중년\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"장년\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"노년\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 카테고리</span>\ncats <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>cut<span class=\"token punctuation\">(</span>ages<span class=\"token punctuation\">,</span> bins<span class=\"token punctuation\">,</span> labels<span class=\"token operator\">=</span>labels<span class=\"token punctuation\">)</span>\ncats</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[NaN, &#39;미성년자&#39;, &#39;미성년자&#39;, &#39;청년&#39;, &#39;청년&#39;, ..., &#39;노년&#39;, &#39;청년&#39;, &#39;장년&#39;, &#39;중년&#39;, NaN]\nLength: 12\nCategories (5, object): [&#39;미성년자&#39; &lt; &#39;청년&#39; &lt; &#39;중년&#39; &lt; &#39;장년&#39; &lt; &#39;노년&#39;]</code></pre></div>\n<p><code class=\"language-text\">cut</code> 명령이 반환하는 값은 <code class=\"language-text\">Categorical</code> 클래스 객체이다. 이 객체는 <code class=\"language-text\">categories</code>속성으로 라벨 문자열을, <code class=\"language-text\">codes</code> 속성으로 정수로 인코딩한 카테고리 값을 가진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>cats<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pandas.core.arrays.categorical.Categorical</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">cats<span class=\"token punctuation\">.</span>categories</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Index([&#39;미성년자&#39;, &#39;청년&#39;, &#39;중년&#39;, &#39;장년&#39;, &#39;노년&#39;], dtype=&#39;object&#39;)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">cats<span class=\"token punctuation\">.</span>codes <span class=\"token comment\"># -1은 기준값에 벗어난 NaN값</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">array([-1,  0,  0,  1,  1,  3,  2,  4,  1,  3,  2, -1], dtype=int8)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df4 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>ages<span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"ages\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf4<span class=\"token punctuation\">[</span><span class=\"token string\">\"age_cat\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>cut<span class=\"token punctuation\">(</span>df4<span class=\"token punctuation\">.</span>ages<span class=\"token punctuation\">,</span> bins<span class=\"token punctuation\">,</span> labels<span class=\"token operator\">=</span>labels<span class=\"token punctuation\">)</span>\ndf4</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>ages</th>\n      <th>age_cat</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2</td>\n      <td>미성년자</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>10</td>\n      <td>미성년자</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>21</td>\n      <td>청년</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>23</td>\n      <td>청년</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>37</td>\n      <td>장년</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>31</td>\n      <td>중년</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>61</td>\n      <td>노년</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>20</td>\n      <td>청년</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>41</td>\n      <td>장년</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>32</td>\n      <td>중년</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>100</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>정말 쉽게 데이터를 정의한 카테고리기준으로 분류 하였다!</p>\n<p><code class=\"language-text\">qcut</code> 명령은 구각 경계선을 지정하지 않고 데이터 갯수가 같도록 지정한 수의 구간으로 나눈다. 예를 들어 다음 코드는 1000개의 데이터를 4개의 구간으로 나누는데 각 구간은 250개씩 데이터를 가진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\ncats <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>qcut<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> labels<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"Q1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Q2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Q3\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Q4\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ncats</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[&#39;Q2&#39;, &#39;Q1&#39;, &#39;Q2&#39;, &#39;Q3&#39;, &#39;Q1&#39;, ..., &#39;Q1&#39;, &#39;Q1&#39;, &#39;Q4&#39;, &#39;Q4&#39;, &#39;Q2&#39;]\nLength: 1000\nCategories (4, object): [&#39;Q1&#39; &lt; &#39;Q2&#39; &lt; &#39;Q3&#39; &lt; &#39;Q4&#39;]</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span>cats<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Q4    250\nQ3    250\nQ2    250\nQ1    250\ndtype: int64</code></pre></div>\n<p>성적을 비유하여 생각해보면 <code class=\"language-text\">cut</code>은 절대평가 기준이 되는 점수에 의해 분류가 되는 것이고 <code class=\"language-text\">qcut</code>은 상대평가 즉 점수의 순서대로 정렬하고 특정 수만큼씩 분류하는 것이라고 생각하면 될듯 싶다.</p>\n<p>출처 : 데이터사이언스 스쿨(datascienceschool.net)</p>"},{"id":"15ec0aac-961c-500f-986a-2ab8fa86b007","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"Pandas DataFrame 인덱싱","path":"/pandas-03","tags":["Python"],"excerpt":"DataFrame에서 특정한 데이터만 골라내는 것을 인덱싱(indexing)이라고 한다. Pandas는 numpy행렬과 같이 쉼표를 사용한 `(행 인덱스, 열 인덱스)` 형식의 2차원 인덱싱을 지원하기 위해 다음과 같은 특별한 인덱서(indexer) 속성을 제공한다.","created":"2020-10-01T00:00:00.000Z","createdPretty":"01 October, 2020","updated":"2020-10-01T00:00:00.000Z","updatedPretty":"01 October, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"dataframe-인덱싱\" style=\"position:relative;\"><a href=\"#dataframe-%EC%9D%B8%EB%8D%B1%EC%8B%B1\" aria-label=\"dataframe 인덱싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DataFrame 인덱싱</h2>\n<p>DataFrame에서 특정한 데이터만 골라내는 것을 인덱싱(indexing)이라고 한다. Pandas는 numpy행렬과 같이 쉼표를 사용한 <code class=\"language-text\">(행 인덱스, 열 인덱스)</code> 형식의 2차원 인덱싱을 지원하기 위해 다음과 같은 특별한 인덱서(indexer) 속성을 제공한다.</p>\n<ul>\n<li>loc : 라벨값 기반의 2차원 인덱싱</li>\n<li>iloc : 순서를 나타내는 정수 기반의 2차원 인덱싱</li>\n<li>at : 라벨값 기반의 2차원 인덱싱 (한개의 스카라 값만 찾는다.)</li>\n<li>iat : 순서를 나타내는 정수 기반의 2차원 인덱싱 (한개의 스칼라 값만 찾는다.)</li>\n</ul>\n<h2 id=\"loc-인덱서\" style=\"position:relative;\"><a href=\"#loc-%EC%9D%B8%EB%8D%B1%EC%84%9C\" aria-label=\"loc 인덱서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>loc 인덱서</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>행 인덱서값<span class=\"token punctuation\">]</span></code></pre></div>\n<p>또는</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>행 인덱서값<span class=\"token punctuation\">,</span> 열 인덱서값<span class=\"token punctuation\">]</span></code></pre></div>\n<p>이때 인덱싱 값은 다음중 하나이다. 행 인덱싱값은 정수 또는 행 인덱스데이터 이고 열 인덱싱값은 라벨 문자열 이다.</p>\n<ul>\n<li>인덱스데이터</li>\n<li>인덱스데이터 슬라이스</li>\n<li>인덱스데이터 리스트</li>\n<li>같은 행 인덱스를 가지는 Boolean 시리즈 (행 인덱싱의 경우)</li>\n<li>위의 값들을 반환하는 함수</li>\n</ul>\n<p>글로 정의를 하자니 확 와닿지가 않는다.</p>\n<p>데이터 프레임을 예로 들어 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\ndf <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"c\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                  columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"D\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>10</td>\n      <td>11</td>\n      <td>12</td>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>b</th>\n      <td>14</td>\n      <td>15</td>\n      <td>16</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>18</td>\n      <td>19</td>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"인덱싱값을-하나만-받는-경우\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EB%8D%B1%EC%8B%B1%EA%B0%92%EC%9D%84-%ED%95%98%EB%82%98%EB%A7%8C-%EB%B0%9B%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\"인덱싱값을 하나만 받는 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인덱싱값을 하나만 받는 경우</h2>\n<p>만약 <code class=\"language-text\">loc</code> 인덱서를 사용하면서 인덱스를 하나만 넣으면 행을 선택한다.</p>\n<p>인덱스데이터가 \"a\"인 행을 고르면 행이 Series로 출력된다. Series로 항하로 길게 출력되긴하지만 데이터를 보면 행의 데이터를 가져오고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A    10\nB    11\nC    12\nD    13\nName: a, dtype: int32</code></pre></div>\n<p>인덱스데이터 슬라이스</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"c\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>b</th>\n      <td>14</td>\n      <td>15</td>\n      <td>16</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>18</td>\n      <td>19</td>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"c\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># loc를 쓰지 않는 경우</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>b</th>\n      <td>14</td>\n      <td>15</td>\n      <td>16</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>18</td>\n      <td>19</td>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>인덱스데이터의 리스트도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"c\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># df[[\"b\", \"c\"]]  # KeyError</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>b</th>\n      <td>14</td>\n      <td>15</td>\n      <td>16</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>18</td>\n      <td>19</td>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>인덱스를 가지는 Boolean Series도 행을 선택하는 인덱싱 값으로 쓸 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>A <span class=\"token operator\">></span> <span class=\"token number\">15</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">a    False\nb    False\nc     True\nName: A, dtype: bool</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>A <span class=\"token operator\">></span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># df.A > 15 = True인 행만 가져옴</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>c</th>\n      <td>18</td>\n      <td>19</td>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>함수를 사용할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">select_rows</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> df<span class=\"token punctuation\">.</span>A <span class=\"token operator\">></span> <span class=\"token number\">15</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">select_rows<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">a    False\nb    False\nc     True\nName: A, dtype: bool</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>select_rows<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>c</th>\n      <td>18</td>\n      <td>19</td>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p><code class=\"language-text\">loc</code> 인덱서가 없는 경우에 사용했던 라벨 인덱싱이나 라벨 리스트 인덱싱은 불가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># KeyError</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># KeyError</span></code></pre></div>\n<p>원래 행 인덱스값이 정수인 경우에는 슬라이싱도 라벨 슬라이싱 방식을 따른다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"D\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>10</td>\n      <td>11</td>\n      <td>12</td>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>14</td>\n      <td>15</td>\n      <td>16</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>18</td>\n      <td>19</td>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>22</td>\n      <td>23</td>\n      <td>24</td>\n      <td>25</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>14</td>\n      <td>15</td>\n      <td>16</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>18</td>\n      <td>19</td>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>위 내용을 표로 정리하면,</p>\n\n      <div class=\"remark-sticky-table\"> \n      <div class=\"remark-sticky-table-wrapper\" style=\"width: 100%; height: 100%; overflow: auto;\">\n          <table class=\"remark-sticky-table-table\">\n      \n            \n               <thead class=\"remark-sticky-table-thead\">\n                     <tr class=\"remark-sticky-table-tr\">\n                     <th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">인덱싱 값</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">가능</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">결과</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">자료형</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">추가사항</th>\n                        </tr> \n                        </thead><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">행 인덱스값(정수)</td><td class=\"remark-sticky-table-td\">O</td><td class=\"remark-sticky-table-td\">행</td><td class=\"remark-sticky-table-td\">시리즈</td><td class=\"remark-sticky-table-td\"></td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">행 인덱스값(정수) 슬라이스</td><td class=\"remark-sticky-table-td\">O</td><td class=\"remark-sticky-table-td\">행</td><td class=\"remark-sticky-table-td\">데이터프레임</td><td class=\"remark-sticky-table-td\"><code class=\"language-text\">loc</code>가 없는 경우와 같음</td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">행 인덱스값(정수) 리스트</td><td class=\"remark-sticky-table-td\">O</td><td class=\"remark-sticky-table-td\">행</td><td class=\"remark-sticky-table-td\">데이터프레임</td><td class=\"remark-sticky-table-td\"></td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">Boolean Series</td><td class=\"remark-sticky-table-td\">O</td><td class=\"remark-sticky-table-td\">행</td><td class=\"remark-sticky-table-td\">데이터프레임</td><td class=\"remark-sticky-table-td\">시리즈의 인덱스가 데이터프레임의 행 인덱스와 같아야 한다.</td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">Boolean Series 반환 함수</td><td class=\"remark-sticky-table-td\">O</td><td class=\"remark-sticky-table-td\">행</td><td class=\"remark-sticky-table-td\">데이터프레임</td><td class=\"remark-sticky-table-td\"></td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">열 라벨</td><td class=\"remark-sticky-table-td\">X</td><td class=\"remark-sticky-table-td\"></td><td class=\"remark-sticky-table-td\"></td><td class=\"remark-sticky-table-td\"><code class=\"language-text\">loc</code>가 없는 경우에만 쓸 수 있다.</td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">열 라벨 리스트</td><td class=\"remark-sticky-table-td\">X</td><td class=\"remark-sticky-table-td\"></td><td class=\"remark-sticky-table-td\"></td><td class=\"remark-sticky-table-td\"><code class=\"language-text\">loc</code>가 없는 경우에만 쓸 수 있다.</td>\n                         </tr>\n                         </tbody>\n               \n        \n          </table>\n      </div>\n    </div>\n  \n<h2 id=\"인덱싱값을-행과-열-모두-받는-경우\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EB%8D%B1%EC%8B%B1%EA%B0%92%EC%9D%84-%ED%96%89%EA%B3%BC-%EC%97%B4-%EB%AA%A8%EB%91%90-%EB%B0%9B%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\"인덱싱값을 행과 열 모두 받는 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인덱싱값을 행과 열 모두 받는 경우</h2>\n<p>인덱싱값을 행과 열 모두 받으려면 <code class=\"language-text\">df.loc[행 인덱스, 열 인덱스]</code>와 같은 형태로 사용한다. 행 인덱스 라벨값이 <code class=\"language-text\">a</code>, 열 인덱스 라벨값이 <code class=\"language-text\">A</code>인 위치의 값을 구해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">10</code></pre></div>\n<p>인덱싱값으로 라벨 데이터의 슬라이싱 또는 리스트를 사용할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">b    14\nc    18\nName: A, dtype: int32</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A    10\nB    11\nC    12\nD    13\nName: a, dtype: int32</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"D\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>B</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>11</td>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>b</th>\n      <td>15</td>\n      <td>17</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>행 인덱스가 같은 Boolean Series 이러한 Boolean Series 반환하는 함수도 행의 인덱싱 값이 될 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>A <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"D\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>b</th>\n      <td>16</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>20</td>\n      <td>21</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"iloc-인덱서\" style=\"position:relative;\"><a href=\"#iloc-%EC%9D%B8%EB%8D%B1%EC%84%9C\" aria-label=\"iloc 인덱서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>iloc 인덱서</h2>\n<p><code class=\"language-text\">iloc</code>인덱서는 <code class=\"language-text\">loc</code>인덱서와 반대로 라벨이 아니라 순서를 나타내는 정수 인덱스만 받는다. 다른 사항은 <code class=\"language-text\">loc</code>인덱서와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">11</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">a    12\nb    16\nName: C, dtype: int32</code></pre></div>\n<p><code class=\"language-text\">loc</code>인덱서와 마찬가지로 인덱스가 하나만 들어가면 행을 선택한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A    18\nB    19\nC    20\nD    21\nName: c, dtype: int32</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>10</td>\n      <td>11</td>\n      <td>12</td>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>b</th>\n      <td>14</td>\n      <td>15</td>\n      <td>16</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>72</td>\n      <td>76</td>\n      <td>80</td>\n      <td>84</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"at-iat-인덱서\" style=\"position:relative;\"><a href=\"#at-iat-%EC%9D%B8%EB%8D%B1%EC%84%9C\" aria-label=\"at iat 인덱서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>at, iat 인덱서</h2>\n<p><code class=\"language-text\">at</code>, <code class=\"language-text\">iat</code> 인덱서는 <code class=\"language-text\">loc</code>, 'iloc` 인덱서와 비슷하지만 하나의 스칼라 값을 뽑을 때만 사용한다. 하여 빠른 인덱싱 속도가 요구되는 경우에 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>timeit df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">5.62 µs ± 87.6 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>timeit df<span class=\"token punctuation\">.</span>at<span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">3.11 µs ± 29.2 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>timeit df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">16.8 µs ± 462 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>timeit df<span class=\"token punctuation\">.</span>iat<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">14.8 µs ± 262 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)</code></pre></div>\n<p>출처 : 데이터사이언스 스쿨(datascienceschool.net)</p>"},{"id":"24a9ce6d-b473-551c-8740-db47d9d64991","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"Pandas 데이터 입출력","path":"/pandas-02","tags":["Python"],"excerpt":"Pandas는 데이터 파일을 읽어 데이터프레임으로 만들 수 있다. 다음처럼 여러 포맷을 지원한다.","created":"2020-09-27T00:00:00.000Z","createdPretty":"27 September, 2020","updated":"2020-09-27T00:00:00.000Z","updatedPretty":"27 September, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"데이터-입출력\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9E%85%EC%B6%9C%EB%A0%A5\" aria-label=\"데이터 입출력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 입출력</h2>\n<p>Pandas는 데이터 파일을 읽어 데이터프레임으로 만들 수 있다. 다음처럼 여러 포맷을 지원한다.</p>\n<ul>\n<li>CSV</li>\n<li>EXCEL</li>\n<li>HTML</li>\n<li>JSON</li>\n<li>HDFS</li>\n<li>SAS</li>\n<li>STATA</li>\n<li>SQL</li>\n</ul>\n<p>이중에서 가장 단순하지만 널리 사용되는 CSV(Comma Separated Values) 포맷 입출력에 대해 살펴보자.</p>\n<h2 id=\"writefile-명령\" style=\"position:relative;\"><a href=\"#writefile-%EB%AA%85%EB%A0%B9\" aria-label=\"writefile 명령 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>%%writefile 명령</h2>\n<p>샘플 데이터로 사용할 CSV 파일을 %%writefile 매직 명령으로 만들어보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">!rm <span class=\"token operator\">-</span>rf sample?<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>writefile sample1<span class=\"token punctuation\">.</span>csv\nc1<span class=\"token punctuation\">,</span> c2<span class=\"token punctuation\">,</span> c3\n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.11</span><span class=\"token punctuation\">,</span> one\n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.22</span><span class=\"token punctuation\">,</span> two\n<span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.33</span><span class=\"token punctuation\">,</span> three</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Overwriting sample1.csv</code></pre></div>\n<h2 id=\"csv-파일-입력\" style=\"position:relative;\"><a href=\"#csv-%ED%8C%8C%EC%9D%BC-%EC%9E%85%EB%A0%A5\" aria-label=\"csv 파일 입력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSV 파일 입력</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd \npd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'sample1.csv'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>c1</th>\n      <th>c2</th>\n      <th>c3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1</td>\n      <td>1.11</td>\n      <td>one</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2</td>\n      <td>2.22</td>\n      <td>two</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3</td>\n      <td>3.33</td>\n      <td>three</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>위에서 읽은 데이터에는 열 인덱스는 있지만 행 인덱스 정보가 없으므로 0부터 시작하는 정수 인덱스가 자동으로 추가되었다. 만야그 위의 경우와 달리 데이터 파일에 열 인덱스 정보가 없는 경우에는 <code class=\"language-text\">read_csv</code> 명령의 <code class=\"language-text\">names</code> 인수로 설정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>writefile sample2<span class=\"token punctuation\">.</span>csv\n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.11</span><span class=\"token punctuation\">,</span> one\n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.22</span><span class=\"token punctuation\">,</span> two\n<span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.33</span><span class=\"token punctuation\">,</span> three</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Writing sample2.csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'sample2.csv'</span><span class=\"token punctuation\">,</span> names<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c3'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>c1</th>\n      <th>c2</th>\n      <th>c3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1</td>\n      <td>1.11</td>\n      <td>one</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2</td>\n      <td>2.22</td>\n      <td>two</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3</td>\n      <td>3.33</td>\n      <td>three</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>만약 테이블 내의 특정한 열을 행 인덱스로 저정하고 싶으면 <code class=\"language-text\">index_col</code>인수를 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'sample1.csv'</span><span class=\"token punctuation\">,</span> index_col<span class=\"token operator\">=</span><span class=\"token string\">'c1'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>c2</th>\n      <th>c3</th>\n    </tr>\n    <tr>\n      <th>c1</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>1.11</td>\n      <td>one</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2.22</td>\n      <td>two</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3.33</td>\n      <td>three</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>확장자가 csv가 아닌 파일 즉, 데이터를 구분하는 구분자가 쉼표(Comma)가 아니면 <code class=\"language-text\">sep</code>인수를 써서 구분자를 지정해준다. 예를들면 구분자의 길이가 정해지지 않은 공백인 경우 <code class=\"language-text\">\\s+</code> 정규식 문자열을 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>writefile sample3<span class=\"token punctuation\">.</span>txt\nc1        c2        c3        c4\n<span class=\"token number\">0.179181</span> <span class=\"token operator\">-</span><span class=\"token number\">1.538472</span>  <span class=\"token number\">1.347553</span>  <span class=\"token number\">0.43381</span>\n<span class=\"token number\">1.024209</span>  <span class=\"token number\">0.087307</span> <span class=\"token operator\">-</span><span class=\"token number\">1.281997</span>  <span class=\"token number\">0.49265</span>\n<span class=\"token number\">0.417899</span> <span class=\"token operator\">-</span><span class=\"token number\">2.002308</span>  <span class=\"token number\">0.255245</span> <span class=\"token operator\">-</span><span class=\"token number\">1.10515</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Writing sample3.txt</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>read_table<span class=\"token punctuation\">(</span><span class=\"token string\">'sample3.txt'</span><span class=\"token punctuation\">,</span> sep<span class=\"token operator\">=</span><span class=\"token string\">'\\s+'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>c1</th>\n      <th>c2</th>\n      <th>c3</th>\n      <th>c4</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0.179181</td>\n      <td>-1.538472</td>\n      <td>1.347553</td>\n      <td>0.43381</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1.024209</td>\n      <td>0.087307</td>\n      <td>-1.281997</td>\n      <td>0.49265</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>0.417899</td>\n      <td>-2.002308</td>\n      <td>0.255245</td>\n      <td>-1.10515</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>자료 파일중에 건너뛰어야 할 행이 있다면 <code class=\"language-text\">skiprows</code> 인수를 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>writefile sample4<span class=\"token punctuation\">.</span>txt\n파일 제목<span class=\"token punctuation\">:</span> sample4<span class=\"token punctuation\">.</span>txt\n데이터 포맷의 설명<span class=\"token punctuation\">:</span>\nc1<span class=\"token punctuation\">,</span> c2<span class=\"token punctuation\">,</span> c3\n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.11</span><span class=\"token punctuation\">,</span> one\n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.22</span><span class=\"token punctuation\">,</span> two\n<span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.33</span><span class=\"token punctuation\">,</span> three</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Writing sample4.txt</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'sample4.txt'</span><span class=\"token punctuation\">,</span> skiprows<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>c1</th>\n      <th>c2</th>\n      <th>c3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1</td>\n      <td>1.11</td>\n      <td>one</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2</td>\n      <td>2.22</td>\n      <td>two</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3</td>\n      <td>3.33</td>\n      <td>three</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>특정한 값을 NaN으로 취급하고 싶으면 <code class=\"language-text\">na_values</code>인수에 NaN값으로 취급할 값을 넣는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>writefile sample5<span class=\"token punctuation\">.</span>csv\nc1<span class=\"token punctuation\">,</span> c2<span class=\"token punctuation\">,</span> c3\n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.11</span><span class=\"token punctuation\">,</span> one\n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> two\n누락<span class=\"token punctuation\">,</span> <span class=\"token number\">3.33</span><span class=\"token punctuation\">,</span> three</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Writing sample5.csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'sample5.csv'</span><span class=\"token punctuation\">,</span> na_values<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'누락'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>c1</th>\n      <th>c2</th>\n      <th>c3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1.0</td>\n      <td>1.11</td>\n      <td>one</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2.0</td>\n      <td></td>\n      <td>two</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>NaN</td>\n      <td>3.33</td>\n      <td>three</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<ul>\n<li>names : 열인덱스명이 없는경우 지정 가능 (,names=[['c1', 'c2', 'c3']])</li>\n<li>sep : 데이터 구분자 지정 (,sep='\\s+')</li>\n<li>skiprows : 행 건너뛰기 (,skiprows=[[0, 1]])</li>\n<li>na<em>values : 특정값을 NaN값으로 대체 (,na</em>values=[['누락']])</li>\n</ul>\n<h2 id=\"csv-파일-출력\" style=\"position:relative;\"><a href=\"#csv-%ED%8C%8C%EC%9D%BC-%EC%B6%9C%EB%A0%A5\" aria-label=\"csv 파일 출력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSV 파일 출력</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'sample6.csv'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">!cat sample6<span class=\"token punctuation\">.</span>csv  <span class=\"token comment\"># 윈도우에서는 !type sample6.csv 명령을 사용</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">,c1, c2, c3\n0,1.0, 1.11, one\n1,2.0, , two\n2,, 3.33, three</code></pre></div>\n<p>파일을 읽을때와 마찬가지로 출력할 때도 seq인수로 구분자를 바꿀 수 있다. 또 <code class=\"language-text\">na_rep</code>인수로 NaN 표시값을 바꿀 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'sample8.csv'</span><span class=\"token punctuation\">,</span> na_rep<span class=\"token operator\">=</span><span class=\"token string\">'누락'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">!cat sample8<span class=\"token punctuation\">.</span>csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">,c1, c2, c3\n0,1.0, 1.11, one\n1,2.0, , two\n2,누락, 3.33, three</code></pre></div>\n<p><code class=\"language-text\">index</code>, <code class=\"language-text\">header</code>인수를 지정하여 인덱스 및 해더 출력 여부를 저정하는 것도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"c\"</span><span class=\"token punctuation\">]</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>c1</th>\n      <th>c2</th>\n      <th>c3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>a</th>\n      <td>1.0</td>\n      <td>1.11</td>\n      <td>one</td>\n    </tr>\n    <tr>\n      <th>b</th>\n      <td>2.0</td>\n      <td></td>\n      <td>two</td>\n    </tr>\n    <tr>\n      <th>c</th>\n      <td>NaN</td>\n      <td>3.33</td>\n      <td>three</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'sample9.csv'</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>출처 : 데이터사이언스 스쿨(datascienceschool.net)</p>"},{"id":"705a43c8-1c72-5684-9c75-e734b4ba4c03","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"Pandas 소개","path":"/pandas-01","tags":["Python"],"excerpt":"Pandas 패키지는 데이터 분석을 할 때 가장 많이 쓰이는 패키지이다. 대부분의 데이터는 시계열(series)이나 표(table)의 형태로 나타낼 수 있는데 Pandas에서는 이러한 표 데이터를 다루기 위한 시리즈(Series) 클래스와 데이터프레임(DataFrame) 클래스를 제공한다.","created":"2020-09-26T00:00:00.000Z","createdPretty":"26 September, 2020","updated":"2020-09-26T00:00:00.000Z","updatedPretty":"26 September, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz3WRXW+CQBBF+f0+NSSmaY0f8clXHxvTqAhUFEhXRVnQiv6R25nRtSvVh5M7SzYnd1gn3h2x3P4IPC+yA8JVAV9pzL5zyUcE1zuBKgTzzWGJwUg5IxJHNPMlJlyXgjkb/JUWRErp1BvaTYcjD166paY7fEYKkyS7NbmTXmUsdex2hiSvENC6rf4A7nsXzXYfbquHhvuKl7cOpmkmbW35P2F9bW7IjBcKXrwmNhiFCT78WP7tRWS1tVd+JmUSfaKshFSfiRPmm/3fo9hCpZ83lCQur14KPN82oPyqr03zL7ig3+ECPaG6AAAAAElFTkSuQmCC","aspectRatio":2.840909090909091,"src":"/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png","srcSet":"/static/7ded931b1fc04adae4f34d5c9c234915/14156/cover.png 125w,\n/static/7ded931b1fc04adae4f34d5c9c234915/d6e47/cover.png 250w,\n/static/7ded931b1fc04adae4f34d5c9c234915/0853f/cover.png 500w,\n/static/7ded931b1fc04adae4f34d5c9c234915/ce627/cover.png 750w,\n/static/7ded931b1fc04adae4f34d5c9c234915/e65c5/cover.png 800w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"pandas-패키지-소개\" style=\"position:relative;\"><a href=\"#pandas-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%86%8C%EA%B0%9C\" aria-label=\"pandas 패키지 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pandas 패키지 소개</h2>\n<p>Pandas 패키지는 데이터 분석을 할 때 가장 많이 쓰이는 패키지이다. 대부분의 데이터는 시계열(series)이나 표(table)의 형태로 나타낼 수 있는데 Pandas에서는 이러한 표 데이터를 다루기 위한 시리즈(Series) 클래스와 데이터프레임(DataFrame) 클래스를 제공한다.</p>\n<h2 id=\"series\" style=\"position:relative;\"><a href=\"#series\" aria-label=\"series permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Series</h2>\n<p>Series는 numpy에서 제공하는 1차원 배열과 비슷하지만 각 데이터의 의미를 표시하는 인덱스(index)를 붙일 수 있다. 데이터 자체는 값(Value)라고 한다.</p>\n<blockquote>\n<p>Series = Value(값) + Index(인덱스)</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd</code></pre></div>\n<h2 id=\"series-생성\" style=\"position:relative;\"><a href=\"#series-%EC%83%9D%EC%84%B1\" aria-label=\"series 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Series 생성</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">9904312</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3448737</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2890451</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2466052</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">#값</span>\n    index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"인천\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"대구\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#인덱스</span>\ns</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">서울    9904312\n부산    3448737\n인천    2890451\n대구    2466052\ndtype: int64</code></pre></div>\n<p>만약 인덱스 지정 없이 Series를 만들면 Series의 인덱스는 0부터 시작하는 정수값이 된다. </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    10\n1    11\n2    12\n3    13\ndtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>index</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Index([&#39;서울&#39;, &#39;부산&#39;, &#39;인천&#39;, &#39;대구&#39;], dtype=&#39;object&#39;)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>values</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">array([9904312, 3448737,  289511,  264544], dtype=int64)</code></pre></div>\n<blockquote>\n<ul>\n<li><code class=\"language-text\">name</code> : Series 데이터의 이름</li>\n<li><code class=\"language-text\">index.name</code> : Series 인덱스의 이름</li>\n</ul>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"인구\"</span>\ns<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"도시\"</span>\ns</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">도시\n서울    9904312\n부산    3448737\n인천     289511\n대구     264544\nName: 인구, dtype: int64</code></pre></div>\n<h2 id=\"series-연산\" style=\"position:relative;\"><a href=\"#series-%EC%97%B0%EC%82%B0\" aria-label=\"series 연산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Series 연산</h2>\n<p>연산은 Series의 값에만 적용되며 인덱스 값은 변하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token operator\">/</span><span class=\"token number\">1000000</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">서울    9.904312\n부산    3.448737\n인천    2.890451\n대구    2.466052\ndtype: float64</code></pre></div>\n<h2 id=\"series-인덱싱\" style=\"position:relative;\"><a href=\"#series-%EC%9D%B8%EB%8D%B1%EC%8B%B1\" aria-label=\"series 인덱싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Series 인덱싱</h2>\n<p>인덱스 라벨을 이용한 인덱싱 또는 배열 인덱싱을 이용한 슬라이싱이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">[</span><span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(3448737, 3448737)</code></pre></div>\n<p>배열 인덱싱을 하면 자료의 순서를 바꾸거나 특정 라벨의 자료만 선택할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"대구\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">서울    9904312\n대구    2466052\ndtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">250e4</span> <span class=\"token operator\">&lt;</span> s<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">500e4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">부산    3448737\n인천    2890451\ndtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">서울    9904312\n부산    3448737\n인천    2890451\n대구    2466052\ndtype: int64\n\n\n\n\n\n부산    3448737\n인천    2890451\ndtype: int64</code></pre></div>\n<p>만약 라벨 값이 영문인 경우에는 마치 속성처럼 점(.)을 이용하여 접근할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s0 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"c\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ns0</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">a    0\nb    1\nc    2\ndtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">(</span>s0<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">,</span> s0<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(0, 1)</code></pre></div>\n<h2 id=\"series와-dictionary-자료형\" style=\"position:relative;\"><a href=\"#series%EC%99%80-dictionary-%EC%9E%90%EB%A3%8C%ED%98%95\" aria-label=\"series와 dictionary 자료형 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Series와 Dictionary 자료형</h2>\n<p>Series 객체는 라벨 값에 의해 인덱싱이 가능하므로 실질적으로 라벨 값을 키(key)로 가지는 Dictionary 자료형과 같다고 볼수 있다. 따라서 Dictionary 자료형에서 제공하는 in 연산도 가능하고 items 메서드를 이용하면 for 루프를 통해 각 원소의 key와 value에 접근할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token string\">\"서울\"</span> <span class=\"token keyword\">in</span> s</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">True</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token string\">\"대전\"</span> <span class=\"token keyword\">in</span> s</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">False</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> s<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s = %d\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">서울 = 9904312\n부산 = 3448737\n인천 = 2890451\n대구 = 2466052</code></pre></div>\n<p>또 Dictionary 객체에서 시리즈를 만들수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9631482</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3393191</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인천\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2632035</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"대전\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1490158</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ns2</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">서울    9631482\n부산    3393191\n인천    2632035\n대전    1490158\ndtype: int64</code></pre></div>\n<p>Dictionary의 원소는 순서를 가지지 않으므로 Series의 데이터에도 순서가 보장되지 않는다. 만약 순서를 정하고 싶다면 인덱스를 리스트로 지정해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9631482</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3393191</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인천\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2632035</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"대전\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1490158</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n               index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인천\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"대전\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ns2</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">부산    3393191\n서울    9631482\n인천    2632035\n대전    1490158\ndtype: int64</code></pre></div>\n<h2 id=\"인덱스-기반-연산\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EA%B8%B0%EB%B0%98-%EC%97%B0%EC%82%B0\" aria-label=\"인덱스 기반 연산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인덱스 기반 연산</h2>\n<ul>\n<li>s : 2015년 인구 증가</li>\n<li>s2 : 2010년 인구 증가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ds <span class=\"token operator\">=</span> s <span class=\"token operator\">-</span> s2\nds</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">대구         NaN\n대전         NaN\n부산     55546.0\n서울    272830.0\n인천    258416.0\ndtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">s<span class=\"token punctuation\">.</span>values <span class=\"token operator\">-</span> s2<span class=\"token punctuation\">.</span>values</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">array([ 6511121, -6182745,   258416,   975894], dtype=int64)</code></pre></div>\n<p>대구와 대전의 경우 s, s1 모두에 준재하지 않기 때문에 계산이 불가능하므로 <code class=\"language-text\">NaN</code>(Not a Number)값을 가지게 된다. 또한 <code class=\"language-text\">NaN</code> 값이 <code class=\"language-text\">float</code> 자료형에서만 가능하므로 다른 계산 결과도 모두 <code class=\"language-text\">float</code> 자료형이 되었다. <code class=\"language-text\">NaN</code>이 아닌 값을 구하려면 <code class=\"language-text\">notnull</code> 메서드를 사용하야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ds<span class=\"token punctuation\">.</span>notnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">대구    False\n대전    False\n부산     True\n서울     True\n인천     True\ndtype: bool</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ds<span class=\"token punctuation\">[</span>ds<span class=\"token punctuation\">.</span>notnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">부산     55546.0\n서울    272830.0\n인천    258416.0\ndtype: float64</code></pre></div>\n<p>인구 증가율(%)은 다음과 같이 구할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">rs <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">-</span>s2<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span>s2 <span class=\"token operator\">*</span> <span class=\"token number\">100</span>\nrs <span class=\"token operator\">=</span> rs<span class=\"token punctuation\">[</span>rs<span class=\"token punctuation\">.</span>notnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\nrs</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">부산    1.636984\n서울    2.832690\n인천    9.818107\ndtype: float64</code></pre></div>\n<h2 id=\"데이터-갱신-추가-삭제\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B0%B1%EC%8B%A0-%EC%B6%94%EA%B0%80-%EC%82%AD%EC%A0%9C\" aria-label=\"데이터 갱신 추가 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 갱신, 추가, 삭제</h2>\n<p>인덱싱을 이용하면 딕셔너리처럼 데이터를 갱신하거나 추가 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">rs<span class=\"token punctuation\">[</span><span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1.63</span>\nrs</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">부산    1.630000\n서울    2.832690\n인천    9.818107\ndtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">rs<span class=\"token punctuation\">[</span><span class=\"token string\">\"대구\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1.41</span>\nrs</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">부산    1.630000\n서울    2.832690\n인천    9.818107\n대구    1.410000\ndtype: float64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">del</span> rs<span class=\"token punctuation\">[</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 삭제</span>\nrs</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">부산    1.630000\n인천    9.818107\n대구    1.410000\ndtype: float64</code></pre></div>\n<h2 id=\"dataframe\" style=\"position:relative;\"><a href=\"#dataframe\" aria-label=\"dataframe permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DataFrame</h2>\n<p>시리즈가 1차원 벡터 데이터에 행방향 인덱스(row index)를 붙인 것이라면 데이터프레임 클래스는 2차원 행렬 데이터에 인덱스를 붙인 것과 비슷하다. 2차원이므로 각각의 행 데이터의 이름이 되는 행방향 인덱스(row index) 뿐 아니라 각각의 열 데이터의 이름이 되는 열방향 인덱스(column index)도 붙일 수 있다.</p>\n<h3 id=\"dataframe-생성\" style=\"position:relative;\"><a href=\"#dataframe-%EC%83%9D%EC%84%B1\" aria-label=\"dataframe 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DataFrame 생성</h3>\n<ol>\n<li>하나의 열이 되는 데이터를 리스트나 일차원 배열로 준비</li>\n<li>이 각각의 열에 대한 이름(라벨)을 키로 가지는 딕셔너리 생성</li>\n<li>이 데이터를 DataFrame 클래스 생성자에 넣고 열방향 인덱스는 <code class=\"language-text\">columns</code>, 행방행 인덱스는 <code class=\"language-text\">index</code> 인수로 지정</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9904312</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3448737</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2890451</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2466052</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9631482</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3393191</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2632035</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2431774</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"2005\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9762546</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3512547</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2517680</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2456016</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"2000\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9853972</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3655437</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2466338</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2473990</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"지역\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"수도권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"경상권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"수도권\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"경상권\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"2010-2015 증가율\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0.0283</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0163</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0982</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0141</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\ncolumns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"지역\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2005\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2000\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2010-2015 증가율\"</span><span class=\"token punctuation\">]</span>\nindex <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"인천\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"대구\"</span><span class=\"token punctuation\">]</span>\ndf <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span>index<span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span>columns<span class=\"token punctuation\">)</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>지역</th>\n      <th>2015</th>\n      <th>2010</th>\n      <th>2005</th>\n      <th>2000</th>\n      <th>2010-2015 증가율</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>수도권</td>\n      <td>9904312</td>\n      <td>9631482</td>\n      <td>9762546</td>\n      <td>9853972</td>\n      <td>0.0283</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>경상권</td>\n      <td>3448737</td>\n      <td>3393191</td>\n      <td>3512547</td>\n      <td>3655437</td>\n      <td>0.0163</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>수도권</td>\n      <td>2890451</td>\n      <td>2632035</td>\n      <td>2517680</td>\n      <td>2466338</td>\n      <td>0.0982</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>경상권</td>\n      <td>2466052</td>\n      <td>2431774</td>\n      <td>2456016</td>\n      <td>2473990</td>\n      <td>0.0141</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>앞에서 데이터프레임은 2차원 배열 데이터를 기반으로 한다고 했지만 사실은 공통 인덱스를 가지는 열 시리즈(column series)를 딕셔너리로 묶어놓은 것이라고 보는것이 더 정확하다. 2차원 배열 데이터는 모든 원소와 같은 자료형을 가져야 하지만 데이터프레임은 각 열(column)마다 자료형이 다를 수 있기 때문이다. 위 예제에서도 지역과 인구와 증가율은 각각 문자열, 정수, 부동소수점 실수 이다.</p>\n<p>시리즈와 마찬가지로 데이터만 접근하려면 <code class=\"language-text\">values</code>속성을 사용하고, 열방향 인덱스와 행방향 인덱스는 각각 <code class=\"language-text\">columns</code>, <code class=\"language-text\">index</code> 속성으로 접근한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>values</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">array([[&#39;수도권&#39;, 9904312, 9631482, 9762546, 9853972, 0.0283],\n       [&#39;경상권&#39;, 3448737, 3393191, 3512547, 3655437, 0.0163],\n       [&#39;수도권&#39;, 2890451, 2632035, 2517680, 2466338, 0.0982],\n       [&#39;경상권&#39;, 2466052, 2431774, 2456016, 2473990, 0.0141]], dtype=object)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>columns</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Index([&#39;지역&#39;, &#39;2015&#39;, &#39;2010&#39;, &#39;2005&#39;, &#39;2000&#39;, &#39;2010-2015 증가율&#39;], dtype=&#39;object&#39;)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>index</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Index([&#39;서울&#39;, &#39;부산&#39;, &#39;인천&#39;, &#39;대구&#39;], dtype=&#39;object&#39;)</code></pre></div>\n<p>시리즈에서 처럼 열방향 인덱스와 행방향 인덱스에 이름을 붙일수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"도시\"</span>\ndf<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"특성\"</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>특성</th>\n      <th>지역</th>\n      <th>2015</th>\n      <th>2010</th>\n      <th>2005</th>\n      <th>2000</th>\n      <th>2010-2015 증가율</th>\n    </tr>\n    <tr>\n      <th>도시</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>수도권</td>\n      <td>9904312</td>\n      <td>9631482</td>\n      <td>9762546</td>\n      <td>9853972</td>\n      <td>0.0283</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>경상권</td>\n      <td>3448737</td>\n      <td>3393191</td>\n      <td>3512547</td>\n      <td>3655437</td>\n      <td>0.0163</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>수도권</td>\n      <td>2890451</td>\n      <td>2632035</td>\n      <td>2517680</td>\n      <td>2466338</td>\n      <td>0.0982</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>경상권</td>\n      <td>2466052</td>\n      <td>2431774</td>\n      <td>2456016</td>\n      <td>2473990</td>\n      <td>0.0141</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>데이터 프레임은 전치(transpose)를 포함하여 2차원 numpy 배열이 가지는 대부분의 속성이나 메서드를 지원한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>T</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>도시</th>\n      <th>서울</th>\n      <th>부산</th>\n      <th>인천</th>\n      <th>대구</th>\n    </tr>\n    <tr>\n      <th>특성</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>지역</th>\n      <td>수도권</td>\n      <td>경상권</td>\n      <td>수도권</td>\n      <td>경상권</td>\n    </tr>\n    <tr>\n      <th>2015</th>\n      <td>9904312</td>\n      <td>3448737</td>\n      <td>2890451</td>\n      <td>2466052</td>\n    </tr>\n    <tr>\n      <th>2010</th>\n      <td>9631482</td>\n      <td>3393191</td>\n      <td>2632035</td>\n      <td>2431774</td>\n    </tr>\n    <tr>\n      <th>2005</th>\n      <td>9762546</td>\n      <td>3512547</td>\n      <td>2517680</td>\n      <td>2456016</td>\n    </tr>\n    <tr>\n      <th>2000</th>\n      <td>9853972</td>\n      <td>3655437</td>\n      <td>2466338</td>\n      <td>2473990</td>\n    </tr>\n    <tr>\n      <th>2010-2015 증가율</th>\n      <td>0.0283</td>\n      <td>0.0163</td>\n      <td>0.0982</td>\n      <td>0.0141</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h3 id=\"열-데이터의-갱신-추가-삭제\" style=\"position:relative;\"><a href=\"#%EC%97%B4-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98-%EA%B0%B1%EC%8B%A0-%EC%B6%94%EA%B0%80-%EC%82%AD%EC%A0%9C\" aria-label=\"열 데이터의 갱신 추가 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>열 데이터의 갱신, 추가, 삭제</h3>\n<p>데이터프레임은 열 시리즈의 딕셔너리로 볼수 있으므로 열 단위로 데이터를 갱신하거나 추가, 삭제할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2010-2015 증가율\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2010-2015 증가율\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>지역</th>\n      <th>2015</th>\n      <th>2010</th>\n      <th>2005</th>\n      <th>2000</th>\n      <th>2010-2015 증가율</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>수도권</td>\n      <td>9904312</td>\n      <td>9631482</td>\n      <td>9762546</td>\n      <td>9853972</td>\n      <td>2.83</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>경상권</td>\n      <td>3448737</td>\n      <td>3393191</td>\n      <td>3512547</td>\n      <td>3655437</td>\n      <td>1.63</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>수도권</td>\n      <td>2890451</td>\n      <td>2632035</td>\n      <td>2517680</td>\n      <td>2466338</td>\n      <td>9.82</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>경상권</td>\n      <td>2466052</td>\n      <td>2431774</td>\n      <td>2456016</td>\n      <td>2473990</td>\n      <td>1.41</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2005-2010 등가율\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2005\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2005\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>지역</th>\n      <th>2015</th>\n      <th>2010</th>\n      <th>2005</th>\n      <th>2000</th>\n      <th>2010-2015 증가율</th>\n      <th>2005-2010 등가율</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>수도권</td>\n      <td>9904312</td>\n      <td>9631482</td>\n      <td>9762546</td>\n      <td>9853972</td>\n      <td>2.83</td>\n      <td>-1.34</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>경상권</td>\n      <td>3448737</td>\n      <td>3393191</td>\n      <td>3512547</td>\n      <td>3655437</td>\n      <td>1.63</td>\n      <td>-3.40</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>수도권</td>\n      <td>2890451</td>\n      <td>2632035</td>\n      <td>2517680</td>\n      <td>2466338</td>\n      <td>9.82</td>\n      <td>4.54</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>경상권</td>\n      <td>2466052</td>\n      <td>2431774</td>\n      <td>2456016</td>\n      <td>2473990</td>\n      <td>1.41</td>\n      <td>-0.99</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">del</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2010-2015 증가율\"</span><span class=\"token punctuation\">]</span>\ndf</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>지역</th>\n      <th>2015</th>\n      <th>2010</th>\n      <th>2005</th>\n      <th>2000</th>\n      <th>2005-2010 등가율</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>수도권</td>\n      <td>9904312</td>\n      <td>9631482</td>\n      <td>9762546</td>\n      <td>9853972</td>\n      <td>-1.34</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>경상권</td>\n      <td>3448737</td>\n      <td>3393191</td>\n      <td>3512547</td>\n      <td>3655437</td>\n      <td>-3.40</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>수도권</td>\n      <td>2890451</td>\n      <td>2632035</td>\n      <td>2517680</td>\n      <td>2466338</td>\n      <td>4.54</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>경상권</td>\n      <td>2466052</td>\n      <td>2431774</td>\n      <td>2456016</td>\n      <td>2473990</td>\n      <td>-0.99</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h3 id=\"열-인덱싱\" style=\"position:relative;\"><a href=\"#%EC%97%B4-%EC%9D%B8%EB%8D%B1%EC%8B%B1\" aria-label=\"열 인덱싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>열 인덱싱</h3>\n<p>데이터프레임은 열 시리즈의 딕셔너리와 비슷하다고 하였다. 따라서 데이터프레임을 인덱싱 할 때도 열 라벨(column label)을 키값으로 생각하여 인덱싱을 할 수 있다. 인덱스로 라벨을 넣거나 배열형태로 넣는것도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token string\">\"지역\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># Series 반환</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">서울    수도권\n부산    경상권\n인천    수도권\n대구    경상권\nName: 지역, dtype: object</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pandas.core.series.Series</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>2010</th>\n      <th>2015</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>9631482</td>\n      <td>9904312</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>3393191</td>\n      <td>3448737</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>2632035</td>\n      <td>2890451</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>2431774</td>\n      <td>2466052</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>만약 하나의 열만 빼서 데이터프레임 자료형을 유지하고 싶다면 원소가 하나인 리스트를 써서 인덱싱 하면된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># type(df[[\"2010\"]]) => pandas.core.frame.DataFrame</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>2010</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>9631482</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>3393191</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>2632035</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>2431774</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># type(df[\"2010\"]) => pandas.core.series.Series</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">서울    9631482\n부산    3393191\n인천    2632035\n대구    2431774\nName: 2010, dtype: int64</code></pre></div>\n<p>데이터프레임의 열 인덱스가 문자열 라벨을 가지고 있는 경우에는 순서를 나타내는 정수 인덱스를 열 인덱싱에 사용할 수 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    df<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;class &#39;KeyError&#39;&gt;</code></pre></div>\n<p>다만 원래부터 문자열이 아닌 정수형 열 인덱스를 가지는 경우에는 인덱스 값으로 정수를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n\ndf2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ndf2</code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n      <th>2</th>\n      <th>3</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0</td>\n      <td>1</td>\n      <td>2</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>4</td>\n      <td>5</td>\n      <td>6</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>8</td>\n      <td>9</td>\n      <td>10</td>\n      <td>11</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0     2\n1     6\n2    10\nName: 2, dtype: int32</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df2<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>1</th>\n      <th>2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>5</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>9</td>\n      <td>10</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h3 id=\"행-인덱싱\" style=\"position:relative;\"><a href=\"#%ED%96%89-%EC%9D%B8%EB%8D%B1%EC%8B%B1\" aria-label=\"행 인덱싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>행 인덱싱</h3>\n<p>만약 행 단위로 인덱싱을 하고자 하면 항상 슬라이싱(slicing)을 해야 한다. 인덱스의 값이 문자 라벨이면 라벨 슬라이싱도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>지역</th>\n      <th>2015</th>\n      <th>2010</th>\n      <th>2005</th>\n      <th>2000</th>\n      <th>2005-2010 등가율</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>수도권</td>\n      <td>9904312</td>\n      <td>9631482</td>\n      <td>9762546</td>\n      <td>9853972</td>\n      <td>-1.34</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>지역</th>\n      <th>2015</th>\n      <th>2010</th>\n      <th>2005</th>\n      <th>2000</th>\n      <th>2005-2010 등가율</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>부산</th>\n      <td>경상권</td>\n      <td>3448737</td>\n      <td>3393191</td>\n      <td>3512547</td>\n      <td>3655437</td>\n      <td>-3.4</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"부산\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>지역</th>\n      <th>2015</th>\n      <th>2010</th>\n      <th>2005</th>\n      <th>2000</th>\n      <th>2005-2010 등가율</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>수도권</td>\n      <td>9904312</td>\n      <td>9631482</td>\n      <td>9762546</td>\n      <td>9853972</td>\n      <td>-1.34</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>경상권</td>\n      <td>3448737</td>\n      <td>3393191</td>\n      <td>3512547</td>\n      <td>3655437</td>\n      <td>-3.40</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h3 id=\"개별-데이터-인덱싱\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%B3%84-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%B8%EB%8D%B1%EC%8B%B1\" aria-label=\"개별 데이터 인덱싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개별 데이터 인덱싱</h3>\n<p>데이터프레임에서 열 라벨로 시리즈를 인덱싱하면 시리즈가 된다. 이 시리즈를 다시 행 라벨로 인덱싱하면 개발 데이터가 나온다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"서울\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">9904312</code></pre></div>\n<p>지금까지의 데이터프레임 인덱싱 방법을 정리하면 다음과 같다.</p>\n\n      <div class=\"remark-sticky-table\"> \n      <div class=\"remark-sticky-table-wrapper\" style=\"width: 100%; height: 100%; overflow: auto;\">\n          <table class=\"remark-sticky-table-table\">\n      \n            \n               <thead class=\"remark-sticky-table-thead\">\n                     <tr class=\"remark-sticky-table-tr\">\n                     <th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">인덱싱값</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">가능</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">결과</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">자료형</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">추가사항</th>\n                        </tr> \n                        </thead><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">라벨</td><td class=\"remark-sticky-table-td\">O</td><td class=\"remark-sticky-table-td\">열</td><td class=\"remark-sticky-table-td\">시리즈</td><td class=\"remark-sticky-table-td\"></td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">라벨 리스트</td><td class=\"remark-sticky-table-td\">O</td><td class=\"remark-sticky-table-td\">열</td><td class=\"remark-sticky-table-td\">데이터프레임</td><td class=\"remark-sticky-table-td\"></td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">인덱스데이터(정수)</td><td class=\"remark-sticky-table-td\">X</td><td class=\"remark-sticky-table-td\"></td><td class=\"remark-sticky-table-td\"></td><td class=\"remark-sticky-table-td\">열 라벨이 정수인 경우 라벨 인덱싱으로 인정</td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">인덱스데이터(정수 슬라이스)</td><td class=\"remark-sticky-table-td\">O</td><td class=\"remark-sticky-table-td\">행</td><td class=\"remark-sticky-table-td\">데이터프레임</td><td class=\"remark-sticky-table-td\"></td>\n                         </tr>\n                         </tbody>\n               \n        \n          </table>\n      </div>\n    </div>\n  \n<p>출처 : 데이터사이언스 스쿨(datascienceschool.net)</p>"},{"id":"b5e7e0a8-312a-51e5-9ebd-3593f9e40b99","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"NLP - 한국어 영화 리뷰 감정분석","path":"/nlp-korea-movie-review","tags":["ML-DL","ML","NLP"],"excerpt":"네이버 영화 리뷰 데이터를 이용한 긍정/부정 예측하기","created":"2020-05-24T00:00:00.000Z","createdPretty":"24 May, 2020","updated":"2020-05-24T00:00:00.000Z","updatedPretty":"24 May, 2020","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACYklEQVQozx2SS2sTYRSG51e4sGrTGE2azH3mm8kkk2SSSZM0qUlMdFG1otQLQsWqINVWrKLipYILETdiwYV4QbEgeMGNVEF3KuIPEPwB/oHHT9cHzvO857xKoGZIZzL4tkWobqespmjU6gwHfTrtJp1Ok7znIGwD4bro2TTq2Aix16ZXnWZQ72Ftt/FMjaBQRhn0pxj0OnhyYeTb6H4R4XuUwwDhmISlIq5joaa3YgpBUndZmp/j/fOPrN56zNLsJTrOkJqWI7dpA0oc+lTzNnHRo+pb1Es+7WZMa7JBPFGVtiEVoTFRMMmb49R8g/VXL/jz6wfP7r3k7MwNFncd5dzOPrFMqMTjW2RcjWajSsGzKLoGQV7gmCpF38XLpcglN+E5Bo40bkvQg2vXubOwwOvVp5zsTtExLXaLIvOTRZTd3QaTgUE3n6Me2DQaMaVykTgUtGoFKtLI1jMEngQJnR2dFiuLF7h44hSr5xbY46UJsgbznZCVvRGKYf8jG2TTKRxLkya6NHOIKjJqKfhvpWbkTJpq6QT9iYjf37/xY32dyweGnO22WJ7ez8q+LrdneihRwcOd7CFqMfWoTGQ75NQcgbyXsHW2JJOY2RSWmsbOJvDlp39++syXtSfcnRtyrH6coT7LmVjl2s4WilsqkXF90qbNVs1ksxGS8CPccoUxN0QrVNBEntGszjZVRUQTvHn0jqe373N++iD7giFHwgpX+hYLcQll1PAoRBWmBl1Eo82oX/sPMGWvMokRtLGNGCn5lFwCT03KaqmsPXzLh7WvLB++ymK/yemG4ObQ51A74i/iik3FpHalwgAAAABJRU5ErkJggg==","aspectRatio":2.314814814814815,"src":"/static/3081b292a1f8afbb61de9dd1ab205863/e8c97/cover.png","srcSet":"/static/3081b292a1f8afbb61de9dd1ab205863/14156/cover.png 125w,\n/static/3081b292a1f8afbb61de9dd1ab205863/d6e47/cover.png 250w,\n/static/3081b292a1f8afbb61de9dd1ab205863/e8c97/cover.png 460w","sizes":"(max-width: 460px) 100vw, 460px"}}}},"html":"<p>한국어 데이터에 대해서 텍스트 분석을 해보자. 아래 데이터는 한국어 분석 학습을 위해 다양한 방식으로 사용되고 있다. 여기서는 한글 분석을 위해 Konlpy를 사용하고, 텐서플로 케라스를 이용해 모델을 만들도록 하겠다.</p>\n<p><strong>데이터셋 : Naver sentiment movie corpus</strong>\n(다운로드 링크 : <a href=\"https://github.com/e9t/nsmc/\">https://github.com/e9t/nsmc/</a>)</p>\n<p>NSMC 약어까지 사용할 정도로 많이들 사용하는 데이터 인듯 싶다.</p>\n<p><strong>데이터 설명</strong></p>\n<p>영화 리뷰 중 영화당 100개의 리뷰이고 총 200,000개의 리뷰(train:15만, test:5만)</p>\n<p>1점 ~ 10점 까지의 평점 중에서 중립적인 평점(5점~8점)을 제외하고 분류를 하였다.</p>\n<ul>\n<li>부정 : 1점 ~ 4점</li>\n<li>긍정 : 9점 ~ 10점</li>\n</ul>\n<p>칼람정보: id, document, label</p>\n<ul>\n<li>id: 리뷰 아이디</li>\n<li>document: 리뷰 내용</li>\n<li>label: 레이블 (0: negative, 1: positive)</li>\n</ul>\n<p>각 파일에 대한 리뷰 갯수</p>\n<ul>\n<li>ratings.txt: All 20만</li>\n<li>ratings_test.txt: 5만</li>\n<li>ratings_train.txt: 15만</li>\n</ul>\n<p>모든 리뷰텍스트는 140자 이내이고, 각 감정 분류는 동일하게 샘플링 된다.(i.e., random guess yields 50% accuracy)</p>\n<ul>\n<li>10만개의 부정적인 리뷰</li>\n<li>10만개의 긍정적인 리뷰</li>\n<li>중립적인 리뷰는 제외</li>\n</ul>\n<h3 id=\"데이터-준비\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%80%EB%B9%84\" aria-label=\"데이터 준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 준비</h3>\n<p>다운로드 받은 데이터를 pandas를 이용해 읽어보자. 필드 구문이 탭으로 되어 있기 때문에 <code class=\"language-text\">\\t</code>로 구분자를 지정해주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n\ntrain_df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">\"data_naver_movie/ratings_train.txt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\t\"</span><span class=\"token punctuation\">)</span>\ntest_df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">\"data_naver_movie/ratings_test.txt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\t\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"데이터-전처리\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EC%B2%98%EB%A6%AC\" aria-label=\"데이터 전처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 전처리</h3>\n<p>데이터를 학습 시키기 위해 전처리를 진행해야 하는데, Konlpy를 이용해 <code class=\"language-text\">형태소 분석 및 품사 태깅</code>을 하도록 하자.</p>\n<p>영어의 경우 주어진 단어의 빈도만을 사용해서 처리해도 크게 문제는 없지만 한국어는 영어와는 달리 띄어쓰기로 의미를 구분짓기에는 한계가 있고, 리뷰 특성상 맞춤법이나 띄어쓰기가 제대로 되어있지 않는 경우가 있을 수 있기 때문에 정확한 분류를 위해서는 Konlpy를 이용하는 것이 좋다.</p>\n<blockquote>\n<p>Konlpy는 띄어쓰기 알고리즘과 정규화를 이용해서 맞춤법이 틀린 문장도 어느 정도 고쳐주면서 형태소 분석과 품사를 태깅해주는 여러 클래스를 제공하고 있다.^^!</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> konlpy<span class=\"token punctuation\">.</span>tag <span class=\"token keyword\">import</span> Okt\nokt <span class=\"token operator\">=</span> Okt<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nokt<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span><span class=\"token string\">u'흔들리는 꽃들 속에서 네 샴푸향이 느껴진거야'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[(&#39;흔들리는&#39;, &#39;Verb&#39;),\n (&#39;꽃&#39;, &#39;Noun&#39;),\n (&#39;들&#39;, &#39;Suffix&#39;),\n (&#39;속&#39;, &#39;Noun&#39;),\n (&#39;에서&#39;, &#39;Josa&#39;),\n (&#39;네&#39;, &#39;Noun&#39;),\n (&#39;샴푸&#39;, &#39;Noun&#39;),\n (&#39;향&#39;, &#39;Noun&#39;),\n (&#39;이&#39;, &#39;Josa&#39;),\n (&#39;느껴진거야&#39;, &#39;Verb&#39;)]</code></pre></div>\n<p>테스트 삼아 간단한 문장을 넣고 확인 해보면 이런 형태로 분리를 해주는 것을 알수 있다.</p>\n<p>토크나이즈 함수를 만들어 사용하도록 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">tokenize</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\">#형태소와 품사를 join</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> t <span class=\"token keyword\">in</span> okt<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">,</span> norm<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> stem<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<blockquote>\n<p>norm은 정규화, stem은 근어로 표시하기를 나타냄</p>\n</blockquote>\n<p>리뷰가 null인 경우 위 위 함수에서 오류가 발생할 수 있으니 사전에 null값 확인해보고 빈민자열로 대체하자!</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#document에 null값이 있다.</span>\ntrain_df<span class=\"token punctuation\">[</span><span class=\"token string\">'document'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> train_df<span class=\"token punctuation\">[</span><span class=\"token string\">'document'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#null값을 ''값으로 대체</span>\n\ntest_df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ntest_df<span class=\"token punctuation\">[</span><span class=\"token string\">'document'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> test_df<span class=\"token punctuation\">[</span><span class=\"token string\">'document'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#null값을 ''값으로 대체</span></code></pre></div>\n<p>이제 학습데이터와 테스트데이터를 분석하여 저장해두자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#tokenize 과정은 시간이 오래 걸릴수 있음...</span>\ntrain_docs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>tokenize<span class=\"token punctuation\">(</span>row<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> row<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> train_df<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">]</span>\ntest_docs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>tokenize<span class=\"token punctuation\">(</span>row<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> row<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> test_df<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">]</span></code></pre></div>\n<p>분석결과가 끝났으면 다음과 같은 형태로 데이터가 변형 되었을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>train_docs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>test_docs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">([&#39;아/Exclamation&#39;, &#39;더빙/Noun&#39;, &#39;../Punctuation&#39;, &#39;진짜/Noun&#39;, &#39;짜증나다/Adjective&#39;, &#39;목소리/Noun&#39;], 0)\n([&#39;굳다/Adjective&#39;, &#39;ㅋ/KoreanParticle&#39;], 1)</code></pre></div>\n<p>15만 학습데이터에 분리된 토큰 개수를 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tokens <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>t <span class=\"token keyword\">for</span> d <span class=\"token keyword\">in</span> train_docs <span class=\"token keyword\">for</span> t <span class=\"token keyword\">in</span> d<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"토큰개수:\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>tokens<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">토큰개수: 2159921</code></pre></div>\n<p>이제 이데이터를 가지고 nltk를 이용해 전처리를 한다. <code class=\"language-text\">Text</code> 클래스는 문서를 편리하게 탐색할 수 있는 다양한 기능을 제공하고 있다.</p>\n<p>여기서는 <code class=\"language-text\">vocab().most_common</code> 매서드를 이용해 데이터가 가장 자주 사용되는 단어를 가져올 때 사용하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> nltk\ntext <span class=\"token operator\">=</span> nltk<span class=\"token punctuation\">.</span>Text<span class=\"token punctuation\">(</span>tokens<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'NMSC'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#토큰개수</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">.</span>tokens<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#중복을 제외한 토큰개수</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">.</span>tokens<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#출력빈도가 높은 상위 토큰 10개</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">.</span>vocab<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>most_common<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2159921\n49894\n[(&#39;./Punctuation&#39;, 67778), (&#39;영화/Noun&#39;, 50818), (&#39;하다/Verb&#39;, 41209), (&#39;이/Josa&#39;, 38540), (&#39;보다/Verb&#39;, 38538), (&#39;의/Josa&#39;, 30188), (&#39;../Punctuation&#39;, 29055), (&#39;가/Josa&#39;, 26627), (&#39;에/Josa&#39;, 26468), (&#39;을/Josa&#39;, 23118)]</code></pre></div>\n<h3 id=\"데이터-탐색\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%90%EC%83%89\" aria-label=\"데이터 탐색 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 탐색</h3>\n<p>출력빈도가 높은 상위 토큰 10개를 matplotlib을 이용해 그래프로 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>matplotlib inline</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt\n<span class=\"token keyword\">from</span> matplotlib <span class=\"token keyword\">import</span> font_manager<span class=\"token punctuation\">,</span> rc\nplt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ntext<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1180px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5e6ea63c51a3bda8081412b5c6840e56/c83ae/korea_movie_review_plot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABRElEQVQoz62Ry0rDUBCGz8Y3qKnP5AO4bqK+mN12Ebwgbow0uBRRm3vQopvSbsTYnMuckzgTm1KkBIQe+Pnn/DP5mCTs8tztFcsy5Jx/CCHe0Kebwmz6N9uiV5yblWV5w+7HnsUliHoHBwAidn11YUmlvkoJtdbaKAAD/xcQUCn1zMZ3t/sIKQSY2hhdUQ/Bjdq6KyMn6Ar4ws6GwwNjTCExWwpVmWZoPbjt4W6g67p9bBQUFFxWpVC16d6mG+j7fq8FolffCCVJBfT6tHGlNVTUozuprTcyvQaORqM+Bp+/A6BIAv/SkktV4LpcKMAS8Ds3Pd24xmvjoIkGIFfAR+Z5nlXv6Egp3xlS9xaLxVEYhid5ng+yLBukaWqn6EmS2FmaOFkSO3EcO2FEirBObKztSRAcB0FIuf3wNDmdzeeHbNfnB3BY7E9yM0ftAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/5e6ea63c51a3bda8081412b5c6840e56/c83ae/korea_movie_review_plot.png\"\n        srcset=\"/static/5e6ea63c51a3bda8081412b5c6840e56/5a46d/korea_movie_review_plot.png 300w,\n/static/5e6ea63c51a3bda8081412b5c6840e56/0a47e/korea_movie_review_plot.png 600w,\n/static/5e6ea63c51a3bda8081412b5c6840e56/c83ae/korea_movie_review_plot.png 1180w\"\n        sizes=\"(max-width: 1180px) 100vw, 1180px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>모델을 만들기 위해 백터화를 해야 하는데, 자주 사용되는 토큰 10000개를 사용해 데이터를 백터화 하자.(원 핫 인코딩 대신 CountVectorization을 사용)</p>\n<p>문서 집합에서 단어 토큰을 생성하고 각 단어의 수를 세어 BOW(Bag of Words) 인코딩한 벡터를 만드는 역할을 한다.</p>\n<p>시간이 오래 걸리므로 100개만 해보자...</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">FREQUENCY_COUNT <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#시간적 여유가 있다면 10000개를 해보도록~</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">selected_words <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> f <span class=\"token keyword\">in</span> text<span class=\"token punctuation\">.</span>vocab<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>most_common<span class=\"token punctuation\">(</span>FREQUENCY_COUNT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>이 과정은 데이터 양이 큰 만큼 시간이 오래 걸리기 때문에 이 작업을 반복하지 않도록 태깅을 마친 후에는 json파일로 저장하는 것도 좋은 방법이다.</p>\n<p>문서에서 상위로 선택된 단어들중 몇개가 포함이 되는지를 알아야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#단어리스트 문서에서 상위 10000개들중 포함되는 단어들이 개수</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">term_frequency</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>doc<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> word <span class=\"token keyword\">in</span> selected_words<span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#문서에 들어가는 단어 개수</span>\nx_train <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>term_frequency<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> d<span class=\"token punctuation\">,</span>_ <span class=\"token keyword\">in</span> train_docs<span class=\"token punctuation\">]</span>\nx_test <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>term_frequency<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> d<span class=\"token punctuation\">,</span>_ <span class=\"token keyword\">in</span> test_docs<span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#라벨(1 or 0)</span>\ny_train <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>c <span class=\"token keyword\">for</span> _<span class=\"token punctuation\">,</span>c <span class=\"token keyword\">in</span> train_docs<span class=\"token punctuation\">]</span>\ny_test <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>c <span class=\"token keyword\">for</span> _<span class=\"token punctuation\">,</span>c <span class=\"token keyword\">in</span> test_docs<span class=\"token punctuation\">]</span></code></pre></div>\n<p>이렇게 하면 x축 데이터에는 단어들이 빈도수 정보?, y축에는 분류 결과를 깔끔하게 정리할 수 있다.</p>\n<p>이제 데이터를 float로 형 변환 시켜주면 데이터 전처리 과정은 끝~~</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">x_train <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>x_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'float32'</span><span class=\"token punctuation\">)</span>\nx_test <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>x_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'float32'</span><span class=\"token punctuation\">)</span>\n\ny_train <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>y_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'float32'</span><span class=\"token punctuation\">)</span>\ny_test <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>y_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'float32'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"데이터-모델링\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81\" aria-label=\"데이터 모델링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 모델링</h3>\n<p>텐서플로 케라스를 이용해 모델을 만들어 보자.</p>\n<p>레이어 구성은 두개의 Danse층은 64개의 유닛을 가지고 활성함수는 relu를 사용하고, 마지막층은 sigmoid 활성화 함수를 사용해 긍정 리뷰일 확률을 출력할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf\n\n<span class=\"token comment\">#레이어 구성</span>\nmodel <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">,</span> input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>FREQUENCY_COUNT<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>손실 함수는 binary_crossentropy, RMSprop 옵티마이저를 통해 경사하강법을 진행</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#학습 프로세스 설정</span>\nmodel<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>optimizer<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>optimizers<span class=\"token punctuation\">.</span>RMSprop<span class=\"token punctuation\">(</span>lr<span class=\"token operator\">=</span><span class=\"token number\">0.001</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    loss<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>losses<span class=\"token punctuation\">.</span>binary_crossentropy<span class=\"token punctuation\">,</span>\n    metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>metrics<span class=\"token punctuation\">.</span>binary_accuracy<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p>배치 사이즈는 512, 에포크는 10번으로 학습</p>\n<p>자, 이제 학습을 시켜 모델을 만들어 보자! 먼가 있어 보이는 진행률 상태를 볼 수 있다.:)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#학습 데이터로 학습</span>\nmodel<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>x_train<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> batch_size<span class=\"token operator\">=</span><span class=\"token number\">512</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">WARNING:tensorflow:From C:\\Users\\DESKTOP\\.conda\\envs\\nlp\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\nInstructions for updating:\nUse tf.cast instead.\nEpoch 1/10\n150000/150000 [==============================] - 17s 115us/sample - loss: 0.5611 - binary_accuracy: 0.6948s - loss: 0.6134 - binary_accuracy:  - ETA: 21s - loss: 0.6108 - binary_accuracy: 0. - ETA: 20s -  - ETA: 15s - loss: 0.5957 - binary_accuracy: 0.67 - ETA: 15s - loss: 0.5955 - binary_accuracy: 0.67 - ETA: 15s - loss: 0.5951 - binary_accura - ETA: 14s - loss: 0.5930 - binary_accuracy: 0. - ETA: 14s - loss: 0.5923 - binary_accuracy:  - ETA: 13s - loss: 0.5911 - binary_accura - ETA: 8s - loss: 0.5785 - binary_accuracy: 0. - ETA: 8s - loss: 0.5771 - binary_accuracy: 0.68 - ETA: 8s - loss: 0.5764 - binary_accuracy:  - ETA: 7s - loss: 0.5751 - binary_accura - ETA: 6s - loss: 0.5727 - binary_accuracy: - ETA: 6s - loss: 0.5713 - binary_accuracy: 0.6 - ETA: 5s - loss: 0.5708 - binary_a - ETA: 4s - loss: 0.5685 - binary_accuracy: - ETA: 4s - loss: 0.5676 - binary_accuracy: 0.691 - ETA: 4s - loss: 0.5674 - binary_a - ETA: 2s - loss: 0.5652 - binary_accuracy: 0.692 - ETA: 2s - loss: 0.5651 - binary_accurac - ETA: 1s - loss: 0.5639 - binary_accuracy - ETA: 1s - loss: 0.5628 - binary_accuracy: 0.694 - ETA: 1s - loss: 0.5627 - binary_accuracy: 0.694 - ETA: 1s - loss: 0.5626 - binary_accuracy: 0.694 - ETA: 1s - loss: 0.5623 - binary_accuracy: 0.694 - ETA: 1s - loss: 0.5623 - binary_accuracy:  - ETA: 0s - loss: 0.5615 - binary_accuracy: 0.69 - ETA: 0s - loss: 0.5612 - binary_accuracy: 0.694 - ETA: 0s - loss: 0.5613 - binary_accuracy: 0.6\nEpoch 2/10\n150000/150000 [==============================] - 12s 83us/sample - loss: 0.5313 - binary_accuracy: 0.71254s - loss: 0.5221 - binary_ac - ETA: 15s - loss: 0.5345 - binary_accuracy:  - ETA: 16s - loss: 0.5377 - binary_accuracy - ETA: 14s - loss - ETA: 13s - lo - ETA: 7s - loss: 0.5341 - binary_accuracy: 0.71 - ETA: 7s -  - ETA: 4s - loss: 0.5340 - binary_accur - ETA: 3s - loss: 0.5335 - binary_accuracy: 0.71 - ETA: 3s - loss: 0.5335 - binary_ - ETA: 2s - loss: 0.5325 - binary_accuracy: 0 - ETA: 1s - loss: 0.\nEpoch 3/10\n150000/150000 [==============================] - 13s 86us/sample - loss: 0.5236 - binary_accuracy: 0.7170s - loss: 0.5284 - binary_accuracy - ETA: 10s - los - ETA: 9s - loss: 0.5255 - binary_accurac - ETA: 9s - loss: 0.5250 - binary_accuracy: 0. - ETA: 9s - loss: 0.5255 - binary_accuracy: 0.716 - ETA: 9s - loss: 0.5254 - binary - ETA: 8s - loss: 0.5247 - binary_acc - ETA: 7s - loss: 0.5251 - binary_accuracy: 0.7 - ETA: 7s - loss: 0.5252 - binary_accuracy: 0.71 - ETA: 7s - loss: 0.5249 - binary_accuracy: 0.716 - ETA: 7s - loss: 0.5248 - binary_accuracy: 0.7 - ETA: 6s - loss: 0.5245 - binary_accuracy: - ETA: 6s - loss: 0.5246 - binary_accuracy: 0 - ETA: 5s - loss: 0.5247 - bina - ETA: 5s - loss: 0.5249 - b - ETA: 3s - loss: 0.5246 - binary_ac - ETA: 2s - loss: 0.5246 - binary_ac - ETA: 2s - loss: 0.5244 - binary_accuracy: 0.71 - ETA: 2s - loss: 0.5244 - binary_accuracy: - ETA: 1s - loss: 0.5242 - binary_accur - ETA: 1s - loss: 0.5243 - binary_accuracy: 0 - ETA: 0s - loss: 0.5243 - binary_accuracy - ETA: 0s - loss: 0.5239 - binary_accuracy: 0.7 - ETA: 0s - loss: 0.5237 - binary_accuracy: 0.7 - ETA: 0s - loss: 0.5236 - binary_accuracy: 0.71\nEpoch 4/10\n150000/150000 [==============================] - 13s 89us/sample - loss: 0.5179 - binary_accuracy: 0.7219s - loss: 0.5201 - binary_accuracy: 0 - ETA: 8s - loss: 0.5211 - binary_a - ETA: 9s - loss: 0.5208 - binary_accuracy: 0.721 - ETA: 8s - loss: 0.5201 - binary_accuracy: 0.72 - ETA: 8s - loss: 0.5210 - - ETA: 7s - loss: 0.5180 - binary_ac - ETA: 7s - loss: 0.5187 - binar - ETA: 6s - loss: 0.5186 - binary_accura - ETA: 6s - loss: 0.5183 - binary_accuracy: 0.7 - ETA: 6s - loss: 0.5182 - binary_ac - ETA: 5s - loss: 0.5179 - binary_accuracy: 0.723 - ETA: 5s - loss: 0.5179 - binary_accurac - ETA: 4s - loss: 0.5187 - binary_accuracy: 0.722 - ETA: 4s - lo\nEpoch 5/10\n150000/150000 [==============================] - 13s 87us/sample - loss: 0.5132 - binary_accuracy: 0.72531s - loss: 0.5093 - binary_accuracy: 0.72 - ETA: 11s - ETA: 9s - loss: 0.5156 - binary_accuracy: 0.7 - ETA: 9s - loss: 0.5163 - binary_accuracy:  - ETA: 9s - loss: 0.5154 - binary_accurac - ETA: 8s - loss: 0.5164 - bin - ETA: 7s - loss: 0.5156 - binary - ETA: 6s - loss: 0.5168 - binary_accuracy: 0. - ETA: 6s - loss: 0.5163 - binary_accuracy: 0.72 - ETA: 6s - loss: 0.5160 - binary_accur - ETA: 5s - loss: 0.5154 - binary_accuracy: 0.723 - ETA: 5s - loss: 0.5153 - binary_a - ETA: 4s - los - ETA: 2s - loss: 0.5136 - binary_acc - ETA: 1s - loss: 0.5135 - binary_accuracy: 0.724 - ETA: 1s - loss: 0.5134 - binary_accuracy - ETA: 1s - loss: 0.5132 - binary_ac\nEpoch 6/10\n150000/150000 [==============================] - 13s 87us/sample - loss: 0.5094 - binary_accuracy: 0.72850s - loss: 0.4971 - binary_accuracy: 0.73 - ETA: 11s - loss: 0.5000 - binary_ - ETA: 9s - loss: 0.5043 - binary_accuracy: - ETA: 10s - loss: 0.5081 - binary_accuracy:  - ETA: 9s - loss: 0.5086 - binary_a - ETA: 9s - loss: 0.5106 - binary_accuracy: 0 - ETA: 9s - loss: 0.5111 - binary_accuracy: 0.72 - ETA: 9s - loss: 0.5112 - binary_accuracy:  - ETA: 9s - loss: 0.5122 - binary_accuracy: 0.724 - ETA: 9s - loss: 0.5122 - binary_accuracy:  - ETA: 8s - loss: 0.5114 - binary_accuracy: 0. - ETA: 8s - loss: 0.5115 - binary_accuracy: 0. - ETA: 8s - loss: 0.5118 - binary_accuracy: 0 - ETA: 8s - loss: 0.5111 - binary_accuracy: 0.725 - ETA: 8s - loss: 0.5114 - - ETA: 6s - loss: 0.5099 - binary_accuracy - ETA: 6s - loss: 0.5108 - binary_accuracy - ETA: 5s - loss: 0.5100 - binary_accuracy: 0.726 - ETA: 5s - loss: 0.5102 - binary_acc - ETA: 4s - loss: 0.5102 - binary_accurac - ETA: 4s - loss: 0.5102 - binary_accuracy: 0.7 - ETA: 4s - l - ETA: 1s - loss: 0.5102 - binary_accu - ETA: 1s - loss: 0.5098 - bi - ETA: 0s - loss: 0.5094 - binary_accuracy: 0.72\nEpoch 7/10\n150000/150000 [==============================] - 12s 79us/sample - loss: 0.5064 - binary_accuracy: 0.73061s - loss: 0.5050 - binary_accura - ETA: 9s - loss: 0.5096 - binary_accuracy: 0.72 - ETA: 9s - loss: 0.5090 - binary_accuracy - ETA: 8s - loss: 0.5083 - binary_accuracy: 0.7 - ETA: 8s - loss: 0.5082 - binary_accuracy: 0.7 - ETA: 8s - loss: 0.5083 - binary_accur - ETA: 7s - loss: 0.5085 - binary_accuracy: 0 - ETA: 6s - loss: 0.5079 - binary_a - ETA: 5s - loss: 0.5079 - binary_accuracy: 0. - ETA: 5s - loss: 0.5080 - binary_accuracy:  - ETA: 5s - loss: 0.5078 - binary_accuracy - ETA: 4s - loss: 0.5081 - binary_accuracy: 0 - ETA: 4s - loss: 0.5080 - binary_accuracy: 0.730 - ETA: 4s - loss: 0.5080 - binary_accuracy: 0.730 - ETA: 4s - loss: 0.5078 - binary_accuracy:  - ETA: 4s - loss: 0.5072 - binary_accuracy: 0 - ETA: 3s - loss: 0.5072 - binary_ - ETA: 2s - lo - ETA: 0s - loss: 0.5064 - binary_accuracy: 0.730\nEpoch 8/10\n150000/150000 [==============================] - 13s 85us/sample - loss: 0.5037 - binary_accuracy: 0.73210s - loss: 0.5053 - binary_acc - ETA: 9s - loss: 0.5045 - binary_accuracy:  - ETA: 9s - loss: 0.5024 - binary_accu - ETA: 8s - loss: 0.5013 - binary_accu - ETA: 8s - loss: 0.5014 - binary_accuracy: 0.73 - ETA: 8s - loss: 0.5007 - binar - ETA: 6s - loss: 0.5013 - binary_a - ETA: 6s - loss: 0.5016 - binary_accuracy:  - ETA: 6s - loss: 0.5019 - binary_accuracy: 0.73 - ETA: 5s - loss: 0.5019 - binary_accuracy: 0 - ETA: 5s - loss: 0.5023 - binary_accuracy: 0.73 - ETA: 5s - loss: 0.5021 - binary_accuracy: 0.73 - ETA: 5s - l - ETA: 3s - loss: 0.5027 - ETA: 2s - loss: 0.5036 - binary_accuracy:  - ETA: 2s - loss: 0.5033 - binary_accuracy: 0.732 - ETA: 2s - loss: 0.5033 - binary_accuracy: 0.73 - ETA: 2s - loss: 0.5034 - binary_accur - ETA: 1s - loss: 0.5035 - binary_accuracy:  - ETA: 0s - loss: 0.5033 - binary_accuracy:  - ETA: 0s - loss: 0.5035 - binary_acc\nEpoch 9/10\n150000/150000 [==============================] - 13s 85us/sample - loss: 0.5015 - binary_accuracy: 0.7337s - loss: 0.5023 - binary_accu - ETA: 13s - loss: 0.4956 - binary_accuracy: 0. - ETA: 14s - loss: 0.4949 - binary_accu - ETA: 15s - loss: 0.4938 - binary_accuracy: 0. - ETA: 15s - loss: 0.4977 - binary_accuracy: 0.73 - ETA: 15s - loss: 0.4981 - binary_accuracy: 0. - ETA: 14s - loss:  - ETA: 12s - loss: 0.4989 - binary_accuracy - ETA: 12s - loss: 0.4992 - binary_accuracy - ETA: 11s - loss: 0.4990 - binary_ - ETA: 10s - loss: 0.4982 - binary_accuracy: 0.73 - ETA: 10s - loss: 0.4982 - binar - ETA: 9s - loss: 0.4997 - binary_accuracy: 0. - ETA: 9s - loss: 0.4997 - binary_accuracy: 0 - ETA: 8s - loss: 0.4996 - binary_accuracy: 0.7 - ETA: 8s - loss: 0.4997 - binary - ETA: 7s - loss: 0.5011 - bina - ETA: 6s - loss: 0.5014 - binary_accuracy: 0.7 - ETA: 6s - loss: 0.5011 - binary_ - ETA: 4s - loss: 0.5016 - binary_accuracy: 0.733 - ETA: 4s - loss: 0.5017 - binary_accurac - ETA: 4s - loss: 0.5018 - binary_ac - ETA: 2s - loss: 0.5022 - binary_accuracy: 0.7 - ETA: 2s - loss: 0.5023 - binary_accuracy: 0.73 - ETA: 2s - loss: 0.5021 - binary_accuracy: - ETA: 1s - loss: 0.5018 - binary_accuracy: 0 - ETA: 1s - loss: 0.5019 - binary_accuracy - ETA: 1s - loss: 0.5018 - binary_accuracy: 0.73 - ETA: 1s - loss: 0.5018 - binary_accuracy: 0.7 - ETA: 1s - loss: 0.5017 - binary_a\nEpoch 10/10\n150000/150000 [==============================] - 14s 91us/sample - loss: 0.4995 - binary_accuracy: 0.73620s - loss: 0.4948 - binary_accuracy:  - ETA: 14s - loss: 0.4965 - binary_accura - ETA: 14s - loss: 0.4980 - binary_accu - ETA: 12s - loss: 0.4973 - binary_accuracy - ETA: 12s - loss: 0.5014 - binar - ETA: 12s - loss: 0.4992 - binary_accuracy - ETA: 12s - loss: 0.4996 - binary_accuracy:  - ETA: 12s - loss: 0.5001 - binary_accuracy: 0.73 - ETA: 12s - loss: 0.5003 - binary_accura - ETA: 11s - loss: 0.5011 - b - ETA: 9s - loss: 0.5027 - binary_accuracy:  - ETA: 9s - loss: 0.5026 - binary_accuracy - ETA: 8s - loss: 0.5013 - binary_accur - ETA: 8s - loss:  - ETA: 6s - loss: 0.5013 - binary_ - ETA: 5s - loss: 0.5006 - binary_ac - ETA: 4s - loss: 0.4997 - binary_accurac - ETA: 4s - loss: 0.5001 - binary_ac - ETA: 3s - loss: 0.5001 - b - ETA: 1s - loss: 0.4989 - binary_accuracy: 0.736 - ETA: 1s - loss: 0.4989 - binary_accuracy: 0.736 - ETA: 1s - loss: 0.4988 - binary_accuracy: 0.736 - ETA: 1s - loss: 0.4989 - binary_accurac - ETA: 1s - loss: 0.4991 - binary_accuracy: 0. - ETA: 0s - loss: 0.4993 - binary_accura - ETA: 0s - loss: 0.4995 - binary_accuracy: 0.73\n\n&lt;tensorflow.python.keras.callbacks.History at 0x1967af62ac8&gt;</code></pre></div>\n<h3 id=\"모델-평가\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%ED%8F%89%EA%B0%80\" aria-label=\"모델 평가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 평가</h3>\n<p>학습데이터를 이용해 모델 학습이 끝났다면 테스트 데이터를 가지고 모델을 평가해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">results <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>evaluate<span class=\"token punctuation\">(</span>x_test<span class=\"token punctuation\">,</span> y_test<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">50000/50000 [==============================] - 12s 234us/sample - loss: 0.5198 - binary_accuracy: 0.7184s - loss: 0.5197 - b - ETA: 11s - loss: 0.5199 - binary_accuracy: 0.  - ETA: 1s - loss: 0.5198 - b</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#loss: 0.5, acc: 0.7</span>\nresults</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[0.5197769028568268, 0.71842]</code></pre></div>\n<blockquote>\n<p>여기서는 100건으로 했기때문에 좀 낮은 71%의 정확도가 나왔다. 아마 사용한 토큰수를 100개가 아닌 10000개로 했다면 85%정도의 정확도를 확인할 수 있을 것이다.</p>\n</blockquote>\n<p>팁으로 힘들게 만든 모델을 아래와 같이 저장해두고 나중에 로드해서 사용할수 있으니 꼭 알아두자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#모델을 저장해둘수도 있다.</span>\nmodel<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">'movie_review_model.h5'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 모델 불러오기</span>\n<span class=\"token comment\">#from keras.models import load_model</span>\n<span class=\"token comment\">#model = load_model('movie_review_model.h5')</span></code></pre></div>\n<h3 id=\"결과-예측하기\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC-%EC%98%88%EC%B8%A1%ED%95%98%EA%B8%B0\" aria-label=\"결과 예측하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과 예측하기</h3>\n<p>이제 리뷰 문자열을 받아 바로 결과를 예측하는 함수를 만들어 보자</p>\n<p>데이터 형태를 맞추기 위해 np.expand_dims 매서드를 이용해 array의 축을 확장 시켜주어야 한다.</p>\n<p>최종 확률이 0.5 이상이면 긍정, 그렇지 않으면 부정이라고 예측을 하겠다.</p>\n<p>대략 테스트를 먼저 해보고...</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">review <span class=\"token operator\">=</span> <span class=\"token string\">\"아주 재미 있어요\"</span>\ntoken <span class=\"token operator\">=</span> tokenize<span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">)</span>\ntoken</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[&#39;아주/Noun&#39;, &#39;재미/Noun&#39;, &#39;있다/Adjective&#39;]</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tf <span class=\"token operator\">=</span> term_frequency<span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>expand_dims<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'float32'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0.9102853536605835</code></pre></div>\n<p>테스트한 로직을 함수화해서 사용하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">predict_review</span><span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    token <span class=\"token operator\">=</span> tokenize<span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">)</span>\n    tfq <span class=\"token operator\">=</span> term_frequency<span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n    data <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>expand_dims<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>tfq<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'float32'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    score <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>score <span class=\"token operator\">></span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>review<span class=\"token punctuation\">}</span></span><span class=\"token string\"> ==> 긍정 (</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>score<span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">%)\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>review<span class=\"token punctuation\">}</span></span><span class=\"token string\"> ==> 부정 (</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>score<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">%)\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">predict_review<span class=\"token punctuation\">(</span><span class=\"token string\">\"재미 정말 없어요\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">재미 정말 없어요 ==&gt; 부정 (93%)</code></pre></div>\n<p>이제 리뷰텍스트 만으로 긍정인지 혹은 부정인지를 어느정도 판단 할 수 있게 되었다.</p>\n<p>지금까지 영화리뷰 데이터를 통해서 감정분석을 해보았는데 상품, 게임, 음식등의 사용자 의견이 담긴 데이터를 잘 모아서 활용한다면 다양한 곳에 활용할 수 있을 것이다.</p>"},{"id":"159035b6-bd91-5a14-b4ae-fe4a31f757c7","headings":[{"depth":2},{"depth":3},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"TF - 텍스트 분류","path":"/nb-tf-text-classification","tags":["ML-DL","Tensorflow","자연어처리"],"excerpt":"TF-IDF 및 Word2Vec을 이용해 텍스트를 분류해 보았다. 이번에는 텐서플로를 이용하여 텍스트를 분류 해보자.","created":"2019-08-07T00:00:00.000Z","createdPretty":"07 August, 2019","updated":"2019-08-07T00:00:00.000Z","updatedPretty":"07 August, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACq0lEQVQozx2S61MaVxiH9z9vM37oTGaMzYdOZjoxkDSYSsUoF2VBYGHZBZa9s1xXECEh1tHGOiYmveTJKx/Pztnn/G5KYGmcxz5XqzG3V2fc/XXO55sF938v6XQaLBYzJgObL3J++P7ldkXoe6RSKbRygdOBR+C0MfUqR7l9lDiy+LAYrIHXq5FAZ/xzt+LDcoTVNej3HQyjyuo84v/PF3z6uECrlijkczRrRaYDl54ALbPOSamAYnd15rOAy3cj4qHD2cTh2/0K1zGI45C6VqTTrnMa9xhEXeKRRz53wMHbfcy6ugZGbgu7rVOrFFF0/YTpxBPgGLNZYdxvwdcVy3mE4+iUS1kulkN0sZRIPKfdbvL6tyTFozwdvcREHNotDb2mCvAYpVkvMRu5a2AUWMxjj38/LcXalEuJYRgavJv3eb+MOT8bEoia9O4Ox4WsAFX5p4XrdthL/85RPoPSbT2UEojVgF7YwevWubua8p9A765j7m/OJAqPt/tvqJZzDAODzN6uAHawmiqBZ7Gb3iWzn+HNzksUQ6+IqoB+z8GSrJyHTKchi1nI5TKS1meMh67kPEDXVEJbw7ZMsXyIqeXxbYPNzU0SyRckk9soloRpNjVR4TKU0Pu9rrzaQpMyRpHJxz/HnIiybDYjs0gzn9jMRMCJmkOv5Ih8U9Rn+OHRjwJNoJRLx/iOKVsyCb02Q9mV3dG4kEydbkOgXXnIYixbbAhgcequ72cP0jKbAr5EVFLzPNrYYDvxQiw3qwLQJWxTVJVlczXigSXAEYZZJfBb5LNpIq8hWTssp74oPuLZs19E5QGWUVm3+2Rri58eP5ZSxLJrm/T8No6l03hofSytvx9LVjVCV6daKaAWD8n8kcI2y3i2zs9Pt3iV/JWmdkxZPSS185rtZJLvwzHg37et5ogAAAAASUVORK5CYII=","aspectRatio":1.7605633802816902,"src":"/static/75607baa2f5b42d177f8624f11ec54bf/b7f1a/cover.png","srcSet":"/static/75607baa2f5b42d177f8624f11ec54bf/14156/cover.png 125w,\n/static/75607baa2f5b42d177f8624f11ec54bf/d6e47/cover.png 250w,\n/static/75607baa2f5b42d177f8624f11ec54bf/b7f1a/cover.png 490w","sizes":"(max-width: 490px) 100vw, 490px"}}}},"html":"<p>지난번에 TF-IDF 및 Word2Vec을 이용해 텍스트를 분류해 보았다. 이번에는 텐서플로를 이용하여 텍스트를 분류 해보자.</p>\n<p>여기에서는 인터넷 영화 데이터베이스(Internet Movie Database)에서 수집한 50,000개의 영화 리뷰 텍스트를 담은 IMDB 데이터셋을 사용하겠다. 25,000개 리뷰는 훈련용으로, 25,000개는 테스트용으로 나뉘어져 있고, 훈련 세트와 테스트 세트의 클래스는 균형이 잡혀 있다. 즉 긍정적인 리뷰와 부정적인 리뷰의 개수가 동일하다.</p>\n<p>데이터는 Keras에서 제공하는 datasets를 이용하여 다운로드 하자.</p>\n<h2 id=\"text-classification\" style=\"position:relative;\"><a href=\"#text-classification\" aria-label=\"text classification permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Text Classification</h2>\n<p><a href=\"https://www.tensorflow.org/tutorials/keras/basic_text_classification?hl=ko\">https://www.tensorflow.org/tutorials/keras/basic_text_classification?hl=ko</a></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> __future__ <span class=\"token keyword\">import</span> absolute_import<span class=\"token punctuation\">,</span> division<span class=\"token punctuation\">,</span> print_function<span class=\"token punctuation\">,</span> unicode_literals<span class=\"token punctuation\">,</span> unicode_literals\n<span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf\n<span class=\"token keyword\">from</span> tensorflow <span class=\"token keyword\">import</span> keras</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>__version__<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>__version__<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1.13.1\n1.16.2</code></pre></div>\n<p>만약 numpy 버전이 1.16.2 이상의 버전이라면 삭제 후 버전을 지정하여 설치를 해야 한다. </p>\n<p>(imdb.load_data를 하는 도중 오류 발생)</p>\n<blockquote>\n<p>conda install numpy=1.16.2</p>\n</blockquote>\n<h3 id=\"데이터-준비\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%80%EB%B9%84\" aria-label=\"데이터 준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 준비</h3>\n<ul>\n<li>keras dataset에 있는 imdb를 사용한다.</li>\n<li>train과 test 데이터 셋은 각각 25,000개 이며 데이터는 review 자체로 구성</li>\n<li>labels는 0또는 1값으로 긍정 부정을 나타냄</li>\n</ul>\n<blockquote>\n<p>test데이터를 이용하여 해당 Review가 영화에 대해 긍정 또는 부정적인지를 예측해 본다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">imdb <span class=\"token operator\">=</span> keras<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>imdb\n\n<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">,</span> train_labels<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>test_data<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> imdb<span class=\"token punctuation\">.</span>load_data<span class=\"token punctuation\">(</span>num_words<span class=\"token operator\">=</span><span class=\"token number\">10000</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"훈련 샘플: {}, 레이블: {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>train_labels<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">훈련 샘플: 25000, 레이블: 25000</code></pre></div>\n<p>실제 데이터를 살펴보면 문자가 아닌 숫자 값이 리스트로 들어있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[1, 14, 22, 16, 43, 530, 973, 1622, 1385, 65, 458, 4468, 66, 3941, 4, 173, 36, 256, 5, 25, 100, 43, 838, 112, 50, 670, 2, 9, 35, 480, 284, 5, 150, 4, 172, 112, 167, 2, 336, 385, 39, 4, 172, 4536, 1111, 17, 546, 38, 13, 447, 4, 192, 50, 16, 6, 147, 2025, 19, 14, 22, 4, 1920, 4613, 469, 4, 22, 71, 87, 12, 16, 43, 530, 38, 76, 15, 13, 1247, 4, 22, 17, 515, 17, 12, 16, 626, 18, 2, 5, 62, 386, 12, 8, 316, 8, 106, 5, 4, 2223, 5244, 16, 480, 66, 3785, 33, 4, 130, 12, 16, 38, 619, 5, 25, 124, 51, 36, 135, 48, 25, 1415, 33, 6, 22, 12, 215, 28, 77, 52, 5, 14, 407, 16, 82, 2, 8, 4, 107, 117, 5952, 15, 256, 4, 2, 7, 3766, 5, 723, 36, 71, 43, 530, 476, 26, 400, 317, 46, 7, 4, 2, 1029, 13, 104, 88, 4, 381, 15, 297, 98, 32, 2071, 56, 26, 141, 6, 194, 7486, 18, 4, 226, 22, 21, 134, 476, 26, 480, 5, 144, 30, 5535, 18, 51, 36, 28, 224, 92, 25, 104, 4, 226, 65, 16, 38, 1334, 88, 12, 16, 283, 5, 16, 4472, 113, 103, 32, 15, 16, 5345, 19, 178, 32]</code></pre></div>\n<p>이렇게 되어 있는 이유는 추가적인 dictionary에 각 숫자와 단어가 매칭되어 있기 때문이다. 또한 아래와 같이 각각의 데이터 길이도 다른것을 확인 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(218, 189)</code></pre></div>\n<p>하지만 실제로 ML모델에 넣어줄때는 입력 길이는 모두 같아야 한다. 따라서 입력길이를 모두 동일하게 해주는 작업이 필요하다. 먼저 데이터를 보다 자세히 확인해보기 위해 각 데이터의 숫자를 단어로 치환해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 숫자로 된 값을 단어로 바꾸기 위한 dictionary를 가져온다.</span>\nword_index <span class=\"token operator\">=</span> imdb<span class=\"token punctuation\">.</span>get_word_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>\n<p>word_index</p>\n<blockquote>\n<p>{'fawn': 34701,\n'tsukino': 52006,\n'nunnery': 52007,\n'sonja': 16816,\n'vani': 63951,\n'woods': 1408,\n...\n}</p>\n</blockquote>\n</li>\n<li>\n<p>word_index.items()</p>\n<blockquote>\n<p>dict_items([('fawn', 34701), ('tsukino', 52006),\n('nunnery', 52007), ('sonja', 16816),\n('vani', 63951), ('woods', 1408),\n('spiders', 16115) ,,,</p>\n</blockquote>\n</li>\n</ul>\n<p>pad, start, unknown, unused 값을 나타내기 위해 각 value에 3을 더하고 비어있게 되는 0~3에 각각을 할당한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 처음 몇 개 인덱스는 사전에 정의되어 있습니다</span>\nword_index <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>k<span class=\"token punctuation\">:</span><span class=\"token punctuation\">(</span>v<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span>v <span class=\"token keyword\">in</span> word_index<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> \nword_index<span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;PAD>\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nword_index<span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;START>\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nword_index<span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;UNK>\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span>  <span class=\"token comment\"># unknown</span>\nword_index<span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;UNUSED>\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n\nreverse_word_index <span class=\"token operator\">=</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> word_index<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">decode_review</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>reverse_word_index<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token string\">'&lt;'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">'>?'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> text<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>실제로 필요한 dictionary는 숫자가 key이고, 단어가 value인 dictionary이기 때문에 reverse<em>word</em>index라는 dictionary를 구성하고 숫자로 이루어진 입력데이터를 단어로 치환해 주며 문장으로 출력하는 <strong>decode_review</strong> 함수를 만든다.</p>\n<h2 id=\"decode-example\" style=\"position:relative;\"><a href=\"#decode-example\" aria-label=\"decode example permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>decode example</h2>\n<ul>\n<li>[1,14,22,16,43,530...] => \"<START> &#x3C;14>? &#x3C;22>? &#x3C;16>? film flick...\"</li>\n<li>1 : <code class=\"language-text\">&lt;START&gt;</code></li>\n<li>14, 22, 16 : unknown</li>\n<li>43 : film</li>\n<li>530 : flick</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">decode_review<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;&lt;START&gt; this film was just brilliant casting location scenery story direction everyone&#39;s really suited the part they played and you could just imagine being there robert &lt;UNK&gt; is an amazing actor and now the same being director &lt;UNK&gt; father came from the same scottish island as myself so i loved the fact there was a real connection with this film the witty remarks throughout the film were great it was just brilliant so much that i bought the film as soon as it was released for &lt;UNK&gt; and would recommend it to everyone to watch and the fly fishing was amazing really cried at the end it was so sad and you know what they say if you cry at a film it must have been good and this definitely was also &lt;UNK&gt; to the two little boy&#39;s that played the &lt;UNK&gt; of norman and paul they were just brilliant children are often left out of the &lt;UNK&gt; list i think because the stars that play them all grown up are such a big profile for the whole film but these children are amazing and should be praised for what they have done don&#39;t you think the whole story was so lovely because it was true and was someone&#39;s life after all that was shared with us all&quot;</code></pre></div>\n<p>앞서 추가해주었던 <code class=\"language-text\">START</code>, <code class=\"language-text\">UNK</code> 등이 추가되어 보여지는 것을 확인할 수 있다.</p>\n<h2 id=\"데이터-전치리\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EC%B9%98%EB%A6%AC\" aria-label=\"데이터 전치리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 전치리</h2>\n<p>위에서 언급했던 각 데이터의 길이가 상이한 것을 처리한다. keras에서 제공하는 preprocessing 함수를 이용하여 모든 데이터를 최대길이로 늘려주면서 빈공간에는 위에서 dictionary에 추가적으로 넣어주었던 pad값을 이용한다.</p>\n<p>신경망에 주입하기 전에 텐서로 변환되어야 하는데, 변환하는 방법에는 몇 가지가 있다.</p>\n<ul>\n<li>원-핫 인코딩(one-hot encoding) : 정수 배열을 0과 1로 이루어진 벡터로 변환한다. 예를 들어 배열 [3, 5]을 인덱스 3과 5만 1이고 나머지는 모두 0인 10,000차원 벡터로 변환할 수 있다. 그다음 실수 벡터 데이터를 다룰 수 있는 층-Dense 층-을 신경망의 첫 번째 층으로 사용한다. 이 방법은 num<em>words * num</em>reviews 크기의 행렬이 필요하기 때문에 메모리를 많이 사용하게 된다는 단점이 있다.</li>\n<li>다른 방법으로는, 정수 배열의 길이가 모두 같도록 패딩(padding)을 추가해 max<em>length * num</em>reviews 크기의 정수 텐서를 만드는 방법이다. 이런 형태의 텐서를 다룰 수 있는 임베딩(embedding) 층을 신경망의 첫 번째 층으로 사용할 수 있다.</li>\n</ul>\n<p>여기서는 두 번째 방식을 사용해보자.</p>\n<p>영화 리뷰의 길이가 같아야 하므로 <strong>pad_sequences</strong> 함수를 사용해 길이를 맞추자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_data <span class=\"token operator\">=</span> keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>sequence<span class=\"token punctuation\">.</span>pad_sequences<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">,</span>\n                                                        value<span class=\"token operator\">=</span>word_index<span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;PAD>\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                                                        padding<span class=\"token operator\">=</span><span class=\"token string\">'post'</span><span class=\"token punctuation\">,</span>\n                                                        maxlen<span class=\"token operator\">=</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span>\n\ntest_data <span class=\"token operator\">=</span> keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>sequence<span class=\"token punctuation\">.</span>pad_sequences<span class=\"token punctuation\">(</span>test_data<span class=\"token punctuation\">,</span>\n                                                        value<span class=\"token operator\">=</span>word_index<span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;PAD>\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                                                        padding<span class=\"token operator\">=</span><span class=\"token string\">'post'</span><span class=\"token punctuation\">,</span>\n                                                        maxlen<span class=\"token operator\">=</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이 작업을 통해 변경된 것을 확인해 보면,</p>\n<ol>\n<li>train<em>data, test</em>data 길이가 동일</li>\n<li>배열내 모든 데이터가 256</li>\n<li>데이터 형태는 맨 뒤에 0값, 즉 pad값이 포함되어 있음</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(256, 256)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[   1   14   22   16   43  530  973 1622 1385   65  458 4468   66 3941\n    4  173   36  256    5   25  100   43  838  112   50  670    2    9\n   35  480  284    5  150    4  172  112  167    2  336  385   39    4\n  172 4536 1111   17  546   38   13  447    4  192   50   16    6  147\n 2025   19   14   22    4 1920 4613  469    4   22   71   87   12   16\n   43  530   38   76   15   13 1247    4   22   17  515   17   12   16\n  626   18    2    5   62  386   12    8  316    8  106    5    4 2223\n 5244   16  480   66 3785   33    4  130   12   16   38  619    5   25\n  124   51   36  135   48   25 1415   33    6   22   12  215   28   77\n   52    5   14  407   16   82    2    8    4  107  117 5952   15  256\n    4    2    7 3766    5  723   36   71   43  530  476   26  400  317\n   46    7    4    2 1029   13  104   88    4  381   15  297   98   32\n 2071   56   26  141    6  194 7486   18    4  226   22   21  134  476\n   26  480    5  144   30 5535   18   51   36   28  224   92   25  104\n    4  226   65   16   38 1334   88   12   16  283    5   16 4472  113\n  103   32   15   16 5345   19  178   32    0    0    0    0    0    0\n    0    0    0    0    0    0    0    0    0    0    0    0    0    0\n    0    0    0    0    0    0    0    0    0    0    0    0    0    0\n    0    0    0    0]</code></pre></div>\n<h2 id=\"모델-구성하기\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%EA%B5%AC%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"모델 구성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 구성하기</h2>\n<p>이제 text classification을 수행할 ML모델을 만들어보자.</p>\n<p>vocab_size는 영화리뷰에 사용되는 단어의 개수이다. 실제로 위에서 단어와 숫자를 매칭하는 dictionary의 사이즈 보다 크지만, 해당 데이터에서는 10000개의 단어 이내로 리뷰가 작성되었다. </p>\n<p>각 레이어에 대한 설명은 다음과 같다.</p>\n<ol>\n<li><strong>embedding</strong> : 숫자로 인코딩 되어있는 각 단어를 사용하며 각 단어 인덱스에 대한 벡터를 찾는다. 이러한 데이터는 추후 모델이 핫습하는데 사용된다.</li>\n<li><strong>GlobalAveragePooling1D</strong> : 각 예시에 대해 sequence 차원을 평균하여 고정된 길이의 벡터를 출력한다.</li>\n<li><strong>Dense</strong> : 첫번째 Dense 레이어를 통해서 고정길이로 출력된 vector값을 통해 16개의 hidden unit을 가진 fully-connected layer를 통과시킨다. 이후 두번째 Dense 레이어는 단일 출력 노드를 가지고 시그모이드 활성화 함수를 사용함으로써 결과에 대해 0~1 사이의 값을 가지도록 한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 입력 크기는 영화 리뷰 데이터셋에 적용된 어휘 사전의 크기입니다(10,000개의 단어)</span>\nvocab_size <span class=\"token operator\">=</span> <span class=\"token number\">10000</span>\n\nmodel <span class=\"token operator\">=</span> keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nmodel<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Embedding<span class=\"token punctuation\">(</span>vocab_size<span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span> input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nmodel<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>GlobalAveragePooling1D<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nmodel<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nmodel<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>sigmoid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nmodel<span class=\"token punctuation\">.</span>summary<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">_________________________________________________________________\nLayer (type)                 Output Shape              Param #   \n=================================================================\nembedding_2 (Embedding)      (None, None, 16)          160000    \n_________________________________________________________________\nglobal_average_pooling1d_2 ( (None, 16)                0         \n_________________________________________________________________\ndense_4 (Dense)              (None, 16)                272       \n_________________________________________________________________\ndense_5 (Dense)              (None, 1)                 17        \n=================================================================\nTotal params: 160,289\nTrainable params: 160,289\nNon-trainable params: 0\n_________________________________________________________________</code></pre></div>\n<p>모델 구성에 마지막으로 loss function과 optimizer를 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>optimizer<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>AdamOptimizer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n              loss<span class=\"token operator\">=</span><span class=\"token string\">'binary_crossentropy'</span><span class=\"token punctuation\">,</span>\n              metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'acc'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"모델-훈련하기\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%ED%9B%88%EB%A0%A8%ED%95%98%EA%B8%B0\" aria-label=\"모델 훈련하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 훈련하기</h2>\n<p>모델을 훈련하기에 앞서 10000개의 데이터를 분리하여 validation set을 만들자.\n모델이 새롭게 접하는 데이터에 대한 accuracy와 loss등을 확인하기 위함이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 검증 세트 만들기</span>\nx_val <span class=\"token operator\">=</span> train_data<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">10000</span><span class=\"token punctuation\">]</span>\npartial_x_train <span class=\"token operator\">=</span> train_data<span class=\"token punctuation\">[</span><span class=\"token number\">10000</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span>\n\ny_val <span class=\"token operator\">=</span> train_labels<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">10000</span><span class=\"token punctuation\">]</span>\npartial_y_train <span class=\"token operator\">=</span> train_labels<span class=\"token punctuation\">[</span><span class=\"token number\">10000</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 모델 훈련</span>\nhistory <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>partial_x_train<span class=\"token punctuation\">,</span>\n                    partial_y_train<span class=\"token punctuation\">,</span>\n                    epochs<span class=\"token operator\">=</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n                    batch_size<span class=\"token operator\">=</span><span class=\"token number\">512</span><span class=\"token punctuation\">,</span>\n                    validation_data<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>x_val<span class=\"token punctuation\">,</span> y_val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    verbose<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Train on 15000 samples, validate on 10000 samples\nEpoch 1/40\n15000/15000 [==============================] - 1s 99us/sample - loss: 0.6925 - acc: 0.5343 - val_loss: 0.6918 - val_acc: 0.5347\nEpoch 2/40\n15000/15000 [==============================] - 1s 69us/sample - loss: 0.6899 - acc: 0.6281 - val_loss: 0.6880 - val_acc: 0.6741\nEpoch 3/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.6835 - acc: 0.7101 - val_loss: 0.6792 - val_acc: 0.7429\nEpoch 4/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.6699 - acc: 0.7408 - val_loss: 0.6623 - val_acc: 0.7469\nEpoch 5/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.6463 - acc: 0.7775 - val_loss: 0.6360 - val_acc: 0.7647\nEpoch 6/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.6127 - acc: 0.7950 - val_loss: 0.6017 - val_acc: 0.7821\nEpoch 7/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.5707 - acc: 0.8089 - val_loss: 0.5601 - val_acc: 0.7975\nEpoch 8/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.5240 - acc: 0.8279 - val_loss: 0.5180 - val_acc: 0.8142\nEpoch 9/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.4775 - acc: 0.8426 - val_loss: 0.4773 - val_acc: 0.8298\nEpoch 10/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.4343 - acc: 0.8581 - val_loss: 0.4416 - val_acc: 0.8392\nEpoch 11/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.3966 - acc: 0.8707 - val_loss: 0.4114 - val_acc: 0.8505\nEpoch 12/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.3645 - acc: 0.8798 - val_loss: 0.3880 - val_acc: 0.8537\nEpoch 13/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.3385 - acc: 0.8867 - val_loss: 0.3670 - val_acc: 0.8615\nEpoch 14/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.3154 - acc: 0.8932 - val_loss: 0.3519 - val_acc: 0.8651\nEpoch 15/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.2967 - acc: 0.8977 - val_loss: 0.3393 - val_acc: 0.8694\nEpoch 16/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.2800 - acc: 0.9027 - val_loss: 0.3290 - val_acc: 0.8711\nEpoch 17/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.2651 - acc: 0.9080 - val_loss: 0.3207 - val_acc: 0.8753\nEpoch 18/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.2519 - acc: 0.9119 - val_loss: 0.3132 - val_acc: 0.8780\nEpoch 19/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.2401 - acc: 0.9159 - val_loss: 0.3070 - val_acc: 0.8791\nEpoch 20/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.2295 - acc: 0.9203 - val_loss: 0.3029 - val_acc: 0.8798\nEpoch 21/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.2190 - acc: 0.9240 - val_loss: 0.2990 - val_acc: 0.8792\nEpoch 22/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.2101 - acc: 0.9261 - val_loss: 0.2951 - val_acc: 0.8828\nEpoch 23/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.2011 - acc: 0.9291 - val_loss: 0.2934 - val_acc: 0.8819\nEpoch 24/40\n15000/15000 [==============================] - 1s 72us/sample - loss: 0.1933 - acc: 0.9325 - val_loss: 0.2905 - val_acc: 0.8837\nEpoch 25/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.1853 - acc: 0.9369 - val_loss: 0.2883 - val_acc: 0.8846\nEpoch 26/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.1783 - acc: 0.9395 - val_loss: 0.2880 - val_acc: 0.8839\nEpoch 27/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.1715 - acc: 0.9435 - val_loss: 0.2868 - val_acc: 0.8846\nEpoch 28/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.1650 - acc: 0.9460 - val_loss: 0.2861 - val_acc: 0.8845\nEpoch 29/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.1596 - acc: 0.9487 - val_loss: 0.2868 - val_acc: 0.8839\nEpoch 30/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.1537 - acc: 0.9511 - val_loss: 0.2859 - val_acc: 0.8855\nEpoch 31/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.1477 - acc: 0.9538 - val_loss: 0.2861 - val_acc: 0.8857\nEpoch 32/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.1423 - acc: 0.9558 - val_loss: 0.2867 - val_acc: 0.8857\nEpoch 33/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.1370 - acc: 0.9571 - val_loss: 0.2882 - val_acc: 0.8858\nEpoch 34/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.1324 - acc: 0.9605 - val_loss: 0.2892 - val_acc: 0.8868\nEpoch 35/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.1282 - acc: 0.9607 - val_loss: 0.2907 - val_acc: 0.8871\nEpoch 36/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.1234 - acc: 0.9636 - val_loss: 0.2923 - val_acc: 0.8866\nEpoch 37/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.1189 - acc: 0.9657 - val_loss: 0.2941 - val_acc: 0.8860\nEpoch 38/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.1148 - acc: 0.9671 - val_loss: 0.2968 - val_acc: 0.8852\nEpoch 39/40\n15000/15000 [==============================] - 1s 70us/sample - loss: 0.1113 - acc: 0.9683 - val_loss: 0.2990 - val_acc: 0.8846\nEpoch 40/40\n15000/15000 [==============================] - 1s 71us/sample - loss: 0.1073 - acc: 0.9699 - val_loss: 0.3009 - val_acc: 0.8841</code></pre></div>\n<p>Epoch 1에서 40까지 진행이 되고 해당 Epoch에서의 acc 및 loss를 확인할 수 있다.</p>\n<p>이제 모델 평가 결과를 확인해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">results <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>evaluate<span class=\"token punctuation\">(</span>test_data<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>results<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">25000/25000 [==============================] - 1s 21us/sample - loss: 0.3204 - acc: 0.8736\n[0.3203906687307358, 0.8736]</code></pre></div>\n<p>실제로 더 진보된 모델이라고 하기 위해서는 약 95% 이상의 정확도를 필요로 한다. 하지만 매우 단순한 방식을 사용했기 때문에 약 87% 정도의 정확도를 달성한 것을 확인 할 수 있다.</p>\n<p>결과를 정확도와 오차의 그래프로 확인해 보자.</p>\n<h2 id=\"정확도와-손실-그래프-그리기\" style=\"position:relative;\"><a href=\"#%EC%A0%95%ED%99%95%EB%8F%84%EC%99%80-%EC%86%90%EC%8B%A4-%EA%B7%B8%EB%9E%98%ED%94%84-%EA%B7%B8%EB%A6%AC%EA%B8%B0\" aria-label=\"정확도와 손실 그래프 그리기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정확도와 손실 그래프 그리기</h2>\n<p><code class=\"language-text\">model.fit()</code>은 History 객체를 반환한다. 여기에는 훈련하는 동안 일어난 모든 정보가 dictionary로 담겨 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">history_dict <span class=\"token operator\">=</span> history<span class=\"token punctuation\">.</span>history\nhistory_dict<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">dict_keys([&#39;loss&#39;, &#39;acc&#39;, &#39;val_loss&#39;, &#39;val_acc&#39;])</code></pre></div>\n<p>키를 확인해 보면 네개의 항목이 있다. 이는 훈련과 검증 단계에서 모니터링하는 지표들이다. 훈련 손실과 검증 손실을 그래프로 그려 보고, 훈련 정확도와 검증 정확도도 그래프로 그려 비교해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt\n\nacc <span class=\"token operator\">=</span> history_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'acc'</span><span class=\"token punctuation\">]</span>\nval_acc <span class=\"token operator\">=</span> history_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'val_acc'</span><span class=\"token punctuation\">]</span>\nloss <span class=\"token operator\">=</span> history_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'loss'</span><span class=\"token punctuation\">]</span>\nval_loss <span class=\"token operator\">=</span> history_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'val_loss'</span><span class=\"token punctuation\">]</span>\n\nepochs <span class=\"token operator\">=</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 'bo'는 파란색점, 'b'는 파란 실선</span>\nplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>epochs<span class=\"token punctuation\">,</span> loss<span class=\"token punctuation\">,</span> <span class=\"token string\">'bo'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'Training loss'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>epochs<span class=\"token punctuation\">,</span> val_loss<span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'Validation loss'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token string\">'Training and validation loss'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Epochs'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Loss'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 386px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a2dae87ff835d39b3d9bc130108fbc3c/7bc0b/output_39_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACLklEQVQ4y5VTTW/TQBDduEEcekFInEAQuHDOLT8H/gH9DdCCZE5ce8qtEqmiCAkh6KmR0qIobUIdqXHsFAeifNgN/ggq2bV3mPXabUgrCiM9zc7u7Nu3O7OEXFgGgCiGQZQkXkU8RDxA3EfcQzxCPEbczWZJTlHIKuCmtbVnSi6XE/syZHPzYxYHNzRt8Kpc/tk2jKBGabDvef5n27ab4/G4NRwOvziOcyjGCQ6Pj8fNkxOr3uuZ+6Zp1gaDgYZ5KsETBCHx/eAdjmFvD4BSuNZOTwVc0PUO9Ho9mM1mgAd9IIxRQbgynf4oicQg4PNWi4cAPIwiHnJ+GVEUoY9Cxlg4n89DSulc7J1Op+VzhZ7nbcuzOet0ABwnifiy51cJZlJMUBGESkJYSgnPzgCOjmQURZJM8vBz0iXEhL7vV0g+n78jioJBSRLIRdMEaLcvq7waC4SFQuG2UIhy3yans5RAFEjX5TgM/1aiBcLkyorrutvLhAzTdncBmk2RLCHedjKRsO00loTYahXxdknbyCtL+Tw24UOsp6ZxXq1yruucU7pwUZHM4rkLhahMEGbQp1f+JasWK2VJBZnnAavXgVWr0mMnsCBI1+M92Iv+H23zHv7RsIeh3wfQNIBGA+DgQD7HZOJ/IsVicUVUudFoPMGvplqW9XI0Gr3odruv8SutCy9iy+rjvP0cv5nquoMNxzFUx/m+gV9P3dn5tr619fVNrdZ6Sv7DbiFuXpf0Gx06VEuq6l7pAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/a2dae87ff835d39b3d9bc130108fbc3c/7bc0b/output_39_0.png\"\n        srcset=\"/static/a2dae87ff835d39b3d9bc130108fbc3c/5a46d/output_39_0.png 300w,\n/static/a2dae87ff835d39b3d9bc130108fbc3c/7bc0b/output_39_0.png 386w\"\n        sizes=\"(max-width: 386px) 100vw, 386px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>clf<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\"># 그림을 초기화합니다</span>\n\nplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>epochs<span class=\"token punctuation\">,</span> acc<span class=\"token punctuation\">,</span> <span class=\"token string\">'bo'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'Training acc'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>epochs<span class=\"token punctuation\">,</span> val_acc<span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'Validation acc'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token string\">'Training and validation accuracy'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Epochs'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Accuracy'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 386px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/00373d179673d0c997a3c8553237814c/7bc0b/output_40_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACMklEQVQ4y6WUzU7bQBDHF1qRtKcee6ARoAj1gHgRHqLKEV6jEA7h1NdICpSqqKJCXEAilqgxChDiJMQfITZOcPwhiOPNTnfiBEIrtZE60t+73p357ezs2oT0DfAxsbhIJpeWVsjc3OxUPB5P8LFZrndciUH7nmsmFiNv5+dJYmGBTO/skBjwcK5JZPAOYIdUq/q6pnnnilI7qlQq+WKx+LNarZ01Go0zx7FE37fEdtuU7u5uT6+vm6Ig3J4eH5vS4aEj5HLe0fa2X7i8bGQQ+AKBqmp/5X3QdQ1KJRkURYGHhzYOQacDYBgAkgQgipEuLoD7AagqQLPZdwPX9b8TnslLzptqtVo5HAyCbkBpQHu9kObzHbq52aMHB4wKAqOyzOjNDaOWxajnRXJdRm2bBYwBOI67hRlOYIae52WjdSAMAoC9PQBBALBtXIRBGAJ0uwAYiKL0Sb0eC6MM3S8klUq95ryYbbc/4+D9PQt3dxnU6zwKhoKR9k9jbASYTCbx9IjrRhnm8yzEeqHh6sOMRhVBRvUcOI1ASr0sbq9QiCYRNhr4N3sGXF5eeRXV0Mlh7SiNJn/PaGzg8FB838ua5rDAg42Mb0/Ak5NzvDYx07T7GXJQB0964DSWuG9nANx6vNhXV943+E/jwB+PW97fFz+UStaGrivpRsNYlWV5g392a9gahrGqquq6ZVkf+WeZqdfr6XK5nNF1PY3vmqat1Wq1T5IkpaJfAwAZw95gaf7l9Ashk1VkJynkTwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/00373d179673d0c997a3c8553237814c/7bc0b/output_40_0.png\"\n        srcset=\"/static/00373d179673d0c997a3c8553237814c/5a46d/output_40_0.png 300w,\n/static/00373d179673d0c997a3c8553237814c/7bc0b/output_40_0.png 386w\"\n        sizes=\"(max-width: 386px) 100vw, 386px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>점선은 훈련 loss와 accuracy이고 실선은 검증 loss와 accuracy를 나타낸다.</p>\n<p>훈련(점선)에서 loss는 epoch가 진행되면서 감소하고 accuracy는 증가한다. 하지만 검증(실선)에서는 약 20번째 epoch 이후가 최적점인 것 같다. 이는 훈련 데이터에서만 잘 동작하는 과대적합 때문일 것이다. 이 지점 부터는 모델이 과도하게 최적화되어 테스트 데이터에서 일반화되기 어려운 훈련 데이터 특정 표현을 학습하게 된다.</p>\n<p>여기에서는 과대적합을 막기 위해 단순히 20번째 epoch 근처에서 훈련을 멈출 수 있다.</p>"},{"id":"c4119b58-578d-56c3-9fd1-5f800cb40564","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"Angular 8","path":"/angular-8-released","tags":["Web","Angular"],"excerpt":"Angular 8버전이 출시 되었다. 이번 버젼은 최신 브라우저에서 어플리케이션의 구동 시간을 단축시키고, CLI와 함께 사용할 수 있는 새로운 API를 제공한다.","created":"2019-07-22T00:00:00.000Z","createdPretty":"22 July, 2019","updated":"2019-07-22T00:00:00.000Z","updatedPretty":"22 July, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABtklEQVQY0wGrAVT+AEUA4kgA3kcA2EgA0VcAy2kAwI0AsKEAnIsAiJcAdLYBZMwGVdcMR90ON94RMN4TMt4SMd4SMtwSMtkOLQBIAeBKANpeFNmcaOK5jeagSc+RCal5BZyKGZWdFICxGm/GIWHVHlHfI0bfFjXdDCzcDzDaDC7bEDTjJFQASwPfQQDVup7r/v39sIbb+/f7mlvHaACbnDagqzOQvDN/yTFs2EFp4TpX4CpH3zBM3ipJ3idE6lRy9HSqAE0F4z4A2Lma7s247G8txtXF7pVWx2UAmbRot8VwsNB7rtp4nuJ4luqDleFCXe6Gk/GVnPKLifOBgvOJngBNA+ZFAN+GWtvMvunXyfC6oeJ9MbprAJuNGJScD362LHzDJGTQHlDaIUPlHjbxLjvyTFXyV2LxY3LyeIoAQADOQgHJPAC8glnQvafkcjPDWwCsdwijlyuepCmLsyJ0wydm0zRg5DZO8TlK7zlc8EBu70dz7k567mOQADgAvzwAv0IAwjsAvEAAuk4AuWQAr3wAo5gAlKcAfawCYr0FT9QLPu0SMu4RPuwNT+sOX+kec+o5h+hMm7exybKymiMEAAAAAElFTkSuQmCC","aspectRatio":2.9069767441860463,"src":"/static/599d2dcf6b8e8baacc3fbc538cae991a/0853f/cover.png","srcSet":"/static/599d2dcf6b8e8baacc3fbc538cae991a/14156/cover.png 125w,\n/static/599d2dcf6b8e8baacc3fbc538cae991a/d6e47/cover.png 250w,\n/static/599d2dcf6b8e8baacc3fbc538cae991a/0853f/cover.png 500w,\n/static/599d2dcf6b8e8baacc3fbc538cae991a/f280c/cover.png 722w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>Angular 8버전이 출시 되었다. 이번 버젼은 최신 브라우저에서 어플리케이션의 구동 시간을 단축시키고, CLI와 함께 사용할 수 있는 새로운 API를 제공한다.\n필자는 기존 Angular 6에서 8버전으로 업그레이드를 하였는데, 성능적인 면에서 많이 향상이 된 것을 체감적으로도 느낄 수 있었다.</p>\n<h3 id=\"update\" style=\"position:relative;\"><a href=\"#update\" aria-label=\"update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update</h3>\n<p>update.angular.io를 방문해 자세한 정보와 가이드를 참고 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ng update @angular/cli @angular/core</code></pre></div>\n<h3 id=\"differential-loading\" style=\"position:relative;\"><a href=\"#differential-loading\" aria-label=\"differential loading permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Differential loading</h3>\n<p>차등 로딩(Differential loading)은 브라우저가 자신의 능력에 따라 최신 자바스크립트와 원시 자바스크립트를 선택하는 과정을 말한다. 기본값으로 Angular 8은 최신 빌드(es2015)와 원시 빌드(es5)를 각각 수행하고 사용자가 어플리케이션을 로드했을 때, 사용자의 브라우저는 자동으로 필요한 번들을 선택할 것이다. </p>\n<p>ng update 명령어를 쓰면 Angular는 차등 로딩을 위해 프로젝트의 tsconfig.json를 업데이트 한다. Angular CLI는 차등 로딩의 수행 여부를 결정하기 위해 tsconfig.json 파일의 target 프로퍼티에 명시된 자바스크립트의 버젼을 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  …\n  <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"moduleResolution\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span>\n  …\n  <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es2015\"</span><span class=\"token punctuation\">,</span>\n  …\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>target 프로퍼티가 es2015로 설정되었을 때, Angular는 두 개의 번들을 생성하고 각각 이름을 부여하고 브라우저는 런타임시에 script 태그의 속성을 통해 어떤 번들을 로드할지 결정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//최신 자바스크립트</span>\n<span class=\"token operator\">&lt;</span>script type<span class=\"token operator\">=</span><span class=\"token string\">\"module\"</span> src<span class=\"token operator\">=</span><span class=\"token string\">\"…\"</span><span class=\"token operator\">></span>\n\n<span class=\"token comment\">//원시 자바스크립트</span>\n<span class=\"token operator\">&lt;</span>script nomodule src<span class=\"token operator\">=</span><span class=\"token string\">\"…\"</span><span class=\"token operator\">></span></code></pre></div>\n<p>최신 브라우저에서 초기 번들 사이즈를 40kB 이상 절감 했고, 커뮤니티에서도 얼마나 최신 자바스크립트를 많이 사용했는가에 따라 7-20% 정도의 절감 효과를 보았다는 이야기가 나왔다고 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 928px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c499627bdb2ddb74ab5f32423a88b810/cc488/angular8-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACqklEQVQoz2NgAILgsGDGkxMuHb8y/d7/0xOv/ro0/e5/IP8WAxSws7FzcHCxsvIIcDDzCXEx8QpyMjMyMvACpTiBmAWIWYGYCYj5wBqCwoIYgQYdvz7z4f9zk2/8ujrjAchgsIHbvR4wKGtKsWhbSXOyc7GYsnOyWOjZynBKKvKzAaX5gVgOiI2AWAmI2cAGRkZFgA0EGXR20vVfV6bfBxp4BWzg///PGKC2wx0MpVl5hThAbG4gFgZiHiibgcHQTp/xzKRrx+/Mff7/0rQ7v27OfvwfyId7ecLOBPOZx1PWzj6dumjOmbSFs06mrOvaHOMCkrML1IB5lwlu2f+X/xmP9p47vr3pwP9tTft/Heo6/f9434VbCv8hBs48lhq65lH+/yXXsv4vvpr5f/3Twv+zTqSmgeS2vi1Fdj0E/L8HMvD88fU12/+vrd76a2vjvv+He87e+g81cPqRFP8FF9P/zzuf9nP+hfQfi65k/p9+NDkeJDf5QDwzhoEwL9+d9+L/5Wl3f92a8xTiZaiBc06lB845k/q/cr7fn5rFAb/nAw2ffTItASQ3+3QKpoH+gf7ASLlyDJRsgAb9BBr6/9TEKzdhBs44mhoAcuGEPbG/+3bF/Fp4OeM/MEzBBk7aH4dp4H+g34AGnbg5+8n/85Nv/rkx6xHQ4Kt3YPLAMAxccj3rP9C7IPx3+a0cUBgmQPSuZkQ3j0VISIgNGCkHT0248v9E/6VPQPoPkL7AYAJJLpP2JvoDY/bPzBPJH2ccS/o0+1TK//5dcWADTd2UOIAUiivZmZiY2GcXLFJZUrZGb1X1Js2muE7L/IASc2j6EjZzU5WPrbC1S6xzsCib6afXsCxEN77KQRSUFtm5WDmguQUv4AJiRSDWZGBkcADSTkCsC80NjPg0AgAETT9ckCzk3gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/c499627bdb2ddb74ab5f32423a88b810/cc488/angular8-01.png\"\n        srcset=\"/static/c499627bdb2ddb74ab5f32423a88b810/5a46d/angular8-01.png 300w,\n/static/c499627bdb2ddb74ab5f32423a88b810/0a47e/angular8-01.png 600w,\n/static/c499627bdb2ddb74ab5f32423a88b810/cc488/angular8-01.png 928w\"\n        sizes=\"(max-width: 928px) 100vw, 928px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>자세한 내용은 <a href=\"https://angular.io/guide/deployment#differential-loading\">여기</a>를 참고하자.</p>\n<h3 id=\"route-configurations-use-dynamic-imports\" style=\"position:relative;\"><a href=\"#route-configurations-use-dynamic-imports\" aria-label=\"route configurations use dynamic imports permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route Configurations use Dynamic Imports</h3>\n<p>Angular는 어플리케이션의 일부를 라우터를 이용한 지연 로딩 기법으로 불러올 것을 권장한다. 이는 라우트 설정의 loadChildren 프로퍼티를 통해 설정할 수 있는데, 8 버전에서는 동적 임포트의 산업 표준으로 변경되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">//기존 방식</span>\n<span class=\"token punctuation\">{</span>path<span class=\"token operator\">:</span> <span class=\"token string\">'/admin'</span><span class=\"token punctuation\">,</span> loadChildren<span class=\"token operator\">:</span> <span class=\"token string\">'./admin/admin.module#AdminModule'</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Angular 8 동적 임포트 방식</span>\n<span class=\"token punctuation\">{</span>path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/admin</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">loadChildren</span><span class=\"token operator\">:</span>\n <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./admin/admin.module</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">m</span> <span class=\"token operator\">=></span> m<span class=\"token punctuation\">.</span>AdminModule<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>이는 VSCode 같은 툴에서 해당 임포트 구문을 이해하고 교정해줄 수 있는 에디터의 지원성을 높일 것이다.</p>\n<p>ng update 명령어를 쓰면 Angular는 자동으로 해당 구문을 변경한다.</p>\n<h3 id=\"builder-apis-in-the-cli\" style=\"position:relative;\"><a href=\"#builder-apis-in-the-cli\" aria-label=\"builder apis in the cli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Builder APIs in the CLI</h3>\n<p>Angular Schematics가 ng new, ng generate, ng add, ng update와 같은 명령어에 접근하듯, 새로운 Builder API는 ng build와 ng test 그리고 ng run에 접근해 빌드나 배포 과정을 후킹할 수 있도록 한다.</p>\n<p><a href=\"https://angular.io/guide/cli-builder\">공식 API 문서</a>를 참고.</p>\n<h3 id=\"cli의-workspace-api\" style=\"position:relative;\"><a href=\"#cli%EC%9D%98-workspace-api\" aria-label=\"cli의 workspace api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CLI의 Workspace API</h3>\n<p>기존에 Schematics를 사용하려면 angular.json을 열어 수동으로 작업 저장소 설정을 수정해야 했다. Angular 8은 angular.json을 더 쉽게 관리할 수 있는 API를 제공한다.</p>\n<p>Workspace API에 대한 자세한 설명은 <a href=\"https://github.com/angular/angular-cli/blob/master/packages/angular_devkit/core/README.md#workspaces\">여기</a>를 참고</p>\n<h3 id=\"web-worker-지원\" style=\"position:relative;\"><a href=\"#web-worker-%EC%A7%80%EC%9B%90\" aria-label=\"web worker 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Worker 지원</h3>\n<p>Web Workers는 cpu 자원을 많이 사용하는 어플리케이션에서 어플리케이션의 속도를 향상시킬 수 있는 좋은 방안이다. Web Workers는 이미지나 비디오 처리를 백그라운드 스레드로 옮길 수 있게 해준다. angular.io 공식홈도 내부의 검색과 색인을 위해 Web Workers를 사용했다고 한다.</p>\n<p>이제 CLI로 Web Workers를 생성할 수 있고, worker를 생성하려면 다음 명령어를 사용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ng generate webWorker my-worker</code></pre></div>\n<p>web worker를 생성했다면, 원래 사용하던 대로 사용하면 된다. CLI가 web worker를 알아서 번들화 하고 정리해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> worker <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./my-worker.worker</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">type</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">module</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>더 자세한 Angular CLI의 Web Workers에 대해서 알려면 <a href=\"https://angular.io/guide/web-worker\">여기</a>를 참고.</p>\n<h3 id=\"deprecation\" style=\"position:relative;\"><a href=\"#deprecation\" aria-label=\"deprecation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deprecation</h3>\n<p>Angular는 공개 API가 n + 2 버젼을 지원하도록 한다. 즉 8.1 버젼에서 폐기 처분될 기능은 9 버젼과 10 버젼까지는 작동할 것이라는 이야기이다. 예를 들어, 버젼 8에서 platform-webworker를 폐기 하게 된다.</p>\n<p>Angular에서 폐기, 제거된 기능 관련하여 정리된 리스트를 보려면 <a href=\"https://angular.io/guide/deprecations\">Deprecation Guide</a>를 참고하자.</p>\n<h3 id=\"ivy--bazel\" style=\"position:relative;\"><a href=\"#ivy--bazel\" aria-label=\"ivy  bazel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ivy &#x26; Bazel</h3>\n<p>Ivy를 8.0 버전에서 프리뷰 옵션 형태로 사용이 가능하다.</p>\n<p><code class=\"language-text\">Angular Ivy</code></p>\n<p>Angular Ivy는 가상 DOM의 한계를 지닌 이전 렌더러의 문제를 해결하기 위해 만들어 졌다. Ivy는 원본보기 엔진의 크기가 작고, 빠르고 간단하며, Tree Shaking의 장점과 Incremental DOM의 메모리 사용 공간을 줄인다. Ivy를 통해 렌더링하는 동안 메모리 할당을 최소화하고 증분 빌드를 허용하는 한 번에 하나의 파일을 컴파일하여 메모리가 제한된 장치에서 앱 성능을 향상 시키도록 설계되었다. 즉, Ivy는 컴파일 프로세스를 단순화하여 압축한다. 그리고 더 작고 더 많은 원자 함수로 나누기 때문에 Ivy는 이전 렌더러에 비해 Tree Shaking에 더 최적화되어 있다.</p>\n<p><strong>Ivy enable</strong></p>\n<p><code class=\"language-text\">tsconfig.app.json</code>을 편집하여 Ivy를 선택하고 angularComplierOption 섹션을 추가하고 enableIvy를 true로 설정한다. 새로운 Angular CLI 프로젝트의 경우, newscript를 실행할 때 --enableIvy 플래그를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../tsconfig.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../out-tsc/app\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"types\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"test.ts\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"**/*.spec.ts\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"angularCompilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"enableIvy\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">ng build --prod</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.....\nchunk {1} main-es2015.xxxxxxx.js 000 kB [initial] [rendered]\n.....</code></pre></div>\n<p>그 결과, 번들 크기의 15%로 줄어들었다면 이는 웹 사이트 로딩 시간이 15% 더 빨라짐을 의미한다.</p>\n<p>참고 (<a href=\"https://blog.angularindepth.com/all-you-need-to-know-about-ivy-the-new-angular-engine-9cde471f42cf\">blog.angularindepth.com - Angular Ivy</a>)</p>"},{"id":"b1d7620a-6daf-5731-a628-60fad80473eb","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"TF - 텐서플로우 소개 및 맛보기","path":"/nb-tf-basic","tags":["ML-DL","Tensorflow","자연어처리"],"excerpt":"텐서플로우(TensorFlow)는 데이터 플로우 그래프(Data flow graph)를 사용하여 수치 연산을 하는 오픈소스 소프트웨어 라이브러리이다.","created":"2019-07-21T00:00:00.000Z","createdPretty":"21 July, 2019","updated":"2019-07-21T00:00:00.000Z","updatedPretty":"21 July, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABEklEQVQoz5VRXUsCQRTdX+JTf8qfIz32Gr73ZNCDYiJJViaBSdCL9mWDbbgFgtYuUWp7557mw23ZnAQPc5nLHc7hnDseJLBabG9StzoGuiU7ZyfHlucaaoImsxZZzMCjDvhzmhHdTFCLkbXGFzug3RyonjfiyftaQVYReRkzEft1GL6CilugzrZJzyTT94Qj2e0wcWUgl30cg9sFIPLTeWY9vMahOsHLGJPJu+llLO0HKETRF4JgjPlskX6S5P8ja7LG1fUN9ssNVOpnOKgco9Zo46R1ib1SFc1WF4dH5yjXTk3RN63s1PsbNww/8CB8DMQz+ncCvVth+qEfYPoW4n7wpGaPEMOREpRuwcxyN4Ej9g976rc4gJEuNwAAAABJRU5ErkJggg==","aspectRatio":2.1551724137931036,"src":"/static/7701c7a0cff07ad94d0586e42cc22780/0853f/cover.png","srcSet":"/static/7701c7a0cff07ad94d0586e42cc22780/14156/cover.png 125w,\n/static/7701c7a0cff07ad94d0586e42cc22780/d6e47/cover.png 250w,\n/static/7701c7a0cff07ad94d0586e42cc22780/0853f/cover.png 500w,\n/static/7701c7a0cff07ad94d0586e42cc22780/aaa67/cover.png 600w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>텐서플로우(TensorFlow)는 데이터 플로우 그래프(Data flow graph)를 사용하여 수치 연산을 하는 오픈소스 소프트웨어 라이브러리이다.</p>\n<h3 id=\"데이터-플로우-그래프data-flow-graph\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%8C%EB%A1%9C%EC%9A%B0-%EA%B7%B8%EB%9E%98%ED%94%84data-flow-graph\" aria-label=\"데이터 플로우 그래프data flow graph permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 플로우 그래프(Data flow graph)</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 252px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4a67e12961d71d510c83c2aa35a8febb/5e02b/data-flow-graph-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAFg0lEQVRIx61W2XITVxD1h+cH8pA8BVKkTEgVCRWKQJEQAcbE2AEjLGuxZO0aSaMZzap9He0np68t2TjCeclUtUZ35va5vZzunp3VaoX/89qRn+l0isFggOFwiNFohCAI+H+kninhcyVq3b96tn5PET0xTgG2221EojGcpc4RTSQROY2iqutw/SZsz4ftOEocrp1GG7brcm3z7vF94+Idn83n8wvATq8Ps5CEdfAA7tFDmFqWyg04tRIcvag2e1yb6TDs2B7c+uVhvDvVPByCe76P2Wx2aWFvALeURPWPb2G//g5+rQCvM0Tl4Bfob+/D8Tz4zRb0o8fQnn0Nr5rj+wGMxDuUnn/DgzV4jdYVYKfTgWnWUKdFeiWv3JFTa9WCWjuOdeFivQK9nINtm7TagWmUUaU3tmXAZWjms/k6hj1oqT9RjO2iTDG0j6iW3iMf+QGVxH1U82+ha1EUT++hGN2FngnBqCS5/z60+I+oZZ6gXq9jvlhcALbaHWiFExTO31Be06o0anp6s65oCRh6HqXMG+RTXBdPYNSK0HIHfL+HYuYQlm1fJUXS7jFbDV8yyEy6klmK20Dd8tXapThei2uPyh6feUxEm8mh8Hmr1cZyucTOhtjkIrrdrWSdzaaYTALyc8z7BJNgonjX7/UwHo8+J/aKqAK5zOUwjJ7CI6jP01utFq1ylfU3LykAcbFcqSJfKNBqS+1fSAzXFq5I7mmjgT5P7nY7Sqnf79OCAN2BD91Ow3ByGI0Hyj29VkM6nUYymUIuR2bwgA1tvlTPq+UKAQHj+dd4dXwHB9EHBHcw6A+xu7ur3BXdNpPa7w8uXZZfuo12i3GcUcFFXg9DMxKYTMdq02IxR6Pp0eq+Wk+CGcLhEywXFweLFzNycNMcFuJm6E8EuokM+ffywx28P3uE4bizsXaxWPLclaJGtvo3UtUQCkaY6wUTFDBZ0yvACTNsMRFNVoxP+vSYPVG8eU3pwZRxKlsxxAsvUbET6iCxUDrWhctb4ienyiVJaTBR0o2azSaG0rp46Lg/QqfVVZES/dFofAW4Toqij9wpYomQ1DAMnEajSGdzSDGbsWwez2NpPI2cIVXSMB4NIfZsBbx+l/RLIpqdLqqRV6j99RNcy8RpvoiHJwkl8WKJyRlvt3BDk0tAsVBI2mDLMjMRmGeHcNltfPbEarnGuq6zAzkYMplSFdLdRUfUtwIqC+my7zkohu6gvvc9LawhHsti7/knhJ4eI3NeUqUoOlJNonOrhRJDSYiVjahO7bASbNtFIVdmZ9LZrmxmd6z4Jy7/J+A6Nn1ybEgiDwYcYBxePVbHQIYY3ZUGIfSSobam2VZAeSkx1Dmo4vE48mwcqfNzNtociuFj5I7fsxdmFajslYTcCihgssmnywY7sSlClysEy/z8AGmK9inMWdRTe0VudXkN2Gg22Dw9NdFEZHym8gUk2V10clSIv57rEvPbAdlIm90+KpE96O8ecnQaOEplcS98hrsfYjjO5DFj7FTpcu9adyugnCb17Tt1WJzDxskLZtmCYdn4mMrhU7qAmmluvhbWpN58OfwbdIXxdIFm+gjlR1+huX8XtllBOlXCYSiKw5cx5DIaAo4FGZ3i0VbAdS0LYDCZwdMLtC4EK3lIC+v8PDGQiGVY15zX/C9daXbNuq0uX6fOaDxBwMMH5GGXs0ZaVTCeEmSuym3I2N3U+4LLFw11HZtUMonHvz5Bd+jivLKPs+I+uj2PrZpJMY3PdHe2zpJLUImRXFKCedLFbxkIp39DJPs7v3UMdApFtPffoMVeOb+M41YLr7vQ7DhIaC8Q057B8NKYTdYhYa2z2XZppef524m9ta5nASpWXM2Pds++fLf8os6tLm8bD9c9uCly/QMsNaRIXdPofQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mnist\"\n        title=\"mnist\"\n        src=\"/static/4a67e12961d71d510c83c2aa35a8febb/5e02b/data-flow-graph-01.png\"\n        srcset=\"/static/4a67e12961d71d510c83c2aa35a8febb/5e02b/data-flow-graph-01.png 252w\"\n        sizes=\"(max-width: 252px) 100vw, 252px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>수학 계산과 데이터의 흐름을 노드(Node)와 엣지(Edge)를 사용한 양방향 그래프(Directed Graph)로 표현한다.</p>\n<ul>\n<li>노드(Node) : 수치 연산</li>\n<li>엣지(Edge) : 노드 사이를 이동하는 다차원 데이터 배역(텐서, tensor)</li>\n</ul>\n<h3 id=\"특징-및-장점\" style=\"position:relative;\"><a href=\"#%ED%8A%B9%EC%A7%95-%EB%B0%8F-%EC%9E%A5%EC%A0%90\" aria-label=\"특징 및 장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>특징 및 장점</h3>\n<p>텐서플로우는 머신러닝과 딥 뉴럴 네트워크 연구를 목적으로 구글의 인공지능 연구 조직인 구글 브레인 팀의 연구자와 엔지니어들에 의해 개발었는데 다임과 같은 특징을 가진다.</p>\n<ul>\n<li>코드 수정없이 데스크탑, 서버 혹은 모바일 디바이스에서 CPU나 GPU를 사용하여 연산을 구동</li>\n<li>분산(distributed) 실행환경이 가능</li>\n<li>아이디어 테스트에서 서비스 단계까지 모두 이용가능</li>\n<li>계산 구조와 목표 함수만 정의하면 자동으로 미분 계산 처리</li>\n</ul>\n<h3 id=\"설치\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98\" aria-label=\"설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치</h3>\n<p>먼저 아나콘다를 설치한 후 다음과 같이 conda install 명령으로 간단하게 설치할 수 있다.</p>\n<p><code class=\"language-text\">conda install tensorflow</code></p>\n<h2 id=\"실습\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5\" aria-label=\"실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습</h2>\n<p>그럼 이제 텐서플로우 공식 홈페이지에 나와있는 튜토리얼을 따라 해보자.</p>\n<h3 id=\"basic-classification\" style=\"position:relative;\"><a href=\"#basic-classification\" aria-label=\"basic classification permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Basic classification</h3>\n<p><a href=\"https://www.tensorflow.org/tutorials/keras/basic_classification?hl=ko\">https://www.tensorflow.org/tutorials/keras/basic_classification?hl=ko</a></p>\n<h3 id=\"데이터-준비하기\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%80%EB%B9%84%ED%95%98%EA%B8%B0\" aria-label=\"데이터 준비하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 준비하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf\n<span class=\"token keyword\">from</span> tensorflow <span class=\"token keyword\">import</span> keras</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>__version__<span class=\"token punctuation\">)</span> </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1.13.1</code></pre></div>\n<p>현재 사용하는 버전은 1.13.1</p>\n<p>이제 10개의 범주(category)와 70,000개의 흑백 이미지로 구성된 패션 MNIST 데이터셋을 사용하겠다. 이미지는 해상도(28x28 픽셀)가 낮고 다음처럼 개별 옷 품목을 나타낸다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 840px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/18d2c1da3b5c7dbff14ea81077d9ed24/1e088/fashion-mnist-sprite.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA9hAAAPYQGoP6dpAAADHUlEQVQ4yzWUZ0+qQRCF9yf4RTRBUOkW7II0wd47iGAv0WDXaIyaEP/53DznZj/s++7Ozs7MOXN23eXlpTHy+bytrq7a3NycbW1t2fn5uZ2cnNje3p7Nzs7azs6OVSoVu7u7s93dXctkMlav1+3q6ko+Gxsb9vT0ZK5YLNrh4aECEGxxcdHW1tZk297eVpKzszMdaDQaVq1W7fT0VD74N5tN29zctIODAyV2k5OTViqVdJjKCEiSdDqtP04MfKgQ29LSkoJNTU1ZNpvVYH9mZsZcLpez8fFxQVhYWJBxenpaaw6zTyAq8gkGBgbkR5CRkRHZSKAKv76+VBm8AAXo5XJZ/Nze3mqsr6/b29ub5tfX1/bz82MfHx+2srJiR0dH9vj4KH8ocQR4fn5WoL+/P2u32/b7+ytHKj4+PlYVcAdfcPv+/q5m3NzcqAgSLC8vC5UjO9VhAAKwyJZIJLSGcBxHR0cFHT+gYfec0hB4pR8KiBPV+M6xBjaNokJkQVAgEog/NnwZBOWPtBwfIL++vkpjDw8PGhcXF4L48vIi/qCgVqvJBo8eLtqDw1arJY4dE6rwB6jg8/NTzgzs+MAbhwuFgoLSTIogmG8eiVxPT4/19vZaV1eXdXd3W2dnpw0ODlo0GrW+vj4LBALW39+vfXgMBoPyC4fDssfjccmoo6PDIpGIORwgc2xsTNcvFApZLBbTQeZwR5c5SCI0iuiZE4BiaCDBU6nUf9kAlaDoEXns7++LZBqDsJEKneQasjc/Py8bZ/AZGhqS0JGS+/7+VncZdBVx0kUCwB9rqpyYmFAXaRwcog7WcEoC/7g4ygUu8OAIuMBjcCWBBzR4wo81+hseHhZ8YOLHPmcdxOOUTCa1SQI2OOADkJ01eyRF2KxJClzmcEi1jixwx8uBuIEDdLjkxqBHeIMGIGKHV24RNn8N2YNX5w+z8AHv7+/1uOJIQLSGVtEh3OEHbDjGzntJDG6P4y2jIcCg48zJ7O80sGkQiRE6/v7eYqPLnEFa6jIPKp3jhiAfsvI6A4E5gamS4AQmGYGokD9rCqFyuvwPzyTcTG7WJMQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mnist\"\n        title=\"mnist\"\n        src=\"/static/18d2c1da3b5c7dbff14ea81077d9ed24/1e088/fashion-mnist-sprite.png\"\n        srcset=\"/static/18d2c1da3b5c7dbff14ea81077d9ed24/5a46d/fashion-mnist-sprite.png 300w,\n/static/18d2c1da3b5c7dbff14ea81077d9ed24/0a47e/fashion-mnist-sprite.png 600w,\n/static/18d2c1da3b5c7dbff14ea81077d9ed24/1e088/fashion-mnist-sprite.png 840w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>{: width=\"600\"}</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">fashion_mnist <span class=\"token operator\">=</span> keras<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>fashion_mnist\n<span class=\"token punctuation\">(</span>train_images<span class=\"token punctuation\">,</span> train_labels<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>test_images<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> fashion_mnist<span class=\"token punctuation\">.</span>load_data<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Downloading data from https://storage.googleapis.com/tensorflow/tf-keras-datasets/train-labels-idx1-ubyte.gz\n32768/29515 [=================================] - 0s 1us/step\nDownloading data from https://storage.googleapis.com/tensorflow/tf-keras-datasets/train-images-idx3-ubyte.gz\n26427392/26421880 [==============================] - 2s 0us/step\nDownloading data from https://storage.googleapis.com/tensorflow/tf-keras-datasets/t10k-labels-idx1-ubyte.gz\n8192/5148 [===============================================] - 0s 0us/step\nDownloading data from https://storage.googleapis.com/tensorflow/tf-keras-datasets/t10k-images-idx3-ubyte.gz\n4423680/4422102 [==============================] - 1s 0us/step</code></pre></div>\n<p>Fashion MNIST data를 가져와 훈련셋(train<em>images, train</em>labels)와 테스트셋(test<em>images, test</em>labels)에 저징한다.</p>\n<p>우리가 만드는 학습모델에 훈련셋을 통해 학습시킬 것이고, 테스트셋의 test<em>images을 통해 예측값을 도출한 후 test</em>labels와 비교하여 오차를 측정할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_images<span class=\"token punctuation\">.</span>shape</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(60000, 28, 28)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_images<span class=\"token punctuation\">.</span>shape</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(10000, 28, 28)</code></pre></div>\n<p>데이터를 간단히 살펴보면 훈련셋에는 60000개, 테스트셋에는 1000개의 이미지 이고 하나의 이미지는 28x28 크기를 가지고 있는것을 확인 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_labels</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">array([9, 0, 0, ..., 3, 0, 5], dtype=uint8)</code></pre></div>\n<p>위와 같이 label은 0~9까지의 값을 가지고 있다. 각 숫자가 의미하는 바는 다음과 같다.</p>\n<p><strong>Label: Class</strong></p>\n<p>0: T-shirt/top\n1: Trouser\n2: Pullover\n3: Dress\n4: Coat\n5: Sandal\n6: Shirt\n7: Sneaker\n8: Bag\n9: Ankle boot</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">class_names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'T-shirt/top'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Trouser'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Pullover'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Dress'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Coat'</span><span class=\"token punctuation\">,</span> \n               <span class=\"token string\">'Sandal'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Shirt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sneaker'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Bag'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ankle boot'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>그럼 불러온 fashion_mnist 데이터를 살펴본 결과는 다음 그림과 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 672px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9b190ee014bbc78d92c0d4019a77f749/30d16/load-data.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACrElEQVQoz1WTS3PSYBiF+7/cuXDhwhlduPL3qAtdOdUZpzpqZ5xqrxRKKaWk5ZLQNAFKL1CgN3qBQlIgFEqp8PgCrR0XZ77k+5KTc95zMtK2w9zUonTqKu1qhE5NHdzfo79/Lc/8uYz+Q7eq0iwp2NterISXkuGmvuunY2mMHBR1ZsNuXKE5VhIrzMv1grqAN7aIV/Myrcxi5CPQMMAxBcO1drZKWfOx754hOz+FFfVzWwkzUrpQ2cwG2RJs5xQ2MwFSuVW28iGSewrxjEK2EKFb36B3hz5p/XwV2/ST905zsDRDM7lGpxxhhPYudHYEuwN0W1vUCgFo6w9orUNzfaDyntQ5X6MUWyDnmeLYPyeig6JQCHux13TX39ATdGNvIf6OdNKHls5iZvMY2Rwbe3lS+QxtS0gdUdhK4BTXKMtYcp5prJCfZnxVFIplxp/A1Ev4/QJmXsn6lMxujI9hhx+azXjskm9ala+RItapinOmYB2tcHkSFEKvzHAaWwivDGVI2D88Tbsp7y9xkfdxY8fEmslN1ZDE41yV1znJBUSRBHOdxD4OcpByUTkKcKEvkl2YohBw00qGhoS3BQ83h3PcHrnoHM7SK0paNUmxkqBa7iOOVTS5ssyB3eqJMiBuFEOcqW4yrgkuI2I5cW/5yyOYeAa/nssq+PkYM2XwPthgLCJW1Tqfo1eMhUtUjtdoV6LDlKU2lQ0fh4uzHC25ZOsulKY5iq19kJQ+UdNH6e19x6nESR+myRcypPe30ZI6mVyc3qCDgroxUFhSPeTmJykrvocZtqpiq6TRqOg4ZZ3bxiZyOqxJUyrjaHStEMgfdF+bPmntVOEkPM+ea5KSENra8p3l/hf7f0FjY4i6Li8ZUuQH0OirM/8rdttSsXeWKepezmIe7JTMXvb+Ap3oS0WYJ1qNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mnist\"\n        title=\"mnist\"\n        src=\"/static/9b190ee014bbc78d92c0d4019a77f749/30d16/load-data.png\"\n        srcset=\"/static/9b190ee014bbc78d92c0d4019a77f749/5a46d/load-data.png 300w,\n/static/9b190ee014bbc78d92c0d4019a77f749/0a47e/load-data.png 600w,\n/static/9b190ee014bbc78d92c0d4019a77f749/30d16/load-data.png 672w\"\n        sizes=\"(max-width: 672px) 100vw, 672px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"데이터-전처리\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EC%B2%98%EB%A6%AC\" aria-label=\"데이터 전처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 전처리</h3>\n<p>모델에 데이터를 학습시키기 위해 먼저 데이터 전처리를 진행해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># train_images의 첫번째 요소를 그림</span>\nplt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>train_images<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>colorbar<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 점자선을 없애자.</span>\nplt<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 305px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/62c83c767e07d4e0c790fe4905f7779f/a3e09/output_18_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAAEIElEQVQ4y2WU/U9TZxTHT0s3cW7xZTKYMB0gyIVCKVKh72+3tJQWKLelUFoobxoGyIIiTh1kzDHnWHiLMtyyscRtApkKcW/sB+QtmYuLoCsq4GK2uC3ZX7DS3rOnV2lMfG6+OeeePPnke+55ngtA1m5IEirBMqCEgv5nxCPiF/QrSFREWJ6qWwakkN9njpdE35iO8koyI/cQ1I4QD0QgU5h5FZjPcz0rKEczuJ7IiSZ+BRHJSaTJu3WvXDizGP3toYYdrxHUJg4oBmW2Hhgk8nPibcjuN0CpX6pv9YudnX71q/V+I9hIzUYis66Dov/oBHVKz7xo9PIfhhdhY+0DsY7m2ZGIJUA2lBMYGqAE5Vtr0PtNNTLTjZjw0VlMt76FisRGNkd2FHOFTUE6Lo86NG2+lCiPTSeoKA4oAV1mGMhjQlCkI+yoBTvanJX41QMJfr+WgmcWDeicakDRcBerGO1AR4c3mAQeSj/pGZN2217eMChIgSzNBpBTCCiwo4YAPW0MfvmXBM/fVuIFnxwvrmXj4G0VO/F3FjadMgYjoZSivm4aTzruCgNBCAfkNM9BgKF2iUPizigoQRlU4cneQrz8SITtv9qw9SaDQ8sqHF3JYs8ta9HU1RxMfekwFXu+bXSLOE0YnnIWqPcbOIcO0q6DJR8dlVCG+ig3jkwp8drDVJxcFeLI/Ry8uCLBsdUMdthnRFVxSzAZjNSu90+OU+eGw0PZlAIZtJYcD11kGWuMrWY1ojq011XhsauF+MWaBHvvanH4ngKvrIlx2KfEyfuZ7Mw/Qqw9XBR8ARgq/sTbYztldBxhPccRU0Ettju9eHaaZodmNWznrWI888CEnzxUYMt35dh53YEjdxX4+VIe9hB95pOzP/6bhv2nxUEAL0U1dYxuSxRRBLWVA0bsrNec+MGBg3+q2QsrMnbq9xTsX6Lx1JIVP11Q4ZEhLx694sL2G0XY69Ni329aduJRBr47aCDAbkrkPD5e8sGdzY8bbgNeHBSq7T2N2LhSzlYsVIeEB3+pwHbiNNTux/fkOOjTYPcdE9aTuvGnZrZ20Y3eq1VByOijcnXHxmJez0kMeeOY2ZCTpYnxoOOdunX39dr1xsXywHvLlsDAal7g9HJBoGmpLFB7yxNoWHQF3DerA6rpI+uFEy1Bk8vj3wcllCK79dKeaGnoLvO5oSQLxKZ8MlUa3GhLrsA3zE5sdlbhm6WV2KBm0LnfgebMSszPrMI8kRf16TVoiDlI9jtQytOnqWJrrrkTPtwSPocZIKXU/KKfdfyiGSUUzucAM3cA7HMSYOZzgZlVQPG8htSJ5jRgXdCBdVYLlgUV3zKXHUHvkUVau3ZFJMTBUyv0l3iey6QQycV+EMBe2Mbl8bA9vDPmyX3dTp7Nj1vcYLwi2A3/A4pf56lrJgVCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/62c83c767e07d4e0c790fe4905f7779f/a3e09/output_18_0.png\"\n        srcset=\"/static/62c83c767e07d4e0c790fe4905f7779f/5a46d/output_18_0.png 300w,\n/static/62c83c767e07d4e0c790fe4905f7779f/a3e09/output_18_0.png 305w\"\n        sizes=\"(max-width: 305px) 100vw, 305px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>픽셀 값의 범위는 0 ~ 255 이다.</p>\n<p>신경망 모델에 주입하기 전에 이 값의 범위를 0~1 사이로 조정해야 하기 때문에 모든 값을 255로 나누어 주자.\n(색상은 무시 하겠다는, 즉 Gray scale로 하겠다는 의미)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_images <span class=\"token operator\">=</span> train_images <span class=\"token operator\">/</span> <span class=\"token number\">255.0</span>\ntest_images <span class=\"token operator\">=</span> test_images <span class=\"token operator\">/</span> <span class=\"token number\">255.0</span></code></pre></div>\n<p>위와 같은 그림을 다시한번 확인해 보면 모든 요소가 0~1 사이의 값을 갖도록 변한 것을 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># matplotlib을 통해 그림을 그린다.</span>\nplt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># train_images의 첫번째 요소를 그린다.</span>\nplt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>train_images<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>colorbar<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 점자선을 False로 둠으로써 없앤다.</span>\nplt<span class=\"token punctuation\">.</span>gca<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 302px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a929424924f67d29f957c15d08f372ec/5f1d2/output_23_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAESklEQVQ4y22UbUxbZRTHn9vWbCOLQxN5cYFNtwmjZUCBvkBX+nJvW2h56zulpZBNpIyGyaist8BQKd0Uh8ncJmYb4nCgMcYsyPiwOd9GzJSIwGzZRMhcNNk3PxlLe49PK3SYeZJ/nifPvfd3z/+ckwchHGkoM02M1NVYtVg1j4mlqRFxNPF103l1CZuyZiB11r2FHRkjQym5GPVUjIf2oQOlJGEEijD9V8gEJF5VyABqpAcSryTbHH+mxO/rOHbIQsbepYdJTdem0/rRRhQh+X4lMjAYGt0s/FGUQoaoPLkxKijojKq22qNqVBslkR7L+LcOWSAP6b0TDzKd717f70sA9yKeBANjEIiBlQRW7AcsAyNDVkbpameUU13Mbu9pprgU77fYGdV2e5hMd0MRMtPdv0ocrvEyP0ZtiwNzkShPGbMTA/4LA5JlxBb1IHu2EbqvVcGVVT64btWB8BMf8HoHYPfxwbDizACU5bnoqpv6hsoJ84lEhjwkLHgENDLxWnGMoMBALVUHI6slMHmXC1d/4cL7QSH4ZqvA8505/PaMFhTby2nepMtZeKm5Z4OXtAdxpTizWF3WLeMGYaAM18hqNGOgGPzzGmicaYBzQSlcCJXA1H1u+NRtA0hzD9PpHxxzZJ5sHUhYjjeFMMQhFMfAUCw97qwexMgOHbQVvvj9BfgwVATn70hhOCiBibt8GF8WhE2jXih+3k0/c+YV587Xuno3MmTv4+SX4HrhBphBihyMFFlBtqMByjVOuPINH0aXhTAWKobRpWK4GBLBRIgPn/+RFw6Mx8amjt416HPu8vjWLf+JCC7KFshSnUy92QjuI0bG1N8MbZ9ZYGiZilv1/1QB79wrg69XcmF4QQ6XgyVw80FO+OqcACpTFHT6Mb9jT1PHI8tJyMJ7KWCBSw+xnfuFzMe/FcIwBpy6Q8GbX2qg+T0X+Kf10PmtFQI/VsDZ4EG4vCoI31goAMdzJL2zod/Jqzue6HISa5tV2fppU6QnqIXu25XMuXkpvDGngaOzJhgJiuH8dQUEpnXw1g8kzlYFnu9rITCvCl/4uRzU7W46u8zn5Fd6ezaNjZxHWlqgea4RTLMvMpoZN9M0a2e8i9XMiZCWeX2lgvGvlDPepVrmyKKNoWaOMpJbneGWxRYQdLTRAl6Xo0jkDmDU1jgwh8gVyJFpTcVvitgHnWu+yaq1wRu6yNmvyiODU5o190f6iHXMGakfs6/ZxhwR5UVXRD3U/leVrhVKEeU9mP9ygzS7rXsjwSf2EnlSNcuMR8WCZYWaZBvUZByCmsxDUJtcjy8BfEGw60DJssVF4b0C2UCLGvFUaF6VpNYflj5t8ycsZ6H8VCGi+qQcnUdMUL0CpKEFSEXzkcwvRloP3veJENlXhio8QiQfkCCNt5RQ0UK24rSQoETFHJJ7gF1KYlRKYhbR/0UO2vLY2ZProxELDiI2P0olMtj/ALWFCEiO8ztcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/a929424924f67d29f957c15d08f372ec/5f1d2/output_23_0.png\"\n        srcset=\"/static/a929424924f67d29f957c15d08f372ec/5a46d/output_23_0.png 300w,\n/static/a929424924f67d29f957c15d08f372ec/5f1d2/output_23_0.png 302w\"\n        sizes=\"(max-width: 302px) 100vw, 302px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>보다 많은 이미지를 확인해 보기 위해 위에서 정의했던 <code class=\"language-text\">class_names</code>를 적용해 어떤 사진인지 label과 함께 확인해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    plt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>yticks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>train_images<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span>plt<span class=\"token punctuation\">.</span>cm<span class=\"token punctuation\">.</span>binary<span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span>class_names<span class=\"token punctuation\">[</span>train_labels<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 573px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7dbc8bd8b63af5dca5a6373e2189da9b/3c024/output_25_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAFGElEQVQ4yzVU90+bVxT9/gH+gvwESK2QUCtVKoUQFRBQRlkiTVLAlJXBKAICNaZYhhgTgwwBm2E2GBoQYpQ9zN6ryBgoOwQIGyQ2gTBuz7PUHz77e+9779x7zj33coeHh1FnZ2djU1NT4zs7O+HDw8PBQUFBk+7u7qMKhUJERD6dnZ1jhYWFY6enp29x/mlycvJ4VFTU6MrKSvKXL1+8iouLx2NjYwfPz8+V3P39ffHl5SVZWFiQq6tr7ocPH+RhYWHk7e1NpaWl1QAUr62tEQLR1dVV293dHX9wcJDq6uoIiXTgu1ClUpGPjw9eScPJZLKygIAAsrS0JCMjoyJsZqWkpJC1tTV9/vy5HgBvNzc3aXR0lAF03dzc/KnRaKiyspI+ffrUh/PxOTk55OLiQhcXF/9yDQ0NzyQSSXlmZmZ5dXX1L7jgGhIS8t7U1PQ9LvqAku3IyEhpTU1N+dHR0UuAW5SUlBQhaMnc3NwLBLUWCoUqLy+vvzY2Nl5z+AkNDAzsR8oDoBWELAIQdRBPP8D5y8vLHk5OTn0PHjwYqKqqikMAN4D0Aqy3o6Mjfn19/Qlk60PQHtxP48bGxlQCgYBCQ0OpoqKiAIAZjNK7d+9oYGDgb2glMTAwID09PfL392eaxTCxAEqNjY09KEQcW/f09FBWVtYM19/fXxoZGUnBwcGEShasrq5mIho1NzdTV1dXXVJSUqK9vT0hS3J0dNQBXl9f08HBAeFsT3Z2dlxiYiIhU0JyM5xarXbJzc1VovTZ0MYJlH7a39/PPTk5UeLyE6lUatHU1JQ9OzubA2t4TUxMPETgTNBTQk8eLPTIwcFBAY2zFxYWXnLQiA/9NG5ublrQew3dQuCvWXNzc01tbW08QH0RZAqXtfBhMp5fsTcFqhrII8Oax9Z4/rm9vc3jsKliZY+Li6OZmZl8fMjY3t4mfX19pmktvksQgJjXWltb1bu7uwJmI+ZLGL8baxE7397eTvX19dMcAEry8vIIdJi2+SiI4tWrV2RlZcVAahcXFxPGx8cJ/9Tb26sGuGBvb48YCDTuAkMRDE9sDwlpGeWfw8PD01HlTHSMfXR0tK2NjU0WfClHxMcowCNkkYpzcnx/CqAfYLXU+fn5dEjxDIV5yNb4ng76/hzKL0Rmi5OTkytDQ0MCvEcg41U4fxHv0qWlpRceHh5LZmZmy6h8GkB5MTExS2wPBVXgjF93d/dSWVnZ3PHxcSmH6CrWVsbGxmRoaKjTsKWlhUQiEfNaLYSWwDr0/Plz1mpqaCfg8/k6mymVym7QFf3fmshay2VkZBRiuhC7BO1yAJgOaSg/P59gnyqs3zCTe3p6Mo1bysvL/2Aao9VYIdWgGcs8yHTGxJrkPn78aAdzy7CQIZIt9PgRLSaFN6XT09NO6F8zsVgsxfRJQQaP4cPvMIXewNCJsJX71taWCajHo4BsKnly8JMkIiJi19nZeR8CM9/F4PAhKO+gR5nwv4POTlFR0R7zGTIMAO1d7G1D0wJMo0AUdBfTaQOMaphtcLaIWPsBIBdrOXqSIDyjWA0QMTIhTBRmjTYej8dnfc9os1ZEDYQoEJmYmFBfX59GByiXy8nPz4/QJTpAUNZpCMGrUTlxQkIC2dnZkVarbcPY4qelpVFqaiqhOB1oNyHGnW5+YljoAL+FD31B2ReXv4EmxugIf7ShPzT9Htp+jcLxoKMvxpUpJrohppA3dPeFpczw/hUC8pD1b5inFv8Bl65n1RWxspsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/7dbc8bd8b63af5dca5a6373e2189da9b/3c024/output_25_0.png\"\n        srcset=\"/static/7dbc8bd8b63af5dca5a6373e2189da9b/5a46d/output_25_0.png 300w,\n/static/7dbc8bd8b63af5dca5a6373e2189da9b/3c024/output_25_0.png 573w\"\n        sizes=\"(max-width: 573px) 100vw, 573px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"모델-구성\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%EA%B5%AC%EC%84%B1\" aria-label=\"모델 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 구성</h3>\n<p>이제 실제로 Fashion MNIST data를 예측하는 모델을 만들어 보겠다.</p>\n<p>신경망 모델을 만들려면 모델의 층을 구성한 다음 모델을 컴파일 해야한다.</p>\n<p><strong>층 설정</strong></p>\n<p>신경망의 기본 구성요소는 층(layer) 이다. 층은 주입된 데이터에서 표현을 추출하는데 아마도 문제를 해결하는데 더 의미있는 표현이 추출될 것이다.</p>\n<p>대부분 딥러닝은 간단한 층을 연결하여 구성이 되고 <strong>tf.keras.layers.Dense</strong>와 같은 층들의 가중치(parameter)는 훈련하는 동안 학습된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">model <span class=\"token operator\">=</span> keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">#2차원배열(28x28 픽셀)의 이미지 포맷을 28*28=784 픽셀의 1차원 배열로 변환</span>\n    keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Flatten<span class=\"token punctuation\">(</span>input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">28</span><span class=\"token punctuation\">,</span><span class=\"token number\">28</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">#128개의 노드(뉴런)</span>\n    keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">#10개의 노드의 소프트맥스층 (10개의 확률을 반환하고 반환된 값은 전체 합의 1이됨)</span>\n    <span class=\"token comment\">#각 노드는 현재 이미지가 10개 클래스 중 하나에 속할 확률을 출력</span>\n    keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>softmax<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">WARNING:tensorflow:From C:\\Users\\nicey\\.conda\\envs\\nlp\\lib\\site-packages\\tensorflow\\python\\ops\\resource_variable_ops.py:435: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\nInstructions for updating:\nColocations handled automatically by placer.</code></pre></div>\n<p>위의 코드를 확인해보면 model은 총 3개의 layer를 갖는 것을 확인할 수 있는데,</p>\n<p>첫번째 layer, Flatten 에서는 28x28로 되어있는 2차원 값을 1차원으로 변환.</p>\n<p>두번째 layer, Dense 에서는 128개의 노드를 가지며 relu라는 activation function을 수행.</p>\n<p>세번째 lyaer, Dense 에서는 10개의 노드를 가지며 softmax함수를 통해 classification하는 작업을 수행.</p>\n<h3 id=\"모델-컴파일\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%EC%BB%B4%ED%8C%8C%EC%9D%BC\" aria-label=\"모델 컴파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 컴파일</h3>\n<p>모델을 훈련하기 전에 필요한 몇 가지 설정이 모델 컴파일 단계에서 추가된다.</p>\n<ul>\n<li>손실 함수(Loss function)-훈련 하는 동안 모델의 오차를 측정. 모델의 학습이 올바른 방향으로 향하도록 이 함수를 최소화해야 한다.</li>\n<li>옵티마이저(Optimizer)-데이터와 손실 함수를 바탕으로 모델의 업데이트 방법을 결정.</li>\n<li>지표(Metrics)-훈련 단계와 테스트 단계를 모니터링하기 위해 사용. 다음 예에서는 올바르게 분류된 이미지의 비율인 정확도를 사용.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>optimizer<span class=\"token operator\">=</span><span class=\"token string\">'adam'</span><span class=\"token punctuation\">,</span> \n              loss<span class=\"token operator\">=</span><span class=\"token string\">'sparse_categorical_crossentropy'</span><span class=\"token punctuation\">,</span>\n              metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>모델이 사용하는 optimizer를 선택해주고, loss function을 선택, metrics는 측정항목을 입력해 준다.</p>\n<h3 id=\"모델-훈련\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%ED%9B%88%EB%A0%A8\" aria-label=\"모델 훈련 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 훈련</h3>\n<p>신경망 모델을 훈련하는 단계는 다음과 같다.</p>\n<ol>\n<li>훈련 데이터를 모델에 주입 - 이 예에서는 train<em>images와 train</em>labels 배열.</li>\n<li>모델이 이미지와 레이블을 매핑하는 방법.</li>\n<li>테스트 세트에 대한 모델의 예측 - 이 예에서는 test<em>images 배열이다. 이 예측이 test</em>labels 배열의 레이블과 맞는지 확인해야 한다.</li>\n</ol>\n<p>훈련을 시작하기 위해 model.fit 메서드를 호출하면 모델이 훈련 데이터를 학습한다.</p>\n<p>fit 함수를 이용해 학습시킬 images와 labels를 넣어주고 epoch를 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>train_images<span class=\"token punctuation\">,</span> train_labels<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Epoch 1/5\n60000/60000 [==============================] - 3s 58us/sample - loss: 0.5000 - acc: 0.8243\nEpoch 2/5\n60000/60000 [==============================] - 3s 53us/sample - loss: 0.3762 - acc: 0.8633\nEpoch 3/5\n60000/60000 [==============================] - 3s 51us/sample - loss: 0.3366 - acc: 0.8770\nEpoch 4/5\n60000/60000 [==============================] - 3s 53us/sample - loss: 0.3162 - acc: 0.8841\nEpoch 5/5\n60000/60000 [==============================] - 3s 52us/sample - loss: 0.2963 - acc: 0.8911\n\n\n\n\n\n&lt;tensorflow.python.keras.callbacks.History at 0x237f2119e10&gt;</code></pre></div>\n<p>위 코드를 실행하면 학습되는 상태정보를 순차적으로 확인할 수 있다.</p>\n<h3 id=\"정확도-평가\" style=\"position:relative;\"><a href=\"#%EC%A0%95%ED%99%95%EB%8F%84-%ED%8F%89%EA%B0%80\" aria-label=\"정확도 평가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정확도 평가</h3>\n<p>이제 model의 evaluate함수를 이용하여 test images와 labels를 인자로 주어 테스트 세트에서 모델의 성능을 비교해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_loss<span class=\"token punctuation\">,</span> test_acc <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>evaluate<span class=\"token punctuation\">(</span>test_images<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'테스트 정확도:'</span><span class=\"token punctuation\">,</span> test_acc<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">10000/10000 [==============================] - 0s 28us/sample - loss: 0.3484 - acc: 0.8758\n테스트 정확도: 0.8758</code></pre></div>\n<p>테스트 세트의 정확도가 훈련 세트의 정확도보다 조금 낮다. 훈련 세트의 정확도와 테스트 세트의 정확도 사이의 차이는 과대적합(overfitting) 때문일 것이다. 과대적합은 머신러닝 모델이 훈련 데이터보다 새로운 데이터에서 성능이 낮아지는 현상을 말한다.</p>\n<h3 id=\"예측-만들기\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%B8%A1-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"예측 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예측 만들기</h3>\n<p>훈련된 모델을 사용하여 실제 모델이 어떻게 예측하는지 test_images로 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">predictions <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test_images<span class=\"token punctuation\">)</span></code></pre></div>\n<p>테스트 세트에 있는 각 이미지의 레이블을 예측했다. 첫 번째 예측을 확인해 보면,</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">predictions<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">array([1.1595419e-08, 1.3519094e-10, 2.1264961e-09, 1.2290319e-10,\n       7.7952078e-10, 4.4512744e-03, 2.5239646e-07, 7.9262927e-03,\n       1.2780076e-07, 9.8762208e-01], dtype=float32)</code></pre></div>\n<p>이 예측은 10개의 숫자 배열로 나타낸다. 이 값은 10개의 옷 품목에 상응하는 모델의 신뢰도(confidence)를 나타내고 가장 높은 신뢰도를 가진 레이블을 찾는다.</p>\n<p>해당 10개의 값중 가장 큰 값을 정답이라고 생각할 것이기 때문에 numpy의 argmax함수를 이용해 가장 큰 값을 갖는 인덱스를 찾자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>predictions<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">9</code></pre></div>\n<p>모델은 이 이미지가 앵클 부츠(class_name[9])라고 가장 확신하고 있다. 이 값이 맞는지 테스트 레이블을 확인해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_labels<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">9</code></pre></div>\n<p>오! 정답..^^</p>\n<p>위와 같은 방식으로 총 25개의 test_images에 대한 이미지와 예측결과를 비교해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    plt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>yticks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span><span class=\"token string\">'off'</span><span class=\"token punctuation\">)</span>\n    plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>test_images<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span>plt<span class=\"token punctuation\">.</span>cm<span class=\"token punctuation\">.</span>binary<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># predictions에서 가장 큰 값을 predicted_label 로 가져온다.</span>\n    predicted_label <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>predictions<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    true_label <span class=\"token operator\">=</span> test_labels<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n    <span class=\"token comment\"># 이때 실제 test_label과 일치하면 초록색 글씨로,</span>\n    <span class=\"token keyword\">if</span> predicted_label <span class=\"token operator\">==</span> true_label<span class=\"token punctuation\">:</span>\n      color <span class=\"token operator\">=</span> <span class=\"token string\">'green'</span>\n    <span class=\"token comment\"># 일치하지 않으면 빨간색 글씨로 출력한다.</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n      color <span class=\"token operator\">=</span> <span class=\"token string\">'red'</span>\n    plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">\"{} ({})\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>class_names<span class=\"token punctuation\">[</span>predicted_label<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n                                  class_names<span class=\"token punctuation\">[</span>true_label<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                  color<span class=\"token operator\">=</span>color<span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 591px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c88fb25e850211d1ac27b51991cb19e9/e4c9a/output_49_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAFmUlEQVQ4yx1U7VNSaRTnf+nDfqhmpxlrdiZ33BqzcmutJtNGq5l1LbNVa0WcTBuUMlBM05IQMBES30oF0RQFRRCQDLgiIKAgFzWVK77xYoJnn9u9H+7znOc5v3vO7/zOoeA4fj4UCmkAQBeLxd4tLy+nU6lU3ZUrVwzj4+N0ZL/L5XKNt2/fNqB71Hg8/ri2tnaGzWYb0Fm+z+craW5u1tfV1c0g3xxKIBDIQgeg1WpBJBZ9M5vNJZmZmZCSkgLV1dX96Kiqra0Nyp6VweHhYRvat+h0OtDpdaRbo0qlEqIHWCwWyGSyVxSb1Zb11fgVPrR+ADqdbprWTtPS09PhdMJpqKiokCInhmZKA12dXbC7s9uO9nzbvA1MJhMJ2IR8RR/FH0EgEIBGo2FRhBPCxBnHDMfisXAxP1baIGm4+LLpJYdeT+fRX9P/9hG+i93D3S2MN4wWi9uSYXaZb4oHxC1tn9paZhdmr3l8nhvMZia3nlfPXV1dTaagv1z61PcJSziTYHUtuYT7kf1szbTGOqYcsx/GD1n+Vf8/8mH5Qmd3p30ZXy4ntojS2FHMEYe4fX1z/UkkEilHGLZYPGZfWVnJIwGzjUYjIKJhbW3NvLmxSVtcXISdnR3YWN+Qeb3eF6MjozA4OEim2U4ECIHX44Xt4Dasrqy+tVgsYq1G+5MSHo9XQzk6OspwuV2AKgmoYloE8Fhv0IPT5QT3orvL6XSW9/b2QkdHB6ACcHd3d9+iSsMRete+r7GtVisPBQIocrA77FUUs9t8XK6Rv3xU9qhajalz9Rr9qZHpEcaUdaoGs2FpKKrf+sb7mJ1fOlmqSVWK0W68rF/Q1xqchhqNSXNhfm3++oR5gqW1aWuxZew8mfJ1znvObtq1tBCSwkg4HM5DtlCACBx4vJ7W/f19pL3YD2SLosjq0bdmaHjoB5LIAakAH+57k5SUFLmZfvMARfmUsrW1ld3U1ASZGZnQ1dVlQgA0RC5IOiQgahcNNHM4DGF7O3wZGYG+/n4hKZtOSSeQUiFlg+6Ijh07BieOnwCpVMqi6PX6NJlcFlQoFXtSmVSOeHiAWbE9m2M+8s1i4mtUE8UOq/Vg0eGITKvVrxEIk1pKjVJp1DBa01tbW+tO/noydPb3s2H5kLyUsuRe+qVf0V9Z2VDJMnwz3J13z5+RDEtYLC6TrTKr02PupSRscJA9zOHUhp2uvzC3LcXg0NdiXowV3Aue183oLqVmpjLvF99/hfvxRJLDzNnZWSguLiZbS2e325+IxWLg8/kwphjr9ni9FRXPn8PD/HwYGh7mISm9GxgYALLdenp66hRjCn5ycjLk5uYCkhuDchQ/yt7e3obenl5AErLMfp2lkbpDgwEUowrppFr9opbNhkoGAz52dIjmsDnBvbv34PKly5CamvoWBdR+9epVQMOB5JRJ2QntpLg8LjOzjjl3ED9o/Sz7nCX7IpuTj8rtHb0S5szUVE5jTY3jycOH80Ier8y/ulI8ohxxqDQqm2pCVYBv4vRzKedsJc9KHCvBlQKK3WM/lV+Sz0lISuA28hv/s3lt5/AgziWiBM/53Z2zaLZcAILgQzTackQQGfjaalogEuATYYK7H97/c843d6eSXdnS3NbcYsJNNyhKpTL7VvotSExMhMKCQlM0GqUFg0HALBigSTIQioQZ0YMDmJxSkxy27+/tCaKRKCjHxqGJ1BuAUCKRgHpSTab8ijLQP5BVVFj0k1RaCc2ECKeJReKfrSjgC6SDskFGw+t6yHuQB4X/Fgj7pFIev1UAze/fQ05ubiMCEY0jcIvZQgKyKAqN4g9qOXUsJz9HWcWqqsfX8LT17XUlESIm/Rv+p8Y5Yxa+gU8F9jYn8YC/6Lt1vmAXx9XR9fXJzQXnfXzTX9Td36UaGh+aJHaJO/8DO6hPk92lpB0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/c88fb25e850211d1ac27b51991cb19e9/e4c9a/output_49_0.png\"\n        srcset=\"/static/c88fb25e850211d1ac27b51991cb19e9/5a46d/output_49_0.png 300w,\n/static/c88fb25e850211d1ac27b51991cb19e9/e4c9a/output_49_0.png 591w\"\n        sizes=\"(max-width: 591px) 100vw, 591px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>빨간색 글씨가 3개로 확인. 오답이 3개~</p>\n<p>이제 10개의 신뢰도를 모두 그래프로 표현해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">plot_image</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> predictions_array<span class=\"token punctuation\">,</span> true_label<span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  predictions_array<span class=\"token punctuation\">,</span> true_label<span class=\"token punctuation\">,</span> img <span class=\"token operator\">=</span> predictions_array<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> true_label<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n  plt<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n  plt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  plt<span class=\"token punctuation\">.</span>yticks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  \n  plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span>plt<span class=\"token punctuation\">.</span>cm<span class=\"token punctuation\">.</span>binary<span class=\"token punctuation\">)</span>\n\n  predicted_label <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>predictions_array<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> predicted_label <span class=\"token operator\">==</span> true_label<span class=\"token punctuation\">:</span>\n    color <span class=\"token operator\">=</span> <span class=\"token string\">'blue'</span>\n  <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n    color <span class=\"token operator\">=</span> <span class=\"token string\">'red'</span>\n  \n  plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">\"{} {:2.0f}% ({})\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>class_names<span class=\"token punctuation\">[</span>predicted_label<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                                <span class=\"token number\">100</span><span class=\"token operator\">*</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>predictions_array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                class_names<span class=\"token punctuation\">[</span>true_label<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                color<span class=\"token operator\">=</span>color<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">plot_value_array</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> predictions_array<span class=\"token punctuation\">,</span> true_label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  predictions_array<span class=\"token punctuation\">,</span> true_label <span class=\"token operator\">=</span> predictions_array<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> true_label<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n  plt<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n  plt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  plt<span class=\"token punctuation\">.</span>yticks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  thisplot <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> predictions_array<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">\"#777777\"</span><span class=\"token punctuation\">)</span>\n  plt<span class=\"token punctuation\">.</span>ylim<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> \n  predicted_label <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>predictions_array<span class=\"token punctuation\">)</span>\n \n  thisplot<span class=\"token punctuation\">[</span>predicted_label<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>set_color<span class=\"token punctuation\">(</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span>\n  thisplot<span class=\"token punctuation\">[</span>true_label<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>set_color<span class=\"token punctuation\">(</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>0번째 원소의 이미지, 예측, 신뢰도 점수 배열을 확인해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nplt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nplot_image<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> predictions<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">,</span> test_images<span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\nplot_value_array<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> predictions<span class=\"token punctuation\">,</span>  test_labels<span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 356px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/140f970838157a77f9b0072dca5d3e93/50ac3/output_54_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACMElEQVQoz4WSTWsaQRjHh15baNqmX6KX2t4WCv0AHgI5RIl+BEEPghATKPYkUkuIqRC89SIx4CmINUi1riImBkObBd9dvMi6G3V326zOS2fsKqnQ5oH/zOwzw2//zzMDyuXyeqVSefYPPc9ms48AjVqt9rbT6Tiotqhsd7TV7XZtrVbLlkgk1sB4PMa6rquapukLqarKNDEMg/R6vY8MOBwOv5F7Ip/Pvwb/2cdsoKBPDDgajTJmfkqF7giyeTZDkOf5lwsgRDQYhLrF7XYb088pdc8cRhhQUZSz+V8wnuGVMBG4WOQtwDyEFo7S6TRxuVzE4/HMwuEwof1ZBcJlCfjPyKz0+xBnsyaQWYYQ4lKpREKhEIMRh8Mx83q9JJlMzoGyLP8FZMYQwvOVohCyvQ1xNEqB1WqVpFIpFIvFcCAQIG63m9jt9jnQ6XQy+BwoSdISuKzSNCrLhGxsQByJUGA8HicUNN3d3YM+nw/6/X4YDAah1Wo1GJiWfWDe8rKHbKIvgPb7J2YZScJkcxPiw8OCBdz3FBRFPlq5ZQZE9XodFYtFdHV1ga6vB9hmI2h/P2cBNzdqW9OMH7puCJOJUZ9MfgmjkSao6u13Tbvti2J/jwEHg8FXRmNvk4UgCKRQ4Ekud0YuL0VCgbT/X17Ro/7HAETXAfjwFIDAEwDerQFwQNdHNPeezuABA56fX7xoNptvGo0GJ4oil8lkuOPjBHdyEudOT3nOam1zOzufH/4GmNCk81H4RZQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/140f970838157a77f9b0072dca5d3e93/50ac3/output_54_0.png\"\n        srcset=\"/static/140f970838157a77f9b0072dca5d3e93/5a46d/output_54_0.png 300w,\n/static/140f970838157a77f9b0072dca5d3e93/50ac3/output_54_0.png 356w\"\n        sizes=\"(max-width: 356px) 100vw, 356px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">i <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\nplt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nplot_image<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> predictions<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">,</span> test_images<span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\nplot_value_array<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> predictions<span class=\"token punctuation\">,</span>  test_labels<span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 356px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f9e302a9169fd2feb594b07972cfd915/50ac3/output_55_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACJUlEQVQoz42Sz4tSURTHb+siqmnof2iTtXsQtOkfyMW4EHHhJlwILQYUy4UrNxLSUNAwTLsCFy79iYVpg6iokOjIk9dDZPytT30x+e69p3NfRiVMzOGdew/n3Pt5937PJcVi8XapVNq5wHez2ew1glav1x8pimJH31NU1aY0mzalVrNhvPdNUWydTscWjUZvEE3TuK7ry9VqpS+XS13MG1+s12tQVfWlAI7H48/wtxWLAJHIP6lcLveAwMXGxYCg1wI4n8/TZpaxtRghkWCwv88wppgTRguFwr3fQCoW4Wa+AXE0sRH6/f6BAM5ms4z5F0oNLuqpFOc+HxcxUIof5Qi0ENQQDMNgjUaDBwIBiMfjMBqNBNEQALz6NpCaR0gmAXw+MIGM/QHa7XYIBoPM7/fzUCgE4XAYpYlALBYzKpUKpFIpEzidTi8HtFqt4HK5mNPp5A6HA9xuN3i9XvB4PAbmAOsHm6ZcDthqtaBWq60r5TIto+NTodVqVfiP4XAIvV7v1dYJf2mYTJoaMhFvNMzn85b/ddk0BL3d6rJhdjmdZnhCZsbIFG0+OfliIQtNk/XForGaz5v6ZNI2Z/SVpn39rutqt9t9LoCDweCT4Bnn5+YzYAm88gsv1FWAyVCoYEAm8/G+WEvw5d48JmQXxbr1jJDrHwi584aQHSxdIRvDBt2VZfmh3G5Lcr8vnR69k0bep9LjJwPp+KgtnZ2dSoeH76/+BMtOqPtZfFf7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/f9e302a9169fd2feb594b07972cfd915/50ac3/output_55_0.png\"\n        srcset=\"/static/f9e302a9169fd2feb594b07972cfd915/5a46d/output_55_0.png 300w,\n/static/f9e302a9169fd2feb594b07972cfd915/50ac3/output_55_0.png 356w\"\n        sizes=\"(max-width: 356px) 100vw, 356px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>몇 개의 이미지의 예측을 출력해 보면, 올바르게 예측된 레이블은 파란색이고 잘못 예측된 레이블은 빨강색이다. 숫자는 예측 레이블의 신뢰도 퍼센트(100점 만점)이고, 신뢰도 점수가 높을 때도 잘못 예측할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 처음 X 개의 테스트 이미지와 예측 레이블, 진짜 레이블을 출력</span>\n<span class=\"token comment\"># 올바른 예측은 파랑색으로 잘못된 예측은 빨강색으로 나타냄</span>\nnum_rows <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\nnum_cols <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\nnum_images <span class=\"token operator\">=</span> num_rows<span class=\"token operator\">*</span>num_cols\nplt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token operator\">*</span>num_cols<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">*</span>num_rows<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>num_images<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  plt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span>num_rows<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">*</span>num_cols<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">*</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  plot_image<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> predictions<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">,</span> test_images<span class=\"token punctuation\">)</span>\n  plt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span>num_rows<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">*</span>num_cols<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">*</span>i<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  plot_value_array<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> predictions<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 708px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2be05572804cff1e55f90a0c8d119c15/3cb0f/output_57_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAAEsUlEQVQ4yzWU/U9aZxTH+T+W/dB0/WVJl+ylcc2S9aelSZt0c/vB1bXZ7FqXRre1SdN27WLfZtZaqiu+IILirBZbkVrUVkAUpcDFIqC8K4K83cvlXi7eC5cLXC7PHkx3k+eH+z05J5/vOed5ROHwzgFBECYBAHMkmW3J5XIPWJZdBIC/8eLFTFtjY6Ohs/NuD47XzprNhflSiZkol6tNExNPxy5caJ2vVks/Tk1RYpbl9DRNd4gwLHGkVOLA7KwWKBRDClg4Ag9Ip4FtYKBfc/To5+DMmSaM44CUIMD/n1irfQnkcjkQhJJsdraSqovVKr8u0uvdhy2WNc/MzFxcqXz2J9Sfx+MxTCbjpHL5kwfHjn1FtLZenE8khCsWCx8FoOwgycKv6+ubDqVyPJnJZK9rtdw0zwsoBJOL/H5wcH7ePCiVjo9Bgh8mJlLXkkl0NBpNXrTZtn6WySYmFQrNvVSKasRxcoii8EepFHNqeFgtOXfu0pNYjIL20eskSSlxPN0mgkSfer0esLS0VIeWzsxwgXe2TGazaXJ0dATcvt2xC/8ldXF7ez92X61WCzLZILRZ7Jubq+y3iecrVlG1WvsoEAgQCws6gWX37k9NsaZ6UBCqU3a7Xdrb2wcGBqT2RCJ8F8PY2spKJQ0AfWNtzZEYGVHWMhm0U6PhLPUcjivOiAIB/n2t1ipWKrX9oRD57epq6qLHQz0mCPSsz5f8vr9fNTQ3Z70ajQaPh0LoQ6OR7AiFIse3t+m/V1d9A05n8hunE2t3uageDEu3QMLqJ263W4hGoxCZleB4yZXJ7NvSbWxsjBkMerCwsBCsT7YuIkitwvPkPdjnQrlcBiiK9tRqvBemg0qlsiSCu/MxgiCVYDAEslnsHwyrODBsv+Aro3H53+lpDYA754f97aqLVqtQLJXwO5FIjMnnCyCVQrthoY0I7GK5XDGIXK7N9xyO8ONQiFBEImhjNIr+ZrORg+Fw+pzD4TvT1TU8Njmpu0nT+MlwmJQgCNHp822diMWKj2gaDPv9xHcomrq8uEhJMQxrFcXjicMEQaScTlfxzRvkLwiu390VgN1eU/l8SO/p081ALO4xQ7iO9XWeIwg+RtOZq5Bmx+v1cU6n+y7P88t2u1DjOG4KEr79zOvdBE6nA+h0OjlM3Klb29wEFptNN93d3Q26u3tQKA1QFADFIgAsSzx0u13AZrPAnIVBGEvkcvW14d+KDIb4gUymKsvnwROfL9tcKBBXggFmFEEKvxiNSz85HDvPXr+23aGo+Ndm895QJEKJ4ZRPBYOZvnicGff7M025HHltba0wApe7TbTh3voQTeFuksxFM3j2jxzNqHjEkirQZD/NFDtVqueY3x98SRD5yysr3E4ux6xBorb29kv2hoYvdsPhyNVMJq/GcS5ZKDBDIkmv5IhqUgWsNiswmZYVtfrjwLKgVCzahJqgkUgeA4fDjlWrQPpu+tA2Iz558gQ4dOgDoFaPyxgGJHl+/644RB4EOUgkk5osium3PJ7zDFvoYkwWI5Ykb+b28r+fP9++oteb+miaO7u8zL7a22OfptNoU3Nzi6qh4UuDTveqZWsr+2h1lVxkmOyt/wD+SvWxavhp3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/2be05572804cff1e55f90a0c8d119c15/3cb0f/output_57_0.png\"\n        srcset=\"/static/2be05572804cff1e55f90a0c8d119c15/5a46d/output_57_0.png 300w,\n/static/2be05572804cff1e55f90a0c8d119c15/0a47e/output_57_0.png 600w,\n/static/2be05572804cff1e55f90a0c8d119c15/3cb0f/output_57_0.png 708w\"\n        sizes=\"(max-width: 708px) 100vw, 708px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>마지막으로 훈련된 모델을 사용하여 한 이미지에 대한 예측을 만들어 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 테스트 세트에서 이미지 하나를 선택합니다</span>\nimg <span class=\"token operator\">=</span> test_images<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(28, 28)</code></pre></div>\n<p>tf.keras 모델은 한 번에 샘플의 묶음 또는 배치(batch)로 예측을 만드는데 최적화되어 있다. 하나의 이미지를 사용할 때에도 2차원 배열로 만들어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 이미지 하나만 사용할 때도 배치에 추가</span>\nimg <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>expand_dims<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(1, 28, 28)</code></pre></div>\n<p>이제 이 이미지의 예측을 만들자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">predictions_single <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>predictions_single<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[[2.7692769e-05 5.9337044e-08 3.9947031e-06 2.0716065e-08 5.4740326e-06\n  2.3610677e-01 1.6528367e-05 2.1145634e-01 4.4389912e-05 5.5233872e-01]]</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">plot_value_array<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> predictions_single<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> class_names<span class=\"token punctuation\">,</span> rotation<span class=\"token operator\">=</span><span class=\"token number\">45</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 356px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/61bd1485969fac03a0ddac2978b3ddf9/50ac3/output_64_0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACBklEQVQ4y62TPW/aUBSGLykpqVJjNQSM+RBClQXChB/QhTVdImVJUejWdqi6WGLrXgYW1DIAYkJI/QX5EwxIkZ0BKTICBAPBkahkQ11/9VxjWtpGKqW50iu/5/ie597j64va7fbT4XD4djwevx6NRm+21CuofycIwjPU6/VeWvc0JpNJAw0GgxdOrII0kL6FvmKAJEkfUb/fzzlA3dxyGIaJN2JNp9PKH8B/bXNZcQ9APHM1W5aXQEn6T6BhLP3xsalxHAD0vwBxuErd5eHb2THDmNrpqd30ZjtcT69g68CjI1PL5TYAru9qPp9bi8Xil4WWLZsWy5ra2dlP4Oo//AbF+l3Ci1WrVb3ZbNoeavRGo6Hf3Eh2nEoZqgP8hODa5Tc5hHq9brVaLduLomgVCgU41Vs7ZlnLOj/H7raGut3u89lsJkI7l4qi8CBBluUraJGHp4BzqqoK5XJZqNVqPFQJnU7nCoDC9bUowOXik8kv/MnJoq8ow/com83ucBy3S9N0IBwOH8ZisQOGYchIJOKLRqO+eDz+JBQK+SmK8pIkSYGnEonEY4IgfJDz03QwGAh8cHs8QZplEx7kDAIUAB2A9kF+0CPH74IeOu/2HI/zhyA3CEN8INImpdNpl9frJaAVhFUsFl35fH4H/TYqlcoPn8lkHpRKJdunUkm3y7Vvwy4uPqPvxgfXoAdTf2MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/61bd1485969fac03a0ddac2978b3ddf9/50ac3/output_64_0.png\"\n        srcset=\"/static/61bd1485969fac03a0ddac2978b3ddf9/5a46d/output_64_0.png 300w,\n/static/61bd1485969fac03a0ddac2978b3ddf9/50ac3/output_64_0.png 356w\"\n        sizes=\"(max-width: 356px) 100vw, 356px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>model.predict는 2차원 넘파이 배열을 반환하므로 첫 번째 이미지의 예측을 선택한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">prediction_result <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>predictions_single<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>prediction_result<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">9</code></pre></div>\n<p>이전과 마찬가지로 모델의 예측은 레이블 9이다.</p>"},{"id":"38c67cff-274e-5f12-8ddf-70699490c20a","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":2}],"frontmatter":{"title":"NLP - 텍스트 분류 (Word2Vec) - #3","path":"/nb-text-classification-word2vec","tags":["ML-DL","ML","NLP"],"excerpt":"이번에는 word2vec을 활용하여 모델을 구현 해보자.","created":"2019-07-19T00:00:00.000Z","createdPretty":"19 July, 2019","updated":"2019-07-02T00:00:00.000Z","updatedPretty":"19 July, 2019","featuredImage":null},"html":"<p>이번에는 word2vec을 활용하여 모델을 구현 해보자.</p>\n<h3 id=\"word2vec을-활용한-모델-구현\" style=\"position:relative;\"><a href=\"#word2vec%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-%EB%AA%A8%EB%8D%B8-%EA%B5%AC%ED%98%84\" aria-label=\"word2vec을 활용한 모델 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>word2vec을 활용한 모델 구현</h3>\n<p>word2vec을 활용해 모델을 만들기 위해서는 먼저 각 단어에 대해 word2vec으로 백터화해야 한다.</p>\n<p>word2vec의 경우 단어로 표현된 리스트를 입력값으로 넣어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">DATA_IN_PATH <span class=\"token operator\">=</span> <span class=\"token string\">'./data_in/'</span>\nTRAIN_CLEAN_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'train_clean.csv'</span>\n\ntrain_data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TRAIN_CLEAN_DATA<span class=\"token punctuation\">)</span>\n\nreviews <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nsentiments <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nsentences <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> review <span class=\"token keyword\">in</span> reviews<span class=\"token punctuation\">:</span>\n    sentences<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#review문장내 단어들을 배열로 저장(뜨어쓰기 기준)</span></code></pre></div>\n<h3 id=\"word2vec-백터화\" style=\"position:relative;\"><a href=\"#word2vec-%EB%B0%B1%ED%84%B0%ED%99%94\" aria-label=\"word2vec 백터화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>word2vec 백터화</h3>\n<p>이제 word2vec 모델 학습을 진행하기 앞서 word2vec 모델의 하이퍼 파라미터를 설정해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 학습 시 필요한 하이퍼 파라미터</span>\nnum_features <span class=\"token operator\">=</span> <span class=\"token number\">300</span>    <span class=\"token comment\"># 워드 백터 특정값 수</span>\nmin_word_count <span class=\"token operator\">=</span> <span class=\"token number\">40</span>   <span class=\"token comment\"># 단어에 대한 최소 빈도 수</span>\nnum_workers <span class=\"token operator\">=</span> <span class=\"token number\">4</span>       <span class=\"token comment\"># 프로세스 개수</span>\ncontext <span class=\"token operator\">=</span> <span class=\"token number\">10</span>         <span class=\"token comment\"># 컨텍스트 윈도우 크기</span>\ndownsampling <span class=\"token operator\">=</span> <span class=\"token number\">1e</span><span class=\"token operator\">-</span><span class=\"token number\">3</span>   <span class=\"token comment\"># 다운 샘플링 비율</span></code></pre></div>\n<ul>\n<li>num_fratures : 각 단어에 대한 임베딩된 벡터의 차원을 정한다.</li>\n<li>min<em>word</em>count : 모델에 의미 있는 단어를 가지고 학습하기 위해 적은 빈도 수의 단어들은 학습하지 않는다.</li>\n<li>num_workers : 모델에 의미 있는 단어를 가지고 학습하기 위해 적은 빈도 수의 단어들은 학습하지 않는다.</li>\n<li>context : word2vec을 수행하기 위한 컨텍스트 윈도우 크기를 지정한다.</li>\n<li>downsampling : word2vec 학습을 수행할 때 더 빠른 학습을 위해 정답 단어 라벨에 대한 다운샘플링 비율을 지정한다. (보통 0.001이 좋은 성능을 낸다고 한다)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> logging\nlogging<span class=\"token punctuation\">.</span>basicConfig<span class=\"token punctuation\">(</span><span class=\"token builtin\">format</span><span class=\"token operator\">=</span><span class=\"token string\">'%(asctime)s : %(levelname)s : %(message)s'</span><span class=\"token punctuation\">,</span>\\\n   level<span class=\"token operator\">=</span>logging<span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">)</span></code></pre></div>\n<p>로깅을 할 떄 format을 위와 같이 지정하고, 로그 수준을 INFO로 하면 word2vec의 학습과정에서 로그 메시지를 양식에 맞게 INFO 수준으로 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> gensim<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> word2vec\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Training model...\"</span><span class=\"token punctuation\">)</span>\n\nmodel <span class=\"token operator\">=</span> word2vec<span class=\"token punctuation\">.</span>Word2Vec<span class=\"token punctuation\">(</span>sentences<span class=\"token punctuation\">,</span>\n                        workers<span class=\"token operator\">=</span>num_workers<span class=\"token punctuation\">,</span>\n                        size<span class=\"token operator\">=</span>num_features<span class=\"token punctuation\">,</span>\n                        min_count<span class=\"token operator\">=</span>min_word_count<span class=\"token punctuation\">,</span>\n                        window<span class=\"token operator\">=</span>context<span class=\"token punctuation\">,</span>\n                        sample<span class=\"token operator\">=</span>downsampling<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-07-12 21:56:43,872 : INFO : collecting all words and their counts\n2019-07-12 21:56:43,872 : INFO : PROGRESS: at sentence #0, processed 0 words, keeping 0 word types\n\n\nTraining model...\n\n\n2019-07-12 21:56:44,092 : INFO : PROGRESS: at sentence #10000, processed 1205223 words, keeping 51374 word types\n2019-07-12 21:56:44,305 : INFO : PROGRESS: at sentence #20000, processed 2396605 words, keeping 67660 word types\n2019-07-12 21:56:44,406 : INFO : collected 74065 word types from a corpus of 2988089 raw words and 25000 sentences\n2019-07-12 21:56:44,406 : INFO : Loading a fresh vocabulary\n2019-07-12 21:56:44,443 : INFO : min_count=40 retains 8160 unique words (11% of original 74065, drops 65905)\n2019-07-12 21:56:44,443 : INFO : min_count=40 leaves 2627273 word corpus (87% of original 2988089, drops 360816)\n2019-07-12 21:56:44,454 : INFO : deleting the raw counts dictionary of 74065 items\n2019-07-12 21:56:44,469 : INFO : sample=0.001 downsamples 30 most-common words\n2019-07-12 21:56:44,469 : INFO : downsampling leaves estimated 2494384 word corpus (94.9% of prior 2627273)\n2019-07-12 21:56:44,481 : INFO : estimated required memory for 8160 words and 300 dimensions: 23664000 bytes\n2019-07-12 21:56:44,481 : INFO : resetting layer weights\n2019-07-12 21:56:44,577 : INFO : training model with 4 workers on 8160 vocabulary and 300 features, using sg=0 hs=0 sample=0.001 negative=5 window=10\n2019-07-12 21:56:45,578 : INFO : EPOCH 1 - PROGRESS: at 53.88% examples, 1354613 words/s, in_qsize 7, out_qsize 0\n2019-07-12 21:56:46,589 : INFO : EPOCH 1 - PROGRESS: at 97.12% examples, 1208841 words/s, in_qsize 8, out_qsize 0\n2019-07-12 21:56:46,625 : INFO : worker thread finished; awaiting finish of 3 more threads\n2019-07-12 21:56:46,631 : INFO : worker thread finished; awaiting finish of 2 more threads\n2019-07-12 21:56:46,639 : INFO : worker thread finished; awaiting finish of 1 more threads\n2019-07-12 21:56:46,645 : INFO : worker thread finished; awaiting finish of 0 more threads\n2019-07-12 21:56:46,649 : INFO : EPOCH - 1 : training on 2988089 raw words (2494785 effective words) took 2.1s, 1208654 effective words/s\n2019-07-12 21:56:47,643 : INFO : EPOCH 2 - PROGRESS: at 51.68% examples, 1296637 words/s, in_qsize 7, out_qsize 0\n2019-07-12 21:56:48,565 : INFO : worker thread finished; awaiting finish of 3 more threads\n2019-07-12 21:56:48,565 : INFO : worker thread finished; awaiting finish of 2 more threads\n2019-07-12 21:56:48,579 : INFO : worker thread finished; awaiting finish of 1 more threads\n2019-07-12 21:56:48,587 : INFO : worker thread finished; awaiting finish of 0 more threads\n2019-07-12 21:56:48,587 : INFO : EPOCH - 2 : training on 2988089 raw words (2494872 effective words) took 1.9s, 1287927 effective words/s\n2019-07-12 21:56:49,584 : INFO : EPOCH 3 - PROGRESS: at 52.03% examples, 1307272 words/s, in_qsize 7, out_qsize 0\n2019-07-12 21:56:50,495 : INFO : worker thread finished; awaiting finish of 3 more threads\n2019-07-12 21:56:50,504 : INFO : worker thread finished; awaiting finish of 2 more threads\n2019-07-12 21:56:50,504 : INFO : worker thread finished; awaiting finish of 1 more threads\n2019-07-12 21:56:50,513 : INFO : worker thread finished; awaiting finish of 0 more threads\n2019-07-12 21:56:50,513 : INFO : EPOCH - 3 : training on 2988089 raw words (2494507 effective words) took 1.9s, 1297134 effective words/s\n2019-07-12 21:56:51,508 : INFO : EPOCH 4 - PROGRESS: at 52.60% examples, 1319590 words/s, in_qsize 7, out_qsize 0\n2019-07-12 21:56:52,421 : INFO : worker thread finished; awaiting finish of 3 more threads\n2019-07-12 21:56:52,438 : INFO : worker thread finished; awaiting finish of 2 more threads\n2019-07-12 21:56:52,438 : INFO : worker thread finished; awaiting finish of 1 more threads\n2019-07-12 21:56:52,444 : INFO : worker thread finished; awaiting finish of 0 more threads\n2019-07-12 21:56:52,444 : INFO : EPOCH - 4 : training on 2988089 raw words (2494292 effective words) took 1.9s, 1293999 effective words/s\n2019-07-12 21:56:53,445 : INFO : EPOCH 5 - PROGRESS: at 54.20% examples, 1360524 words/s, in_qsize 7, out_qsize 0\n2019-07-12 21:56:54,212 : INFO : worker thread finished; awaiting finish of 3 more threads\n2019-07-12 21:56:54,228 : INFO : worker thread finished; awaiting finish of 2 more threads\n2019-07-12 21:56:54,235 : INFO : worker thread finished; awaiting finish of 1 more threads\n2019-07-12 21:56:54,241 : INFO : worker thread finished; awaiting finish of 0 more threads\n2019-07-12 21:56:54,242 : INFO : EPOCH - 5 : training on 2988089 raw words (2494012 effective words) took 1.8s, 1390220 effective words/s\n2019-07-12 21:56:54,242 : INFO : training on a 14940445 raw words (12472468 effective words) took 9.7s, 1291189 effective words/s</code></pre></div>\n<p>word2vec으로 학습시킨 모델의 경우 모델을 따로 저장해두면 이후 다시 사용할수 있기 때문에 저장해두자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 모델의 하이퍼파라미터를 설정한 내용을 모델 이름에 담는다면 나중에 참고하기 용이하다.</span>\n<span class=\"token comment\"># 모델을 저장하면 Word2Vec.load()를 통해 다시 사용할 수 있다.</span>\nmodel_name <span class=\"token operator\">=</span> <span class=\"token string\">\"300features_40minwords_10context\"</span>\nmodel<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>model_name<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-07-12 22:00:40,807 : INFO : saving Word2Vec object under 300features_40minwords_10context, separately None\n2019-07-12 22:00:40,807 : INFO : not storing attribute vectors_norm\n2019-07-12 22:00:40,807 : INFO : not storing attribute cum_table\nC:\\Users\\nicey\\.conda\\envs\\nlp\\lib\\site-packages\\smart_open\\smart_open_lib.py:398: UserWarning: This function is deprecated, use smart_open.open instead. See the migration notes for details: https://github.com/RaRe-Technologies/smart_open/blob/master/README.rst#migrating-to-the-new-open-function\n  &#39;See the migration notes for details: %s&#39; % _MIGRATION_NOTES_URL\n2019-07-12 22:00:41,229 : INFO : saved 300features_40minwords_10context</code></pre></div>\n<p>에제 만들어진 word2vec 모델을 활용해 선형 회귀 모델을 학습해보자. 우선 학습을 위해 하나의 리뷰를 같은 형태의 입력값으로 만들어야 한다. 지금은 word2vec 모델에서 각 단어가 벡터로 표현돼 있다. 그리고 리뷰마다 단어의 개수가 모두 다르기 때문에 입력값을 하나으 형태로 만들어야 한다. 가장 단순한 방법은 문장에 있는 모든 단어의 벡터값에 대해 평균을 내서 리뷰 하나당 하나의 벡터로 만드는 방법이 있다.</p>\n<p>그럼 하나의 리뷰에 대해 전체 단어의 평균값을 계산하는 함수를 구현하자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">get_features</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">,</span> num_features<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># 출력 벡터 초기화</span>\n    feature_vector <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>num_features<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span>\n    \n    num_words <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token comment\"># 어휘 사전 준비</span>\n    index2word_set <span class=\"token operator\">=</span> <span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">.</span>wv<span class=\"token punctuation\">.</span>index2word<span class=\"token punctuation\">)</span>\n    \n    <span class=\"token keyword\">for</span> w <span class=\"token keyword\">in</span> words<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> w <span class=\"token keyword\">in</span> index2word_set<span class=\"token punctuation\">:</span>\n            num_words <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n            <span class=\"token comment\"># 사전에 해당하는 단어에 대해 단어 벡터를 더함</span>\n            feature_vector <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>feature_vector<span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">[</span>w<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            \n    <span class=\"token comment\"># 문장의 단어 수만큼 나누어 단어 벡터의 평균값을 문장 벡터로 함</span>\n    feature_vector <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>divide<span class=\"token punctuation\">(</span>feature_vector<span class=\"token punctuation\">,</span> num_words<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> feature_vector</code></pre></div>\n<ul>\n<li>words : 단어의 모음인 하나의 리뷰가 들어간다.</li>\n<li>model : word2vec 모델을 넣는 공이며, 우리가 학습한 word2vec 모델이 들어간다.</li>\n<li>num_features : word2vec으로 임베딩할 때 정했던 벡터의 차원 수를 뜻한다.</li>\n</ul>\n<p>하나의 벡터를 만드는 과정을 빠르게 하기 위해 np.zeros를 사용해 미리 모두 0값을 가지는 벡터를 만든다. 그리고 문장의 단어가 모델 단어사전에 속하는지 보기 위해 model.wv.index2word를 set객체로 생성해서 index2word_set 변수에 할당한다. 다음 반복문을 통해 리뷰를 구성하는 단어에 대해 임베딩된 벡터가 있는 단어 벡터의 합을 구하고 사용한 단어의 전체 개수로 나누어 평균 벡터의 값을 구한다.</p>\n<p>문장에 특징값을 만들 수 있는 함수를 구현했다면 이제 앞에서 정의한 함수를 사용해 전체 리뷰에 대해 각 리뷰의 평균 벡터를 구하는 함수를 정의하자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">get_dataset</span><span class=\"token punctuation\">(</span>reviews<span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">,</span> num_features<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    dataset <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    \n    <span class=\"token keyword\">for</span> s <span class=\"token keyword\">in</span> reviews<span class=\"token punctuation\">:</span>\n        dataset<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>get_features<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">,</span> num_features<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        \n    reviewFeatureVecs <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">(</span>dataset<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> reviewFeatureVecs</code></pre></div>\n<ul>\n<li>reviews : 학습 데이터인 전체 리뷰 데이터를 입력</li>\n<li>model : word2vec 모델을 입력</li>\n<li>num_features : word2vec으로 임베딩할 때 정했던 벡터의 차원 수</li>\n</ul>\n<p>전체 리뷰에 대한 평균 벡터를 담을 0으로 채워진 numpy 배열을 미리 만든다. 배열은 2차원, 배열의 행에는 각 문장에 대한 길이, 열에는 평균 벡터의 차원수 즉 크기를 입력. 그리고 각 리뷰에 대해 반복문을 돌면서 각 리뷰에 대해 특징 값을 만든다.</p>\n<p>구현한 함수를 사용해 실제 학습에 사용될 입력값을 만들어 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_data_vecs <span class=\"token operator\">=</span> get_dataset<span class=\"token punctuation\">(</span>sentences<span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">,</span> num_features<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">C:\\Users\\nicey\\.conda\\envs\\nlp\\lib\\site-packages\\ipykernel_launcher.py:13: DeprecationWarning: Call to deprecated `__getitem__` (Method will be removed in 4.0.0, use self.wv.__getitem__() instead).\n  del sys.path[0]</code></pre></div>\n<h3 id=\"학습과-검증-데이터셋-분리\" style=\"position:relative;\"><a href=\"#%ED%95%99%EC%8A%B5%EA%B3%BC-%EA%B2%80%EC%A6%9D-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%85%8B-%EB%B6%84%EB%A6%AC\" aria-label=\"학습과 검증 데이터셋 분리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>학습과 검증 데이터셋 분리</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>model_selection <span class=\"token keyword\">import</span> train_test_split\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n\nX <span class=\"token operator\">=</span> test_data_vecs\ny <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>sentiments<span class=\"token punctuation\">)</span>\n\nRANDOM_SEED <span class=\"token operator\">=</span> <span class=\"token number\">42</span>\nTEST_SPLIT <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span>\n\nX_train<span class=\"token punctuation\">,</span> X_test<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">,</span> y_test <span class=\"token operator\">=</span> train_test_split<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> test_size<span class=\"token operator\">=</span>TEST_SPLIT<span class=\"token punctuation\">,</span> \n                                                    random_state<span class=\"token operator\">=</span>RANDOM_SEED<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"모델-선언-및-학습\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%EC%84%A0%EC%96%B8-%EB%B0%8F-%ED%95%99%EC%8A%B5\" aria-label=\"모델 선언 및 학습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 선언 및 학습</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>linear_model <span class=\"token keyword\">import</span> LogisticRegression\n\nlgs <span class=\"token operator\">=</span> LogisticRegression<span class=\"token punctuation\">(</span>class_weight<span class=\"token operator\">=</span><span class=\"token string\">'balanced'</span><span class=\"token punctuation\">)</span>\nlgs<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">C:\\Users\\nicey\\.conda\\envs\\nlp\\lib\\site-packages\\sklearn\\linear_model\\logistic.py:432: FutureWarning: Default solver will be changed to &#39;lbfgs&#39; in 0.22. Specify a solver to silence this warning.\n  FutureWarning)\n\n\n\n\n\nLogisticRegression(C=1.0, class_weight=&#39;balanced&#39;, dual=False,\n                   fit_intercept=True, intercept_scaling=1, l1_ratio=None,\n                   max_iter=100, multi_class=&#39;warn&#39;, n_jobs=None, penalty=&#39;l2&#39;,\n                   random_state=None, solver=&#39;warn&#39;, tol=0.0001, verbose=0,\n                   warm_start=False)</code></pre></div>\n<p>class_weight을 <code class=\"language-text\">balanced</code>로 설정했다. 이는 각 라벨에 대해 균형있게 학습하기 위함이다.</p>\n<h3 id=\"검증-데이터셋을-이용한-성능-평가\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%A6%9D-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%85%8B%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%84%B1%EB%8A%A5-%ED%8F%89%EA%B0%80\" aria-label=\"검증 데이터셋을 이용한 성능 평가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검증 데이터셋을 이용한 성능 평가</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">predicted <span class=\"token operator\">=</span> lgs<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">from</span> sklearn <span class=\"token keyword\">import</span> metrics\n\nfpr<span class=\"token punctuation\">,</span> tpr<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> metrics<span class=\"token punctuation\">.</span>roc_curve<span class=\"token punctuation\">(</span>y_test<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>lgs<span class=\"token punctuation\">.</span>predict_proba<span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nauc <span class=\"token operator\">=</span> metrics<span class=\"token punctuation\">.</span>auc<span class=\"token punctuation\">(</span>fpr<span class=\"token punctuation\">,</span> tpr<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"------------\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accuracy: %f\"</span> <span class=\"token operator\">%</span> lgs<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">,</span> y_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#checking the accuracy</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Precision: %f\"</span> <span class=\"token operator\">%</span> metrics<span class=\"token punctuation\">.</span>precision_score<span class=\"token punctuation\">(</span>y_test<span class=\"token punctuation\">,</span> predicted<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Recall: %f\"</span> <span class=\"token operator\">%</span> metrics<span class=\"token punctuation\">.</span>recall_score<span class=\"token punctuation\">(</span>y_test<span class=\"token punctuation\">,</span> predicted<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"F1-Score: %f\"</span> <span class=\"token operator\">%</span> metrics<span class=\"token punctuation\">.</span>f1_score<span class=\"token punctuation\">(</span>y_test<span class=\"token punctuation\">,</span> predicted<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AUC: %f\"</span> <span class=\"token operator\">%</span> auc<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">------------\nAccuracy: 0.874200\nPrecision: 0.869141\nRecall: 0.883287\nF1-Score: 0.876157\nAUC: 0.940927</code></pre></div>\n<p>학습 결과를 확인해 보면 TF-IDF를 사용해서 학습한 것보다 상대적으로 성능이 조금 떨어지는 것을 볼 수 있다. word2vec이 단어 간의 유사도를 보는 관점에서는 분명히 효과적일 수는 있지만 항상 좋은 성능을 보장하지는 않는다는 점을 알 수 있다.</p>\n<h2 id=\"데이터-제출\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%9C%EC%B6%9C\" aria-label=\"데이터 제출 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 제출</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">TEST_CLEAN_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'test_clean.csv'</span>\n\ntest_data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TEST_CLEAN_DATA<span class=\"token punctuation\">)</span>\n\ntest_review <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>test_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_data<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>review</th>\n      <th>id</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>naturally film main themes mortality nostalgia...</td>\n      <td>\"12311_10\"</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>movie disaster within disaster film full great...</td>\n      <td>\"8348_2\"</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>movie kids saw tonight child loved one point k...</td>\n      <td>\"5828_4\"</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>afraid dark left impression several different ...</td>\n      <td>\"7186_2\"</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>accurate depiction small time mob life filmed ...</td>\n      <td>\"12128_7\"</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_sentences <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> review <span class=\"token keyword\">in</span> test_review<span class=\"token punctuation\">:</span>\n    test_sentences<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_data_vecs <span class=\"token operator\">=</span> get_dataset<span class=\"token punctuation\">(</span>test_sentences<span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">,</span> num_features<span class=\"token punctuation\">)</span>\ntest_predicted <span class=\"token operator\">=</span> lgs<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test_data_vecs<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">C:\\Users\\nicey\\.conda\\envs\\nlp\\lib\\site-packages\\ipykernel_launcher.py:13: DeprecationWarning: Call to deprecated `__getitem__` (Method will be removed in 4.0.0, use self.wv.__getitem__() instead).\n  del sys.path[0]</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os\n\nDATA_OUT_PATH <span class=\"token operator\">=</span> <span class=\"token string\">'./data_out/'</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span>DATA_OUT_PATH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    os<span class=\"token punctuation\">.</span>makedirs<span class=\"token punctuation\">(</span>DATA_OUT_PATH<span class=\"token punctuation\">)</span>\n\nids <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>test_data<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nanswer_dataset <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> ids<span class=\"token punctuation\">,</span> <span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">:</span> test_predicted<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nanswer_dataset<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span>DATA_OUT_PATH <span class=\"token operator\">+</span> <span class=\"token string\">'lgs_w2v_answer.csv'</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> quoting<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></code></pre></div>"},{"id":"766be125-572b-5d4d-a492-0193a3caa3c1","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"NLP - 텍스트 분류 (TF-IDF) - #2","path":"/nb-text-classification-tf-idf","tags":["ML-DL","ML","NLP"],"excerpt":"이제 전처리된 데이터를 가지고 TF-IDF를 활용한 모델을 구현할 것이다.","created":"2019-07-02T00:00:00.000Z","createdPretty":"02 July, 2019","updated":"2019-07-02T00:00:00.000Z","updatedPretty":"02 July, 2019","featuredImage":null},"html":"<p>이전 글에서는 데이터를 모델에 적용하기 전에 데이터에 대해 이해하고 정제하는 과정인 데이터 전처리 과정을 진행했다. </p>\n<p>이제 전처리된 데이터를 가지고 TF-IDF를 활용한 모델을 구현할 것이다.</p>\n<blockquote>\n<p><strong>선형 회귀 모델</strong> : 종속변수와 독립변수 간의 상관관계를 모델링하는 방법<br/>\n<strong>로지스틱 회귀 모델</strong> : 선형 모델의 결과값에 로지스틱 함수를 적용하여 0 ~ 1 사이의 값을 갖게 하여 확률로 표현<br/>\n<strong>TF-IDF</strong> : TF(Term Frequency, 단어의 빈도), IDF(역문서 빈도, Inverse Document Frequency) 쉽게 말하자면 문장에서 단어의 빈도수를 계산하되 너무 자주 등장하는 단어는 크게 의미를 두지 않도록 가중치를 낮게 주자는 의미.</p>\n</blockquote>\n<p>TF-IDF를 활용해 문장 벡터를 만들기 위한 TfidfVectorizer를 사용하기 위해서는 입력값이 텍스트로 이루어진 데이터 형태여야 하기 때문에 전처리한 결과 중 numpy배열이 아닌 정제된 텍스트 데이터를 사용해야 한다.</p>\n<blockquote>\n<p>훈련 데이터 : train<em>clean.csv<br/>\n테스트 데이터 : test</em>clean.csv</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>feature_extraction<span class=\"token punctuation\">.</span>text <span class=\"token keyword\">import</span> TfidfVectorizer</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">DATA_IN_PATH <span class=\"token operator\">=</span> <span class=\"token string\">'./data_in/'</span>\nDATA_OUT_PATH <span class=\"token operator\">=</span> <span class=\"token string\">'./data_out/'</span>\nTRAIN_CLEAN_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'train_clean.csv'</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TRAIN_CLEAN_DATA<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_data<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>review</th>\n      <th>sentiment</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>stuff going moment mj started listening music ...</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>classic war worlds timothy hines entertaining ...</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>film starts manager nicholas bell giving welco...</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>must assumed praised film greatest filmed oper...</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>superbly trashy wondrously unpretentious explo...</td>\n      <td>1</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">reviews <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nsentiments <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nvectorizer <span class=\"token operator\">=</span> TfidfVectorizer<span class=\"token punctuation\">(</span>\n            min_df<span class=\"token operator\">=</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span>\n            analyzer<span class=\"token operator\">=</span><span class=\"token string\">\"char\"</span><span class=\"token punctuation\">,</span>\n            sublinear_tf<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n            ngram_range<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            max_features<span class=\"token operator\">=</span><span class=\"token number\">5000</span>\n        <span class=\"token punctuation\">)</span>\n\nX <span class=\"token operator\">=</span> vectorizer<span class=\"token punctuation\">.</span>fit_transform<span class=\"token punctuation\">(</span>reviews<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>min_df : 설정한 값보다 특정 토큰의 df값이 더 적게 나오면 벡터화 과정에서 제거</li>\n<li>analyzer : 분석하기 위한 기준 단위(word:단어 하나를 단위로, char:문자 하나를 단위로)</li>\n<li>sublinear_tf : 문서의 단어 빈도 수에 대한 스무딩(smoothing) 여부</li>\n<li>ngram_range : 빈도의 기본 단위를 설정할 n-gram 범위</li>\n<li>max_features : 각 벡터의 최대 길이</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">X</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;25000x5000 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;\n\twith 17862871 stored elements in Compressed Sparse Row format&gt;</code></pre></div>\n<h2 id=\"학습과-검증-데이터셋-분리\" style=\"position:relative;\"><a href=\"#%ED%95%99%EC%8A%B5%EA%B3%BC-%EA%B2%80%EC%A6%9D-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%85%8B-%EB%B6%84%EB%A6%AC\" aria-label=\"학습과 검증 데이터셋 분리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>학습과 검증 데이터셋 분리</h2>\n<p>해당 입력값을 모델에 적용하기전 학습데이터의 일부를 검증 데이터로 따로 분리하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>model_selection <span class=\"token keyword\">import</span> train_test_split\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n\nRANDOM_SEED <span class=\"token operator\">=</span> <span class=\"token number\">42</span>\nTEST_SPLIT <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span>\n\ny <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>sentiments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nX_train<span class=\"token punctuation\">,</span> X_eval<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">,</span> y_eval <span class=\"token operator\">=</span> train_test_split<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> test_size<span class=\"token operator\">=</span>TEST_SPLIT<span class=\"token punctuation\">,</span> \n                                                    random_state<span class=\"token operator\">=</span>RANDOM_SEED<span class=\"token punctuation\">)</span></code></pre></div>\n<p>입력값인 X와 정답 라벨을 numpy 배열로 만든 y에 대해 적용해서 학습데이터와 검증데이터로 나누었다.</p>\n<h2 id=\"모델-선언-및-학습\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%EC%84%A0%EC%96%B8-%EB%B0%8F-%ED%95%99%EC%8A%B5\" aria-label=\"모델 선언 및 학습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 선언 및 학습</h2>\n<p>선형 회귀 모델을 만들기 위해 LogisticRegression을 사용하고, class_weight를 'balanced'로 설정해서 각 라벨에 대해 균형 있게 학습할 수 있게 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>linear_model <span class=\"token keyword\">import</span> LogisticRegression\n\nlgs <span class=\"token operator\">=</span> LogisticRegression<span class=\"token punctuation\">(</span>class_weight <span class=\"token operator\">=</span> <span class=\"token string\">'balanced'</span><span class=\"token punctuation\">)</span>\nlgs<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">C:\\Users\\nicey\\.conda\\envs\\nlp\\lib\\site-packages\\sklearn\\linear_model\\logistic.py:432: FutureWarning: Default solver will be changed to &#39;lbfgs&#39; in 0.22. Specify a solver to silence this warning.\n  FutureWarning)\n\n\n\n\n\nLogisticRegression(C=1.0, class_weight=&#39;balanced&#39;, dual=False,\n                   fit_intercept=True, intercept_scaling=1, l1_ratio=None,\n                   max_iter=100, multi_class=&#39;warn&#39;, n_jobs=None, penalty=&#39;l2&#39;,\n                   random_state=None, solver=&#39;warn&#39;, tol=0.0001, verbose=0,\n                   warm_start=False)</code></pre></div>\n<h2 id=\"검증-데이터로-성능-평가\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%A6%9D-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A1%9C-%EC%84%B1%EB%8A%A5-%ED%8F%89%EA%B0%80\" aria-label=\"검증 데이터로 성능 평가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검증 데이터로 성능 평가</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accuracy : %f\"</span> <span class=\"token operator\">%</span> lgs<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>X_eval<span class=\"token punctuation\">,</span> y_eval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 검증 데이터로 성능 측정</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Accuracy : 0.859600</code></pre></div>\n<p>성능 평가 방법으로 정밀도(precision), 재현율(recall), f1-score, auc 등의 다양한 지표가 있지만 여기서는 정확도(Accuracy)만 측정하였다.</p>\n<p>평가 결과 약 86%의 정확도를 보였다. 성능이 생각보다 나오지 않을 때는 하이퍼파라미터를 수정하거나 다른 기법들을 추가해서 성능을 올려보자. 검증 데이터의 성능이 만족할 만큼 나온다면 평가 데이터를 적용하면 된다.</p>\n<h2 id=\"데이터-제출하기\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%9C%EC%B6%9C%ED%95%98%EA%B8%B0\" aria-label=\"데이터 제출하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 제출하기</h2>\n<p>생성한 모델을 활용해 평가 데이터 결과를 예측하고 캐글에 제출할 수 있도록 파일로 저장하자.</p>\n<p>우선 전처리한 텍스트 형태의 평가 데이터를 불러오자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">TEST_CLEAN_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'test_clean.csv'</span>\n\ntest_data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TEST_CLEAN_DATA<span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> delimiter<span class=\"token operator\">=</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_data<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>review</th>\n      <th>id</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>naturally film main themes mortality nostalgia...</td>\n      <td>\"12311_10\"</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>movie disaster within disaster film full great...</td>\n      <td>\"8348_2\"</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>movie kids saw tonight child loved one point k...</td>\n      <td>\"5828_4\"</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>afraid dark left impression several different ...</td>\n      <td>\"7186_2\"</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>accurate depiction small time mob life filmed ...</td>\n      <td>\"12128_7\"</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>해당 데이터를 대상으로 이전에 학습 데이터에 대해 사용했던 객체를 사용해 TF-IDF 값으로 벡터화한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">testDataVecs <span class=\"token operator\">=</span> vectorizer<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">(</span>test_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>백터화할 때 평가 데이터에 대해서는 fit을 호출하지 않고 그대로 transform만 호툴한다.</p>\n<p>이미 학습 데이터에 맞게 설정했고, 그 설정에 맞게 평가 데이터도 변환을 하면 된다.</p>\n<p>이제 이 값으로 예측한 후 예측값을 하나의 변수로 할당하고 출력해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_predicted <span class=\"token operator\">=</span> lgs<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>testDataVecs<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>test_predicted<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[1 0 1 ... 0 1 0]</code></pre></div>\n<p>결과를 보면 각 데이터에 대해 긍정, 부정 값을 가지고 있다.</p>\n<p>이제 이 값을 캐글에 제출하기 위해 csv 파일로 저장하자. 캐글에 제출하기 위한 데이터 형식은 각 데이터의 고유한 id 값과 결과값으로 구성되어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">DATA_OUT_PATH <span class=\"token operator\">=</span> <span class=\"token string\">'./data_out/'</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span>DATA_OUT_PATH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    os<span class=\"token punctuation\">.</span>makedirs<span class=\"token punctuation\">(</span>DATA_OUT_PATH<span class=\"token punctuation\">)</span>\n    \nids <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>test_data<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nanswer_dataset <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> test_data<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">:</span> test_predicted<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nanswer_dataset<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span>DATA_OUT_PATH <span class=\"token operator\">+</span> <span class=\"token string\">'lgs_tfidf_answer.csv'</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> quoting<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></code></pre></div>"},{"id":"71579649-bd6d-5ec1-9441-8abe1271f5dd","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":2}],"frontmatter":{"title":"NLP - 텍스트 분류 (전처리) - #1","path":"/nb-text-classification-pre","tags":["ML-DL","ML","NLP"],"excerpt":"케글 데이터 불러오기 -> EDA -> 데이터정제 -> 모델링의미한다.","created":"2019-06-25T00:00:00.000Z","createdPretty":"25 June, 2019","updated":"2019-06-25T00:00:00.000Z","updatedPretty":"25 June, 2019","featuredImage":null},"html":"<p>캐글(Kaggle)의 \"Bag of Words meets bag of popcorns\"</p>\n<p>(<a href=\"https://www.kaggle.com/c/word2vec-nlp-tutorial\">https://www.kaggle.com/c/word2vec-nlp-tutorial</a>)</p>\n<h3 id=\"워드팝콘-데이터의-처리-과정\" style=\"position:relative;\"><a href=\"#%EC%9B%8C%EB%93%9C%ED%8C%9D%EC%BD%98-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98-%EC%B2%98%EB%A6%AC-%EA%B3%BC%EC%A0%95\" aria-label=\"워드팝콘 데이터의 처리 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>워드팝콘 데이터의 처리 과정</h3>\n<blockquote>\n<p>케글 데이터 불러오기 -> EDA -> 데이터정제 -> 모델링</p>\n</blockquote>\n<p><strong>데이터정제</strong></p>\n<ul>\n<li>HTML 및 문장 보호 제거</li>\n<li>불용어 제거</li>\n<li>단어 최대 길이 설정</li>\n<li>단어 패딩</li>\n<li>백터 표상화</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> zipfile</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">DATA_IN_PATH <span class=\"token operator\">=</span> <span class=\"token string\">'./data_in/'</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">file_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'labeledTrainData.tsv.zip'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'unlabeledTrainData.tsv.zip'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'testData.tsv.zip'</span><span class=\"token punctuation\">]</span>\nfile_list_tsv <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'labeledTrainData.tsv'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'unlabeledTrainData.tsv'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'testData.tsv'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">! ls <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>data_in</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">NanumGothic.ttf\t\t  ratings.txt\t\ttest_id.npy\nlabeledTrainData.tsv\t  ratings_test.txt\ttrain_clean.csv\nlabeledTrainData.tsv.zip  ratings_train.txt\ttrain_input.npy\nnsmc_test_input.npy\t  sampleSubmission.csv\ttrain_label.npy\nnsmc_test_label.npy\t  testData.tsv\t\tunlabeledTrainData.tsv\nnsmc_train_input.npy\t  testData.tsv.zip\tunlabeledTrainData.tsv.zip\nnsmc_train_label.npy\t  test_clean.csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># file_list의 zip 압축파일을 풀어준다.</span>\n<span class=\"token keyword\">for</span> <span class=\"token builtin\">file</span> <span class=\"token keyword\">in</span> file_list<span class=\"token punctuation\">:</span>\n    zipRef <span class=\"token operator\">=</span> zipfile<span class=\"token punctuation\">.</span>ZipFile<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span>\n    zipRef<span class=\"token punctuation\">.</span>extractall<span class=\"token punctuation\">(</span>DATA_IN_PATH<span class=\"token punctuation\">)</span>\n    zipRef<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt\n<span class=\"token keyword\">import</span> seaborn <span class=\"token keyword\">as</span> sns\n\n<span class=\"token operator\">%</span>matplotlib inline</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">! head <span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>data_in<span class=\"token operator\">/</span>labeledTrainData<span class=\"token punctuation\">.</span>tsv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">id\tsentiment\treview\n&quot;5814_8&quot;\t1\t&quot;With all this stuff going down at the moment with MJ i&#39;ve started listening to his music, watching the odd documentary here and there, watched The Wiz and watched Moonwalker again. Maybe i just want to get a certain insight into this guy who i thought was really cool in the eighties just to maybe make up my mind whether he is guilty or innocent. Moonwalker is part biography, part feature film which i remember going to see at the cinema when it was originally released. Some of it has subtle messages about MJ&#39;s feeling towards the press and also the obvious message of drugs are bad m&#39;kay.&lt;br /&gt;&lt;br /&gt;Visually impressive but of course this is all about Michael Jackson so unless you remotely like MJ in anyway then you are going to hate this and find it boring. Some may call MJ an egotist for consenting to the making of this movie BUT MJ and most of his fans would say that he made it for the fans which if true is really nice of him.&lt;br /&gt;&lt;br /&gt;The actual feature film bit when it finally starts is only on for 20 minutes or so excluding the Smooth Criminal sequence and Joe Pesci is convincing as a psychopathic all powerful drug lord. Why he wants MJ dead so bad is beyond me. Because MJ overheard his plans? Nah, Joe Pesci&#39;s character ranted that he wanted people to know it is he who is supplying drugs etc so i dunno, maybe he just hates MJ&#39;s music.&lt;br /&gt;&lt;br /&gt;Lots of cool things in this like MJ turning into a car and a robot and the whole Speed Demon sequence. Also, the director must have had the patience of a saint when it came to filming the kiddy Bad sequence as usually directors hate working with one kid let alone a whole bunch of them performing a complex dance scene.&lt;br /&gt;&lt;br /&gt;Bottom line, this movie is for people who like MJ on one level or another (which i think is most people). If not, then stay away. It does try and give off a wholesome message and ironically MJ&#39;s bestest buddy in this movie is a girl! Michael Jackson is truly one of the most talented people ever to grace this planet but is he guilty? Well, with all the attention i&#39;ve gave this subject....hmmm well i don&#39;t know because people can be different behind closed doors, i know this for a fact. He is either an extremely nice but stupid guy or one of the most sickest liars. I hope he is not the latter.&quot;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 데이터를 불러오자</span>\ntrain_data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> <span class=\"token string\">'labeledTrainData.tsv'</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> delimiter<span class=\"token operator\">=</span><span class=\"token string\">\"\\t\"</span><span class=\"token punctuation\">)</span>\ntrain_data<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}</code></pre></div>\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>id</th>\n      <th>sentiment</th>\n      <th>review</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>5814_8</td>\n      <td>1</td>\n      <td>With all this stuff going down at the moment w...</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2381_9</td>\n      <td>1</td>\n      <td>\\The Classic War of the Worlds\\\" by Timothy Hi...</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>7759_3</td>\n      <td>0</td>\n      <td>The film starts with a manager (Nicholas Bell)...</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3630_4</td>\n      <td>0</td>\n      <td>It must be assumed that those who praised this...</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>9495_8</td>\n      <td>1</td>\n      <td>Superbly trashy and wondrously unpretentious 8...</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>데이터는 \"id\", \"sentiment\", \"review\"로 구분되어 있어며, 각 리뷰('review')에 대한 감정('sentiment')이 긍정(1), 부정(0)인지 나와있다.</p>\n<p>이제 다음과 같은 순서로 데이터 분석을 해보자.</p>\n<ol>\n<li>데이터 크기</li>\n<li>데이터 개수</li>\n<li>각 리뷰 문자 길이 분포</li>\n<li>많이 사용된 단어</li>\n<li>긍정, 부정 데이터의 분포</li>\n<li>각 리뷰의 단어 개수 분포</li>\n<li>특수문자 및 대문자, 소문자 비율</li>\n</ol>\n<h3 id=\"데이터-크기\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%81%AC%EA%B8%B0\" aria-label=\"데이터 크기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 크기</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"파일 크기 :\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> <span class=\"token builtin\">file</span> <span class=\"token keyword\">in</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span>DATA_IN_PATH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">file</span> <span class=\"token keyword\">in</span> file_list_tsv<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>ljust<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>getsize<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'MB'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">파일 크기 :\nlabeledTrainData.tsv          33.56MB\ntestData.tsv                  32.72MB\nunlabeledTrainData.tsv        67.28MB</code></pre></div>\n<h3 id=\"데이터-개수\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B0%9C%EC%88%98\" aria-label=\"데이터 개수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 개수</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'전체 학습 데이터의 개수: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">전체 학습 데이터의 개수: 25000</code></pre></div>\n<h3 id=\"각-리뷰의-문자-길이-분포\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EB%A6%AC%EB%B7%B0%EC%9D%98-%EB%AC%B8%EC%9E%90-%EA%B8%B8%EC%9D%B4-%EB%B6%84%ED%8F%AC\" aria-label=\"각 리뷰의 문자 길이 분포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 리뷰의 문자 길이 분포</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_length <span class=\"token operator\">=</span> train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">)</span>\ntrain_length<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0    2302\n1     946\n2    2449\n3    2245\n4    2231\nName: review, dtype: int64</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">,</span> bins<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'word'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>yscale<span class=\"token punctuation\">(</span><span class=\"token string\">'log'</span><span class=\"token punctuation\">,</span> nonposy<span class=\"token operator\">=</span><span class=\"token string\">'clip'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token string\">'Log-Histogram of length of review'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Length of review'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Number of review'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Text(0, 0.5, &#39;Number of review&#39;)</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 725px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2f888037d2b1be782dfbda78a617603/a0209/output_18_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABt0lEQVQoz6WRz0sbQRTH91T7f/Tc2FSwB6F/gP9Aj4KQKFQEsyIm4JrkH/ASBE/iUQqKUmyQqge719aD62al5GCbVmIIZNbMZnZm3rc7G38ceqjQBx/em3nDZ4Z5lpVEp9OZDBl7zwaDHOt284yxfBiGuWR/1vd92/O8xUajUTA5CIKC2Td9c+6OXLKebbfb74zPCuPYhRDA9TX+J/r9/s9UGBHVUa8D5bLA1ZVKekO0VkT0Fw/9R6QRcs4vjG8kEuIQu7sg21ZUqRAdHxNJSQQM+XfoO2HDCJ8LIerY3gYViwqrq8DSErC+Dnhecre81z5i4j6n5YMwMMJnnLFDbG0ZoaRymVKKRSLHIVpbI2o2hyqtn/RCK+r1PmNzEyiVdPKPSKlUgGoVsG3g4OBJQ4mi6HI45W73EzY2oJaXuXScWDuOkCsrsUpqVSoJVasJtFpc3dwIdXsrFOdCci61UgMpZaySrOOYWK+XDsU6Pzt78b1aff1jbi5zOj09/qtQyHzN58e+zcyM/V5YyHyYmnr7cX5+Yr9WmwiOjrJN1x092dl50261Xn5x3fEL3882Pe/V/t5e9g+kDVEFkgoRBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/e2f888037d2b1be782dfbda78a617603/a0209/output_18_1.png\"\n        srcset=\"/static/e2f888037d2b1be782dfbda78a617603/5a46d/output_18_1.png 300w,\n/static/e2f888037d2b1be782dfbda78a617603/0a47e/output_18_1.png 600w,\n/static/e2f888037d2b1be782dfbda78a617603/a0209/output_18_1.png 725w\"\n        sizes=\"(max-width: 725px) 100vw, 725px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>figsize: (가로, 세로) 형태의 튜플로 입력</li>\n<li>bins: 히스토그램 값들에 대한 버켓 범위</li>\n<li>range: x축 값의 범위</li>\n<li>alpha: 그래프 색상 투명도</li>\n<li>color: 그래프 색상</li>\n<li>label: 그래프에 대한 라벨</li>\n</ul>\n<p>대부분 6000 이하 그중에서도 2000 이하에 분포되어 있음을 알 수 있다. 그리고 일부 데이터의 경우 이상치로 10000 이상의 값을 가지고 있다.</p>\n<p>길이데 대해 몇가지 통계를 확인해 보자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 길이 최대 값: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 길이 최소 값: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 길이 평균 값: {:.2f}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 길이 표준편차: {:.2f}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>std<span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 길이 중간 값: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>median<span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 사분위의 대한 경우는 0~100 스케일로 되어있음</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 길이 제 1 사분위: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>percentile<span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 길이 제 3 사분위: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>percentile<span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">,</span> <span class=\"token number\">75</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">리뷰 길이 최대 값: 13708\n리뷰 길이 최소 값: 52\n리뷰 길이 평균 값: 1327.71\n리뷰 길이 표준편차: 1005.22\n리뷰 길이 중간 값: 981.0\n리뷰 길이 제 1 사분위: 703.0\n리뷰 길이 제 3 사분위: 1617.0</code></pre></div>\n<p>리뷰의 길이가 히스토그램에서 확인했던 것과 비슷하게 평균이 1300정도 이고, 최댓값이 13000이로 확인이 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>boxplot<span class=\"token punctuation\">(</span>train_length<span class=\"token punctuation\">,</span> labels<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'counts'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> showmeans<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{&#39;whiskers&#39;: [&lt;matplotlib.lines.Line2D at 0x7f1694cad4a8&gt;,\n  &lt;matplotlib.lines.Line2D at 0x7f1694cad7f0&gt;],\n &#39;caps&#39;: [&lt;matplotlib.lines.Line2D at 0x7f1694cadb38&gt;,\n  &lt;matplotlib.lines.Line2D at 0x7f1694cade80&gt;],\n &#39;boxes&#39;: [&lt;matplotlib.lines.Line2D at 0x7f1694cad358&gt;],\n &#39;medians&#39;: [&lt;matplotlib.lines.Line2D at 0x7f1694902208&gt;],\n &#39;fliers&#39;: [&lt;matplotlib.lines.Line2D at 0x7f1694902860&gt;],\n &#39;means&#39;: [&lt;matplotlib.lines.Line2D at 0x7f1694902550&gt;]}</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 724px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be28cf4ea4e1f322fe3d832fe1377115/a242d/output_22_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7UlEQVQoz62RzY6CQBCE5+LPw3vXF/AV1IOJGw+KJMYQuJj1sAfDRjMCCf8zDWPNBg3rjutFkgrQ1fXRzTDGWJ9zPiiKYpFl2STP85lJcRzP4Bs91KfIz4MgGILHeijY6g0X4J8/wDRNF7pQ13UJkUmYkKqqIrSZfKHzGGx3Ay4bILW/iPf73fd9RUS/6q2+qgE6Gtg1AXXoFsRkyvM8JYT44xmBSZJ8NIZ4XEevqOW6Lkkpn60s2yt38LD572fXmJBfzoqkeHUoew1kYRiOyrJ0cPQryGoLTdbl/G0dvw42P/nWo99ojfw2iqLxFYoaSSKFjBL7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/be28cf4ea4e1f322fe3d832fe1377115/a242d/output_22_1.png\"\n        srcset=\"/static/be28cf4ea4e1f322fe3d832fe1377115/5a46d/output_22_1.png 300w,\n/static/be28cf4ea4e1f322fe3d832fe1377115/0a47e/output_22_1.png 600w,\n/static/be28cf4ea4e1f322fe3d832fe1377115/a242d/output_22_1.png 724w\"\n        sizes=\"(max-width: 724px) 100vw, 724px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>labels : 입력한 데이터에 대한 라벨</li>\n<li>showmeans : 평균값을 마크함</li>\n</ul>\n<p>데이터의 길이가 대부분 2000 이하로 평균이 1500 이하인데, 길이가 4000 이상인 이상치 데이터도 많이 분포되어 있는 것을 확인할 수 있다.</p>\n<p>이제 리뷰에서 많이 사용된 단어로 어떤 것이 있는지 알아보자.</p>\n<h3 id=\"많이-사용된-단어\" style=\"position:relative;\"><a href=\"#%EB%A7%8E%EC%9D%B4-%EC%82%AC%EC%9A%A9%EB%90%9C-%EB%8B%A8%EC%96%B4\" aria-label=\"많이 사용된 단어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>많이 사용된 단어</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> wordcloud <span class=\"token keyword\">import</span> WordCloud\ncloud <span class=\"token operator\">=</span> WordCloud<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token number\">600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>generate<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>cloud<span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>axis<span class=\"token punctuation\">(</span><span class=\"token string\">'off'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(-0.5, 799.5, 599.5, -0.5)</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1126px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e09ca43ccc286082997c2180047d2176/b94e3/output_25_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADvUlEQVQ4yxWT227bRhiEaUfmabk8iFyS4lmkKIo6xnIkW03cxHFsFEFRIEVR9CboTa8joOhrFbzvaxTlC/QlWojUdHu9//47M9+soKr0s2X6fxPV+HNRX/5VV4N2OxfaIJHaqyJqRdtvzThsN9+4rR/o7ShjLbXstn7LWt2LW83xW8X0WtlL2itj2Ao6s39lUxfW7RTGroT1qsBwX8CcB5CXOa5Ygmjl4/0vBdhYx+Y5g6K6WD+PMN4yvP05RXHwoK2WEJkDYaDoX5xlAO8u/deo4p7crnrtsOjVSdiT+biXRknvlFFf7MNeCZ3+/vOk9xLa330f9rN3QX/4Kezrh6inu30v2sNeMAV2TCT++qVzCi/jMxNCDAUXUuhAfVVDDCLQooQ5GUPxGMKXEaKNi/xxAud2Aq0cQfEZtPUKxA0h6NQ42sMY1ExPConO1IxBTH5gOtDnMawygjpbQylmkIMUEhtDKqYY1AtIqw2k2RRKyPhMBdnwIJCheHR4NttH6/Tuk3XefrAxv9UwrRVkE4LlgeLwKKNa+yAWzzccwUx8qI4FK49hjhwuwOQOQmi+C0Fy9KMeOdjckdPHH+n56RMP/jXFmx8Yso2Bx48anr/ji1cUXqRj9WSjfvAw+Yph8d5DNKPI9g7Y6z2M+QQC3VhHz+Ekg+TkrO1zehhhWLuQWQhjnIGmJWi1hu3GSEmE9b2Fm1uR52iC1QnYhMErCJ8pIAU+pxyLx5GRobq4PiXS5GwaJqKLAiMhhaoHMPIKZDyHYY4xvbjhZyW81IcnZ0ikKVSTVyZnMOoC6siCoNT0mHgVbDk+xVp1zv0UqTwHiSIoDifNA7fKGKMgR6TOYFshouIO4eUUZl6D3MzhVUPe4VcgcQVBMOSjK3I7QnVKLstzGrr8Yg6pGkFbZNDvuLrHJYwsRi7MkAglfCdCKiXQohzKqoI+8UHXLzntFMKVbhzV/8lFxYnG2dkobRgVt7sueMciGGUOwpcpdQWV52rNt2Clg4A3Q7ZdiFEMnds1bzYQHcYpU/uLHCZQ71f/KPtZJ+/mnfa069Rd3Sn7ZUe/3nVke90p63WnHG465eFNNyimnWAMO6lMOzGLOzN3Oi6ik/2wEyTV/I0EGUgSgFxX0DYzaNc16M0M5v0S9nUKb5fBXXP6iwDRXY5xOUSdq1xZBpn/IsvnfSw2UFjMFUrGt0Tz/1AH5u/iC7UhstOIL2hDqdXY7qDxCrUZFnpjZ6QhodmMC9LsdqRZLIRGjlij1kWj0bAxtKS5GqjNf7oYeVtsyPnFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/e09ca43ccc286082997c2180047d2176/b94e3/output_25_1.png\"\n        srcset=\"/static/e09ca43ccc286082997c2180047d2176/5a46d/output_25_1.png 300w,\n/static/e09ca43ccc286082997c2180047d2176/0a47e/output_25_1.png 600w,\n/static/e09ca43ccc286082997c2180047d2176/b94e3/output_25_1.png 1126w\"\n        sizes=\"(max-width: 1126px) 100vw, 1126px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>워드 클라우드를 통해 살펴보면 가장 많이 사용된 단어는 br로 확인이 된다. br은 HTML 태그 이기때문에 이 태그들을 모두 제거 하는 전처리 작업이 필요하다.</p>\n<h3 id=\"긍정부정-데이터의-분포\" style=\"position:relative;\"><a href=\"#%EA%B8%8D%EC%A0%95%EB%B6%80%EC%A0%95-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98-%EB%B6%84%ED%8F%AC\" aria-label=\"긍정부정 데이터의 분포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>긍정/부정 데이터의 분포</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">fig<span class=\"token punctuation\">,</span> axe <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span>ncols<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nfig<span class=\"token punctuation\">.</span>set_size_inches<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\nsns<span class=\"token punctuation\">.</span>countplot<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f1694a64898&gt;</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 402px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4e485ce0672f989527cd94bc2f333542/0ec92/output_28_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACQklEQVQoz63S309SYRjA8dNP2rrqMuZqq5mE/Jhka0sqaK75B3TZdVslSxOTRnKwmY1sNR1WjOHhEFyUrgt+GDaoUSy1RMFsZQScc1Ez7XRCAuW8zacXktbaWl30bN+dm2efnfe8h0gmk+sIPKERb1ViLmNyPBg3U8EJspITZw+MkfG3LJnlFkg24ibZkJ1kw461Bklm9Fbnh+mHPXPJd00Ez/Prsbf1RdjfOJ7mQNvthWNXfDh/uSZLANTm+zDGLEFpctRxWOprgNyAFnJWDX4eBe5qHcBkP8xzWQeBd0pvuJlNPDs4EkstS3QOpGilijhBjlOecwq7T9kEXywjABQF1qIWGOMugSUlAmOqEVizVEif314o+Ayw+CV/vQKKZp6OHg5OpRFGYJ+eXlXpaShV3+4Cic4O/lgGrxaBvaYBDAHbJcfJgL2kgLRhBxKCJljkv/YRYrF4Gwa3vB4PHwpOpZAMg6rfwJrmX8DeP4GdP0CtVivC4KZU7EnDfwHXRvQ85NXgIy/LWga/YUhQ6Z1I1eZE9e00wiDCIAJYQUyvBmEQMV1yxJhrEQYRBlcKASMs8LkblW+4ITMdPRJ5Mw9Kw13Ybxz62YGLwyBt88DjJFe+Zd7aCJ979gJvUeIUwOMb/mjaCRC9DJ+yeVsFJCYf+fcMR+JO6ekBl1J3m1Y037yjOGP11J210dUn++mh6CtqNc9Rs91q+mVHNT1zQeqKd0jcs8ZaOtFaRWXcLfdS7PsT5fP6PXbiH2Zj6ff629J38MzHGZItqEgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/4e485ce0672f989527cd94bc2f333542/0ec92/output_28_1.png\"\n        srcset=\"/static/4e485ce0672f989527cd94bc2f333542/5a46d/output_28_1.png 300w,\n/static/4e485ce0672f989527cd94bc2f333542/0ec92/output_28_1.png 402w\"\n        sizes=\"(max-width: 402px) 100vw, 402px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>거의 동일한 개수로 분포되어 있음을 확인할 수 있다. 좀더 정확한 값을 확인해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"긍정 리뷰 개수: {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부정 리뷰 개수: {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">긍정 리뷰 개수: 12500\n부정 리뷰 개수: 12500</code></pre></div>\n<h3 id=\"각-리뷰의-단어-개수-분포\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EB%A6%AC%EB%B7%B0%EC%9D%98-%EB%8B%A8%EC%96%B4-%EA%B0%9C%EC%88%98-%EB%B6%84%ED%8F%AC\" aria-label=\"각 리뷰의 단어 개수 분포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 리뷰의 단어 개수 분포</h3>\n<p>각 리뷰를 단어 기준으로 나눠서 각 리뷰당 단어의 개수를 확인해 보자.\n단어는 띄어쓰기 기준으로 하나의 단어라 생각하고 개수를 계산한다.\n우선 각 단어의 길이를 가지는 변수를 하나 설정하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_word_counts <span class=\"token operator\">=</span> train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>train_word_counts<span class=\"token punctuation\">,</span> bins<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> facecolor<span class=\"token operator\">=</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'train'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token string\">'Log-Histogram of word count in review'</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>yscale<span class=\"token punctuation\">(</span><span class=\"token string\">'log'</span><span class=\"token punctuation\">,</span> nonposy<span class=\"token operator\">=</span><span class=\"token string\">'clip'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Number of words'</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Number of reviews'</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Text(0, 0.5, &#39;Number of reviews&#39;)</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 899px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ee7ed12596b2d460721979cd35e8d106/681f1/output_34_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACEElEQVQ4y6WST0sbQRjG3139AL0VYTVYCGpb8NiL4EFQ8OBNKHjyC2RzkJ5MIoL0UrBQ/AbSi1ehWFIRbJNCa3IoaRLX7TGuMSkb9n92Z97OZLrYpMEG+sLD87LM/OZ5dwZardZz17a3HMdJOZal2o6jep6XMgzjRaVS2alWq7l6vZ6t1WpZTdO2uVuWlWbrVce2VcfzVKfVSrUvLrbquv4MPMRv2Gwiahr+b7Xb7ZfQRTzH/X3EhQWffQuRkBApDXlPmQ9Tb12/Ag7sdDoZnrCI6+tIASKayVCKDEeIEO9Hq4gDTdPMgd9oFHFmpgdEAMRc7m6GMORI0cc+pPqA4e3tR5ybE0BZxh40nR7cce+/6wN2m81PfcAYuryMmM9j78J4ETIaMOIJZ2cFUJIELIZyHR7+Pf4/Ew4CucbHhR8c3AFHSehdXxeHAuOUe3til++LsQcviXkfMDCMwm9gSCWJMhcaGxO+tCSez5+KosFnFQOzENzcfOaXwtLQoQkXFxF3dxGPjxEN497RO6a5A26jcc7fIQFwiST5EUDAep/Kss88oCsrHk5MOOwAl2xuBuTkJKBHRz4plwMWq8uS+sR1Xby6wp+muQ2ls7OH5UQicQmgXEqSkgeY/g4wqcuy8hVg6nUy+eTV/PzTNwCP3wIkK2trkz/Y2i+rq1PvS6VpXdcVrVBQPmxsPHp3evrgF7Oihe5/pCqvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"png\"\n        title=\"png\"\n        src=\"/static/ee7ed12596b2d460721979cd35e8d106/681f1/output_34_1.png\"\n        srcset=\"/static/ee7ed12596b2d460721979cd35e8d106/5a46d/output_34_1.png 300w,\n/static/ee7ed12596b2d460721979cd35e8d106/0a47e/output_34_1.png 600w,\n/static/ee7ed12596b2d460721979cd35e8d106/681f1/output_34_1.png 899w\"\n        sizes=\"(max-width: 899px) 100vw, 899px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>대부분의 단어가 1000개 미만의 단어를 가지고 있고, 대부분 200개 정도의 단어를 가지고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 단어 개수 최대 값: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>train_word_counts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 단어 개수 최소 값: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>train_word_counts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 단어 개수 평균 값: {:.2f}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>train_word_counts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 단어 개수 표준편차: {:.2f}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>std<span class=\"token punctuation\">(</span>train_word_counts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 단어 개수 중간 값: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>median<span class=\"token punctuation\">(</span>train_word_counts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 사분위의 대한 경우는 0~100 스케일로 되어있음</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 단어 개수 제 1 사분위: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>percentile<span class=\"token punctuation\">(</span>train_word_counts<span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'리뷰 단어 개수 제 3 사분위: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>percentile<span class=\"token punctuation\">(</span>train_word_counts<span class=\"token punctuation\">,</span> <span class=\"token number\">75</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">리뷰 단어 개수 최대 값: 2470\n리뷰 단어 개수 최소 값: 10\n리뷰 단어 개수 평균 값: 233.79\n리뷰 단어 개수 표준편차: 173.74\n리뷰 단어 개수 중간 값: 174.0\n리뷰 단어 개수 제 1 사분위: 127.0\n리뷰 단어 개수 제 3 사분위: 284.0</code></pre></div>\n<p>통계를 살펴보면 평균이 233개, 최댓값은 2470개의 단어를 가지고 있다. 그리고 3사분위 값이 284개로 리뷰의 75%가 300개 이하의 단어를 가지고 있음을 확인 할 수 있다.</p>\n<h3 id=\"특수문자-및-대소문자-비율\" style=\"position:relative;\"><a href=\"#%ED%8A%B9%EC%88%98%EB%AC%B8%EC%9E%90-%EB%B0%8F-%EB%8C%80%EC%86%8C%EB%AC%B8%EC%9E%90-%EB%B9%84%EC%9C%A8\" aria-label=\"특수문자 및 대소문자 비율 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>특수문자 및 대/소문자 비율</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">qmarks <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token string\">'?'</span> <span class=\"token keyword\">in</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 물음표가 구두점으로 쓰임</span>\nfullstop <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token string\">'.'</span> <span class=\"token keyword\">in</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 마침표</span>\ncapital_first <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>isupper<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#  첫번째 대문자</span>\ncapitals <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">.</span>isupper<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> y <span class=\"token keyword\">in</span> x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 대문자가 몇개</span>\nnumbers <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">.</span>isdigit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> y <span class=\"token keyword\">in</span> x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 숫자가 몇개</span>\n                  \n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'물음표가있는 질문: {:.2f}%'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>qmarks <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'마침표가 있는 질문: {:.2f}%'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>fullstop <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'첫 글자가 대문자 인 질문: {:.2f}%'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>capital_first <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'대문자가있는 질문: {:.2f}%'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>capitals <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'숫자가있는 질문: {:.2f}%'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>numbers <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">물음표가있는 질문: 29.55%\n마침표가 있는 질문: 99.69%\n첫 글자가 대문자 인 질문: 92.84%\n대문자가있는 질문: 99.59%\n숫자가있는 질문: 56.66%</code></pre></div>\n<p>결과를 보면 대부분 마침표를 포함하고 있고, 대문자도 대부분 사용하고 있다. 따라서 전처리 과정에서 대문자의 경우 모두 소문자로 바꾸고 특수 문자의 경우 제거해야 한다. 이 과정은 학습에 방해가 되는 요소들을 제거하기 위함이다.</p>\n<h2 id=\"데이터-전처리\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EC%B2%98%EB%A6%AC\" aria-label=\"데이터 전처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 전처리</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> re\n<span class=\"token keyword\">import</span> pandas\n<span class=\"token keyword\">import</span> numpy\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup\n<span class=\"token keyword\">from</span> nltk<span class=\"token punctuation\">.</span>corpus <span class=\"token keyword\">import</span> stopwords\n<span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>python<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>sequence <span class=\"token keyword\">import</span> pad_sequences\n<span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>python<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>text <span class=\"token keyword\">import</span> Tokenizer</code></pre></div>\n<p>어떤 방향으로 전처리해야 할지 결정하기 위해 데이터 하나를 자세히 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">DATA_IN_PATH <span class=\"token operator\">=</span> <span class=\"token string\">'./data_in/'</span>\n\ntrain_data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> <span class=\"token string\">'labeledTrainData.tsv'</span><span class=\"token punctuation\">,</span> header <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> delimiter <span class=\"token operator\">=</span> <span class=\"token string\">'\\t'</span><span class=\"token punctuation\">,</span> quoting <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;With all this stuff going down at the moment with MJ...bad m&#39;kay.&lt;br /&gt;&lt;br /&gt;...I hope he is not the latter.&quot;</code></pre></div>\n<p>우선 <code class=\"language-text\">&lt;br/&gt;</code>과 같은 HTML 태그와 <code class=\"language-text\">\\</code>,<code class=\"language-text\">...</code> 같은 특수문자가 포함되어 있는것을 확인할 수 있는데, 이는 일반적으로 문장의 의미에 크게 영향을 주지 않기 때문에 <strong>BeautifulSoup</strong>과 <strong>re.sub</strong>을 이용해 제거하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">review <span class=\"token operator\">=</span> train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 리뷰들중 하나.</span>\nreview_text <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">,</span> <span class=\"token string\">\"html5lib\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># HTML 태그 제거</span>\nreview_text <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span><span class=\"token string\">\"[^a-zA-Z]\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> review_text<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 영어 문자를 제외한 나머지는 모두 공백으로 변경</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>review_text<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> With all this stuff going ... I hope he is not the latter  </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">stop_words <span class=\"token operator\">=</span> <span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>stopwords<span class=\"token punctuation\">.</span>words<span class=\"token punctuation\">(</span><span class=\"token string\">'english'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 영어 불용어들의 set을 만듬</span>\n\nreview_text <span class=\"token operator\">=</span> review_text<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 소문자변환 (NLTK에서 제공하는 불용어 사전은 모두 소문자로 되어있다.)</span>\nwords <span class=\"token operator\">=</span> review_text<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 단어리스트로 변환</span>\nwords <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>w <span class=\"token keyword\">for</span> w <span class=\"token keyword\">in</span> words <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> w <span class=\"token keyword\">in</span> stop_words<span class=\"token punctuation\">]</span> <span class=\"token comment\"># 불용어를 제거한 리스트를 만듬</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[&#39;stuff&#39;, &#39;going&#39;, &#39;moment&#39;, &#39;mj&#39;, &#39;started&#39;, &#39;listening&#39;,,,&#39;hope&#39;, &#39;latter&#39;]</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">clean_review <span class=\"token operator\">=</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 단어 리스트들을 다시 하나의 문장으로 합친다.</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>clean_review<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">stuff going moment mj started listening ... iars hope latter</code></pre></div>\n<p>전체 데이터에 적용하기 위해 함수화 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">preprocessing</span><span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">,</span> remove_stopwords<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># 불용어 제거는 선택 가능하도록(경우에 따라 불용어 제거가 역호과를 가져올 수 있다.)</span>\n    \n    <span class=\"token comment\"># 1. HTML 태그 제거</span>\n    review_text <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">,</span> <span class=\"token string\">\"html5lib\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># 2. 영어가 아닌 특수문자들을 공백(\" \")으로 바꾸기</span>\n    review_text <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span><span class=\"token string\">\"[^a-zA-Z]\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> review_text<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># 3. 대문자들을 소문자로 바꾸고 공백단위로 텍스트들 나눠서 리스트로 만든다.</span>\n    words <span class=\"token operator\">=</span> review_text<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> remove_stopwords<span class=\"token punctuation\">:</span> \n        <span class=\"token comment\"># 4. 불용어들을 제거</span>\n    \n        <span class=\"token comment\">#영어에 관련된 불용어 불러오기</span>\n        stops <span class=\"token operator\">=</span> <span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>stopwords<span class=\"token punctuation\">.</span>words<span class=\"token punctuation\">(</span><span class=\"token string\">\"english\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 불용어가 아닌 단어들로 이루어진 새로운 리스트 생성</span>\n        words <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>w <span class=\"token keyword\">for</span> w <span class=\"token keyword\">in</span> words <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> w <span class=\"token keyword\">in</span> stops<span class=\"token punctuation\">]</span>\n        <span class=\"token comment\"># 5. 단어 리스트를 공백을 넣어서 하나의 글로 합친다.</span>\n        clean_review <span class=\"token operator\">=</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 불용어 제거하지 않을 때</span>\n        clean_review <span class=\"token operator\">=</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> clean_review</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">clean_train_reviews <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> review <span class=\"token keyword\">in</span> train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    clean_train_reviews<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>preprocessing<span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">,</span> remove_stopwords<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 전처리된 데이터 확인</span>\nclean_train_reviews<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&#39;stuff going moment mj started listening ... sickest liars hope latter&#39;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">clean_train_df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">:</span> clean_train_reviews<span class=\"token punctuation\">,</span> <span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">:</span> train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tokenizer <span class=\"token operator\">=</span> Tokenizer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ntokenizer<span class=\"token punctuation\">.</span>fit_on_texts<span class=\"token punctuation\">(</span>clean_train_reviews<span class=\"token punctuation\">)</span>\ntext_sequences <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>texts_to_sequences<span class=\"token punctuation\">(</span>clean_train_reviews<span class=\"token punctuation\">)</span></code></pre></div>\n<p>위와 같이 하면 각 리뷰가 텍스트가 아닌 인덱스의 벡터로 구성될 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>text_sequences<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[404, 70, 419, 8815, 506, 2456, 115, 54, 873, ,,, ,18688, 18689, 316, 1356]</code></pre></div>\n<p>전체 데이터가 인덱스로 구성됨에 따라 각 인덱스가 어떤 단어를 의미하는지 확인할 수 있어야 하기 때문에 단어 사전이 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">word_vocab <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>word_index\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>word_vocab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"...\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"전체 단어 개수 : \"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>word_vocab<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{&#39;movie&#39;: 1, &#39;film&#39;: 2, &#39;one&#39;: 3, &#39;like&#39;: 4, &#39;good&#39;: 5, &#39;time&#39;: 6, &#39;even&#39;: 7, &#39;would&#39;: 8, &#39;story&#39;: 9 ...\n전체 단어 개수 :  74066</code></pre></div>\n<p> 총 74,000개 정도의 단어 이다. 단어 사전뿐 아니라 전체 단어의 개수도 이후 모델에서 사용되기 때문에 저장해 둔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data_configs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\ndata_configs<span class=\"token punctuation\">[</span><span class=\"token string\">'vocab'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> word_vocab\ndata_configs<span class=\"token punctuation\">[</span><span class=\"token string\">'vocab_size'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>word_vocab<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">MAX_SEQUENCE_LENGTH <span class=\"token operator\">=</span> <span class=\"token number\">174</span>  <span class=\"token comment\"># 문장 최대 길이</span>\n\ntrain_inputs <span class=\"token operator\">=</span> pad_sequences<span class=\"token punctuation\">(</span>text_sequences<span class=\"token punctuation\">,</span> maxlen<span class=\"token operator\">=</span>MAX_SEQUENCE_LENGTH<span class=\"token punctuation\">,</span> padding<span class=\"token operator\">=</span><span class=\"token string\">'post'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Shape of train data: '</span><span class=\"token punctuation\">,</span> train_inputs<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Shape of train data:  (25000, 174)</code></pre></div>\n<p>패딩 처리를 위해 <code class=\"language-text\">pad_sequences</code>함수를 사용하였다. 최대 길이를 174로 설정한 것은 앞서 단어 개수의 통계를 계산했을 때 나왔던 중간값이다.\n보통 평균이 아닌 중간값을 사용하는 경우가 많은데, 일부 이상치 데이터로 인해 평균값이 왜곡될 우려가 있기때문이다.</p>\n<p>패딩 처리를 통해 데이터의 형태가 25,000개의 데이터가 174라는 길이를 동일하게 가지게 되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">train_labels <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>train_data<span class=\"token punctuation\">[</span><span class=\"token string\">'sentiment'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Shape of label tensor:'</span><span class=\"token punctuation\">,</span> train_labels<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Shape of label tensor: (25000,)</code></pre></div>\n<p>numpy 배열로 만든 후 라벨의 형태를 확인해 보면 길이가 25,000인 벡터임을 확인할 수 있다.\n이렇게 라벨까지 numpy 배열로 저장하면 모든 전처리 과정이 끝난다.</p>\n<p>원본 데이터를 벡터화하는 과정을 그림을 통해 이해해 보자.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 932px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c65c029635ba1dfbb6cb2c8d8cb257b/f6f78/oorigin-vector.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABcRAAAXEQHKJvM/AAADhElEQVQ4y22Uy28bdRDH91AuMXGctk6a4MaJ4zROmsSN3fQBCCGBhDghTkj9myrBGYi99q6feezbu2s7oXnQZLcVFzZwgIVLayHRHCJVVQ9ZD9/ftoU04vDRjMczP8/3N/MzN9+qPZs0RBpTS6cgCNFK/SuwSV0MZlrVYNashaRblSADmzIqwTT8ObMeJDQhiCt8MIr8EVjuw87G8+XtTRrQSxQ1yjQIBuQCRbQSjdt1urEjU/aBTPkdhW7uqrQCcvCXX3+e3dqgyU6TxuwaJWG5aV3soJtHCa18OA5Satm9v9s9+dhsemNa+eGcWXNmW1UHnTnXrXpI1m44i1bDmUfsht10lvCZ5S0hxi2atV9mjMpf4Om1VvXpewrf+9LefJnRhL+Thvhk3qr3ILvHLA7rXVaKbwG5PcjtoSlYvsflrcZLJiEHWR/sqPSuVSFO+pbeMUqUfrBJN380KLev0/sHZuinftgI44wMruNKt0ERS6Qo6gZZbVoXu/iFx+NqyRkBM5rw6Ov97ZNPIHnCEA8WzLq7wKSa9VD6wmvJuXbTudVZD2UndcGZApOAW7YaPy2b9T9XrObvd+01H5L/uNeRXyxo4pOELvyGu/MxUZ/ZJbvpQ7Y/ByDVj0kF/5Jc9EdU3sd2+JDtcx91Nk6/cLr0+WGb8pjaQLtGnPwdXTAFmtlT6NahRXnIvePYdBesHJqhzeyrlN5VKLOn0lXIj6Au2qkTh866WbP2OAtJU7oYSv5mb/vkU7N5hP08gCR30aqHYGguu4Ks1XDz7TUXkt3bgH0HuW5KF11uQhMeXlSKv15WeC+u8t6Ywh991ZaeZ1TBTxjiz7nO2hGW2lu0m951u+GNaiUP+d4lwOxFueixWszBg3SPg+4XbDpDLZGGTEwLXJBXKYIFj2NZ09vrlOg0KLW1TlNbazRtr1O8VQ3zYuarmrNwWOhnwypPw0rxNKYUAwb8PgiiciGISKvBoLwaDMAOS4VgVhGDSVkMhpRC8Cb/LBwme/xZV6JrutiPoDMEQ4bw/JgdZr5SoLhcojlJoCXle0pJVZqQBYoiHpP/y2UwyccxdIj76L8JnocVJGWRJlSRroKMWqNRBW//zEH/HojLPI6oRRqUC31A52Fds+IppUIj6DIu8ZRAp3gE4QHn87mMUT3GiyCMvY+Np/8DfyCU0tAh/BCtTEkN8Vd1b+X+A+YzBMNd2PttAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"oorigin-vector\"\n        title=\"oorigin-vector\"\n        src=\"/static/8c65c029635ba1dfbb6cb2c8d8cb257b/f6f78/oorigin-vector.png\"\n        srcset=\"/static/8c65c029635ba1dfbb6cb2c8d8cb257b/5a46d/oorigin-vector.png 300w,\n/static/8c65c029635ba1dfbb6cb2c8d8cb257b/0a47e/oorigin-vector.png 600w,\n/static/8c65c029635ba1dfbb6cb2c8d8cb257b/f6f78/oorigin-vector.png 932w\"\n        sizes=\"(max-width: 932px) 100vw, 932px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>{: width=\"500px\" }</p>\n<p>이제 전처리한 데이터를 이후 모델링 과정에서 사용하기 위해 저장을 하도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">TRAIN_INPUT_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'train_input.npy'</span>\nTRAIN_LABEL_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'train_label.npy'</span>\nTRAIN_CLEAN_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'train_clean.csv'</span>\nDATA_CONFIGS <span class=\"token operator\">=</span> <span class=\"token string\">'data_configs.json'</span>\n\n<span class=\"token keyword\">import</span> os\n<span class=\"token comment\"># 저장하는 디렉토리가 존재하지 않으면 생성</span>\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span>DATA_IN_PATH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    os<span class=\"token punctuation\">.</span>makedirs<span class=\"token punctuation\">(</span>DATA_IN_PATH<span class=\"token punctuation\">)</span>\n    \n\n<span class=\"token comment\"># 전처리 된 데이터를 넘파이 형태로 저장</span>\nnp<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TRAIN_INPUT_DATA<span class=\"token punctuation\">,</span> <span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> train_inputs<span class=\"token punctuation\">)</span>\nnp<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TRAIN_LABEL_DATA<span class=\"token punctuation\">,</span> <span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> train_labels<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 정제된 텍스트를 csv 형태로 저장</span>\nclean_train_df<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TRAIN_CLEAN_DATA<span class=\"token punctuation\">,</span> index <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\"># 데이터 사전을 json 형태로 저장</span>\njson<span class=\"token punctuation\">.</span>dump<span class=\"token punctuation\">(</span>data_configs<span class=\"token punctuation\">,</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> DATA_CONFIGS<span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> ensure_ascii<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>test 데이터도 동일하게 저장하자. 다만 test 데이터는 라벨 값이 없기 때문에 라벨은 따로 저장하지 않아도 된다. 추가로 test 데이터네 대해 저장해야 하는 값이 있는데 각 리뷰 데이터에 대해 리뷰에 대한 <code class=\"language-text\">id</code>값을 저장해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">test_data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> <span class=\"token string\">\"testData.tsv\"</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> delimiter<span class=\"token operator\">=</span><span class=\"token string\">\"\\t\"</span><span class=\"token punctuation\">,</span> quoting<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n\nclean_test_reviews <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> review <span class=\"token keyword\">in</span> test_data<span class=\"token punctuation\">[</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    clean_test_reviews<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>preprocessing<span class=\"token punctuation\">(</span>review<span class=\"token punctuation\">,</span> remove_stopwords <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\nclean_test_df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'review'</span><span class=\"token punctuation\">:</span> clean_test_reviews<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> test_data<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ntest_id <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>test_data<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\ntext_sequences <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>texts_to_sequences<span class=\"token punctuation\">(</span>clean_test_reviews<span class=\"token punctuation\">)</span>\ntest_inputs <span class=\"token operator\">=</span> pad_sequences<span class=\"token punctuation\">(</span>text_sequences<span class=\"token punctuation\">,</span> maxlen<span class=\"token operator\">=</span>MAX_SEQUENCE_LENGTH<span class=\"token punctuation\">,</span> padding<span class=\"token operator\">=</span><span class=\"token string\">'post'</span><span class=\"token punctuation\">)</span>\n\n\nTEST_INPUT_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'test_input.npy'</span>\nTEST_CLEAN_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'test_clean.csv'</span>\nTEST_ID_DATA <span class=\"token operator\">=</span> <span class=\"token string\">'test_id.npy'</span>\n\nnp<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TEST_INPUT_DATA<span class=\"token punctuation\">,</span> <span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> test_inputs<span class=\"token punctuation\">)</span>\nnp<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TEST_ID_DATA<span class=\"token punctuation\">,</span> <span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> test_id<span class=\"token punctuation\">)</span>\nclean_test_df<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span>DATA_IN_PATH <span class=\"token operator\">+</span> TEST_CLEAN_DATA<span class=\"token punctuation\">,</span> index <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>test 데이터를 전처리할 떄 한 가지 중요한 점은 토크나이저를 통해 인덱스 벡터로 만들 때 토크나이징 객체로 새롭게 만드는 것이 아니라, <code class=\"language-text\">기존에 학습 데이터에 적용한 토크나이저 객체를 사용해야 한다는 것</code>이다. 만약 새롭게 만들 경우 Train 데이터와 Test 데이터에 대한 각 단어들의 인덱스가 달라져서 모델에 정상적으로 적용할 수 없기 때문이다.</p>\n<p>지금까지의 결과를 아래와 같은 파일들에 각각 저장을 하였다.</p>\n<blockquote>\n<p>단어 인덱스 사전 및 개수 : data<em>configs.json<br/>\n훈련 데이터 : train</em>input.npy, train<em>label.npy, train</em>clean.csv<br/>\n테스트 데이터 : test<em>input.npy, test</em>clean.csv, test_id.npy</p>\n</blockquote>\n<p>이제 저장된 데이터를 이용해 다음 스탭을 진행하도록 하겠다.</p>"},{"id":"a6a76604-8ef6-5b84-b3d8-b7df59efa99d","headings":[{"depth":1},{"depth":1},{"depth":1}],"frontmatter":{"title":"딥러닝 - 딥러닝의 이해","path":"/deep-learning-what-is","tags":["ML-DL","DeepLearning"],"excerpt":"딥러닝이라는 용어는 2006년 캐나다 토론토 대학교의 제프리 힌튼(Geoffrey Hinton) 교수의 논문을 통해 처음 사용이 되었다. 하지만 딥러닝은 사실 새로운 개념이 아니다.","created":"2019-05-16T00:00:00.000Z","createdPretty":"16 May, 2019","updated":"2019-05-16T00:00:00.000Z","updatedPretty":"16 May, 2019","featuredImage":null},"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 626px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e085339404dde0b42eb78e5dda7480ee/af590/deep_main.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAB6UlEQVQY02NgYJZiYJFn4FBhEtHjUDLl07a0KKr337jXbPZKp5krnJonuE9eZJo3WX/SZv2JyxWTynn1vViE9RmE9GRUbBkYWKQZWBUYuNR5hXWUpI04lUzNvELdFq7xOHi8/PDRlI4ZJSu3p64+4nn4hs3SLbp13XJhmQoGzkxSxjJqDkDNMgysigw86rwS+m7mzpJ6ziomrmFTZwfduRU0b4lDeVfa5gMNF59G3H7lum6nWdtkjdgiM1NPBgEtGTVHkGZGNiUGPk1dWaPVvh72xh6GOs5+SeXeOy/5r9pklddi0LWq/O6HnGefLaas0MyqsXeMKPAKlJLSF1cF28zErsTAo+Uia7TdxMxW1dHOyNs7tsGo50LCkWvOk1dod632PXDPa/9tncxO/7TS5MicLCdfEQl9SRWwZkZ2ZQYeTRExg3wLR0dtN2fbUIu4dssF57J3nSo7eTv5+gObFUc1GlcZBuZ4xhSEZ1U4ajnwCupIq9iBAwxksyY7v26wR7CXmZ+uWZCodaTDzlMZh87n77/hcvKZWt1i+aAi/dgSba8UN4cQLSVzVj5tKWVQaEsxsIFCm4lfl0/anEXWRkDXm1PVVTGzy2/1IYc5pwWLN3HYZQk5Rcv5pokY+0loufII6zGKg0IbAHf/lB6LdLbtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deep-1\"\n        title=\"deep-1\"\n        src=\"/static/e085339404dde0b42eb78e5dda7480ee/af590/deep_main.png\"\n        srcset=\"/static/e085339404dde0b42eb78e5dda7480ee/5a46d/deep_main.png 300w,\n/static/e085339404dde0b42eb78e5dda7480ee/0a47e/deep_main.png 600w,\n/static/e085339404dde0b42eb78e5dda7480ee/af590/deep_main.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"개념\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%85%90\" aria-label=\"개념 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개념</h1>\n<p><code class=\"language-text\">심층 신경망을 이용한 머신러닝 기법</code></p>\n<p>딥러닝이라는 용어는 2006년 캐나다 토론토 대학교의 제프리 힌튼(Geoffrey Hinton) 교수의 논문을 통해 처음 사용이 되었다. 하지만 딥러닝은 사실 새로운 개념이 아니다. 오래전부터 있어오던 인공신경망(Artificial Neural Network, ANN)과 크게 다를 바 없다. '인공신경망'이라고 하면 복잡한 뇌 구조를 생각하면서 어렵게 생각이 들겠지만 실제 뉴런의 행동을 살펴보면 어떻게 이렇게 단순한 행동으로 이루어질까 싶을 정도로 심플하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 719px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/997581a633246e4c2be373eea25075e1/073e9/neuron.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABbUlEQVQoz11RO0/DMBDOT2dm4ifARmcWBgZWQEUVKJGaNmleVHGdNIkfsePYKee6VC3fcDrf3XePz97hGmY6TJO1o57OwWmyftd1qETOd/BcDhJHxyRY+IWQylTd0A9GSrGzwEoprXUcx1LKKzIAcmD7vieMQ+sYDTUdudQQZIxB3C1FmOilIqQzxliyEGIYBkKpWwwSSk9fxTCbyyivwihfrhNCOWyljWn4CFmjR2BRQr26qqE3PAghWVYgXOd7dfuU38yWd8/bbz9c+Ou3z+D9YzEPUYollyMhFIoxxh7nHCYzymCyUAZ1KkPk4WV9/1o8flDeS9q1ULrZJFGx36CeS8UYhcvhlpNglFInY9n06c8u27Fwy5mwQlS4aprm7y8s1KBcsSXD9dDbCYbKsmmt8kFOwi2RSp9/yzjqkeac02TY3GnuZPyHy7+9hHdRYk1RFKtwlaZpHMWBH2zg1iQBRWFz2A5s27bOwqRfrf87HrfzQKoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deep-1\"\n        title=\"deep-1\"\n        src=\"/static/997581a633246e4c2be373eea25075e1/073e9/neuron.png\"\n        srcset=\"/static/997581a633246e4c2be373eea25075e1/5a46d/neuron.png 300w,\n/static/997581a633246e4c2be373eea25075e1/0a47e/neuron.png 600w,\n/static/997581a633246e4c2be373eea25075e1/073e9/neuron.png 719w\"\n        sizes=\"(max-width: 719px) 100vw, 719px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span> </p>\n<p>입력신호가 오면 길이에 따른 가중치(weight)를 부여하고 임계값(bias)을 더한 후 축색돌기를 통해 이동한다. 그리고 그 값이 조건에 만족한다면 다음 뉴런으로 넘어가고 그렇지 않다면 넘어가지 않게 된다. 이러한 실제 뉴런에서 이뤄지는 과정을 그대로 수학적으로 구현한 것이다.</p>\n<p>컴퓨터가 사진 속에서 고양이를 검출해내야 한다고 생각해보자. '고양이'라는 추상적 이미지는 아마 선, 면, 형상, 색깔, 크기 등 다양한 요소들이 조합된 결과물일 것이다. 이것은 아마 '선 30cm 이상은 고양이, 이하는 고양이 아님', 또는 '갈색은 고양이, 빨간색은 고양이 아님' 처럼 간단한 선형 구분으로는 식별해 낼 수 없는 문제이다. 딥러닝은 이 과제를 선 긋고 왜곡하고 합하고를 반복하며 복잡한 공간 속에서의 최적의 구분선을 만들어 내는 목적을 가지고 있다. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 912px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7623aed6067028d2d5e43fd2554ebcc7/8b69f/deep_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABcRAAAXEQHKJvM/AAACZUlEQVQozx1S2W7aUBD1p/QheWj7KX3qB/Sp6i/0P6pKUfISpWmzQBY1LIZgzGqMQ4wNIWAMNnsIITU4gI0prk8vudJIc+bOnDlz51LV1iMu8wqY+wau75qIlhvEVMQqDS9S1hAtNC1nbr6lyNEHw+RVXnIuudvnX3TJ8LM1w5+TDT6dN/phxpjyokHJrT6+Myp+Flo4uWvhSNJe7aSke3uZLk7zqvV3+vB+QygrDflUVnHAt3AgtHB8r6HA32EWyWDuC+KRToCS9S4OhSr2kzp8UgM+UYVfruNHVvMOeR2BUs221tjeEEo1tXgmNbHPD9a+Uttr5Eremsl5y+us5wQYr0snPKqs97BfIIRiB7tcB8cVjWAde9mOd1Rp41ysmyN65wO+UG8kZSTsJvsk1naHGRFujIPN5kEI4Vwx6NNJUL2qispFFPWsCClWAhcqQwjKUDKy1yaJCiv2hzufgi9ft07y+jMTFeow07fumpAt4zychIBlkIVDp/B0nQE1UXXMLqNwzkJYxbKYh9KwohlsRlhfRPAnVZi2Q98+Lj5T281mOz9lebgJwbVZQkTMSd5gRdTNQgmY8RyoUUXBOJyESYLmVQybgkkkBfM87M2Iisc4Zz8BW5s37IuSZAfjWEYzrkVqbKJqQcSYpLFJ/H+cBMpQmpgG4rCYHGxysfjNYHEWhkWnPCeWwzjOWQ+T8euWu5VqcewPkWa0a5CtvvhJXoAlk/EAewNsCEdaC50Uj172BgOugD6TwiBNMFfwhgR3BNGaWIt3G8Jxb1C0FR3zct11qhpWNR1rglfVJlbkHzvE/w+IqELYkMaL6wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deep-1\"\n        title=\"deep-1\"\n        src=\"/static/7623aed6067028d2d5e43fd2554ebcc7/8b69f/deep_01.png\"\n        srcset=\"/static/7623aed6067028d2d5e43fd2554ebcc7/5a46d/deep_01.png 300w,\n/static/7623aed6067028d2d5e43fd2554ebcc7/0a47e/deep_01.png 600w,\n/static/7623aed6067028d2d5e43fd2554ebcc7/8b69f/deep_01.png 912w\"\n        sizes=\"(max-width: 912px) 100vw, 912px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>파란선과 빨간선의 영역을 구분한다고 생각해보자. 그냥 구분 선을 긋는다면 아마 왼쪽처럼 불완전하게 그을 수 있을 것이다. 하지만 공간을 왜곡하면 오른쪽 같이 아름답게 구분선을 그릴 수 있다. 이처럼 인공신경망은 선 긋고, 구기고, 합하고를 반복하여 데이터를 처리한다.</p>\n<p>그럼 어떠한 규칙으로 선을 긋고 공간을 왜곡할까? 바로 데이터에 근거하는 것이다. 일단 대충 선을 긋고 그것들을 살살 움직여가며 구분 결과가 더 좋게 나오도록 선을 움직이는 것인데 이러한 과정을 최적화(optimization)이라고 한다. 딥러닝은 아주 많은 데이터와 아주 오랜 시간의 최적화를 통해 데이터를 학습하게 된다. (양에는 장사 없다고나 할까...)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1146px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/08a8629a5f7acb06a467b2a7501f0b22/fe9e8/deep_layer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC0ElEQVQozzWSS0wTURSGB2wTxQe+a0piSIxo2HQBO6MLI0uJgSUi6xIXmriThRsXaEzbaKIsMJEWRMVQqaVYVDBioUhLcWyHls6003b6mEeZYmtbHj3eO62T3Jz7/3Pmy3/PHaK9rf00QRDH0dJcaLl4sL9ff6S1tbUF6UMqlUrb29uL3xN9fX0anU53Hm0Po6Xt7u7W6vV6dVNT01mkGxsaGrQ9PT0aYnHJpUvFJSMXEwbnv389hz8mSfImG2GGAgH/XSTrgsFgPfZ9Pl8X8p8H16l7BqPpKPb8fv8tlmWHKIrSNzc3q4lyDrpCWw7wxW1Q4uEybtqU5XFAT1bO/cYabVW4SpL0DPvyn3zI+fHDiZo3qfRmsy6siXy2ct3HzsAiNZ1nmW0FmOK4YdiYgwzt/4H12uKCGlculX4E1CyINLk8TYkKUBRFMwYisEMBFiToXEvYYGnDViID5WvYo2nGDM4nwKzM/0TxiBcW+wHsh1nOtOsYhPjK51WrCMpsJVEcVRJKkrMKzCJg3I4SThUDwXIH9thE0gKcB9KR4DJxCeofTvxqxH4syRuBdYMYXfeOuNgzeL7JjDCWR8C0IFSBeZSQTM6Ah3YUA1QJJ6wLb4TNMPUAIu7ZZZxwYHjumJI8mjDsTg5Awu3wTuTgFPZWGe6NmU7BGs1UgX83odPDTsKCf6LI0JWryqwy4hg+hsDzbqyNzgj+VYg0LxoAdiErCt7X9nkN9gSx2sv/Tyhm5E5ejkI8Ey56SU4BhoKhV3vjdyDicihAy8uR/bgGmbhxZ/Q2JFxTHmupmhBdiqV2KZ8U4N4W3PgWeQo2r6mSS8IV7KEEZqhsQSbBerCORxh1LY0ByhIIXIz84vadrAHf1oBzCjCVTHfwQjqV4VOhWJRtwx7PC49zheK2IEpWrMvbO/uUI6fT93OFUkHalO3W9++OVnt5kyzLRUEQLFj/A7/B9AqN+rarAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deep-1\"\n        title=\"deep-1\"\n        src=\"/static/08a8629a5f7acb06a467b2a7501f0b22/fe9e8/deep_layer.png\"\n        srcset=\"/static/08a8629a5f7acb06a467b2a7501f0b22/5a46d/deep_layer.png 300w,\n/static/08a8629a5f7acb06a467b2a7501f0b22/0a47e/deep_layer.png 600w,\n/static/08a8629a5f7acb06a467b2a7501f0b22/fe9e8/deep_layer.png 1146w\"\n        sizes=\"(max-width: 1146px) 100vw, 1146px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n딥러닝은 하나의 뉴런이 아닌 수천 수억개의 뉴런들이 연결되어 이뤄진다. 즉 인공 신경 또한 수많은 연결들을 통해 망을 이룬다. 크게 입력층(input layer)과 출력층(output layer) 그리고 그 사이에 있는 layer들을 묶어서 은닉층(hidden layer)이라고 한다. 위 그림에서는 모든 노드가 연결되어있지만, 꼭 다 연결되어있어야 하는 것은 아니다. 단지 내가 어떻게 신경망을 구성하냐에 따라 정해지는 것이다.</p>\n<p>저렇게 망이 이뤄져 있는 것은 알겠는데, 대체 어떻게 학습을 한다는건지 이해가 안 될 수 있다.\n내가 고양이 사진을 입력에 넣었다면 출력에는 고양이라는 결과가 나와야 맞는 것이다. 고양이가 맞다면 그냥 넘어가면 되지만, 고양이가 아니라고 결과가 나왔다면 이것은 문제가 있는 것이다. 따라서 다시 뒤로 돌아가면서 각 인공 신경의 가중치(weight)와 임계값(bias) 값을 수정하게 된다. 이러한 과정을 반복하며 weight와 bias 값을 조정하고 고양이라는 결과가 나오도록 '학습' 하는 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 330px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c2452f897e382afb7b6bf096ee9f9035/d9ecf/image_net.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 128.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABM5AAATOQGPwlYBAAAD2klEQVRIx5WVW3PbNhCF9f//Rx/S5KEdZ+qxHXs6TT3T1KkvEi3RN8myZYmSSAIgeKeE0wNIcSI74ziaWYMEwPW3ZxfYljHmFoDiGDdNI55aXdeC62K5XIi6qd1clmfie3uXy6Vo0ZHC+leUBfIifxzpAELGePfuLfb3P2Brawtvfn2Dwd09muXice+X/fSFFv3Ea39LThprJHBjkihzeHho9vb2zPb2ttk/ODDv32+Znd09cz8aGToyaZZyf+q+aRaNaWmthdfpQCplVJoiFjGkFFCJcs83/StcXV9i0O+jP+hj9DBCr9fFbD5HmmlonSJNMyRagWGjVZalCKZTlEVhbmcSJ3Te8dpotzu4vOpDphN0rjvwBwO+X8LreAhmc+SVRp6VGMsrTOQNiryiwxot/hG+70OnDDPPLKmjk0qCISOhNvLShzw9RqxizOIJlNI4nx5AaYnr+b+0IzqvUdcVWjYzURRT1MLqxjBSUA9kHFNuyIa3mP/5G8LDPxCfHcKTf6MkTWe6C5XGGMYd3MUe5xqXxBa9Cs/rOELrKNEJnxNHl1UFNHWL/tpC/M8OwpOP8NVHZDqHF3xApAJSzzhOnZbO4WKxEPN5iLKsHKEmWcLk2PBHIZ2SMuj6CI6OMdcxdvwTFEWBSAeMInNjrGeMKl8lxTq8uPCpmzZlmSOIJE6HEUWmTqMYRZagPUnweUwpSO7dz5hV7TKrOdrs2qisOUIWo9AkKsrSVCzQIE5wNIiwqHLsdmdO095DjOPbEMs6ZzVkbu6rZWtLV4Q2y91ulxnTzHK+1lBTZI3fzwK+a7TvIny6maMpU8hktf7U7HfrkBsRRpHTsLIhk/DzbYS6yhypotgi0QhZKlbXTbpNWxM2onvuOQ0LJiWUCoOpcBp69zGESii+dmZpv0e3QWjrUErpCG1S5jLB+YNAXWb41I8cHc/qi2QbhDZkqyFJTMO6uwlivP1v7DTMszWB/oE9JVQMq6pWhCEJ/bFweunsdWTPCM95UiyhTcqEdXjCOlxpljwS/Mi+1iEJU9ZhWdWmqRnyVOKXo7HT8NWEebpZh+12mzezchoOZ4IFPWWW0xez+mKWLSF7h7u+Ei5K/XPaWbNOnUMbcs/v8XaWxh56+5/S9PVkzwjtWa6q2r646+tnM/uM0Dap4XDIHhEtSzYdZtVwcWXfPn8zl66fKdXGmoWyDpX1XNPsbzwe4/T0FCGb0NnZGVtBAlv41zd9TMYP8M57CMMINpH2HvW55l9cfunELmTb6BPbzK3ZZk4tXeO2DcwmzY4sfNGw6fOIcm2xsceusSW77/8HgyG2igORzRcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deep-1\"\n        title=\"deep-1\"\n        src=\"/static/c2452f897e382afb7b6bf096ee9f9035/d9ecf/image_net.png\"\n        srcset=\"/static/c2452f897e382afb7b6bf096ee9f9035/5a46d/image_net.png 300w,\n/static/c2452f897e382afb7b6bf096ee9f9035/d9ecf/image_net.png 330w\"\n        sizes=\"(max-width: 330px) 100vw, 330px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>2012년 이미지넷에서 이미지 분류 대회가 있었다. 1000개의 카테고리와 100만개의 이미지로 구성되어 분류 정확도를 겨루는 대회이고, 아래 사진만 보더라도 딥러닝이 이미지 인식 부문에서 얼마나 큰 영향을 끼치고 있는지 알 수 있다. 이 대회 이전에는 기계의 이미지 인식률이 75%를 넘지 못했고 80% 이상의 인식률은 불가능이라는 인식이 있었다. 하지만 이 대회에서 힌튼 교수의 제자 알렉스가 알렉스넷(AlexNet)이라는 딥러닝 기반 알고리즘으로 84.7%를 찍었고, 이후로는 대부분의 참가자들이 딥러닝으로 방향을 돌렸다. 현재는 오류율이 5% 이하의 정확도로 인간의 인식수준을 뛰어넘었다.</p>\n<p>딥러닝이 대단한 것은 일반적인 기계 학습과 달리 특징 추출(feature extraction)이 자동적으로 이루어지는 점 이다. 기존에는 효과적인 특징을 추출하기 위해 관련 분야 전문가가 오랜 시간동안 직접 특징을 추출하는 수식이나 방법을 고안해야 했다. 이 방법은 개발, 평가 및 보완에 많은 시간이 걸리는데 딥러닝은 이런 과정을 컴퓨터가 대신 하도록 알고리즘을 짠 것으로, 사람에 비해 훨씬 빠르고 효과적으로 수행해도록 학습시켜준다.</p>\n<h1 id=\"발전과정\" style=\"position:relative;\"><a href=\"#%EB%B0%9C%EC%A0%84%EA%B3%BC%EC%A0%95\" aria-label=\"발전과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>발전과정</h1>\n<p>딥러닝의 발전과정을 보면 아주 오래전부터 시작이 되었고 지금에 이르기까지 많은 이들의 노력이 있었다.</p>\n<p><code class=\"language-text\">1957 : 최초 신경망 모델 Perceptron 등장</code></p>\n<p>퍼셉트론은 인간의 두뇌 움직임을 수학적으로 구성하였다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 773px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e45527b7992b2fa15a56b8b815684ebe/612f7/deep_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABXUlEQVQoz32SfW+CQAzG+f4facmcZo5o1Pj2H6AI5xsIJ2+iiPqsrdMty7JLfint9crT3hmbzQZRFKEoCpzPZxyPR1RVhbqucTgccDqdxC/L8mk5h+OP/UeM943RaITJZILhcIhev4f+YEC2j263A9M0yXYxnU7RbDYxHo8xn81gWRbm8zks24Lv+/A8D0op6P0eRhAEmFHSdruFS0mu7SCgb07gWBiGCHe7uyV+r9vthjRNkWWZYLBMJqeWj8Qp1pz184gceqzr9SpwjLlcLiLIdV0RYXBSnufkLLEhRWuClfFsmdVqJcriOJbD3JFt21KA22XW6zUcx5EfSEFWqHWMvdZ39prm8W3vQy/pos5yEUmSSpssJEkSaZV9Vi4FizxDr9PGx3tDUGoBtfSxJJTySMXdL4qMVNb4b321nMJsv6HdekWr8YKFO8NyxZfCLSspzGgd0dOqnvP7i09IslrDMjep8QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deep-1\"\n        title=\"deep-1\"\n        src=\"/static/e45527b7992b2fa15a56b8b815684ebe/612f7/deep_02.png\"\n        srcset=\"/static/e45527b7992b2fa15a56b8b815684ebe/5a46d/deep_02.png 300w,\n/static/e45527b7992b2fa15a56b8b815684ebe/0a47e/deep_02.png 600w,\n/static/e45527b7992b2fa15a56b8b815684ebe/612f7/deep_02.png 773w\"\n        sizes=\"(max-width: 773px) 100vw, 773px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">1957 ~ 1986 : 첫 빙하기(30년)</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 732px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9dd8ee15286984a24ff73ccc93e0244e/d0cc0/deep_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABYUlEQVQoz1VS23KCQAzlq6WfUR/UUV/8MkVtBTvDRXa57AVOkyy0mJklm3OSbEgSgWQYBqhawXmPYRwZwjhpYy3xo+Ce/N44YwUfJ5wl4o93Hq1SeKkGuu3fgvLyhbY3Emisw1wAi247GIolAM/sB7XSiDjQU2WWKqEs0ASyPUtHQVy9dU4e4cMJWRt6aK4uLyooTijVENhQkCTueizFUpChpFWt0fX2rcKu6eCMQUe/bn3AIq01yqpCnudyKrrXdR1+ibiiKFCUJUrSJWlFreHqWLPNMcxVVeCi0+mEOP7AZrPB4XCU+3a7lYSBi/G5Xsthbr/fC3c8/vvudjusVrH4R9nzifP5gvv9C8n1hsslwffjIUFpmol9u90Dl1yJS4VjnZDNOPNn8kuzLPTQTUPw1Afu47BYD8bmQSz7xys0D2d5Ik5gqLE85Z4HMN3lIZos7yHbAXd/3Hyf/XknGfsF5Mum8uXhc5cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deep-1\"\n        title=\"deep-1\"\n        src=\"/static/9dd8ee15286984a24ff73ccc93e0244e/d0cc0/deep_03.png\"\n        srcset=\"/static/9dd8ee15286984a24ff73ccc93e0244e/5a46d/deep_03.png 300w,\n/static/9dd8ee15286984a24ff73ccc93e0244e/0a47e/deep_03.png 600w,\n/static/9dd8ee15286984a24ff73ccc93e0244e/d0cc0/deep_03.png 732w\"\n        sizes=\"(max-width: 732px) 100vw, 732px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>그 당시 AND와 OR의 경우 퍼셉트론을 통한 선형 분리(linearly separable)가 가능했다. 따라서 AND / OR 연산이 가능하게 훈련한 퍼셉트론을 보고 많은 사람들은 기계의 학습 가능성에 대해 큰 기대를 하게 되었다.\n하지만 이러한 그들의 엄청난 기대에 찬물을 끼얹어버린 것이 XOR 연산에 대한 불가능이었다. 당시 하나의 인공 신경. 즉 퍼셉트론으로는 선형 분리가 불가능해 XOR 연산에 대한 학습이 불가능했다. </p>\n<p>1969년 이 문제를 해결하기 위해 퍼셉트론을 다중으로 겹치면 이 문제를 해결할 수 있음을 증명한 <strong>다중 계층 퍼셉트론이 등장</strong>하지만 레이어가 복잡해질수록 연산이 복잡해져서 현실적으로 파라미터값을 구하는 것이 불가능 하였다.</p>\n<p><code class=\"language-text\">1986 : 새로운 학습 방법 등장</code></p>\n<p>데이터가 모델을 스스로 찾아내는 역전파(Backpropagation) 등장\n즉 앞의 진행방향에서 고쳐가는 것이 아니라 결과를 보고 뒤로 가면서 weight와 bias를 조정하는 방법을 고안 하였고, XOR 뿐 아니라 좀 더 복잡한 과정도 해결할 수 있음을 보이며 다시 인공 신경망은 사람들의 관심을 끌기 시작했다.</p>\n<p><code class=\"language-text\">1990 : BOOM</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 703px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ead2eaf3f6e6c95306ad4b1bb2122895/242e2/deep_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACkElEQVQoz62TzU4TURiGZ1pK6QClnXb6M/0dOpRCKS1VOq20aFsqExFi+QsJRMUF4g8RFyYuXGA0rkx0ZeLGxCswMWpcuPcOXLv2Jh5PRxNvwMWXN3Py5Zn3fO93JEmS+K+lqGl8gQSSW3y4JEdlj0QyYTBXvIAS1BhRw/iCYUe9/jHkYRey14M0NOiXcSs+3L4RlLEQUqTQIzRZc5oc6PCfalxY5/joJenSEoGpOUL5ObRCmaRpYuZNitUGAT2GrHjxhqN4QyHC+jRSvLhGPGEyNACJP7p9MkFNpdrY4PD4Fbnza0zkLdSZJfRSE3O6wKVWl4sruxQa11BSBRTdxKNqjGsZ4TDfJKuncAnYiCLh8UksCph95Zj5aht9YZX4oCo2iarN3HyZxVqLc1aPxct3KFibRHILDEczjA8cZko9Lrb2mcnNEtEmxBxk7PW7NDvXSaUMUgtrREVPvCxGU+xSsVbor26y3N6mvfWYfGOPSLEnnM4yblhItZ13dOyHIoQsMXF1v+onN13Fsvp0+2cs3/tA+/QjvUdfuXL2jd3X3zk4OqNl38TaOCVr7ZG29hnNVBgzmkjF1glmue8EMjzqcTSSnKTTvUFz9y3dJz+wn/3EfvGL25/h8AusnbzBXt1m1tpgLC4Cm7mKP7dEdGEHaURAvON+YnoCVQsT0eNkpiqs7D6nfusTRu8p0eoB+vJj6vffk2xsocVi1GtNgiFVhCECDc3ijZZJt58i+QMhx1VMz1CYqVOr95m3tplsHFJY2idX6ZApddDNEmEx40DQ929nZRGkNiVgFdyjKoHyA3Emu8WGy86Wu1xuRycm/EwaWZLJBNFojEzWIJ1OC81imnkMw0BRlH+vY8D4y/kNpT49psy38/gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deep-1\"\n        title=\"deep-1\"\n        src=\"/static/ead2eaf3f6e6c95306ad4b1bb2122895/242e2/deep_04.png\"\n        srcset=\"/static/ead2eaf3f6e6c95306ad4b1bb2122895/5a46d/deep_04.png 300w,\n/static/ead2eaf3f6e6c95306ad4b1bb2122895/0a47e/deep_04.png 600w,\n/static/ead2eaf3f6e6c95306ad4b1bb2122895/242e2/deep_04.png 703w\"\n        sizes=\"(max-width: 703px) 100vw, 703px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>{: width=\"400px\" }\n(터미네이터2 심판의 날 (1991) 대사 中)</p>\n<p>영화 중반부에 터미네이터인 아놀드의 대사 중에 \"My CPU is a neural-net processor.\" 라는 말이 나온다. 스스로 학습할 수 있는 기계를 neural-net processor 라는 말로 설명했고 이 당시에도 neural network에 관심이 있었음을 알 수 있다. </p>\n<p><code class=\"language-text\">1990 ~ 2000 : 두번째 빙하기(10년)</code>\n신경망이 깊어질수록 원하는 결과를 얻을 수 없다. 오히려 성능이 저하되는 경우가 발생.</p>\n<p>다음의 문제를 해결하는데 10년이 걸리게 된다.</p>\n<ol>\n<li>Overfitting (과하거나)</li>\n<li>Vanishing Gradient (덜하거나)</li>\n<li>Too slow  (느리거나)</li>\n</ol>\n<p>이런 문제를 해결하기 위해 연구하는 10년 동안 GUP를 활용한 연산시도, 알고리즘의 발전이 있게 된다.(SVM, Random Forest 등장)</p>\n<p><code class=\"language-text\">2000 : 3가지 한계점의 해결방안 등장</code></p>\n<ol>\n<li>\n<p>과한 적합 해결</p>\n<ul>\n<li>Droupout</li>\n</ul>\n</li>\n<li>\n<p>덜한 적합 해결</p>\n<ul>\n<li>ReLU(Rectified Linear Unit) : 수렴속도가 시그모이드류 함수 대비 6배 빠름</li>\n</ul>\n</li>\n<li>\n<p>느린 적합 해결</p>\n<ul>\n<li>Adam : 확룰적 경사 하강법(SGD)에서 더 나아가 학습속도와 운동량을 고려한 옵티마이저가 등장</li>\n</ul>\n</li>\n</ol>\n<p><code class=\"language-text\">2006 : 드디어 Deep Network. Deep Learning 용어가 사용되기 시작</code></p>\n<p>이러한 여러번의 실패로 인해 이후 나온 논문에서는 neural net이라는 단어를 찾을 수 없었고 neural 대신 deep 이라는 단어를 사용했다. 이 당시 neural network 라는 말만 들어가면 논문에서 거절당한다는 말이 있을 정도로 신경망이 외면받던 시기였기 때문에 좀 더 사람들의 이목을 끌 수 있는 단어를 택했던 것 같다.</p>\n<h1 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h1>\n<p>딥 러닝이 화두가 되고 있는 것은 비교적 최근의 일이지만, 딥 러닝의 기본 구조인 인공 신경망(Artificial Neural Network)의 역사는 오래되었다. 1957년에 등장한 초기 신경망인 퍼셉트론(Perceptron)으로 시작해 최근에 쓰이고 있는 발전된 신경망 RNN, LSTM에 대해서도 좀더 자세히 알아보면 좋을 것 같다.</p>"},{"id":"2abb6ba1-f610-5d4a-8834-e514d34e23cc","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"NLP - 자연어처리 - KoNLPy (코엔엘파이)","path":"/nlp-konlpy","tags":["ML-DL","ML","NLP"],"excerpt":"한글 자연어 처리에 많이 사용하는 파이썬 라이브버리 KoNLPy에 대해 알아보겠다.","created":"2019-04-18T00:00:00.000Z","createdPretty":"18 April, 2019","updated":"2019-04-18T00:00:00.000Z","updatedPretty":"18 April, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABcRAAAXEQHKJvM/AAABT0lEQVQoz2NggIIzIuLdp0XE950RFosE8f8DcZJxGgPJ4JywKBvQoMiTIpLPbouI/t8mpf5UxGtBAUguWMGOgZlDkBHIZIJiRjTMgMZmYAAaVn9LVPz/ZUHBFzcFeN+uldU7Luk555ei2zRHBnLAWWGxOSdFJP75W5bsc7Ctv67l0n9D3n/lf3mPWVEgeSYWLisg5QrE3kBsC8QgvjIQqwOxCBCrAbESECsAMTvDTX4em90SyvvEPef+kfBe8F/GY9ZrOfcZC2Q9Z0uC/cPECtKsAcSWQKwDNUwIiKWBWBCI5YFYDojFgJgN7MoudV8RRfcZl+U9Zv6W95w9E+Z6hyn/SfeyvYEZD0MEA5OIcZa8hFW1q6BWlAobMwOPbcoGcEAzs7DDAp0JIwKwRYqRoZG6hZmFo4gApz6QawDEZtIycmb29vbcIHlDQyOSHAgAJyJKH2VHa6sAAAAASUVORK5CYII=","aspectRatio":2.358490566037736,"src":"/static/13a08e5a6dde5bc80688528fa8349460/0853f/cover.png","srcSet":"/static/13a08e5a6dde5bc80688528fa8349460/14156/cover.png 125w,\n/static/13a08e5a6dde5bc80688528fa8349460/d6e47/cover.png 250w,\n/static/13a08e5a6dde5bc80688528fa8349460/0853f/cover.png 500w,\n/static/13a08e5a6dde5bc80688528fa8349460/42b33/cover.png 732w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>자연어 처리에서 각 언어마다 모두 특징이 다르기 때문에 동일한 방법을 사용하기는 어려울 것이다. 한글에도 NLTK나 Spacy 같은 도구를 사용할 수 있으면 좋겠지만 언어 특성상 영어를 위한 도구를 사용하기에는 적합하지 않다. 하지만 많은 사람들의 노력으로 개발된 한글 자연어 처리를 돕는 훌륭한 도구를 사용할 수있다. 그중 한글 자연어 처리에 많이 사용하는 파이썬 라이브버리 KoNLPy에 대해 알아보겠다.</p>\n<p>KoNLPy는 한글 자연어 처리를 쉽고 간결하게 처리할 수 있도록 만들어진 오픈소스 라이브러리다.\n또한 국내에 이미 만들어져 사용되고 있는 여러 형태소 분석기를 사용할 수 있게 허용한다. 일반적인 어절 단위에 대한 토크나이징은 NLTK로 충분히 해결할 수 있으므로 형태소 단위에 대한 토크나이징에 대해 알아보도록 하겠다.</p>\n<h2 id=\"설치\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98\" aria-label=\"설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치</h2>\n<p>리눅스 또는 macOS에서는 다음과 같이 pip를 이용해 간단하게 설치할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> konlpy <span class=\"token comment\">#python2.x</span>\npip3 <span class=\"token function\">install</span> konlpy <span class=\"token comment\">#python2.x</span></code></pre></div>\n<h2 id=\"형태소-단위-토크나이징\" style=\"position:relative;\"><a href=\"#%ED%98%95%ED%83%9C%EC%86%8C-%EB%8B%A8%EC%9C%84-%ED%86%A0%ED%81%AC%EB%82%98%EC%9D%B4%EC%A7%95\" aria-label=\"형태소 단위 토크나이징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>형태소 단위 토크나이징</h2>\n<p>한글 텍스트의 경우 형태소 단위 토크나이징이 필요할 떄가 있는데 KoNLPy에서는 여러 형태소 분석기를 제공하며, 각 형태소 분석기별로 분석한 결과는 다를 수 있다.\n각 형태소 분석기는 클래스 형태로 되어 있고 이를 객체로 생성한 후 매서드를 호출해서 토크나이징할 수 있다.</p>\n<h2 id=\"형태소-분석-및-품사-태깅\" style=\"position:relative;\"><a href=\"#%ED%98%95%ED%83%9C%EC%86%8C-%EB%B6%84%EC%84%9D-%EB%B0%8F-%ED%92%88%EC%82%AC-%ED%83%9C%EA%B9%85\" aria-label=\"형태소 분석 및 품사 태깅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>형태소 분석 및 품사 태깅</h2>\n<p>형태소란 의미를 가지는 가장 작은 단위로서 더 쪼개지면 의미를 상실하는 것들을 말한다. 따라서 형태소 분석이란 의미를 가지는 단위를 기준으로 문장을 살펴보는 것을 의미한다.\nKoNLPy는 기존에 C, C++, Java 등의 언어를 통해 형태소 분석을 할 수 있는 좋은 라이브러리들을 파이썬 라이브러리로 통합해서 사용할 수 있록 하여 한국어 구문 분석을 쉽게 할 수 있도록 만들어진 라이브러리이다. KoNLPy에는 다양한 형태소 분석기들이 객체 형태로 포함돼 있으며 다음과 같은 각 형태소 분석기 목록이 있다.</p>\n<ul>\n<li>Hannanum</li>\n<li>Kkma</li>\n<li>Komoran</li>\n<li>Mecab</li>\n<li>Okt(Twitter)</li>\n</ul>\n<p>모두 동일한 형태소 분석기능을 제공하는데, 각기 성능이 조금씩 다르다고 하니 직접 비교해보고 자신의 데이터를 가장 잘 분석하는 분석기를 사용하는 것이 좋다.\n(단, Mecab는 윈도우에서 사용할 수 없다.)</p>\n<p>여기에서는 Okt 예로 들어 설명 하도록 하겠다.\nOkt는 원래 이름이 Twitter였으나 0.5.0 버전 이후부터 이름이 Okt로 바뀌었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> konlpy<span class=\"token punctuation\">.</span>tag <span class=\"token keyword\">import</span> Okt\n\nokt <span class=\"token operator\">=</span> Okt<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 객체 생성</span></code></pre></div>\n<p>Okt 에서 제공되는 함수를 살펴보자.</p>\n<ul>\n<li>okt.morphs()\n텍스트를 형태소 단위로 나눈다. 옵션으로 norm과 stem이 있다. norm은 문장을 정규화. stem은 각 단어에서 어간을 추출.(기본값은 둘다 False)</li>\n<li>okt.nouns()\n텍스트에서 명사만 뽑아낸다.</li>\n<li>okt.phrases()\n텍스트에서 어절을 뽑아낸다.</li>\n<li>okt.pos()\n각 품사를 태깅하는 역할을 한다. 품사를 태깅한다는 것은 주어진 텍스트를 형태소 단위로 나누고, 나눠진 각 형태소를 그에 해당하는 품사와 함께 리스트화하는 것을 의미한다.\n옵션으로 norm, stem, join이 있는데 join은 나눠진 형태소와 품사를 '형태소/품사' 형태로 같이 붙여서 리스트화한다.</li>\n</ul>\n<p>다음 문장을 직접 각 함수에 적용해서 살펴보자.</p>\n<p><strong>모바일 게임은 재밌다 열심히 해서 만랩을 찍어야지~ ㅎㅎㅎ</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> konlpy<span class=\"token punctuation\">.</span>tag <span class=\"token keyword\">import</span> Okt\nokt <span class=\"token operator\">=</span> Okt<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\ntext <span class=\"token operator\">=</span> <span class=\"token string\">\"모바일 게임은 재밌다 열심히 해서 만랩을 찍어야지~ ㅎㅎㅎ\"</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>morphs<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>morphs<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> stem<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"result\"><pre class=\"language-result\"><code class=\"language-result\">[&#39;모바일&#39;, &#39;게임&#39;, &#39;은&#39;, &#39;재밌다&#39;, &#39;열심히&#39;, &#39;해서&#39;, &#39;만&#39;, &#39;랩&#39;, &#39;을&#39;, &#39;찍어야지&#39;, &#39;~&#39;, &#39;ㅎㅎㅎ&#39;]\n[&#39;모바일&#39;, &#39;게임&#39;, &#39;은&#39;, &#39;재밌다&#39;, &#39;열심히&#39;, &#39;하다&#39;, &#39;만&#39;, &#39;랩&#39;, &#39;을&#39;, &#39;찍다&#39;, &#39;~&#39;, &#39;ㅎㅎㅎ&#39;]</code></pre></div>\n<p>어간 추출을 한 경우 <code class=\"language-text\">찍어야지</code>의 어간인 <code class=\"language-text\">찍다</code>로 추출된 것을 볼 수 있다. </p>\n<p>이제 명사와 어절을 추츨헤 보자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>nouns<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>phrases<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"result\"><pre class=\"language-result\"><code class=\"language-result\">[&#39;모바일&#39;, &#39;게임&#39;, &#39;랩&#39;]\n[&#39;모바일&#39;, &#39;모바일 게임&#39;, &#39;만랩&#39;, &#39;게임&#39;]</code></pre></div>\n<p>nouns 함수를 사용한 경우에는 명사만 추출되었고 phrases 함수의 경우 어절 단위로 나뉘어서 추출 되었다.</p>\n<p>품사 태깅을 하는 함수 pos를 사용해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> join<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"result\"><pre class=\"language-result\"><code class=\"language-result\">[(&#39;모바일&#39;, &#39;Noun&#39;), (&#39;게임&#39;, &#39;Noun&#39;), (&#39;은&#39;, &#39;Josa&#39;), (&#39;재밌다&#39;, &#39;Adjective&#39;), (&#39;열심히&#39;, &#39;Adverb&#39;), (&#39;해서&#39;, &#39;Verb&#39;), (&#39;만&#39;, &#39;Modifier&#39;), (&#39;랩&#39;, &#39;Noun&#39;), (&#39;을&#39;, &#39;Josa&#39;), (&#39;찍어야지&#39;, &#39;Verb&#39;), (&#39;~&#39;, &#39;Punctuation&#39;), (&#39;ㅎㅎㅎ&#39;, &#39;KoreanParticle&#39;)]\n[&#39;모바일/Noun&#39;, &#39;게임/Noun&#39;, &#39;은/Josa&#39;, &#39;재밌다/Adjective&#39;, &#39;열심히/Adverb&#39;, &#39;해서/Verb&#39;, &#39;만/Modifier&#39;, &#39;랩/Noun&#39;, &#39;을/Josa&#39;, &#39;찍어야지/Verb&#39;, &#39;~/Punctuation&#39;, &#39;ㅎㅎㅎ/KoreanParticle&#39;]</code></pre></div>\n<p>join 옵션을 True로 설정 하면 형태소와 품사가 함께 나오는 것을 볼 수 있다. 경우에 따라 옵션을 설정하면서 사용하면 된다.</p>\n<h2 id=\"konlpy-데이터\" style=\"position:relative;\"><a href=\"#konlpy-%EB%8D%B0%EC%9D%B4%ED%84%B0\" aria-label=\"konlpy 데이터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KoNLPy 데이터</h2>\n<p>KoNLPy 라이브러리는 한글 자연어 처리에 활용할 수 있는 한글 데이터를 포함하고 있어 라이브러리를 통해 데이터를 바로 사용할 수 있다.</p>\n<ul>\n<li>kolaw\n한국 법률 말뭉치. 'constitution.txt'파일</li>\n<li>\n<p>kobill\n대한민국 국회 의안 말뭉치. 각 id값을 가지는 의안으로 구성. 파일은 '1809890.txt' 부터 '1809899.txt'까지로 구성.</p>\n<p>라이브러리를 사용해 각 말뭉치를 불러오자.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> konlpy<span class=\"token punctuation\">.</span>corpus <span class=\"token keyword\">import</span> kolaw\n<span class=\"token keyword\">from</span> konlpy<span class=\"token punctuation\">.</span>corpus <span class=\"token keyword\">import</span> kobill\n\nkolaw<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'constitution.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">30</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"result\"><pre class=\"language-result\"><code class=\"language-result\">&#39;대한민국헌법\\n\\n유구한 역사와 전통에 빛나는 우리 대한국&#39;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">kobill<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1809890.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">30</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"result\"><pre class=\"language-result\"><code class=\"language-result\">&#39;지방공무원법 일부개정법률안\\n\\n(정의화의원 대표발의 )\\n&#39;</code></pre></div>\n<p>위 데이터들을 가지고 여러 가지 한글 자연어 처리 문제를 연습하는 데 활용할 수 있다. </p>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h2>\n<p>KoNLPy 홈페이지에 가보면 나름의 철학을 가지고 프로젝트를 진행하는 듯한 글을 볼 수 있다.</p>\n<blockquote>\n<p>KoNLPy는 같은 기능을 하는 또 하나의 도구를 만들려는 것이 아닙니다.\n이 프로젝트에는 세 가지 철학이 있습니다.</p>\n<ul>\n<li>사용법이 간단해야 한다.</li>\n<li>누구나 쉽게 이용할 수 있어야 한다.</li>\n<li>\"인터넷 민주주의는 효과적이다.\"</li>\n</ul>\n</blockquote>\n<p>개인적으로 마음에 드는 글귀이다. 인터넷 민주주의를 위해 직접 참여도 가능하니 한국어 NLP에 관심이 많다면 아래 공식홈을 방문하여 살펴보길 바란다.</p>\n<p>KoNLPy 공식홈 : <a href=\"https://konlpy-ko.readthedocs.io\">https://konlpy-ko.readthedocs.io</a></p>"},{"id":"5a3961f3-79d3-5573-bd23-7ed825feef05","headings":[{"depth":1},{"depth":1},{"depth":1},{"depth":1},{"depth":1},{"depth":1},{"depth":1}],"frontmatter":{"title":"NLP - 데이터 정제","path":"/nlp-preprocessing","tags":["ML-DL","ML","NLP"],"excerpt":"기계가 텍스트를 이해할 수 있도록 텍스트를 정제하고 신호와 소음을 구분하여 아웃라이어 데이터로 인한 오버피팅을 방지하기 위해서는 다음과 같은 처리를 해주어야 한다.","created":"2019-03-20T00:00:00.000Z","createdPretty":"20 March, 2019","updated":"2019-03-20T00:00:00.000Z","updatedPretty":"20 March, 2019","featuredImage":null},"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1140px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a1665d9a8128f7dcfedb54bb385c6fbd/b5cea/nlp-pre.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABcRAAAXEQHKJvM/AAAA/klEQVQI1wHzAAz/AB2zovEVsqDxILOj7w+yofg0rZy59VEr1u1SK/btWjTu7k4m/OxbN639yA24/b8F/fzCEez8vgb+/8wCtnlAqbF5N6n/eD2k/HAxoP9/Saj/ABe0ov88va//XMK3/yS/r/8rqZbF9lw45PNxUf/qf2T++mtH/+xiQLj/xADF/9Em//TMUvz/zyH//8oAw3I2p7GAQq7/nXa6/IFLqv95QKX/ABmyof4htKP+JbSk/Bm6qf8tqpfD9Vgz4u9cN//sVjH79l85/+teO7b+xgTC/8kP//rBEvn/yRD//8oAwXU6p7F5N6n/dzyj/HQ4ov98RKb/JHGUmDENRp4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nlp-pre\"\n        title=\"nlp-pre\"\n        src=\"/static/a1665d9a8128f7dcfedb54bb385c6fbd/b5cea/nlp-pre.png\"\n        srcset=\"/static/a1665d9a8128f7dcfedb54bb385c6fbd/5a46d/nlp-pre.png 300w,\n/static/a1665d9a8128f7dcfedb54bb385c6fbd/0a47e/nlp-pre.png 600w,\n/static/a1665d9a8128f7dcfedb54bb385c6fbd/b5cea/nlp-pre.png 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"data-cleaning-and-text-preprocessing\" style=\"position:relative;\"><a href=\"#data-cleaning-and-text-preprocessing\" aria-label=\"data cleaning and text preprocessing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Cleaning and Text Preprocessing</h1>\n<p>기계가 텍스트를 이해할 수 있도록 텍스트를 정제하고 신호와 소음을 구분하여 아웃라이어 데이터로 인한 오버피팅을 방지하기 위해서는 다음과 같은 처리를 해주어야 한다.</p>\n<ul>\n<li>HTML 태그, 특수문자, 이모티콘 처리</li>\n<li>토근화(Tokenization) : 문장의 단어를 분리하는 단계</li>\n<li>불용어(Stopword) 제거 : 자주 등장하지만 특별한 의미를 갖지 않는 단어 제거</li>\n<li>어간 추출(Stemming) 및 음소표기법(Lemmatization)</li>\n<li>정규 표현식</li>\n</ul>\n<blockquote>\n<p><strong>텍스트 데이터 전처리 이해</strong><br><br>\n<code class=\"language-text\">정규화 normalization</code> (입니닼ㅋㅋ -> 입니다 ㅋㅋ, 샤릉해 -> 사랑해)<br>\n한국어를 처리하는 예시입니닼ㅋㅋㅋㅋㅋ -> 한국어를 처리하는 예시입니다 ㅋㅋ<br><br>\n<code class=\"language-text\">토큰화 tokenization</code><br>\n한국어를 처리하는 예시입니다 ㅋㅋ -> 한국어Noun, 를Josa, 처리Noun, 하는Verb, 예시Noun, 입Adjective, 니다Eomi ㅋㅋKoreanParticle<br><br>\n<code class=\"language-text\">어근화 stemming</code> (입니다 -> 이다)<br>\n한국어를 처리하는 예시입니다 ㅋㅋ -> 한국어Noun, 를Josa, 처리Noun, 하다Verb, 예시Noun, 이다Adjective, ㅋㅋKoreanParticle<br><br>\n<code class=\"language-text\">어근 추출 phrase extraction</code><br>\n한국어를 처리하는 예시입니다 ㅋㅋ -> 한국어, 처리, 예시, 처리하는 예시<br><br>\n(출처 : <a href=\"https://github.com/twitter/twitter-korean-text\">트위터 한국어 형태소 분석기</a>)</p>\n</blockquote>\n<h1 id=\"beautifulsoup\" style=\"position:relative;\"><a href=\"#beautifulsoup\" aria-label=\"beautifulsoup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BeautifulSoup</h1>\n<p>많이 쓰이는 파이썬용 파서로 html, xml을 파싱할때 주로 많이 사용한다.</p>\n<p>BeautifulSoup에는 기본적으로 파이썬 표준 라이브러리인 html파서를 지원하지만, lxml을 사용하면 성능 향상이 있다.</p>\n<p><strong>BeautifulSoup(markup, <code class=\"language-text\">&#39;[파서명]&#39;</code>)</strong></p>\n<ul>\n<li>html.parser : 빠르지만 유연하지 않기 때문에 단순한 html문서에 사용</li>\n<li>lxml : 매우 빠르고 유연</li>\n<li>xml : xml 파일에 사용</li>\n<li>html5lib : 복접한 구조의 html에 대해서 사용.(속도가 느린편)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup\n<span class=\"token keyword\">import</span> re\n\ndata <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;p>초등학교 입학을 축하합니다.~~~^^;&lt;br/>&lt;/p>\"</span>\nsoup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token string\">\"html5lib\"</span><span class=\"token punctuation\">)</span>\nremove_tag <span class=\"token operator\">=</span> soup<span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nresult_text <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span><span class=\"token string\">'[-=+,#/\\?:^$.@*\\\"※~&amp;%ㆍ!』\\\\‘|\\(\\)\\[\\]\\&lt;\\>`\\'…》;]'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span>\n              <span class=\"token punctuation\">,</span> remove_tag<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>result_text<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"result\"><pre class=\"language-result\"><code class=\"language-result\">결과 : 초등학교 입학을 축하합니다.</code></pre></div>\n<p><code class=\"language-text\">&lt;p&gt;초등학교 입학을 축하합니다.~~~^^;&lt;br/&gt;&lt;/p&gt;</code> 문장에서 태그와 특수문자를 제거하기 위해 BeautifulSoup 와 정규표현식을 사용하였다.</p>\n<h1 id=\"토큰화-tokenization\" style=\"position:relative;\"><a href=\"#%ED%86%A0%ED%81%B0%ED%99%94-tokenization\" aria-label=\"토큰화 tokenization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토큰화 (Tokenization)</h1>\n<p>코퍼스(corpus)에서 토큰(token)이라 불리는 단위로 나누는 작업을 토큰화(Tokenization)라고 부른다. 토큰의 단위가 상황에 따라 다르지만, 보통 의미있는 단위로 토큰 정의한다.</p>\n<p>토큰의 기준을 단어로 하는 경우 가장 간단한 방법은 띄어쓰기를 기준으로 자르는 것이다.</p>\n<p><strong>I loved you. machine learning</strong> 에서 구두점을 제외시키고 토큰화 한 결과는 다음과 같다.</p>\n<p><code class=\"language-text\">&quot;I&quot;, &quot;loved&quot;, &quot;you&quot;, &quot;machine&quot;, &quot;learning&quot;</code></p>\n<p>하지만 보통 토큰화 작업은 단순히 구두점이나 특수문자를 전부 제거하는 작업을 수행하는 것만으로 해결되지 않는다. 구두점이나 특수문자를 전부 제거하면 토큰이 의미를 잃어 버리는 경우가 발생하기도 하기때문이다. 띄어쓰기 단위로 자르면 사실상 단어 토큰이 구분되는 영어와 달리, 한국어는 띄어쓰기반으로는 단어 토큰을 구분하기 어렵다. </p>\n<blockquote>\n<p>한국어는 단어의 다양한 의미와 높낮이 그리고 띄어쓰기가 어렵다 보니 잘못된 데이터를 많이 받게 되어 자연어처리를 하는데 있어 어려움이 많이 따른다. 하지만 다양한 곳에서 한국어 처리를 위한 형태소 분석기를 연구하고 있다. 얼마전 카카오에서도 카이라는 딥러닝 기술 기반의 형태소 분석기를 오픈소스로 공개 하였고 그외에 트위터, 코엔엘파이등 꽤 쓸만한 것들이 있다.</p>\n</blockquote>\n<h1 id=\"불용어-stopword\" style=\"position:relative;\"><a href=\"#%EB%B6%88%EC%9A%A9%EC%96%B4-stopword\" aria-label=\"불용어 stopword permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>불용어 (Stopword)</h1>\n<p>일반적으로 코퍼스에서 자주 나타나는 단어로 학습이나 예측 프로세스에 실제로 기여를 하지 않는다.</p>\n<p>(조사, 접미사 - 나,나,은,는,이,가,하다,합니다....등)</p>\n<p>NLTK에는 17개의 언어에 대해 불용어가 정의되어 있다. 하지만 아쉽게도 한국어는...없다.</p>\n<p>간단하게 10개 정도만 영어의 불용어를 보면,</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> nltk\n<span class=\"token keyword\">from</span> nltk<span class=\"token punctuation\">.</span>corpus <span class=\"token keyword\">import</span> stopwords\n\nnltk<span class=\"token punctuation\">.</span>download<span class=\"token punctuation\">(</span><span class=\"token string\">'stopwords'</span><span class=\"token punctuation\">)</span>\nstopwords<span class=\"token punctuation\">.</span>words<span class=\"token punctuation\">(</span><span class=\"token string\">'english'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span></code></pre></div>\n<blockquote>\n<p>결과 : ['i', 'me', 'my', 'myself', 'we', 'our', 'ours', 'ourselves', 'you', 'your']</p>\n</blockquote>\n<p>간단하다, 불용어 사전에 있는 단어들은 제거하면 된다.</p>\n<p>한국어의 경우 불용어를 제거하는 방법으로는 위에서 언급한 형태소 분석 후 조사, 접속사 등을 제거할 수 있다. </p>\n<h1 id=\"어간-추출-stemming\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EA%B0%84-%EC%B6%94%EC%B6%9C-stemming\" aria-label=\"어간 추출 stemming permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어간 추출 (Stemming)</h1>\n<p>스태밍이라고 하는데, 어간이란 말은 단어의 의미를 담고 있는 <strong>단어의 핵심부분</strong>이라 생각하면 된다. 쉽게, 단어를 축약형으로 바꿔주는 작업이라고도 할 수 있다.</p>\n<p>한국어가, 한국어는, 한국어처럼 -> <code class=\"language-text\">한국어</code></p>\n<p>대표적으로 포터 스태머(PorterStemmer)와 랭커스터 스태머(LancasterStemmer)가 있는데 포터는 보수적이고 랭커스터는 좀 더 적극적이다.</p>\n<p><strong>PorterStemmer</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> nltk<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">.</span>lancaster <span class=\"token keyword\">import</span> LancasterStemmer\nstemmer <span class=\"token operator\">=</span> LancasterStemmer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>stemmer<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">(</span><span class=\"token string\">'maximum'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"running >> {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>stemmer<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">(</span><span class=\"token string\">\"running\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"runs >> {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>stemmer<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">(</span><span class=\"token string\">\"runs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"run >> {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>stemmer<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">(</span><span class=\"token string\">\"run\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>maxim<br>\nrunning >> run<br>\nruns >> run<br>\nrun >> run</p>\n</blockquote>\n<p><strong>LancasterStemmer</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> nltk<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">.</span>lancaster <span class=\"token keyword\">import</span> LancasterStemmer\nlancaster_stemmer <span class=\"token operator\">=</span> LancasterStemmer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>lancaster_stemmer<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">(</span><span class=\"token string\">'maximum'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"running >> {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>lancaster_stemmer<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">(</span><span class=\"token string\">\"running\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"runs >> {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>lancaster_stemmer<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">(</span><span class=\"token string\">\"runs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"run >> {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>lancaster_stemmer<span class=\"token punctuation\">.</span>stem<span class=\"token punctuation\">(</span><span class=\"token string\">\"run\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>maxim<br>\nrunning >> run<br>\nruns >> run<br>\nrun >> run</p>\n</blockquote>\n<h1 id=\"음소표기법-lemmatization\" style=\"position:relative;\"><a href=\"#%EC%9D%8C%EC%86%8C%ED%91%9C%EA%B8%B0%EB%B2%95-lemmatization\" aria-label=\"음소표기법 lemmatization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>음소표기법 (Lemmatization)</h1>\n<p>언어학에서 음소표기법 (Lemmatization)은 단어의 보조 정리 또는 사전 형식에 의해 식별되는 단일 항목으로 분석 될 수 있도록 굴절 된 형태의 단어를 그룹화하는 과정이다.\n어간 추출(Stemming)과는 달리 단어의 형태가 적절히 보존되는 양상을 보이는 특징이 있다. 하지만 그럼에도 의미를 알 수 없는 적절하지 못한 단어로 변환 하기도 하는데 음소표기법(Lemmatizer)은 본래 단어의 품사 정보를 알아야만 정확한 결과를 얻을 수 있기 때문이다.</p>\n<ul>\n<li>품사정보가 보존된 형태의 기본형으로 변환. </li>\n<li>단어가 명사로 쓰였는지 동사로 쓰였는지에 따라 적합한 의미를 갖도록 추출하는 것.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> nltk<span class=\"token punctuation\">.</span>stem <span class=\"token keyword\">import</span> WordNetLemmatizer\nn<span class=\"token operator\">=</span>WordNetLemmatizer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nwords<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'have'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'going'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'love'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'lives'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'fly'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dies'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'has'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'starting'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">.</span>lemmatize<span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> w <span class=\"token keyword\">in</span> words<span class=\"token punctuation\">]</span></code></pre></div>\n<blockquote>\n<p>결과 : ['have', 'going', 'love', 'life', 'fly', 'dy', 'ha', 'starting']</p>\n</blockquote>\n<p>결과에서 보면 알수 있듯이 <code class=\"language-text\">dy</code>나 <code class=\"language-text\">ha</code>는 그 의미를 알수 없는 적절하지 못한 단어로 변환이 되었다.</p>\n<p>하지만 dies나 has가 동사로 쓰였다는 것을 알려준다면 좀더 정확한 결과를 얻을 수 있게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">n<span class=\"token punctuation\">.</span>lemmatize<span class=\"token punctuation\">(</span><span class=\"token string\">'dies'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'v'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>'die'</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">n<span class=\"token punctuation\">.</span>lemmatize<span class=\"token punctuation\">(</span><span class=\"token string\">'has'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'v'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>'have'</p>\n</blockquote>\n<p>음소표기법은 문맥을 고려하며, 수행했을 때의 결과는 해당 단어의 품사 정보를 보존한다. 하지만 어간 추출은 품사 정보가 보존이 되지 않는다.</p>\n<h1 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며..</h1>\n<p>이런 작업들이 갖고있는 의미는 눈으로 봤을 때는 서로 다른 단어들이지만, 하나의 단어로 일반화시킬 수 있다면 하나의 단어로 일반화시켜서 문서 내의 단어 수를 줄여보자는 것이고 자연어 처리에서 전처리의 지향점은 언제나 갖고 있는 코퍼스로부터 복잡성을 줄이는 일이다.</p>"},{"id":"a6522e0d-9638-5b46-8256-ea5d492d6872","headings":[{"depth":1},{"depth":1},{"depth":1},{"depth":1}],"frontmatter":{"title":"NLP - Bag of words, n-gram","path":"/nlp-basic","tags":["ML-DL","ML","NLP"],"excerpt":"자연어 처리(natural language processing)는 인간의 언어 현상을 기계적으로 분석해서 컴퓨터가 이해할 수 있는 형태로 만드는 자연 언어 이해 혹은 그러한 형태를 다시 인간이 이해할 수 있는 언어로 표현하는 제반 기술을 의미한다.","created":"2019-03-07T00:00:00.000Z","createdPretty":"07 March, 2019","updated":"2019-03-07T00:00:00.000Z","updatedPretty":"07 March, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACXUlEQVQoz3WSXUiTURjHd9NNN0EXCdVNiRVkN1maBeFdYfgRWKaSkuaFFdVFriyJCow00+zDb9O+NCIrK1s5K8TVxK/ptBHbIp2Uqb3bnNvbNrf9Or4SdNMD/+dwOOf5nefjqBA2bxnBXZaPp+oCnsrzzN08h7+pGGlqmujsItYkqVmXcpaw3Sd5pO3j19QkbS/a0bzpUPS2Q4vT6VxAoVpwclsjUmIEzrxdODKisWftQM6MYWLIQFjCacKT1WzPucyS2Fzq2nTodd2UllVQV3+Hquo6rpaWY7FYF4Eh4byv7iPtXI7raDzukhPMXjmOJyuWydFhVuxRsyzuCOF7z6CKzKC2rRtDfx81tQ3U1zcqa8m/wAXnm/iKu7EYz7MGvLrX+IrykGsu4ff7ed5l4J5GT3mLluT8W9h+2pFmZqhtaOLh41a6urr5IOSam1sEFhh7yBzs5pBpgNzRXvYPfaK5p1P0wa1cCPhkZqUZvB4XkiTx136Yv+C4dopAZSH+24XI5fm4hVQrRblr2x8QqWlmo6aFpa21HBZQBRYM8m18nEHDEMaRUcwWC/Mi64U2MW7GkbwBe9oWpJRNOA5uw560HtUqAYzqfMI+fQepei2rxT67970CdMsyn00mTELDRiP9/QM47HblzC9+hiMtilnRd8eBzTjFIO0JEagSP2qIefeUBJ1GAYe9vMt1s1EJkr2/sdkmGBsbU2S1WrGN2xazn/6OqyAdR/pWnDlxuNSpzB6LF1MOhXD6fQRDQSoE6IZ4Wfmbotz/WSgQWLwzZsZTfZGQz0vIKxMSMX8AHoc67cKzVEIAAAAASUVORK5CYII=","aspectRatio":2.1551724137931036,"src":"/static/c7da038937e7bf3502929f7490bce973/0853f/cover.png","srcSet":"/static/c7da038937e7bf3502929f7490bce973/14156/cover.png 125w,\n/static/c7da038937e7bf3502929f7490bce973/d6e47/cover.png 250w,\n/static/c7da038937e7bf3502929f7490bce973/0853f/cover.png 500w,\n/static/c7da038937e7bf3502929f7490bce973/ce627/cover.png 750w,\n/static/c7da038937e7bf3502929f7490bce973/80ee3/cover.png 768w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>자연어 처리(natural language processing)는 인간의 언어 현상을 기계적으로 분석해서 컴퓨터가 이해할 수 있는 형태로 만드는 자연 언어 이해 혹은 그러한 형태를 다시 인간이 이해할 수 있는 언어로 표현하는 제반 기술을 의미한다. (위키피디아)</p>\n<p>간단하게 말하면, 자연어의 의미를 분석하여 컴퓨터가 처리할 수 있도록 하는 일 이라고 생각하면 될 것 같다.</p>\n<h1 id=\"텍스트\" style=\"position:relative;\"><a href=\"#%ED%85%8D%EC%8A%A4%ED%8A%B8\" aria-label=\"텍스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>텍스트</h1>\n<p>기계학습 모델을 만들기 위해서는 데이터를 모델에 맞게 변형시켜 주어야 한다. 알고리즘에서 텍스트를 그대로 받아들일수 없기 때문에 받아들일 수 있는 어떤 숫자값으로 변환을 해주어야 한다. 하지만 텍스트는 일단 언어가 제각기 다르기 떄문에 텍스트 자체를 어떻게 숫자화 할지 부터 시작해야한다.</p>\n<p>그럼 어떤 방법들이 있는지 살펴보자.</p>\n<h1 id=\"bowbag-of-words\" style=\"position:relative;\"><a href=\"#bowbag-of-words\" aria-label=\"bowbag of words permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BOW(bag of words)</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 417px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0037be387a166505e7fa603e1bb1e026/f27fb/bow-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABtUlEQVQoz42SO27CQBCGkTgGRTgLR+Ak1ByAC1AjUSJ6ilhUUIAgJMLEPNYyMY5f6wdgGxswr/yOHUQQBVOsdsf+Zv79Z1OXJ+J8PmP1fX/9G0EQxPnU5bkAr6oqyDAMFUU5nU4JfP6Lhw1d15VlGasgCM1mk2EYQshms/nX+SGPOB6PPM+zLNtut8FrmqbI8uFwSGBUXSwWjuPcqkAAi8tRSsFDM9QSMpVkxfU87CMY9aCkWCzqun5Ve2fVfr9fWvZ2u6VU3+522HieF8GdTofjuGq12mq1cFytVrAEQKPRgEhk0FMURU3TbdMcjyfh4RglHSeC8/l8JpPJZl8KhQKOlmWVSqVcLpdOp2u1GjK2bWM8ruNi76zXs+lUEObwLILr9XqlUimXywzzimM8BrjQ7XZjY9A5tsaguqoosGA+nyed0Qo6ISz+CfCd7Zgt7hJdWNeXyyUyEAI7k1EB8/3gFkCJq9uxc6ZpQb9BqaJq+BSNKgh8SVqwQxaeUWrsw/DhU7FNo9fvj9gRO/zo9d4k6Rv5lOe53OeIEAyS58ZjjOEhbFBtMHj/EkW8ttlkMiMEdvwAOXPOwW+77AEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nlp-1\"\n        title=\"nlp-1\"\n        src=\"/static/0037be387a166505e7fa603e1bb1e026/f27fb/bow-01.png\"\n        srcset=\"/static/0037be387a166505e7fa603e1bb1e026/5a46d/bow-01.png 300w,\n/static/0037be387a166505e7fa603e1bb1e026/f27fb/bow-01.png 417w\"\n        sizes=\"(max-width: 417px) 100vw, 417px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>BOW(Bag of words)는 텍스트 데이터를 표현하는 방법 중 하나로 가장 간단하지만 효과적이라 기계학습에서 널리 쓰이는 방법이다. BOW는 텍스트의 구조와 상관없이 단어들을 담는 가방(Bag)으로 생각하면 된다. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">The game is fun\nThe game is interesting\nThe game is not funny</code></pre></div>\n<p>세 문장에서 나타나는 단아들을 모으고 세 문장을 각각 binary vector로 표현하는 것이 BOW이다. 각각의 문장을 binary vector로 표현하면 다음과 같다.</p>\n\n      <div class=\"remark-sticky-table\"> \n      <div class=\"remark-sticky-table-wrapper\" style=\"width: 100%; height: 100%; overflow: auto;\">\n          <table class=\"remark-sticky-table-table\">\n      \n            \n               <thead class=\"remark-sticky-table-thead\">\n                     <tr class=\"remark-sticky-table-tr\">\n                     <th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">the</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">game</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">is</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">fun</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">interesting</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">not</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">funny</th>\n                        </tr> \n                        </thead><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">0</td><td class=\"remark-sticky-table-td\">0</td><td class=\"remark-sticky-table-td\">0</td>\n                         </tr>\n                         </tbody>\n               \n        \n          </table>\n      </div>\n    </div>\n  \n<blockquote>\n<p>The game is fun : <strong>[1, 1, 1, 1, 0, 0, 0]</strong></p>\n</blockquote>\n\n      <div class=\"remark-sticky-table\"> \n      <div class=\"remark-sticky-table-wrapper\" style=\"width: 100%; height: 100%; overflow: auto;\">\n          <table class=\"remark-sticky-table-table\">\n      \n            \n               <thead class=\"remark-sticky-table-thead\">\n                     <tr class=\"remark-sticky-table-tr\">\n                     <th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">the</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">game</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">is</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">fun</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">interesting</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">not</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">funny</th>\n                        </tr> \n                        </thead><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">0</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">0</td><td class=\"remark-sticky-table-td\">0</td>\n                         </tr>\n                         </tbody>\n               \n        \n          </table>\n      </div>\n    </div>\n  \n<blockquote>\n<p>The game is interesting : <strong>[1, 1, 1, 0, 1, 0, 0]</strong></p>\n</blockquote>\n\n      <div class=\"remark-sticky-table\"> \n      <div class=\"remark-sticky-table-wrapper\" style=\"width: 100%; height: 100%; overflow: auto;\">\n          <table class=\"remark-sticky-table-table\">\n      \n            \n               <thead class=\"remark-sticky-table-thead\">\n                     <tr class=\"remark-sticky-table-tr\">\n                     <th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">the</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">game</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">is</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">fun</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">interesting</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">not</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">funny</th>\n                        </tr> \n                        </thead><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">0</td><td class=\"remark-sticky-table-td\">0</td><td class=\"remark-sticky-table-td\">1</td><td class=\"remark-sticky-table-td\">1</td>\n                         </tr>\n                         </tbody>\n               \n        \n          </table>\n      </div>\n    </div>\n  \n<blockquote>\n<p>The game is not funny : <strong>[1, 1, 1, 0, 0, 1, 1]</strong></p>\n</blockquote>\n<p>만약 이 가방에 들어있지 않는 단어가 포함된 문장이 있어도 BOW는 그 없는 단어는 제외하고 있는 단어만을 가지고 벡터로 만들 것이다.</p>\n<p>그럼 이 수치로 표현된 값을 어떻게 활용할까?</p>\n<p>머신러닝 모델에 입력값으로 사용할 수도 있디만 단순히 계산만으로 문장간의 유사도(Sentence similarity)를 알 수도 있다.</p>\n<p><code class=\"language-text\">the game is fun</code> 과 <code class=\"language-text\">The game is interesting</code> 문장의 유사도를 구해보자.</p>\n\n      <div class=\"remark-sticky-table\"> \n      <div class=\"remark-sticky-table-wrapper\" style=\"width: 100%; height: 100%; overflow: auto;\">\n          <table class=\"remark-sticky-table-table\">\n      \n            \n               <thead class=\"remark-sticky-table-thead\">\n                     <tr class=\"remark-sticky-table-tr\">\n                     <th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">문장</th><th class=\"remark-sticky-table-th\" style=\"position: sticky; display: table-cell; width: auto; min-width: auto; white-space: nowrap; top: 0px; z-index: 2;\">벡터값</th>\n                        </tr> \n                        </thead><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">the game is fun</td><td class=\"remark-sticky-table-td\"><code class=\"language-text\">1</code>, <code class=\"language-text\">1</code>, <code class=\"language-text\">1</code>, 1, 0, 0, 0</td>\n                         </tr>\n                         </tbody><tbody class=\"remark-sticky-table-tbody\">\n                     <tr class=\"remark-sticky-table-tr\">\n                          <td class=\"remark-sticky-table-td\">The game is interesting</td><td class=\"remark-sticky-table-td\"><code class=\"language-text\">1</code>, <code class=\"language-text\">1</code>, <code class=\"language-text\">1</code>, 0, 1, 0, 0</td>\n                         </tr>\n                         </tbody>\n               \n        \n          </table>\n      </div>\n    </div>\n  \n<blockquote>\n<p><strong>유사도 = (1x1) + (1x1) + (1x1) + (1x0) + (0x1) + (0x0) + (0x0) = 3</strong></p>\n</blockquote>\n<p>또한 수치로 표한된 값을 이용해 기계학습 모델에 입력값으로 사용할 수가 있다. 문장에 대한 감성분석을 해주는 모델이 있다면, 벡터화된 값을 모델에 입력값으로 사용할 수 있고 모델은 우리가 원하는 <code class=\"language-text\">Good</code> 또는 <code class=\"language-text\">Bad</code>의 결과를 출력해 줄 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/93cabce3b645984aeb6dc3ae405ecaa7/a3767/bow-ml.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABR0lEQVQY02WRvU7DMBSF81R9AuBRYGIAnqMSS1UGpk6UCcSCoBXQQieEChJTpaZpotKQxEnUpI3/cvA1Eghh6/PPsX1077VTVRU451BKQUoJIYSFNILWpHNeYWPuAuae4Oj2XCjJzV6CPBT/nh2jIM9zzGYzBEGAKIosq9XK6mmaYrFYYMMFUGvcPn+i2Z1g++gJzfMJBuMEpeKYliFEreBkWYYkSRCGIZbLpSWOY2tIZilLEOVrJC83qActdO4ZGrt97B+P0di7w1k/MCFpzNcJuJZwPM8DQSa+78N1XWtalqU1zFIGVnCwcQ/1sI3TXoytgwcctt5MlI/oXM9tGVwWQGgTIaVJRowxC6VHKRdFYSMnKAsuFLSp8/A1Qvtiih1jdnI5xeidAUICnm9KUsOpzUAforX+A+n/wG+7Gn38rOnMvLD9C1QJuruXBnsGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bow\"\n        title=\"bow\"\n        src=\"/static/93cabce3b645984aeb6dc3ae405ecaa7/c1b63/bow-ml.png\"\n        srcset=\"/static/93cabce3b645984aeb6dc3ae405ecaa7/5a46d/bow-ml.png 300w,\n/static/93cabce3b645984aeb6dc3ae405ecaa7/0a47e/bow-ml.png 600w,\n/static/93cabce3b645984aeb6dc3ae405ecaa7/c1b63/bow-ml.png 1200w,\n/static/93cabce3b645984aeb6dc3ae405ecaa7/a3767/bow-ml.png 1210w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>하지만 BOW는 몇 가지 단점이 있다.</p>\n<ul>\n<li><strong>Sparsity</strong><br>\n실제 사전에는 100만개가 넘는 단어들이 있을 수도 있다. 그렇게 되면 벡터의 차원이 100만개가 넘어가기 때문에 실제 문장하나를 표현할 때 대부분의 값이 0이고 그외의 값들은 상당히 적을 것이다. 결국 학습량이 많아지고 컴퓨터 자원도 상당히 많이 사용하게 된다.<br>\n(the game is fun [1,1,1,1,0,0,0,0,0,0,0,,,,,,0,0,0,0,0])</li>\n<li><strong>빈번한 단어는 더 많은 힘을 가진다.</strong><br>\n많이 출현한 단어는 힘이 세진다. 만약 의미없는 단어들이 많이 사용 되었다면 우리가 원하는 결과를 얻기는 어려울 것이다.</li>\n<li><strong>Out of vocabulary</strong><br>\n오타, 줄임말 등의 단어들이 포함되면 굉장히 난감해진다.^^;</li>\n<li><strong>단어의 순서가 무시됨</strong><br>\n단어의 출현 횟수만 셀수 있고 단어의 순서는 완전히 무시 된다. 단어의 순서가 무시된다는 것은 다른 의미를 가진 문장이 동일한 결과로 해석될 수 있다는 것이다.</li>\n</ul>\n<p>전혀 반대의 의미를 가진 두 문장을 보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 786px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1f557bdb0147a1cfe1663bb193df0d0c/321ea/bow-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABcRAAAXEQHKJvM/AAABzElEQVQoz11STWsTURSdpCbZCAU32SnUrV1JLXRj7cqduPEH+A8M2EJXIuiyX6lQssgqVbHaoURjQ2koZCMSQiSaZNppmbZpyWRMJpk3eZPJfNzeWwspHni8++5599z7Dk84Sy9L1Y2F/fq3d78PNpeq+2L85Ggrrv/dSTwWEMCaNwFAYIyFTjU2Srn1/NELsXAG7/eqRmqv1k1mS1Zyu8Q/5mUuVBKxMeXDq9tPxqOTmdTac3A4WHoTWFdXObfOwfd/aJoWRNEYrm7PNOVWx9BM24Mv6e3d6L3pB8tf/9yJrYh33376OSZcw62Hj2ZSrMdBOT7xSqVfoOs66vnnhmGEWq3WGxSEWq0GlUoFTMZgbvbld+F/GOLrQCH7+QbFWlOdUlUVDmXZL5fLDgqB4zgKca7rzrfbbZAkyS4Wizb8wwJx2XwhlNiRAkvpcuBSFIng1X6fcw71et1Hz1zP8wCXHIlEnuZyuQ1SaDQaLjYaUGya5irVWZYVxJrhlJSgfTAYTPT7fVAUxcfLLsXIHYTD4WeZTEYkEWpm27ZLcafTiVMd5kbQmqHgtQkn6CJOcClIT0Qfj6+4eeLw3MPpe+QvNlskDv0doZ9AuABW82/6AALCAgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nlp-1\"\n        title=\"nlp-1\"\n        src=\"/static/1f557bdb0147a1cfe1663bb193df0d0c/321ea/bow-02.png\"\n        srcset=\"/static/1f557bdb0147a1cfe1663bb193df0d0c/5a46d/bow-02.png 300w,\n/static/1f557bdb0147a1cfe1663bb193df0d0c/0a47e/bow-02.png 600w,\n/static/1f557bdb0147a1cfe1663bb193df0d0c/321ea/bow-02.png 786w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>두 문장은 의미가 전혀 반대이지만 BOW를 이용해 처리한다면, 동일한 결과를 반환하게 될 것이다.\n이런 단점을 보완하기 위해 좀더 개선된 n-gram이란 것이 있다. BOW는 하나의 토큰을 사용하지만 n-gram은 n개의 토큰을 사용하여 어느정도 단어의 순서를 반영 결과에 반영해 준다.</p>\n<h1 id=\"n-gram\" style=\"position:relative;\"><a href=\"#n-gram\" aria-label=\"n gram permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>N-Gram</h1>\n<p>BOW를 조금 더 개선하여 단어 하나만을 보는 것이 아니라 주변의 n개 단어를 뭉쳐서 보는 것이다. 뭉쳐진 n개의 단어들을 gram이라고 한다.\n단어 개수에 따라 부르는 명칭이 다른데 2개의 단어를 묶어서 사용하면 <code class=\"language-text\">bi-gram</code>, 3개면 <code class=\"language-text\">tri-gram</code>이라고 부른다.\n(1-gram은 uni-gram이라고 한다.) </p>\n<p>다음 문장을 bi-gram를 사용하여 처리 한다면,</p>\n<p><strong>\"home run\"</strong> 과 <strong>\"run home\"</strong></p>\n<blockquote>\n<p>bag of words : [home, run] , [run, home]<br>\nbi-gram : [home run], [run home]</p>\n</blockquote>\n<p>BOW를 사용한다면 두 문장은 같은 백터의 값을 갖게 되겠지만 bi-gram을 사용하면 2개를 뭉쳐서 사용하므로 어느정도의 순서가 보장되는 효과를 볼수 있게 되어 다른 결과 값을 가지게 될 것이다.</p>\n<p>이런 특성을 이용해 n-gram은 다음 단어 예측하거나 어떤 단어를 입력 했을때 오타를 발견하고 다른 단어를 추천해 주는데 활용할 수 있다.</p>\n<h1 id=\"텍스트-전처리-preprocessing\" style=\"position:relative;\"><a href=\"#%ED%85%8D%EC%8A%A4%ED%8A%B8-%EC%A0%84%EC%B2%98%EB%A6%AC-preprocessing\" aria-label=\"텍스트 전처리 preprocessing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>텍스트 전처리 (Preprocessing)</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1010px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6991a0789807fb1e23a545e938b335a9/5b587/process.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABcRAAAXEQHKJvM/AAABj0lEQVQY01VQPUhCURh9IC1ZSdAQQU1NTS1OrY2tQWkOJdFoQ4M2CYFQS2NGNEgghqZoTpL4r6GLk5ri7/Mpoj5/BvG9p93OtYL64Lz7cd4533fuZTqdDp/P57nhcCjmcrn9fr9/Nx6PRUEQWJyTQqFwCs0leInneXYwGIi1Wu2W47id0WgkNptNrtVq9dvt9rter19kICR2u/0TQuL1eq9gdhEUFkzo6ff7bzKZzGOpVCLJZHLS7XZJKpXyuFyuI0mSaD+lM+AvGQwGBWMymYhSqRRDoRCxWq0P5XL5lQrS6fQYKemy+3A4/IJFJBqNCo1Gg0QikTez2XxOB1YqFaFer5NisfgB/xKDqNQ8RRFcWYtkz+S7JPrJZrMXvV7vmvYYNuNYln2qVqu7P9wsIYaWjUajgvF4PBqkUAcCARX69WAwqHQ4HFqbzaZ2u93HTqdzE/+2YrHYocViOYvH4yqfz7edSCRW8EQnuPoBoIF3T6fTyRiUHFhm/tcvJ//DrQJrwAYg+6ObBxaAOUp8AbaJPCe4qq24AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nlp-1\"\n        title=\"nlp-1\"\n        src=\"/static/6991a0789807fb1e23a545e938b335a9/5b587/process.png\"\n        srcset=\"/static/6991a0789807fb1e23a545e938b335a9/5a46d/process.png 300w,\n/static/6991a0789807fb1e23a545e938b335a9/0a47e/process.png 600w,\n/static/6991a0789807fb1e23a545e938b335a9/5b587/process.png 1010w\"\n        sizes=\"(max-width: 1010px) 100vw, 1010px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>BOW나 n-gram이나 모두 많이 쓰이지만 가장 중요한 것은 단어의 전처리가 확실해야 한다는 것이다. 이 글에서는 설명을 위해 간단한 문장만을 사용하여 크게 신경을 쓸 필요는 없겠지만, 자연어 처리를 하다보면 다양한 케이스의 문장들을 접하게 될 것이며 이런 문장들을 토큰화하고 불필요한 단어들은 제거하고 같은 의미의 단어들은 치환하는 등의 고단한 작업 들을 해야 할 것이다. 하지만 다행인 것은 이런 전처리 작업들을 편하게 할 수 있도록 도와주는 좋은 라이브러리들이 있다.</p>\n<p>다음 포스팅에서는 전처리에 대해 자세히 살펴보도록 하겠다...</p>"},{"id":"af265c82-a529-5d0d-8376-7de5364c26ca","headings":[{"depth":1},{"depth":1}],"frontmatter":{"title":"OpenSSH Server를 WSL(Windows Subsystem for Linux)에서 구동하기","path":"/openssh-server-wsl","tags":["Tip","Linux"],"excerpt":"WSL(Windows Subsystem for Linux)에서 OpenSSH Server를 띄우고 접속하는 방법에 대해 알아보겠다.","created":"2019-03-05T00:00:00.000Z","createdPretty":"05 March, 2019","updated":"2019-03-05T00:00:00.000Z","updatedPretty":"05 March, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACI0lEQVQoz2Nw7jrt3nvGb+K5pHmXQ6ddcOo67dZzxhWBTsPZbt2n3LpP2/Vfdui7mFmzcFOMF8PcQ0+uP/t8/823////9+y4b9V60rPvrEvPGefuM0DSvfcsWNtpsLarjn2XsmoWrI/1u+8h8tSVh2H/jbfff/25//orkGzYeMd34tm8pVczFl7JXnw1aubFlHmXvPvO2PZdcey7mF09f32sz30P4Wcu3Pc8RO94iDOsPv3i1acfj999B9rcveO+ddtJv0nnfCae85t41qvvjOPEq04gbfM2xPjcd0doA5JAxODVfzZk6oX0hVdbNt9NnHvZoRPkQpfu0zZ9Vxx6L+RUz90Y4/0AqM2VB6TNUwKi7Z6nGEgzUB0wkOw7TwPtdOo8CQwt2/6rTr0XcqvmbIr2fODK/8yJ466HyB2gBjehey4CINJd5K4T311XIQZISLr3nPLoPWM34apj74W8qtmboz0eeogAtT1Os7kfqQNUfc9b8r6/3MNYgweBCve9xN/MrHqUbMbgDowAmG15lbO2RLs/dBd66sRxP0jpWX3U28Xtr6eVv+xMf9mV/nJi4esZVS+7Ml40xb7sTn8YrsFg33/Fqfd8fuXMrSBtgkC/3QUFidg9L/EneS5PS/2eZNqDGIUeD2P0nmQ7PMlxelLgfteF/66LAENO9bytUW4wbWJ3PKEhCUQgjzny3HXmBzGceO+6Cd115gMhJ15QgHmKAQDzODj71kOOKAAAAABJRU5ErkJggg==","aspectRatio":1.9841269841269842,"src":"/static/788516dea3ae0743230bcd6c217628d1/0853f/cover.png","srcSet":"/static/788516dea3ae0743230bcd6c217628d1/14156/cover.png 125w,\n/static/788516dea3ae0743230bcd6c217628d1/d6e47/cover.png 250w,\n/static/788516dea3ae0743230bcd6c217628d1/0853f/cover.png 500w,\n/static/788516dea3ae0743230bcd6c217628d1/ce627/cover.png 750w,\n/static/788516dea3ae0743230bcd6c217628d1/9dbcf/cover.png 1000w,\n/static/788516dea3ae0743230bcd6c217628d1/552c1/cover.png 1280w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>WSL(Windows Subsystem for Linux)에서 OpenSSH Server를 띄우고 접속하는 방법에 대해 알아보겠다.</p>\n<h1 id=\"sshd_config\" style=\"position:relative;\"><a href=\"#sshd_config\" aria-label=\"sshd_config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>sshd_config</h1>\n<p>먼저 Windows10에서 Windows Subsystem for Linux(WSL)을 설치한 후 CMD화면에서 bash명령으로 WSL에 진입한다.</p>\n<p><code class=\"language-text\">/etc/ssh/sshd_config</code>를 수정해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/ssh/sshd_config</code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">Port 8889</code> # ssh 접속 포트를 기입한다. 22는 윈도우 자체 내장 SSH서버가 이번호를 선점하고 있기 때문에 반드시 피해야 한다.</p>\n</blockquote>\n<blockquote>\n<p><code class=\"language-text\">UsePrivilegeSeparation no</code># SWL이 chroot()를 지원하지 않기 때문이라고 하는데 이 부분은 패스 했다. (안해도 되는듯..)</p>\n</blockquote>\n<blockquote>\n<p><code class=\"language-text\">PasswordAuthentication no</code> # SSH Key를 사용할 것이기 때문에 no로 설정</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> <span class=\"token function\">ssh</span> restart</code></pre></div>\n<p>정상적으로 서버가 구동 되었다면 윈도우 방화벽에서 인바운드에  설정한 포트번호를 허용해주자.</p>\n<h1 id=\"ssh-key인증을-이용한-접속-password-없이-접속\" style=\"position:relative;\"><a href=\"#ssh-key%EC%9D%B8%EC%A6%9D%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%A0%91%EC%86%8D-password-%EC%97%86%EC%9D%B4-%EC%A0%91%EC%86%8D\" aria-label=\"ssh key인증을 이용한 접속 password 없이 접속 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH Key인증을 이용한 접속 (Password 없이 접속)</h1>\n<p>위에서 설정한 서버에 클라이언트가 접속하기 위해 키를 생성하여 공개키 정보를 서버에 등록해주면 클라이언트에서는 별도의 패스워드 입력없이 접속할수 있게 된다.</p>\n<p>먼저 키파일을 생성하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ssh-keygen -t rsa</code></pre></div>\n<p><code class=\"language-text\">~/.ssh</code> 디렉토리에 id<em>rsa, id</em>rsa.pub, known_hosts 파일들이 생성된다.</p>\n<p>자, 아래 명령으로 공개키 파일을 서버로 전송하자. 수동으로 복사해도 상관없지만 <code class=\"language-text\">ssh-copy-id</code>를 사용해 쉽게 전송하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ssh-copy-id -i ~/.ssh/id_rsa.pub <span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">]</span>@<span class=\"token punctuation\">[</span>host<span class=\"token punctuation\">]</span> -p <span class=\"token number\">8889</span></code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">Permission denied (publickey)</code> </p>\n</blockquote>\n<p>권한 오류가 발생한다..</p>\n<p>권한 오류가 발생하는 원인은 우리가 서버에서 설정한 <code class=\"language-text\">/etc/ssh/sshd_config</code>에 <code class=\"language-text\">PasswordAuthentication</code>를 <code class=\"language-text\">no</code>로 설정했기 때문이다. 아직 key기반의 접속이 셋팅이 안된 상태이기 때문에 패스워드를 입력할 수 있도록 잠시 <code class=\"language-text\">PasswordAuthentication yes</code>로 변경한 후 다시 시도 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ssh-copy-id -i ~/.ssh/id_rsa.pub <span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">]</span>@<span class=\"token punctuation\">[</span>host<span class=\"token punctuation\">]</span> -p <span class=\"token number\">8889</span></code></pre></div>\n<blockquote>\n<p>Now try logging into the machine, with:   \"ssh '[user]@[host]'\"<br>\nand check to make sure that only the key(s) you wanted were added.</p>\n</blockquote>\n<p>복사가 정상적으로 이루어 졌다면 해당 서버의 <code class=\"language-text\">PasswordAuthentication</code>를 <code class=\"language-text\">no</code>로 다시 변경하자.(구지 다시 no로 변경할 필요는 없다. key기반의 접속이기때문에 자동으로 패스워드를 확인하는 절차는 패스되는 것 같다.)</p>"},{"id":"03e92a2a-3a0e-5ba4-b66c-1a8bda5098ea","headings":[{"depth":2}],"frontmatter":{"title":"통계 - 표준편차","path":"/stats-standard-deviation","tags":["Statistics","ML"],"excerpt":"쉽게 말하면 평균(Mean)에 대한 오차이다. 즉, 실제 데이터 값이 평균을 기준으로 할때 얼마나 들쭉 날쭉하냐를 나타내는 것이다. 평균이 m이고 표준편차가 3이라고 할때, 실제 값은 m+`3 값이라는 것이다","created":"2019-02-22T00:00:00.000Z","createdPretty":"22 February, 2019","updated":"2019-02-22T00:00:00.000Z","updatedPretty":"22 February, 2019","featuredImage":null},"html":"<h2 id=\"표준편차의-개념\" style=\"position:relative;\"><a href=\"#%ED%91%9C%EC%A4%80%ED%8E%B8%EC%B0%A8%EC%9D%98-%EA%B0%9C%EB%85%90\" aria-label=\"표준편차의 개념 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>표준편차의 개념</h2>\n<p>쉽게 말하면 평균(Mean)에 대한 오차이다. 즉, 실제 데이터 값이 평균을 기준으로 할때 얼마나 들쭉 날쭉하냐를 나타내는 것이다. 평균이 m이고 표준편차가 3이라고 할때, 실제 값은 m+`3 값이라는 것이다</p>\n<p>먼저 편차랑, 원래의 값에서 평균을 뺀 값인데, 편차는 +도 될 수 있고, -도 될 수 있다.\n그러면 우리가 구하고자 하는 표준편차라는 것은 평균 값이 실제 값에서 부터 얼마나의 오류가 있느냐 인데\n예를 들어 4개의 데이타가 있을 때 평균을 m이라고 가정하고, 각 값이 m+1,m-2,m+3,m-4 라고 할때</p>\n<p>편차의 합은 실제로 1+2+3+4=10 이 되야 하지만, 실제 값이 -2,-4 가 있기 때문에, (값-m)을 합한 값으로 계산해보면 1-2+3-4로 전혀 엉뚱한 값이 나온다.</p>\n<p>그래서 이 음수를 양수화해야 하는데, 그러한 방법중의 하나가 제곱이다.</p>\n<p>편차들을 합하기전에 제곱을 해서 합하면 1+4+9+16이된다. 이것이 바로 분산(Variance)으로 \"편차의 제곱의 합\"이다.</p>\n<p>그렇다면 분산(Variance)을 바로 쓰지 않고, 표준편차를 구하는 이유는? </p>\n<p>분산은 편차에 제곱을 하여 계산을 하였기 때문에, 실제  값에서 너무 멀어져 있다. 그래서 실제 값으로 근접 시키기 위해서 제곱근(루트)를 씌워준 것이다. (분산에서 제곱했으니, 반대로 제곱근을 씌운다.)</p>\n<p>즉 분산에 루트를 씌운것이 표준 편차(Standard deviation) 이며, 이 표준편차는 평균으로 부터 원래 데이타에 대한 오차범위의 근사값이다. (원래 데이타로 부터의 오차의 범위는 편차의 절대값들에 대한 평균값으로 절대편차라고 하며 Absolute deviation, 표준 편차와 값이 다소 다르지만, 평균값으로 부터의 얼마나 오차가 있는지를 표현한다는 의미에서는 같다. 그러면 왜 절대편차를 사용하지 않고 표준 편차를 사용하는가는 다른 글에서 다루도록 한다. 결론만 말하자면, 제곱을 한 표준편차가 모델링과 각종 통계 수식을 응용하기에 용이하다)</p>\n<p>여기서 평균,분산,표준편차의 개념에서 모집단과 표본의 개념을 짚고 넘어갈 필요가 있다.</p>\n<p>통계학이란 굳이 다 조사하지 않더라도, 대충의 결과를 알 수 있다. 일종의 prediction 의 개념이다.</p>\n<p>조사대상인 모집단(population) 전체를 조사하는 경우를 전수조사라고 한다.</p>\n<p>모집단이 커서 전수조사가 어려운 경우, 집단의 특성을 추정하기 위해서 일부 표본(sample)만 추출하여 하는 조사를 표본조사라고 한다. 이렇게 표본을 조사함으로써, 원래 모집단의 특성을 추측하는 것을 추정이라고 한다. (근대 통계학의 추론통계학 - inferential statistics의 개념 )</p>\n<p><strong>표본을 추출하는데도 여러가지 방법이 있다.</strong></p>\n<ul>\n<li>단순임의추출(simple random sampling) : 항아리에 공을 넣고, 아무 공이나 꺼낸다.</li>\n<li>복원 추출(sampling with replacement) : 항아리에서 공을 꺼낸 후, 꺼낸 공을 다시 넣고 공을 꺼낸다.</li>\n<li>비복원 추출(sampling without replacement) : 항아리에서 공을 꺼낸 후 다시 넣지 않고 다른 공을 꺼낸다.</li>\n</ul>"},{"id":"7f4ae861-80b3-5708-a396-f2e4300efb1b","headings":[{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"Angular Observable","path":"/angular-observable","tags":["Web","Angular"],"excerpt":"옵저버블은 ES7 릴리스에 포함될 비동기 데이터를 관리하기위한 새로운 표준이다. Angular는 이벤트 시스템과 HTTP 서비스에서 옵저버블을 광범위하게 사용한다.","created":"2019-02-17T00:00:00.000Z","createdPretty":"17 February, 2019","updated":"2019-02-17T00:00:00.000Z","updatedPretty":"17 February, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcSAAAXEgFnn9JSAAABbklEQVQoz2NgQABGRkYGUyBtAMRiQGzKxMygDaRZGMgBPlUqIIpfxUJIMW2ZXrptoqwukM8ja8DLTJaBDZfNwRobLlrUzvjr8L/hksVyEP/4/yBGsgysPmnGBKIrDpv51100e115zLQAxLdJlgR5GWQZSJ4UwzkZvI+CaC+gAb9BQcgFDFRxIEMAiEG0BCgISHZpULAph0fvQjab+hn+QK4iFAtCXcgGxbCIYgVidiiGu54LiIVAtvNyMQl62KsL/P//n8HD20GSi4NZHSiuBcSgGBMFYmWoBaDYlwdiSSAWhqYKDpiB3CBBXi4WASxeYufhZOYHxT7UFdzgsIEEAx+UjRv8OO6t9PWw6/a3e1yOvNnjcujLYQ8bsmL46FwLcJi82uWS/P+p////V73+/38Y8P/9PpcJIPErKyxJS9yrO03AdFOmtuC1VXZld9Y7Nt5Y61BzcqGdNEj82ip78tIiNJCNgVgBGgGCpBoAABYfUrdUz8YiAAAAAElFTkSuQmCC","aspectRatio":1.6233766233766234,"src":"/static/731325f50192e1fc7a16d5abe73096e4/0853f/observable.png","srcSet":"/static/731325f50192e1fc7a16d5abe73096e4/14156/observable.png 125w,\n/static/731325f50192e1fc7a16d5abe73096e4/d6e47/observable.png 250w,\n/static/731325f50192e1fc7a16d5abe73096e4/0853f/observable.png 500w,\n/static/731325f50192e1fc7a16d5abe73096e4/ce627/observable.png 750w,\n/static/731325f50192e1fc7a16d5abe73096e4/9dbcf/observable.png 1000w,\n/static/731325f50192e1fc7a16d5abe73096e4/ff75e/observable.png 1035w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>옵저버블은 ES7 릴리스에 포함될 비동기 데이터를 관리하기위한 새로운 표준이다. Angular는 이벤트 시스템과 HTTP 서비스에서 옵저버블을 광범위하게 사용한다.</p>\n<h3 id=\"observables\" style=\"position:relative;\"><a href=\"#observables\" aria-label=\"observables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Observables</h3>\n<p>옵저버블은 시간이 지남에 따라 여러값을 가질 수 있는 지연 콜렉션이다.</p>\n<p><strong>1. Observables는 lazy하다.</strong></p>\n<p>지연 옵저버블을 뉴스 레터로 생각할 수 있다. 각 구독자(subscriber)마다 새로운 뉴스 레터가 만들어진다. 그 뉴스레터들은 구독자들에게만 보내고 다른 사람에게는 보내지 않는다.</p>\n<p><strong>2. Observables는 시간이 지남에 따라 여러 값을 가질 수 있다.</strong></p>\n<p>뉴스 레터 구독을 계속 열어두면, 매번 새로운 뉴스 레터를 받게된다. 발신자(sender)는 받은 시간을 결정하지만 받은 편지함에 곧바로 올 때까지 기다려야한다.</p>\n<p>옵저버블과 프로미스간의 다른 중요한 차이점이 있는데, promise은 항상 오직 하나의 값만을 반환한다는 점이다. 또 하나는 옵저버블의 구독을 취소 할 수 있다는 점이다. 뉴스 레터를 더 이상 원하지 않으면 구독을 취소하면된다. 반면 프로미스는 취소 할 수 없다. 프라미스가 당신에게 건네지면, 그 프라미스의 resolve가 이미 진행되고 있으며, 일반적으로 프라미스의 resolve가 실행되는 것을 막을 수 있는 권한이 없다.</p>\n<p><strong>Push vs pull</strong></p>\n<p>observables를 사용할 때 이해해야 할 핵심 사항은 observables가 push한다는 것이다. (옵저버블은 push 시나리오를 따른다는 말) push와 pull은 데이터 생성자가 데이터 소비자와 커뮤니케이션하는 방법을 설명하는 두 가지 방식이다.</p>\n<p><strong>Pull</strong></p>\n<p>Pulling일 때 데이터 소비자는 데이터 생성자로부터 데이터를 가져 오는 시점을 결정한다. 생산자는 언제 데이터가 소비자에게 전달되는지를 알지 못한다.\n모든 자바 스크립트 함수는 pull 시나리오를 사용한다. 함수는 데이터의 프로듀서이며 함수를 호출하는 코드는, 호출에서 하나의 반환 값을 “꺼내”(pull) 가져와 이를 소비한다.</p>\n<p><strong>Push</strong></p>\n<p>Pushing일 때, 다른 방향으로 동작한다. 데이터 생성자 (뉴스 레터 생성자)는 소비자 (뉴스 레터 구독자)가 데이터를 가져 오는 시점을 결정합니다.</p>\n<p>프로미스는 오늘날 자바 스크립트에서 사용하는 가장 일반적인 push 방법입니다. 프로미스(생산자) 전달자는 등록된 콜백(소비자)에게 resolve된 값을 전달하고, 프로미스는 함수와는 달리 콜백에 그 값이 “푸시 (push)”되는 시기를 정확하게 결정한다.</p>\n<p>Observables는 JavaScript로 데이터를 푸시하는 새로운 방법이다. 옵저버블은 여러 값의 생산자로서 구독자에게 “푸시 (pushing)”한다.</p>\n<h3 id=\"angular에서-observables\" style=\"position:relative;\"><a href=\"#angular%EC%97%90%EC%84%9C-observables\" aria-label=\"angular에서 observables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Angular에서 Observables</h3>\n<p>Angular에서 HTTP 요청을 하면 옵저버블 형태로 반환을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Observable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"rxjs/Rx\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@angular/core\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Http<span class=\"token punctuation\">,</span> Response <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@angular/http\"</span>\n\n@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HttpClient</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\"><span class=\"token keyword\">public</span> http<span class=\"token operator\">:</span> Http</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">fetchUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/users\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res<span class=\"token operator\">:</span> Response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>observable을 반환하는 fetchUsers 메서드를 사용하여 간단한 HttpClient를 만들었다. 어떤 종류의 리스트에 사용자를 표시하고 싶으므로 fetchUsers 메서드를 사용해서 해보자. 이 메소드는 옵저버블을 반환하기 때문에 우리는 그것을 구독해야 한다. Angular에서 우리는 두 가지 방식으로 Observable을 구독 할 수 있다.</p>\n<p><strong>방식 1</strong></p>\n<p>비동기 파이프를 사용하여 템플릿의 옵저버블을 구독하는 방법이 있다. 이로 인해 Angular는 컴포넌트의 생명주기 동안 구독을 처리한다. Angular는 자동으로 구독하고 구독취소한다. 비동기 파이프가 노출되야하므로 모듈에 “CommonModule”을 import하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@angular/core\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Observable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"rxjs/Rx\"</span>\n\n<span class=\"token comment\">// client</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> HttpClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../services/client\"</span>\n\n<span class=\"token comment\">// interface</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> IUser <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../services/interfaces\"</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    selector<span class=\"token operator\">:</span> <span class=\"token string\">\"user-list\"</span><span class=\"token punctuation\">,</span>\n    templateUrl<span class=\"token operator\">:</span>  <span class=\"token string\">\"./template.html\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserList</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> users$<span class=\"token operator\">:</span> Observable<span class=\"token operator\">&lt;</span>IUser<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\"><span class=\"token keyword\">public</span> client<span class=\"token operator\">:</span> HttpClient<span class=\"token punctuation\">,</span></span>\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 컴포넌트 초기화시 사용자들을 불러옴</span>\n    <span class=\"token comment\">// fetchUsers 메소드는 관찰 가능 객체를 반환</span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users$ <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">fetchUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 비동기 파이프를 사용하여 자동으로 구독/구독취소 함 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>user__list<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">*ngIf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>(users$ | async).length<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">*ngFor</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>let user of users$ | async<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        {{ user.name }} - {{ user.birth_date }}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<blockquote>\n<p>일반적으로 달러($)기호는 Stream의 약어로 쓰이기 때문에 변수이름 앞에 $를 사용하면 변수의 관찰 가능 여부를 쉽게 식별 할 수 있다.</p>\n</blockquote>\n<p><strong>방식 2</strong></p>\n<p><code class=\"language-text\">subscribe()</code> 메소드를 사용하여 옵저버블을 구독한다. 데이터를 표시하기 전에 먼저 데이터에 뭔가 작업하기를 원한다면 편리할 수 ​​있다. 단점은 구독을 직접 관리해야한다는 것다.(구독취소를 해주어야 함)</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@angular/core\"</span>\n\n<span class=\"token comment\">// client</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> HttpClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../services/client\"</span>\n\n<span class=\"token comment\">// interface</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> IUser <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../services/interfaces\"</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    selector<span class=\"token operator\">:</span> <span class=\"token string\">\"user-list\"</span><span class=\"token punctuation\">,</span>\n    templateUrl<span class=\"token operator\">:</span>  <span class=\"token string\">\"./template.html\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserList</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> users<span class=\"token operator\">:</span> IUser<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\"><span class=\"token keyword\">public</span> client<span class=\"token operator\">:</span> HttpClient<span class=\"token punctuation\">,</span></span>\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 수동으로 구독하고 사용자를 가저옴</span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">fetchUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">users<span class=\"token operator\">:</span> IUser<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// do stuff with our data here.</span>\n            <span class=\"token comment\">// ....</span>\n            <span class=\"token comment\">// asign data to our class property in the end</span>\n            <span class=\"token comment\">// so it will be available to our template</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users <span class=\"token operator\">=</span> users\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>user__list<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">*ngIf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>users.length<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">*ngFor</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>let user of users<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        {{ user.name }} - {{ user.birth_date }}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>템플릿 로직이 꽤 비슷하다는 것을 알 수 있듯이, 2번 방식으로 간다면 구성 요소 논리는 훨씬 더 복잡해 질 수 있다. 일반적으로 방식1을 선택하는 것이 좋다. 가장 쉽고 구독을 수동으로 관리할 필요가 없다. <code class=\"language-text\">2번방법에서 구독을 사용하지 않는 동안 열어두면 메모리 누수가 발생하므로 좋지 않다.</code></p>\n<h3 id=\"creating-an-observable-yourself\" style=\"position:relative;\"><a href=\"#creating-an-observable-yourself\" aria-label=\"creating an observable yourself permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating an observable yourself</h3>\n<p>Angular가 제공한 일반적인 옵저버블을 다루는 방법을 알았으므로 옵저버블을 어떻게 생성하는지 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Observable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"rxjs/Observable\"</span>\n\n<span class=\"token comment\">// create observable</span>\n<span class=\"token keyword\">const</span> simpleObservable <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Observable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">observer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token comment\">// observable execution</span>\n    observer<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bla bla bla\"</span><span class=\"token punctuation\">)</span>\n    observer<span class=\"token punctuation\">.</span><span class=\"token function\">complete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// subscribe to the observable</span>\nsimpleObservable<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// dispose the observable</span>\nsimpleObservable<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>observables는 새로운 Observable() 호출을 사용하여 만든 다음 observer에 가입하고 next()를 호출하여 실행하고 unsubscribe()를 호출하여 삭제한다.</p>\n<p><strong>observable 만들기</strong></p>\n<p>observables를 만드는 것은 쉽다. 새로운 Observable()을 호출하고 옵저버를 나타내는 하나의 인수를 전달하면됩니다. 그러므로 저는 보통 그것을 “observer”라고 부른다.</p>\n<p><strong>옵저버블 구독하기</strong></p>\n<p>옵저버블은 구독하지 않으면 아무 일도 일어나지 않을 것이다. 옵저버를 구독 할 때 subscribe()를 호출 할 때마다 옵저버블에 독립 설정이 실행된다. 구독 요청은 동일한 옵저버블에 대한 여러 구독자간에 공유되지 않는다.</p>\n<p><strong>옵저버블 실행하기</strong>\nobservables 안의 코드는 observables의 실행을 나타낸다. 옵저버블을 만들 때 주어진 매개 변수(observer)에는 옵저버블의 구독자에게 데이터를 보낼 수있는 세 가지 함수가 있다.</p>\n<ul>\n<li>next: Number나 Array나 객체같은 여러 값을 subscribers에게 보낸다.</li>\n<li>error: 자바스크립트 에러나 예외값을 보낸다.</li>\n<li>complete : 어떤 값도 보내지 않는다.</li>\n</ul>\n<p><code class=\"language-text\">next</code> <strong>콜은 구독자에게 실제로 데이터를 전달할 때 가장 일반적이다.</strong> 옵저버블의 실행 중에는 <code class=\"language-text\">observer.next()</code>의 무한 호출이있을 수 있지만 <code class=\"language-text\">observer.error()</code> 또는 <code class=\"language-text\">observer.complete()</code>가 호출되면 실행이 중지되고 더 이상 데이터가 subscribers에게 전달되지 않는다.</p>\n<p><strong>옵저버블 처분</strong>\n옵저버블의실행은 무한한 시간 동안 실행될 수 있기 때문에, 실행을 막을 수있는 방법이 필요하다. 각 구독자마다 각 실행이 실행되기 때문에, 메모리와 컴퓨팅 성능이 낭비, 즉 더 이상 데이터가 필요없는 구독자는 구독을 멈추는 것이 중요하다.</p>\n<p>옵저버블을 구독할 때, 진행중인 실행을 취소하면 구독이 반환된다. 실행을 취소하려면 <code class=\"language-text\">unsubscribe()</code>를 호출하면 된다. </p>"},{"id":"5889d807-2588-573f-a424-4f5cf591dbf5","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"Jupyter Notebook 설치 및 셋팅","path":"/jupyter-start","tags":["Python"],"excerpt":"머신러닝 관련 코드를 작성해보기 위해 환경을 세팅해보자. 다른 방법들도 많겠지만 가장 많이 쓰는 주피터 노트북을 설치하고 파이썬 패키지를 어떻게 관리할 것인지를 살펴보도록 하자.","created":"2019-02-14T00:00:00.000Z","createdPretty":"14 February, 2019","updated":"2019-02-14T00:00:00.000Z","updatedPretty":"14 February, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABGklEQVQY001RsU7DMBTM9yJGPoEvqBjZiliY2JAoC6JtaBGoEi2EQuhAkkaCoqpx4th+z5z7KMKD9ey7y905kfeeiPx2NXVNzmFIZo+bi07b3dMn+5vTg8/kLtCcraoKAzNba7FHImvbFgeInTXhvF5y/sREzN6uMl/MgMJDKeWcM8aIKoJMay3+tVIYAM/f3l/SRTzsTx7uB3E8mT43TQ0IzlCKM/iRs2HBAhp8KIiJ8zQp8jxdfpfralXpcjH3HKrBBmQwKYTaxZYOSGVM0Hv1xTfHPOy68Zm77HAah6pE8Bfxb+y/whJYgI+ifL3t0dWRPj+0055QaYdiV9uXiyQMxOgT3qxpcDMeja77g/8/AlCWZdYYuRGzH2jpjadRS5XRAAAAAElFTkSuQmCC","aspectRatio":2.7777777777777777,"src":"/static/faf9174bee67ca8a8bab175af94a127a/0853f/cover.png","srcSet":"/static/faf9174bee67ca8a8bab175af94a127a/14156/cover.png 125w,\n/static/faf9174bee67ca8a8bab175af94a127a/d6e47/cover.png 250w,\n/static/faf9174bee67ca8a8bab175af94a127a/0853f/cover.png 500w,\n/static/faf9174bee67ca8a8bab175af94a127a/ce627/cover.png 750w,\n/static/faf9174bee67ca8a8bab175af94a127a/a3030/cover.png 920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>머신러닝 관련 코드를 작성해보기 위해 환경을 세팅해보자. 다른 방법들도 많겠지만 가장 많이 쓰는 주피터 노트북을 설치하고 파이썬 패키지를 어떻게 관리할 것인지를 살펴보도록 하자.</p>\n<h3 id=\"주피터-노트북\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%ED%94%BC%ED%84%B0-%EB%85%B8%ED%8A%B8%EB%B6%81\" aria-label=\"주피터 노트북 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주피터 노트북</h3>\n<p>주피터 노트북(jupyter notebook)은 웹 브라우저에서 파이썬 코드를 작성하고 실행까지 해볼 수 있는 REPL방식의 개발도구이다.\n머신러닝이나 데이터분석 용도로 파이썬을 사용하는 사람들이 사용하는 툴로써 가벼우며 코드를 실행하고 수정하기가 간편하다. 또한 notebook형태로 파일이 공유가 가능하다.</p>\n<blockquote>\n<p>REPL(Read–Eval–Print Loop) :  명령어를 한줄씩 입력하며 실행 상황을 지켜보는 방식(대화형)</p>\n</blockquote>\n<p>먼저 <strong>파이썬을 설치</strong>하자. 파이썬이 이미 설치가 되어있다면 생략 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update                // <span class=\"token function\">apt-get</span> 항목 업데이트\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-cache</span> search python3      // 패키지 검색\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> python3.6         // 파이썬 <span class=\"token number\">3.6</span>버전 설치\n$ python3 -V                         // 파이썬 버전 \n$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> python3-pip       // 파이썬 패키지 관리</code></pre></div>\n<p>파이썬 pip를 설치한 후 <code class=\"language-text\">pip install jupyter</code> 로 주피터 노트북을 설치 할 수 있지만\n일반적으로 <code class=\"language-text\">아나콘다(Anaconda)</code>를 설치하면 <code class=\"language-text\">Jupyter Notebook</code>이 함께 설치되어 주피터를 사용할 수 있다. 물론 <code class=\"language-text\">pip</code>를 이용하면 원하는 패키지만 그떄 그때 설치하여 사용할 수는 있지만, 아나콘다를 설치하면 데이터 처리 및 분석에 필요한 패키지가 모두 포함되어 설치가 되기 때문에 약간 설치시간이 오래 걸리긴 하지만 아나콘다를 사용하는 것을 추천한다.</p>\n<h3 id=\"아나콘다anaconda-설치\" style=\"position:relative;\"><a href=\"#%EC%95%84%EB%82%98%EC%BD%98%EB%8B%A4anaconda-%EC%84%A4%EC%B9%98\" aria-label=\"아나콘다anaconda 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>아나콘다(Anaconda) 설치</h3>\n<p>이 글에서는 Ubuntu18.04 기준으로 설명하도록 하겠다. 또한 최신버전을 위해 반드시 아나콘다 사이트에서 최신 URL을 확인하여 설치를 진행하길 바란다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">wget</span> https://repo.continuum.io/archive/Anaconda3-5.1.0-Linux-x86_64.sh\n$ <span class=\"token function\">bash</span> Anaconda3-5.1.0-Linux-x86_64.sh</code></pre></div>\n<blockquote>\n<p>계속 엔터를 눌러 설치한다(bashrc등록 여부는 Y로 입력해준다 - 그렇지 않으면 수동설정) <br>\n<a href=\"https://www.anaconda.com/downloads\">아나콘다(Anaconda) 공식홈 참고</a></p>\n</blockquote>\n<p><strong>설치 확인</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">source</span> ~/.bashrc    // bashrc에 등록한것을 활성해 준다\n$ conda --version     // 버전확인\n$ conda update conda  // 아나콘다 업데이트</code></pre></div>\n<p><strong>만약 삭제하길 원한다면...</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">rm</span> -rf ~/anaconda3\n$ <span class=\"token function\">vi</span> ~/.bashrc // <span class=\"token comment\"># added by Anaconda3 installer 제거</span>\n$ <span class=\"token function\">rm</span> -rf ~/.condarc ~/.conda ~/.continuum</code></pre></div>\n<h3 id=\"주피터-노트북-실행\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%ED%94%BC%ED%84%B0-%EB%85%B8%ED%8A%B8%EB%B6%81-%EC%8B%A4%ED%96%89\" aria-label=\"주피터 노트북 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주피터 노트북 실행</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ jupyter notebook</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 945px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9dbc78fba71aec53eddc0153c1f60c8b/40601/jupyter-run.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQY0z2O626DIACFfY4t3bqts1fbKiiCoHgBBNpZtT/WtO//HMUsWfLl5CTnx/k81NSxyJEqsG6YNvLnl4ou4QayFpU2JAJStQH56/dxtoz+eFuB9zWcb2Iv5GksMNaEWJzpSnY3Pdzt+FCXmxkfXI9FO+Sqj/PWEVEZZXIN8sUef2wTjzQ1FTU3QnQtldMGqApJA5gCVEKmEDe4PCFuA1QGycQu4du4+Nwhzz9kkGlcnZkYksKgSVjt08r9rCLqH8gypO7kZXH4156twGTutJdRmglbnXpHfb7q/l7ZK5OX0lydMG+HqeghrewW5v4x84/E5VeQzjfwCfYyRbKMmkEeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jupyter-run\"\n        title=\"jupyter-run\"\n        src=\"/static/9dbc78fba71aec53eddc0153c1f60c8b/40601/jupyter-run.png\"\n        srcset=\"/static/9dbc78fba71aec53eddc0153c1f60c8b/5a46d/jupyter-run.png 300w,\n/static/9dbc78fba71aec53eddc0153c1f60c8b/0a47e/jupyter-run.png 600w,\n/static/9dbc78fba71aec53eddc0153c1f60c8b/40601/jupyter-run.png 945w\"\n        sizes=\"(max-width: 945px) 100vw, 945px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>화면에 출력된 <code class=\"language-text\">http://localhost:8888/?token=***</code>으로 접속하면 된다.<br>\n(<code class=\"language-text\">jupyter notebook --generate-config</code> 명령으로 <code class=\"language-text\">jupyter_notebook_config.py</code> 파일을 생성하면 해당 파일에서 세부설정이 가능하다.)</p>\n</blockquote>\n<p><strong>접속화면</strong>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1136px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8eb00cf0a5ec57ee35dac959918b206d/f32b7/jupyter-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAcklEQVQI15WO0QoDMQgE8//fWQ7CkWiiRus1udr2pbT0ocMgrCxoogaAGFZAElGzb0dMHXvzy848mJivJtR7ssFqvtY51/kXtzkTIhbAUuN+c/fjB/7geBVUFQByzmmIYCcilvj5jYj45GMf/bJtXGt4B7ig59GT3I73AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jupyter\"\n        title=\"jupyter\"\n        src=\"/static/8eb00cf0a5ec57ee35dac959918b206d/f32b7/jupyter-1.png\"\n        srcset=\"/static/8eb00cf0a5ec57ee35dac959918b206d/5a46d/jupyter-1.png 300w,\n/static/8eb00cf0a5ec57ee35dac959918b206d/0a47e/jupyter-1.png 600w,\n/static/8eb00cf0a5ec57ee35dac959918b206d/f32b7/jupyter-1.png 1136w\"\n        sizes=\"(max-width: 1136px) 100vw, 1136px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n우측 상단에 New > Python3를 선택하면 새로운 창이 생성된다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1138px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4e8f09acdbc29a3516819b601e1ae5b2/05fb0/jupyter-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAaElEQVQI142MwQ7DMAhD8/+fuooG4hAg6abRqrdeap4tJEsuda9cbxHR9tkyAfTew2PGfJJV9mitMLghzcw7C+cjkNZxZYPiiar2PNMiIcfxIyEFx/R5TsdLyvquWGuYmfuFvWHY8PA/OKvmUHciAEQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jupyter\"\n        title=\"jupyter\"\n        src=\"/static/4e8f09acdbc29a3516819b601e1ae5b2/05fb0/jupyter-2.png\"\n        srcset=\"/static/4e8f09acdbc29a3516819b601e1ae5b2/5a46d/jupyter-2.png 300w,\n/static/4e8f09acdbc29a3516819b601e1ae5b2/0a47e/jupyter-2.png 600w,\n/static/4e8f09acdbc29a3516819b601e1ae5b2/05fb0/jupyter-2.png 1138w\"\n        sizes=\"(max-width: 1138px) 100vw, 1138px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n이제 웹상에서 파이썬 코드를 작성하고 실행 할 수 있다.</p>\n<p>물론 matplotlib 패키지를 이용하여 가공된 데이터를 그래프로 표현 할 수 있다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 976px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/32b033c9fa09074875eae5afd27b320e/798d4/jupyter-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABcElEQVQoz41RPU/DMBDNwp/jTzDyM0CIgZU/wMQESFXFwAwLQqrUgkRLOyQNdULqND4ntuOkcWIuKWM/eDrJ57Oe7947xzaNtVZJSQihNJ57XsIYVpquvh/O5tBar5IVACSrhAHY/8HBDpUxUhQsAc55lolc57rQGMUhOFCAMTZIovH32PM9EhEppVAiL3KVq/3hMN0qjAX99Meu63pz119+B8sA58f3siw3TfQ2OKChM0yFJIzRMRr/BIRzYBzSNBVZqrJMCrGdzDoyMJhNZ7Ovqet5xJ9TuoxoxBj+ABJA7CJDwa2pSiXRrbQDdAnr3ONpO4Axpt6G1rBuq7VSytaGJCJIpMVrUcbAUeuedf+Rq6rKhMDkfrC4GyzaSt1s6vYgGdej8xyTk5u3q6cJJjXuv66VLg+TUdO6LG5f/aPTh+Prl8f3UK8NV2s/zjpRO8it2+1bE7L0sj866w0v+sPz3uh5Enz4NE5bLTWOsQ2/0h7lffgXfvsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jupyter\"\n        title=\"jupyter\"\n        src=\"/static/32b033c9fa09074875eae5afd27b320e/798d4/jupyter-sample.png\"\n        srcset=\"/static/32b033c9fa09074875eae5afd27b320e/5a46d/jupyter-sample.png 300w,\n/static/32b033c9fa09074875eae5afd27b320e/0a47e/jupyter-sample.png 600w,\n/static/32b033c9fa09074875eae5afd27b320e/798d4/jupyter-sample.png 976w\"\n        sizes=\"(max-width: 976px) 100vw, 976px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>주피터 노트북은 개인 로컬환경에 설치하여 직접 띄울수도 있지만, Microsoft에서는 azure notebook, Google에서는 Colab에서 클라우드상의 주피터환경을 제공해주고 있으니 간단한 학습용로라면 이를 활용하는 방법도 좋을 것이다. 공짜다!</p>\n<ul>\n<li><a href=\"https://notebooks.azure.com/\">Microsoft Azure Notebooks</a></li>\n<li><a href=\"https://colab.research.google.com/\">Google Colab</a></li>\n</ul>\n<p>(주피터 노트북 사용법에 대한 부분은 다루지 않겠다.)</p>\n<h3 id=\"더-살펴보자\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EC%82%B4%ED%8E%B4%EB%B3%B4%EC%9E%90\" aria-label=\"더 살펴보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>더 살펴보자...</h3>\n<p><strong>아나콘다 가상환경</strong></p>\n<p>개발을 위한 파이썬 패키지 가상환경을 별도로 만들고 싶다면 conda에서 지원하는 명령어로 사용이 가능하다. 만약 아나콘다를 사용하지 않고 <code class=\"language-text\">pip</code>를 사용한다면 <code class=\"language-text\">virtualenv</code>로 가상환경을 관리 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ conda create -n <span class=\"token punctuation\">[</span>가상환경명<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.6</span>    // 가상환경을 만든다. <span class=\"token punctuation\">(</span>n:name<span class=\"token punctuation\">)</span>\n$ conda <span class=\"token function\">env</span> list                             // 설치된 가상환경 리스트 확인\n$ conda activate <span class=\"token punctuation\">[</span>가상환경명<span class=\"token punctuation\">]</span>                   // 가상환경 활성화 <span class=\"token punctuation\">(</span>or active <span class=\"token punctuation\">[</span>가상환경명<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>가상환경을 선택하여 활성화를 하게 되면 <code class=\"language-text\">(가상환경명) winuss@ubuntu:~$</code>와 같이 프롬프트 앞에 해당 가상환경명이 표시가 된다. 이후 패키지를 설치하게 되면 활성화된 가상환경에만 패키지가 설치가 된다.</p>\n</blockquote>\n<p>다시 가상환경을 비활성화하거나 삭제하려면,</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token punctuation\">(</span>가상환경명<span class=\"token punctuation\">)</span> conda deactivate         // 가상환경 비활성화\n$ conda <span class=\"token function\">env</span> remove -n <span class=\"token punctuation\">[</span>가상환경명<span class=\"token punctuation\">]</span>      // 가상환경 삭제</code></pre></div>\n<p>파이썬에서는 한 라이브러리에 대해 하나의 버전만 설치가 가능한데 이는 여러개의 프로젝트를 진행하게 되면 문제가 될 수 있다. 작업을 바꿀때마다 다른 버전의 라이브러리를 설치해야 해야 하는 번거러움을 방지하기 위해 독립된 가상환경이 필요한 것이다.</p>\n<p><strong>아나콘다에 패키지 설치</strong></p>\n<p>가상환경을 활성화 하지 않고 가상환경명을 지정하여 패키지를 설치 할 수도 있다. <code class=\"language-text\">mytest</code>라는 가상환경에 <code class=\"language-text\">tensorflow</code>를 설치 및 삭제를 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ conda search tensorflow<span class=\"token punctuation\">(</span>패키지명<span class=\"token punctuation\">)</span>  // 패키지검색\n$ conda <span class=\"token function\">install</span> tensorflow<span class=\"token punctuation\">(</span>패키지명<span class=\"token punctuation\">)</span> // 패키지 설치\n$ conda <span class=\"token function\">install</span> --name mytest<span class=\"token punctuation\">(</span>가상환경명<span class=\"token punctuation\">)</span> tensorflow<span class=\"token punctuation\">(</span>패키지명<span class=\"token punctuation\">)</span> \n$ conda list  // 패키지 리스트\n$ conda remove --name mytest<span class=\"token punctuation\">(</span>가상환경명<span class=\"token punctuation\">)</span> tensorflow<span class=\"token punctuation\">(</span>패키지명<span class=\"token punctuation\">)</span> // 패키지 제거</code></pre></div>\n<p><strong>주피터 설치</strong></p>\n<p><code class=\"language-text\">mytest</code>라는 가상환경을 활성화 하고 jupyter를 설치해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ conda activate mytest             //가상환경 활성화\n$ <span class=\"token punctuation\">(</span>mytest<span class=\"token punctuation\">)</span> conda <span class=\"token function\">install</span> jupyter    // 패키지 설치\n$ <span class=\"token punctuation\">(</span>mytest<span class=\"token punctuation\">)</span> conda <span class=\"token function\">install</span> nb_conda   // 주피터 상에서 패키지 설치및 환경 정보를 쉽게 확인\n$ <span class=\"token punctuation\">(</span>mytest<span class=\"token punctuation\">)</span> jupyter notebook         // 주피터 실행</code></pre></div>\n<p><strong>주피터 확장기능 설치</strong></p>\n<p>주피터 확장기능을 사용하면 좀더 편리한 기능들을 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ conda <span class=\"token function\">install</span> -c conda-forge jupyter_contrib_nbextensions</code></pre></div>\n<blockquote>\n<p>확장을 활성화 하려면 <code class=\"language-text\">Nbextensions 탭</code>을 클릭하거나 <a href=\"http://localhost:8888/nbextensions%EC%97%90%EC%84%9C\">http://localhost:8888/nbextensions에서</a> 확인 할 수 있다. </p>\n</blockquote>\n<p><strong>주피터 font 수정</strong></p>\n<p>font가 가독성이 좀 떨어진다. custom.css를 추가하여 css를 적용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> ~/.jupyter/custom\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'/* jupyter css */'</span> <span class=\"token operator\">>></span> ~/.jupyter/custom/custom.css\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'.CodeMirror pre {font-family: Consolas; font-size: 10.5pt; line-height: 120%;}'</span> <span class=\"token operator\">>></span> ~/.jupyter/custom/custom.css\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'.container { width:100% !important; }'</span> <span class=\"token operator\">>></span> ~/.jupyter/custom/custom.css\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'div.output pre{ font-family: Consolas; font-size: 10.5pt;}'</span> <span class=\"token operator\">>></span> ~/.jupyter/custom/custom.css</code></pre></div>\n<p><strong>주피터 상세 설정</strong></p>\n<p>기본 디렉토리, 토큰, 브라우저옵션 등 상세한 설정을 제어 하고 싶다면 config파일을 생성하여 해당 파일의 옵션값들을 수정해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ jupyter notebook --generate-config</code></pre></div>\n<p>결과<br>\nWriting default config to: /home/uss/.jupyter/jupyter<em>notebook</em>config.py</p>\n<h3 id=\"matplotlib-설정\" style=\"position:relative;\"><a href=\"#matplotlib-%EC%84%A4%EC%A0%95\" aria-label=\"matplotlib 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Matplotlib 설정</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>matplotlib inline</code></pre></div>\n<p>matplotlib 주요 설치 정보</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> matplotlib\n\n<span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'버전: '</span><span class=\"token punctuation\">,</span> matplotlib<span class=\"token punctuation\">.</span>__version__<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'설치위치: '</span><span class=\"token punctuation\">,</span> matplotlib<span class=\"token punctuation\">.</span>__file__<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'설정: '</span><span class=\"token punctuation\">,</span> matplotlib<span class=\"token punctuation\">.</span>get_configdir<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'캐시: '</span><span class=\"token punctuation\">,</span> matplotlib<span class=\"token punctuation\">.</span>get_cachedir<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>우분투에 폰트는 <code class=\"language-text\">/usr/share/fonts/truetype/</code>에 있다.</p>\n<p><strong>글꼴 설치</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> fonts-nanum*\n$ <span class=\"token function\">sudo</span> fc-cache -fv</code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">/usr/share/fonts/truetype/</code>에 nanum 폰트 파일이 설치가 된다.</p>\n</blockquote>\n<p>설치한 nanum폰트를 matplotlib에 복사하고 matplotlib의 폰트 캐시를 삭제하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /usr/share/fonts/truetype/nanum/Nanum* <span class=\"token punctuation\">[</span>설치위치<span class=\"token punctuation\">]</span>/mpl-data/fonts/ttf/\n$ <span class=\"token function\">rm</span> -rf /home/<span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">]</span>/.cache/matplotlib/*</code></pre></div>\n<blockquote>\n<p>설치 위치는 <strong>/usr/local/lib/python3.?/dist-packages/matplotlib</strong>가 기본적이지만 matplotlib.<strong>file</strong> 명령으로 설치위치를 확인하자.(가상환경의 경우 위치가 다를 수 있음)<br>\n캐시 위치는 보통 사용자 디렉토리에 위치한다. <code class=\"language-text\">matplotlib.get_cachedir()</code></p>\n</blockquote>\n<p><strong>폰트 지정</strong></p>\n<p>matplotlib.rcParams을 통해 matplotlib의 다양한 설정값을 읽거나 지정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt\n\nplt<span class=\"token punctuation\">.</span>rcParams<span class=\"token punctuation\">[</span><span class=\"token string\">\"font.family\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'NanumGothicCoding'</span>\nplt<span class=\"token punctuation\">.</span>rcParams<span class=\"token punctuation\">[</span><span class=\"token string\">'font.size'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">.</span>\nplt<span class=\"token punctuation\">.</span>rcParams<span class=\"token punctuation\">[</span><span class=\"token string\">'xtick.labelsize'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">24</span><span class=\"token punctuation\">.</span>\nplt<span class=\"token punctuation\">.</span>rcParams<span class=\"token punctuation\">[</span><span class=\"token string\">'ytick.labelsize'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">24</span><span class=\"token punctuation\">.</span>\nplt<span class=\"token punctuation\">.</span>rcParams<span class=\"token punctuation\">[</span><span class=\"token string\">'axes.labelsize'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">.</span>\n\nplt<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token string\">'가격의 변화'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>[(f.name, f.fname) for f in matplotlib.font_manager.fontManager.ttflist if 'Nanum' in f.name] 으로 Nanum폰트명을 확인 할 수 있다.</p>\n<p><strong>폰트 설정파일</strong></p>\n<p>매번 폰트를 지정하는것이 번거롭다면 matplotlibrc 파일에 설정하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> matplotlib\n<span class=\"token comment\">#설정파일명 확인</span>\nmatplotlib<span class=\"token punctuation\">.</span>matplotlib_fname<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'font.family : NanumGothic'</span> <span class=\"token operator\">>></span> ~/.config/matplotlib/matplotlibrc\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'font.size : 10.0'</span> <span class=\"token operator\">>></span> ~/.config/matplotlib/matplotlibrc\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'axes.unicode_minus : False'</span> <span class=\"token operator\">>></span> ~/.config/matplotlib/matplotlibrc</code></pre></div>\n<blockquote>\n<p>레이블에 '-'가 있는 경우 유니코드의 '-'문자를 그대로 출력하면 '-' 부호만 깨져 보인다. 이를 방지하기 위해 'axes.unicode_minus' 옵션을 False로 지정한다.</p>\n</blockquote>\n<p>이제 jupyter notebook를 재구동하고 그래프에 한글이 정상적으로 표시가 되는지 확인해보자.</p>\n<h3 id=\"윈도우에서-아나콘다를-사용한다면\" style=\"position:relative;\"><a href=\"#%EC%9C%88%EB%8F%84%EC%9A%B0%EC%97%90%EC%84%9C-%EC%95%84%EB%82%98%EC%BD%98%EB%8B%A4%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4%EB%A9%B4\" aria-label=\"윈도우에서 아나콘다를 사용한다면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>윈도우에서 아나콘다를 사용한다면..</h3>\n<ol>\n<li>\n<p>matplotlib 설정파일에 설정 추가 (matplotlib.matplotlib_fname())</p>\n<ul>\n<li>font.family : NanumGothic</li>\n<li>font.size : 10.0</li>\n<li>axes.unicode_minus : False</li>\n</ul>\n</li>\n<li>\n<p>.ttf 폰트를 matplotlib으로 복사한다.</p>\n<ul>\n<li>아나콘다를 사용하는 경우 보통 아래 디렉토리이다.(NanumGothic 추천)</li>\n<li>C:\\Users(사용자명)\\Anaconda3\\Lib\\site-packages\\matplotlib\\mpl-data\\fonts\\ttf</li>\n</ul>\n</li>\n<li>\n<p>matplotlib cache 폴더의 내용 삭제</p>\n<ul>\n<li>matplotlib.get_cachedir()</li>\n</ul>\n</li>\n<li>커널 재시작(주피터 노트북 재시작)</li>\n</ol>\n<p><strong>참고</strong></p>\n<ul>\n<li><a href=\"https://jupyter.readthedocs.io/en/latest/\">Jupyter Notebook</a></li>\n</ul>"},{"id":"40578f44-024a-5185-b730-2481b81131be","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"ML - 머신러닝?!","path":"/ml-what-is","tags":["ML-DL","ML"],"excerpt":"인공지능, 머신러닝, 딥러닝에 대해 자세히는 모르지만 대부분 한번쯤을 들어보았을 것이다. 분명 3가지는 차이가 있으며 어떤 차이가 있는지부터 알아보자.","created":"2019-01-30T00:00:00.000Z","createdPretty":"30 January, 2019","updated":"2019-01-30T00:00:00.000Z","updatedPretty":"30 January, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAC4ElEQVQoz32SaUiUURSGr6RJGm36J39E9CeKjIowsghaiIJWixZKxxaSFsrSSHMZHAdzGtOyDROzzKVSxz212XQmlxy3VCxzi8Ayqci0UNCermP1s+/ycDjng/e+554jWvqyqOqOo7Y3kZreBKzdsVi6YrB2xfKiWyuJ+4P2v1i7NNT03EBYOmMpaQucpPUCRS1nyW1W8LhhL2m2LTx4uUmykYd1m2W+1V6zx7q/TOYT/7MafBCGdjVJ+n0k631JrfAlo9ofXdNRnjYd4HrVAm7VenKndjnxVfOJMk1BZXIi2uRItHmKxBG12UkyVdYduGqZg6joVJNp8yGjbi/ZUqS8y5/CNgVPGvehMc9DY1zIdcsy4isXE1YuUBoEIaUOBBc5ElQkOF8o/sWw0hkI81sVBa3+1H/QkN8YyJ5La9DqdlPYfghl6UxC8twJLXbmnE6gNrgRUzGN4EIXosq8CX+2hKB8D05lu3A0U3AmZ6YU7IykrPkq1voarC15HIlQkFqmpPi1PyqjM4/bdpFctYNE00b5VvtJaVjN6RzBiTQPjj2cxfG0Wfjdd0SRJuSlUrDxQyLKFAVz1y4mSafh71fTe5MogxORRkFkiRuaZ+tkSw6ozNJJriAg3Z24sj3cqz7MFb233eHZXClY3RNP/qsT5DacpLw9RK7PLWzvkjB0hKE2TUdtkQLpLqwO8CDKODmI01LwimkllhY9qsQ7ZFm1+EmHgXmzEcaOSDLrd5DTvF+uig/ptm2S7WRIJhyGyyFckO93MN6Vy3IoETIPyBaybVdSrKc4mbCTi482sD1BXqxzki2/T5XOgjG+UdpdGTsiMHUo0b8JJcW2jttybZLrvUhu8iSpzou7L5dyrWIV4SWLiC5fgaZyOTHPvQkr8ERrXI/4OPCJkZERPn/9yvehIb59H+Tb4CBDw8P22vCPH3z+IuPwT/oHBhgdHaWvv59fE+cXjI2NMT4+kY3b89/qdFlVNwqDLAAAAABJRU5ErkJggg==","aspectRatio":1.8656716417910448,"src":"/static/d92d55a2ba414cfb1e16cd961d41e35d/0853f/cover.png","srcSet":"/static/d92d55a2ba414cfb1e16cd961d41e35d/14156/cover.png 125w,\n/static/d92d55a2ba414cfb1e16cd961d41e35d/d6e47/cover.png 250w,\n/static/d92d55a2ba414cfb1e16cd961d41e35d/0853f/cover.png 500w,\n/static/d92d55a2ba414cfb1e16cd961d41e35d/b2130/cover.png 699w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p><strong>인공지능, 머신러닝, 딥러닝</strong>에 대해 자세히는모르지만 부분 한번쯤을 어보았을 것이다. 분명 3가지는 차이가 있으며 어떤 차이가 있는지부터 알아보자.</p>\n<p>머신러닝은 말 그데로 <strong>\"기계가  학습?\"</strong> 그럼 인공지능과 딥러닝은? 마찬가지로 기계학습이라 해도 틀린것은 아니다.</p>\n<p>인공지능은 매우 포괄적인 개념으로 가장 많이 사용되는 대중적인 단어이다. 특정 기술 분야 뿐아니라 지능적인 요소를 가진 모든 부분에 대해 부르는 이름이다. 예를들어 게임상의 Bot이나 음성인식을 이용한 검색, 통계를 기반으로한 예측시스템들도 인공지능이라 부른다.</p>\n<p>반면 머신러닝은 인공지능 안에서의 특정분야를 지칭하는 단어이다. 그리고 그안에 파생된 기술도 딥러닝 뿐만 아니라 다른 많은 기술도 있다. 사실 기계학습, 인공지능에 대한 연구는 예전부터 존재했지만 발전이 없었고 단지 소수에 연구원들에 의한 주제였기에 대중화 될 수 없었다고 한다. 하지만 풍부한 데이터의 확보, 컴퓨팅 성능향상, 오픈소스 라이브러리로 인해 많은 개발자들이 인공지능 연구에 참여하게 되면서부터 크게 부각이 되기 시작했다.</p>\n<h2 id=\"머신러닝\" style=\"position:relative;\"><a href=\"#%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D\" aria-label=\"머신러닝 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>머신러닝</h2>\n<p>머신러닝은 데이터로부터 학습하도록 컴퓨터를 프로그래밍하는 과학이다. 스팸필터로 예를 들면 스팸필터는 스팸메일과 일반메일의 샘플을 이용해 스팸메일 구분법을 배울수 있는 머신러닝 프로그램이다.</p>\n<p>왜 머신러닝을 사용할까? 스팸 필터를 예로 전통적인 프로그래밍 기법과 비교해서 살펴보자.</p>\n<p><strong>스팸필터를 만들기 위해서는..</strong></p>\n<blockquote>\n<ol>\n<li>스팸에 어떤 단어즐이 주로 나타나는지? '4U', '신용카드', '무료' 등등</li>\n<li>발견한 각 패턴을 감지하는 알고리즘을 작성하여 메일을 스팸으로 분류</li>\n<li>프로그램을 테스트하고 충분한 성능이 나올 때까지 1,2단계를 반복</li>\n</ol>\n</blockquote>\n<p><strong>전통적인 접근 방법</strong>에는 문제가 단순하지 않아 규칙이 복잡해지기 때문에 유지보수가 매우 힘들다.</p>\n<p>반면 <strong>머신러닝 기법</strong>을 이용한다면 일반 메일에 비해 스팸에 자주 나타나는 패턴을 감지하여 특정 단어나 구절이 스팸 메일을 판단하는 데 좋은 기준인지 자동으로 학습한다. 따라서 유지보수가 쉬우며 정확도가 더 높다.</p>\n<p>만약 스팸 메일 발송자가 '4U'를 포함한 모든 메일이 차단된다는 것을 안다면 '4U' 대신 'For U'를 쓰기 시작할지도 모른다. 전통적인 프로그래밍 방식의 스팸 필터는 'For U'메일을 구분하기 위해 수정이 필요하며 단어를 바꾸면 새로운 규칙을 계속 추가해 주어야 한다.</p>\n<p>하지만 머신러닝 기반의 스팸 필터는 사용자가 스팸으로 지정한 메일에 유동 'For U'가 자주 나타나는 것을 자동으로 인식하고 별도 작업 없이도 자동으로 이 단어를 스팸으로 분류한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1bae3753f52a08905048c403f79c38bf/e2d3b/ori-ml.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABcRAAAXEQHKJvM/AAABTUlEQVQY032RzW6DMBCEef/n6LFR1XuVqpWq5tSqlwBSwMRAIA3BBJuEH7PbMWqvXQnZ3l3G36y97Xb77Pv+erfbPTVN8zgOw/0wDKvr9bpCfhWG4YNS9V0cx09CiJ2IhZ+XWbD+eA1ELoJxGIPT6eQrpcKiKD49/ifGcWRjDE/TxER0/svX+sybcMO9vS1nCDIE3dd5Wmtb17XVxlhdnW0dxZOp1TRaO4F4iqKI+r5v2rbNnDjIbWvaWR72s+n07ML9D3rGWntQJdil76qiUywof3snlWV0MZqOx+NcliVDuMX+IKUETUXJQdDL15pFHrNuNadZSgX60jRVi2UQMM0zz0Ssu26x6QKzZCcIuzfsiw412HfEhEvYnV2Anlzf5XJRHhpSzErCisTwJdAlHkBiFC63t9ZmqG8hKH4vpwpukiThPM8XGPSRqznBH3QkwMyzmLbOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ori-ml\"\n        title=\"ori-ml\"\n        src=\"/static/1bae3753f52a08905048c403f79c38bf/c1b63/ori-ml.png\"\n        srcset=\"/static/1bae3753f52a08905048c403f79c38bf/5a46d/ori-ml.png 300w,\n/static/1bae3753f52a08905048c403f79c38bf/0a47e/ori-ml.png 600w,\n/static/1bae3753f52a08905048c403f79c38bf/c1b63/ori-ml.png 1200w,\n/static/1bae3753f52a08905048c403f79c38bf/e2d3b/ori-ml.png 1466w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>따라서 머신러닝 기술을 적용해서 대용량 데이터를 분석하면 겉으로는 보이지 않던 패턴을 발견할 수 있다.</p>\n<h2 id=\"머신러닝-시스템의-종류\" style=\"position:relative;\"><a href=\"#%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98-%EC%A2%85%EB%A5%98\" aria-label=\"머신러닝 시스템의 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>머신러닝 시스템의 종류</h2>\n<p>머신러닝 시스템은 크게 세가지로 구분된다. </p>\n<blockquote>\n<ul>\n<li>지도학습(Supervised Learning),</li>\n<li>비지도학습(Unsupervised Learning), </li>\n<li>강화학습(Reinforcement Learning)</li>\n</ul>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMCBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB1k30QwmV/8QAGhABAAIDAQAAAAAAAAAAAAAAAQADAhAREv/aAAgBAQABBQKxetjnB6SvHzr/xAAWEQEBAQAAAAAAAAAAAAAAAAAhAhD/2gAIAQMBAT8Bkc//xAAWEQEBAQAAAAAAAAAAAAAAAAABEEH/2gAIAQIBAT8BXJ//xAAaEAABBQEAAAAAAAAAAAAAAAABAAIQITES/9oACAEBAAY/AqGIctNScj//xAAbEAACAwADAAAAAAAAAAAAAAABEQAhQRAxcf/aAAgBAQABPyFQClmT1U1EM3kWlKGe6Ocf/9oADAMBAAIAAwAAABA/3//EABcRAQEBAQAAAAAAAAAAAAAAAAEAETH/2gAIAQMBAT8QOnub/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQIBAT8QgP/EABwQAQEAAgIDAAAAAAAAAAAAAAERADEQUUFxgf/aAAgBAQABPxBcVF0dveM0Eez85OWHw7wUxHQK6zj/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ml-2\"\n        title=\"ml-2\"\n        src=\"/static/cc7b864b0a2c04a14e64d2b0788a56ab/4b190/ml-2.jpg\"\n        srcset=\"/static/cc7b864b0a2c04a14e64d2b0788a56ab/f93b5/ml-2.jpg 300w,\n/static/cc7b864b0a2c04a14e64d2b0788a56ab/b4294/ml-2.jpg 600w,\n/static/cc7b864b0a2c04a14e64d2b0788a56ab/4b190/ml-2.jpg 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n(그림 출처 : <a href=\"https://www.techleer.com/articles/203-machine-learning-algorithm-backbone-of-emerging-technologies/\">https://www.techleer.com/articles/203-machine-learning-algorithm-backbone-of-emerging-technologies/</a>)</p>\n<p>각각의 어떤 특징들을 가지고 있는지 살펴보도록 하자.</p>\n<h2 id=\"지도-학습supervised-learning\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EB%8F%84-%ED%95%99%EC%8A%B5supervised-learning\" aria-label=\"지도 학습supervised learning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>지도 학습(Supervised Learning)</h2>\n<p><em>\"지도학습은 훈련 데이터(Training Data)로부터 하나의 함수를 유추해내기 위한 기계학습의 한 방법이다.\"</em> - 위키피디아</p>\n<p>정답이 있는 데이터를 기반으로 모델을 만들어 새로운 데이터가 들어왔을때 정답을 맞추는 것이다.\n지도학습은 크게 분류(Classification)과 회귀(Regression) 두가지로 분류할 수 있다.</p>\n<p><u>분류 : 이진분류(예 or 아니오), 다중분류(고양이, 사자, 새..)</u>\n<u>회귀 : 어떤 데이터들의 특징을 토대로 값을 예측(결과값은 실수, 키가 170면 몸게는?)</u></p>\n<p>다음과 같이 지도학습에 사용되는 알고리즘이 있다.</p>\n<ul>\n<li>k-최근접 이웃 (k-Nearest Neighbors)</li>\n<li>선형 회귀 (Linear Regression)</li>\n<li>로지스틱 회귀 (Logistic Regression)</li>\n<li>서포트 벡터 머신 (Support Vector Machines (SVM))</li>\n<li>결정 트리 (Decision Tree) 와 랜덤 포레스트 (Random Forests)</li>\n<li>신경망 Neural networks</li>\n</ul>\n<p>지도학습 알고리즘에 대해서는 다음에 다루도록 하겠다.</p>\n<h2 id=\"비지도-학습unsupervised-learning\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EC%A7%80%EB%8F%84-%ED%95%99%EC%8A%B5unsupervised-learning\" aria-label=\"비지도 학습unsupervised learning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>비지도 학습(Unsupervised Learning)</h2>\n<p>비지도 학습에 대해 이야기 하기 전에 먼저 지도 학습과 비지도 학습을 비교한 그림을 보자.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d904c6554c156e242ac3374c8f291314/acb04/supervised-learning-diagram.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAAEAAL/2gAMAwEAAhADEAAAAdZWTFWQJJ//xAAaEAEAAgMBAAAAAAAAAAAAAAABAAIDERIh/9oACAEBAAEFAuScC2xgzftl3//EABkRAAIDAQAAAAAAAAAAAAAAAAABAhEhMf/aAAgBAwEBPwGe9GlZ/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERAjH/2gAIAQIBAT8BwpwVP//EABgQAAIDAAAAAAAAAAAAAAAAAABBEDHh/9oACAEBAAY/AtGObP/EABoQAQADAQEBAAAAAAAAAAAAAAEAETEhQZH/2gAIAQEAAT8hENYvrxzjNB9S8ih0s9hP/9oADAMBAAIAAwAAABA73//EABgRAAMBAQAAAAAAAAAAAAAAAAABESHR/9oACAEDAQE/EJSaV6WsP//EABkRAAIDAQAAAAAAAAAAAAAAAAABESEx0f/aAAgBAgEBPxBTTSuDQ0//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFRcf/aAAgBAQABPxC6KL8QbLIESgBlu4Lu8eyqVYcMULTPZ//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"supervised-learning-diagram\"\n        title=\"supervised-learning-diagram\"\n        src=\"/static/d904c6554c156e242ac3374c8f291314/acb04/supervised-learning-diagram.jpg\"\n        srcset=\"/static/d904c6554c156e242ac3374c8f291314/f93b5/supervised-learning-diagram.jpg 300w,\n/static/d904c6554c156e242ac3374c8f291314/b4294/supervised-learning-diagram.jpg 600w,\n/static/d904c6554c156e242ac3374c8f291314/acb04/supervised-learning-diagram.jpg 750w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>\"데이터가 어떻게 구성되었는지를 알아내는 문제의 범주에 속한다.\" - 위키피디아</p>\n<p>지도학습과는 다르게 정답이 없는 데이터를 가지고 컴퓨터를 학습시키는 방법이다. 즉 데이터의 형태(특징?)으로 학습을 진행한다. (흔히 알고 있는 군집화..) 그리고 데이터를 이용해 컴퓨터는 스스로 어떤 관계를 찾아낸다.</p>\n<p>비지도학습도 마찬가지로 다음과 같은 알고리즘이 있다</p>\n<p><strong>군집 (Clustering)</strong></p>\n<ul>\n<li>k-평균k-Means</li>\n<li>계층 군집 분석Hierarchical Cluster Analysis (HCA)</li>\n<li>기댓값 최대화Expectation Maximization</li>\n</ul>\n<p><strong>시각화 (Visualization)와 차원 축소(Dimensionality reduction)</strong></p>\n<ul>\n<li>주성분 분석 (Principal Component Analysis (PCA))</li>\n<li>커널 (kernel PCA)</li>\n<li>지역적 선형 임베딩 (Locally-Linear Embedding (LLE))</li>\n</ul>\n<p><strong>연관 규칙 학습 (Association rule learning)</strong></p>\n<ul>\n<li>어프라이어리(Apriori)</li>\n<li>이클렛(Eclat)</li>\n</ul>\n<h2 id=\"강화학습reinforcement-learning\" style=\"position:relative;\"><a href=\"#%EA%B0%95%ED%99%94%ED%95%99%EC%8A%B5reinforcement-learning\" aria-label=\"강화학습reinforcement learning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>강화학습(Reinforcement Learning)</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 621px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2f8992a64f5ce41f3bdce586ea742241/3075e/reinforce.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDUlEQVQoz31T227aQBDNX1f5g772oQ9FlSpVfWqT9KGqStOGikuQyi1ACCG2iTGF2sZge32/gE/HC1RBFR1pNevZ3TPnzIxPNpsN8pWb6zhgjCEIAvi+D89zYRoLrFYr2JaFgGJJmiKKIqTk92/zlWUZ9yd7sIy8ZhjwCIxO+YOZNIJ818V8Poftesjo3kSWUalUeJKtZdjbAWBCPlnoQBxhTYB5gstyDeWf7e1lc4G5IODyqoRWs4letwdlonBm/wJmRJsCy8/PYfW/IdldGBObweAOMe2lty9xf/EBLM0gjEYQRRGaph8BzD/WGzBnQQRdlMtlPDs9RaHwiurowacyOJYJ32EwTRMCMbVtG2EYbkXvQA8A1+sUgRej3hngunaN2sU5bvt9PDVGjSkWi6hWq3gglquVeQSQJK8pYH95gcr7AsSZzoudbKg5u4Tq2RuMSPLMZGg1Gmi3WlCU6UFbnjCkllPUUhpwNBGeH2KxNKCNH2DIjzBUFb9ub6CPJUR5aUguH6PgP5LTNEF+fK9oGAyHcF0XrtIHkyiBpvLGeHGMH6UrPja9bhfT6fSY5IxLZtVzfHr3GjcjCQmNz+y3hkd5gpmxhPb1I5TvRQylMWpUw067g2ajCZXY70H/AmZUwzwH659hKdThhSnSJCbQmLoe8mR6vQSZahfR3tB1WCTZoT/L93wOtgf8AyxBO6a66jNAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"reinforce\"\n        title=\"reinforce\"\n        src=\"/static/2f8992a64f5ce41f3bdce586ea742241/3075e/reinforce.png\"\n        srcset=\"/static/2f8992a64f5ce41f3bdce586ea742241/5a46d/reinforce.png 300w,\n/static/2f8992a64f5ce41f3bdce586ea742241/0a47e/reinforce.png 600w,\n/static/2f8992a64f5ce41f3bdce586ea742241/3075e/reinforce.png 621w\"\n        sizes=\"(max-width: 621px) 100vw, 621px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n(그림 출처 : Hands-On Machine Learning 도서 - 한빛미디어)</p>\n<p>강화학습은 상과 벌이라는 보상을 주며 <code class=\"language-text\">상을 최대화하고 벌을 최소화</code> 하도록 학습하는 방식이다. 주로 제어나 게임 플레이 등 상호작용을 통해서 최적의 동작을 학습해야 할 때 많이 사용된다. 데이터가 먼저 주어지는 지도학습이나 비지도학습과 달리 강화학습은 <strong>환경이 있고 에이전트가 그 환경 속에서 어떤 액션을 취하고 그 액션에 따른 어떤 보상을 얻게 되면서 학습이 진행</strong>된다. 에이전트가 보상을 최대화 하도록 하면서 학습이 진행되기 때문에 데이터 수집까지 포함하는 동적인 개념의 학습을 하게 된다. 우리의 인생으로 비유를 하자면 마치 시행 착오를 겪으며 경험이 쌓이고 경험을 토데로 옳고 그름을 판단을 수 있게 되는 것과 마찬가지다. </p>"},{"id":"722d4cf2-22d7-5ee2-a4f5-8bacb633bdfa","headings":[{"depth":4},{"depth":5},{"depth":4},{"depth":4},{"depth":4},{"depth":4}],"frontmatter":{"title":"카프카(Kafka) 설치 및 클러스터 구성","path":"/kafka-cluster","tags":["DataLake","Kafka","ELK"],"excerpt":"Kafka를 설치하고 간단하게 클러스터 환경을 구성하여 Producer 및 Consumer 테스트를 해보자.","created":"2019-01-25T00:00:00.000Z","createdPretty":"25 January, 2019","updated":"2019-01-25T00:00:00.000Z","updatedPretty":"25 January, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACTElEQVQozw3Q207aYAAA4L8HoNAWeqCcFaEqikIGSEdbC+UglrOAsEmH4sbIphBFYGiYxmTJLpZlcXd7hD3m9j3CB/hM350bcvmJVZmypUe89mTSlkj8ArgLsDdrJJMWTwZzZQxuFWLlQLJT7s3YaAuKdNHkCPjzI650R0gTIj03Srem7PjV+aNdvQQORWxc+eNtxKUSvGawywZKILfLrpRujulI5sacWQHvydJWvbeoU4M8NgnvifQlo/Sx3QrEpui9OhltmvYb1tQba6ROJU4xoccVrpjKktd/oMkvwKYt/a1HNDaAQy0TX6FibciahFkJpkWEUzB3xrhbweNtWtaJZA/snQVPnxyN59DpN6c4BYnxL3/nHn/dxxMdNHBkXsshjIj5jyzrBWw9D3MSGW8Tkm5Rh8TRxCyPieyMKy1D3aeL1R9AiB+gzZqR1/DNYy7RplJv0Z2qOXhMhqtUuGrwZhmhhwmXTG1hO1nR2pJOTwLl6X7zlst+BHCobvBlISplXcuFi0N0q+yXdLH2GWwdWyJN44HOFG+o4gIvPTibX7caS296GFQHG/IZnewCwKQQpwyhUYgUUF4DaNTqUryJDrxThxPnpsIMVRaIcBdsPQvD7y7t2iGeedL9YOPaVRyB/z02XiOdGYgSzaEyTB6we3VffuSqzeOfXhB55lDv3em5/fB6vTx2Kxc4X7JLfd/JNPBuBVCPSobruEdFHYeWbc20USTEga24oAuraOcnCN2sKQ+7xTkljdjDgT3SpGNdX2sWmf9Ov/z9B0Q/f2BKQJK8AAAAAElFTkSuQmCC","aspectRatio":2.0491803278688523,"src":"/static/d5aa304e7f0b59c0f49b3013888d25fe/0853f/cover.png","srcSet":"/static/d5aa304e7f0b59c0f49b3013888d25fe/14156/cover.png 125w,\n/static/d5aa304e7f0b59c0f49b3013888d25fe/d6e47/cover.png 250w,\n/static/d5aa304e7f0b59c0f49b3013888d25fe/0853f/cover.png 500w,\n/static/d5aa304e7f0b59c0f49b3013888d25fe/ce627/cover.png 750w,\n/static/d5aa304e7f0b59c0f49b3013888d25fe/047b8/cover.png 834w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>Kafka를 설치하고 간단하게 클러스터 환경을 구성하여 Producer 및 Consumer 테스트를 해보자.</p>\n<p>먼저 가상머신을 이용해 다음 그림과 같이 클러스터 환경을 구성하여 테스트를 진행할 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1172px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/473e8df68fe8b16fdada7cc1271a949d/511f0/kfc-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABcRAAAXEQHKJvM/AAADC0lEQVQ4y32T62/bZBTG8x8hvsIXPsI0JhBDaEJCIK0SGx+ATVs0rWVi+UCF2k3qLu3WsQuaJjpYW7aqaANGUenKstZJL8lSrCyJ0yyp4yS2c7Mdxz98yQoREkc6sl+/r5/znPc8TyiVSiGsrhATBKRcFsfpYpomnU6HdruNLMuUSkXKZZmdnRL1eh3LsnbTtMzd9NahbCbD5tMtCjsKpoMfjhO82LbNZiLJ74tLRFcEok9WfMD/i5DlMmksfos2cxrdzU4h6W90u10c22TyrsiR8xsMXklw4vIGNdUDDApatsF0bJzbq2P8IFyg3lZdQLuLOvkR1cgrlE++RO3xDOZuPYsTE3EOn41z84HE3vBSDzAItVHl2PQ+js/u4+j0XmS94DG0aUwdQzv7JvXR11GFedL5otua7jXN6WsbvHsq6oO+H4lS7TGUcnmey9t89eAgwz8PMPzLANWmTMgbgBT/g9zj+6QWZlBLeUy3iCiKGK0G9xYlznyXYvhmkonZv9D0BtlsBkVRMIw2y+sLRJOLLMUeotW9lt3JdPzmwPA5BVFvNCk9lxi5leDQmRiRG0k+cVk+y0hUlPI/U+j2rtT27t0JWjbXfqL160Xav13CKIoUSmXS6TRadYfjFwUGRuJcnc+yJ/yIfKHI9nYeScr7UskoCUR5jWfKJh3bCoZSu/whSuRVyoMvk7l/FVlr0bU7fvmx71Mcdhl+OrbG5+fiqHrTJ6aUK6RzIl/Of8DgvfcYmjuAUi8GgM1bn6GPvoE2/BpW8mFPjF3sjiuLhQyR6wm35QTn72z1yUZvqYRn3+bk3H7Cd99CaRSDoeQezbnMrvP0xwmK4npPh45/s6e+Wefg1wKjUyL7v1juA2wZTaaWL3DnySVu/zmOosrBUEz3Yj3ttdynYdm+UwKzWAxNeoAxzk2neWdouU+H3r8VuYZa0Slul9A1nZDn2V6Pu5WdFxZ0nTIxs8WhUYGPR1YJj69Rrel9Z/5jPcMwfJt5vv13et+8vVpNc1kFWamqNJvNvvMeoRfprf8Go9vjOyrzgcMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/473e8df68fe8b16fdada7cc1271a949d/511f0/kfc-01.png\"\n        srcset=\"/static/473e8df68fe8b16fdada7cc1271a949d/5a46d/kfc-01.png 300w,\n/static/473e8df68fe8b16fdada7cc1271a949d/0a47e/kfc-01.png 600w,\n/static/473e8df68fe8b16fdada7cc1271a949d/511f0/kfc-01.png 1172w\"\n        sizes=\"(max-width: 1172px) 100vw, 1172px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이 글에서는 3대의 서버를 생성하였지만 1대의 서버로 포트를 다르게 하여 구성할 수도 있다. 또한 Kafka와 Zookeeper서버를 동일한 장비에 구축하였지만 실무에서는 별도로 구축하는 것이 좋다.</p>\n<h4 id=\"kafka-다운로드-및-설치\" style=\"position:relative;\"><a href=\"#kafka-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C-%EB%B0%8F-%EC%84%A4%EC%B9%98\" aria-label=\"kafka 다운로드 및 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka 다운로드 및 설치</h4>\n<p>다운로드(각 버전에 대해서는 <a href=\"https://kafka.apache.org/downloads%EB%A5%BC\">https://kafka.apache.org/downloads를</a> 참고하자.)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">wget</span> http://apache.mirror.cdnetworks.com/kafka/2.1.0/kafka_2.11-2.1.0.tgz</code></pre></div>\n<p>압축해제 및 경로이동</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">tar</span> -zxvf kafka_2.11-2.1.0.tgz\n$ <span class=\"token builtin class-name\">cd</span> kafka_2.11-2.1.0</code></pre></div>\n<p>Kafka의 동작은 Zookeeper에 의해 관리가 되기 때문에 Zookeeper 없이는 Kafka를 구동할 수 없다. 이 때문에 Kafka를 다운로드 하면 Zookeeper도 함께 들어있다. 물론 별도로 최신버전의 Zookeeper를 다운받아 사용해도 되지만, Kafka에 들어있는 Zookeeper는 Kafka버전과 잘 동작하는 검증된 버전이므로 패키지 안에 있는 Zookeeper의 사용을 권장한다.</p>\n<h5 id=\"zookeeper-설정\" style=\"position:relative;\"><a href=\"#zookeeper-%EC%84%A4%EC%A0%95\" aria-label=\"zookeeper 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zookeeper 설정</h5>\n<p>각 인스턴스에 설치된 Kafka의 config/zookeeper.properties 파일은 하나의 Zookeeper를 실행하는데 쓰이는 설정 파일이다. 이 말은 zookeeper1.properties, zookeeper2.properties, zookeeper3.properties 이런식으로 여러개의 설정파일을 만들고 하나의 장비에서 다중으로 실행할 수 있다는 의미이다. 설정파일을 다음과 같이 3대의 서버에 동일하게 추가하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> config/zookeeper.properties</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># the directory where the snapshot is stored.</span>\n<span class=\"token assign-left variable\">dataDir</span><span class=\"token operator\">=</span>**/tmp/zookeeper**\n\n<span class=\"token comment\"># the port at which the clients will connect</span>\n<span class=\"token assign-left variable\">clientPort</span><span class=\"token operator\">=</span><span class=\"token number\">2181</span>\n\n<span class=\"token comment\"># disable the per-ip limit on the number of connections </span>\n<span class=\"token comment\"># since this is a non-production config</span>\n<span class=\"token assign-left variable\">maxClientCnxns</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\n\n<span class=\"token assign-left variable\">initLimit</span><span class=\"token operator\">=</span><span class=\"token number\">5</span>\n<span class=\"token assign-left variable\">syncLimmit</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>\n\nserver.1<span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.137.101:2888:3888\nserver.2<span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.137.102:2888:3888\nserver.3<span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.137.103:2888:3888</code></pre></div>\n<p>새로 추가한 설정값은 클러스터를 구성하는데 필요한 설정 값들안데 여기서 주의할 점은 모든 Zookeeper 서버들은 동일한 변수 값을 가지고 있어야 한다.</p>\n<p><strong>initLimit</strong></p>\n<p>팔로워가 리더와 초기에 연결하는 시간에 대한 타임아웃</p>\n<p><strong>syncLimit</strong></p>\n<p>팔로워가 리더와 동기화 하는데에 대한 타임아웃. 즉 이 틱 시간안에 팔로워가 리더와 동기화가 되지 않는다면 제거 된다.</p>\n<p>이 두값은 dafault 기본값이 없기 때문에 반드시 설정해야 하는 값이다.</p>\n<p>그리고 server.1,2,3의 숫자는 인스턴스 ID이다. ID는 dataDir=/tmp/zookeeper 폴더에 myid파일에 명시가 되어야 한다.</p>\n<p>/tmp/zookeeper 디렉토리가 없다면 생성하고 myid 파일을 생성하여 각각 서버의 고유 ID값을 부여해야 한다. </p>\n<p>(그 외 자세한 설정정보를 알고 싶다면 <strong>주키퍼 가이드문서</strong>를 참고하자.)</p>\n<p><strong>1 서버 (192.168.137.101)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> /tmp/zookeeper\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token number\">1</span> <span class=\"token operator\">></span> /tmp/zookeeper/myid</code></pre></div>\n<p><strong>2 서버 (192.168.137.102)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> /tmp/zookeeper\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token number\">2</span> <span class=\"token operator\">></span> /tmp/zookeeper/myid</code></pre></div>\n<p><strong>3 서버 (192.168.137.103)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> /tmp/zookeeper\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token number\">3</span> <span class=\"token operator\">></span> /tmp/zookeeper/myid</code></pre></div>\n<p>이제 Zookeeper를 구동하기 위한 설정은 끝~</p>\n<h4 id=\"kafka-설정\" style=\"position:relative;\"><a href=\"#kafka-%EC%84%A4%EC%A0%95\" aria-label=\"kafka 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka 설정</h4>\n<p>Kafka의 config/server.properties 파일은 하나의 Kafka를 실행하는데 쓰이는 설정 파일이다. Zookeeper와 마찬가지로 여러개의 설정파일을 만들고 다중 실행을 할 수 있다.</p>\n<p>설정파일 config/server.properties에 3대 서버 각 환경에 맞는 정보를 입력해 준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> config/server.properties</code></pre></div>\n<p><strong>1 서버 (192.168.137.101)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">broker.id<span class=\"token operator\">=</span><span class=\"token number\">1</span>\n<span class=\"token assign-left variable\">listeners</span><span class=\"token operator\">=</span>PLAINTEXT://:9092\nadvertised.listeners<span class=\"token operator\">=</span>PLAINTEXT://**192.168.137.101**:9092\nzookeeper.connect<span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.137.103:2181</code></pre></div>\n<p><strong>2 서버 (192.168.137.102)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">broker.id<span class=\"token operator\">=</span><span class=\"token number\">2</span>\n<span class=\"token assign-left variable\">listeners</span><span class=\"token operator\">=</span>PLAINTEXT://:9092\n\nadvertised.listeners<span class=\"token operator\">=</span>PLAINTEXT://**192.168.137.102**:9092\nzookeeper.connect<span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.137.103:2181</code></pre></div>\n<p><strong>3 서버 (192.168.137.103)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">broker.id<span class=\"token operator\">=</span><span class=\"token number\">3</span>\n\n<span class=\"token assign-left variable\">listeners</span><span class=\"token operator\">=</span>PLAINTEXT://:9092\n\nadvertised.listeners<span class=\"token operator\">=</span>PLAINTEXT://**192.168.137.103**:9092\n\nzookeeper.connect<span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.137.103:2181</code></pre></div>\n<p>별도 파일(/tmp/zookeeper/myid)에 인스턴스 ID를 명시해야 하는 Zookeeper와는 달리 Kafka는 설정파일안에 broker.id라는 항목이 있다.</p>\n<p>그리고 zookeeper.connet라는 항목에는 Zookeeper인스턴스들의 정보를 입력해준다.</p>\n<p>Kafka를 구동하기 위한 설정은 끝났다. 클러스터 구성을 위한 인스턴스들의 정보를 입력해 주는것이 거의 대부분의 설정이다.</p>\n<p>그외 설정 파일에 대한 상세한 내용은 공식 홈페이지의 <a href=\"http://kafka.apache.org/documentation/#brokerconfigs\"><strong>Broker Configs</strong></a>를 참고하길 바란다. default설정값을 확인하고 변경하고자 하는 값들은 설정파일에 명시를 해주면 된다.</p>\n<h4 id=\"zookeeper-및-kafka-서버-구동\" style=\"position:relative;\"><a href=\"#zookeeper-%EB%B0%8F-kafka-%EC%84%9C%EB%B2%84-%EA%B5%AC%EB%8F%99\" aria-label=\"zookeeper 및 kafka 서버 구동 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zookeeper 및 Kafka 서버 구동</h4>\n<p>Kafka를 구동하기 위해 먼저 Zookeeper를 구동 한다음 이후 Kafka를 구동해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bin/zookeeper-server-start.sh config/zookeeper.properties\n$ bin/kafka-server-start.sh config/server.properties</code></pre></div>\n<p>3대의 서버에 Zookeeper와 Kafka가 정상적으로 구동이 되었다면 다음과 같이 starting 메시지를 확인할 수 있을 것이다.</p>\n<p>*starting (kafka.server.KafkaServer)</p>\n<p>이제 기본적인 클러스터 환경을 구성하고 서버를 구동시켰다.</p>\n<p>Kafka에서는 bin폴더 아래 제공되는 스크립트 파일을 이용해 Topic을 관리하고 Producer,Consumer를 테스트 해볼수 있다.</p>\n<p>기본적인 몇가지 스크립트 명령을 이용해 Topic을 생성해 보고 Producer 메시지를 저장하고 Consumer 메시지를 읽어오는것을 확인해 보도록 하자.</p>\n<h4 id=\"topic-관리\" style=\"position:relative;\"><a href=\"#topic-%EA%B4%80%EB%A6%AC\" aria-label=\"topic 관리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Topic 관리</h4>\n<p><strong>1. Topic생성</strong></p>\n<p>GameLog, GameLog2, GameLog3 세개의 Topic을 생성해보자.(replication-factor:3, partitions : 1)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bin/kafka-topics.sh --create --zookeeper <span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.137.103:2181 --replication-factor <span class=\"token number\">3</span> --partitions <span class=\"token number\">1</span> --topic GameLog\n$ bin/kafka-topics.sh --create --zookeeper <span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.137.103:2181 --replication-factor <span class=\"token number\">3</span> --partitions <span class=\"token number\">1</span> --topic GameLog2\n$ bin/kafka-topics.sh --create --zookeeper <span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.137.103:2181 --replication-factor <span class=\"token number\">3</span> --partitions <span class=\"token number\">1</span> --topic GameLog3</code></pre></div>\n<p>출력 <em>Created topic \"GameLog\"</em></p>\n<p><strong>2. Topic 리스트 확인</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bin/kafka-topics.sh --list --zookeeper <span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.0.103:2181</code></pre></div>\n<p>출력 GameLog GameLog2 GameLog3</p>\n<p><strong>3. Topic 삭제</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bin/kafka-topics.sh --delete --zookeeper <span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.137.103:2181 --topic GameLog3</code></pre></div>\n<p>출력 <em>Topic GameLog3 is marked for deletion</em></p>\n<p><strong>4. Topic 상세 정보 확인</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bin/kafka-topics.sh --describe --zookeeper <span class=\"token number\">192.168</span>.137.101:2181, <span class=\"token number\">192.168</span>.137.102:2181, <span class=\"token number\">192.168</span>.137.103:2181</code></pre></div>\n<p>출력 <em>PartitionCount:1 ReplicationFactor:3..</em></p>\n<p>토픽을 생성했으면 해당 토픽에 메시지를 생산하고 소비하는것을 직접 확인해보자.</p>\n<h4 id=\"메시지-생산-및-소비\" style=\"position:relative;\"><a href=\"#%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%83%9D%EC%82%B0-%EB%B0%8F-%EC%86%8C%EB%B9%84\" aria-label=\"메시지 생산 및 소비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>메시지 생산 및 소비</h4>\n<p><strong>1.Producer 메시지 생산하기</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bin/kafka-console-producer.sh --broker-list <span class=\"token number\">192.168</span>.137.101:9092,192.168.137.102:9092,192.168.137.103:9092 --topic GameLog</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 762px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8655d49a4820e52b9918d1fe72c11f40/a016c/kfc-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAnklEQVQI123M4QqCMBDA8b2PM9M5y9Ttlo2UOUXIORRC6P3foWl9KBB+HP8Pd4eGcen6ueunprVNO3LZS2Wkekg1VNrWrS1KzW7dmdWZUMVVX2Cd+RZoME+3UWtzyqs4geTsiIDCIYaAuhA4Yl7IMOFrRAz/QMYuKSg/BiekvMxYWXB3ueH+N/64j59A0/xK8/sxZhEVhAIm4JGdg11vV5g5swKmtKsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/8655d49a4820e52b9918d1fe72c11f40/a016c/kfc-02.png\"\n        srcset=\"/static/8655d49a4820e52b9918d1fe72c11f40/5a46d/kfc-02.png 300w,\n/static/8655d49a4820e52b9918d1fe72c11f40/0a47e/kfc-02.png 600w,\n/static/8655d49a4820e52b9918d1fe72c11f40/a016c/kfc-02.png 762w\"\n        sizes=\"(max-width: 762px) 100vw, 762px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><strong>2.Consumer 메시지 소비하기</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bin/kafka-console-consumer.sh --bootstrap-server <span class=\"token number\">192.168</span>.137.101:9092,192.168.137.102:9092,192.168.137.103:9092 --topic GameLog --from-beginning</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 759px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6cb08f54ad9045d799356f3f26eee1f2/ef3e1/kfc-03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAqUlEQVQI132M6wqCQBBGfR9T21uGYTumW5q31SXdNKH3f4omg6A/wWH4ZvjOOLqfB/usW4uhM8u5GlU5VN2MFI0tu6nS07W9X+qx1BNyynuZNaBaUNrpzaOobZr3PFKEy3CfiBC2AnwGHpM+h0AkGyoDnmDA1SWxS44fHHNbRJzTfeqLhAiAg8xiSXdoogbY/uKtE1/g/Q0Hx5g5jDLCJBXA1rbLfpw/vABcgzroFEspYgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/6cb08f54ad9045d799356f3f26eee1f2/ef3e1/kfc-03.png\"\n        srcset=\"/static/6cb08f54ad9045d799356f3f26eee1f2/5a46d/kfc-03.png 300w,\n/static/6cb08f54ad9045d799356f3f26eee1f2/0a47e/kfc-03.png 600w,\n/static/6cb08f54ad9045d799356f3f26eee1f2/ef3e1/kfc-03.png 759w\"\n        sizes=\"(max-width: 759px) 100vw, 759px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>from-beginning 옵션은 해당 topic의 맨 처음 메시지부터 소비하겠다는 의미이다.</p>\n<p>그림에서 보는 것과 같이 Producer에서 메시지를 입력하면 Consumer에서 해당 메시지를 읽어오는 것을 확인 할 수 있다.</p>\n<p>지금까지 Kafka 클러스터를 직접 구축하여 메시지 생산하고 소비하는 것을 간단하게 해보았다.</p>"},{"id":"78fb87d5-8ab5-5572-a79f-aee860e7077b","headings":[{"depth":3},{"depth":3},{"depth":4},{"depth":4},{"depth":4}],"frontmatter":{"title":"카프카(Kafka)의 이해","path":"/what-is-kafka","tags":["DataLake","Kafka","ELK"],"excerpt":"대용량 게임로그 수집을 위해 Elastic Stack을 도입하게 되었는데, 중간에 버퍼역할(메시지큐)을 하는 Kafka에 대서 알아보려고 한다.","created":"2019-01-18T00:00:00.000Z","createdPretty":"18 January, 2019","updated":"2019-01-18T00:00:00.000Z","updatedPretty":"18 January, 2019","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACB0lEQVQozxWS+08aQRSFN3HuvTNrmtbaULQIC7sLCwvL8hDFB1Z5Q5eHRimoIKRQrDFtrWnS/76zyfz6zXfOnFHY2wDsxChkQrxA7jkz85Cp8O6CPl/jxYgPf4jhkxg8Um0CmSOmu2gfkZ7FoMbeBRT4qJFVxF2daWmIOZDY56Wm+LKk+q0E+GDNOwtq3vPWlC6umLVP6RPQs5LaeB9UMJIkw4FQHJIHLGKDdcBPB3g6FN5SXP/k3pJfPkmYWlNx+QhOhYWTTEv5Mh+OpnEvgbE0pEosmua5c37Qoe6DOn7B5pQ6D9iZiZtnqo1lFyzWWTgF6TJ+MmB7VwEJhxOo2UzPMsPl1RFvzfjwkQ/XUP2KzQm27nn/u+guhPcND7t+OudYmjGSUlDPkGZD2AIzJw9v3G2OfovqWPRW1JlTd079lWyuDtaicYv2sXSAmceQifGCIrXczEkzZiugu1SoSUy9epYheXsuMWrPVW+p9lbyISFRBKuEZp5k7B1dYR9CGM3QXhwMF+N5uYRo3KnjP5uzf/5I/bXqrdSbX3IzPGyzmIPZM+n0w0oY3myzQISituwA1r5/t1Ph7ZmYvKrjV/X2rxi98N4KTofMKoF9hO4ZhS1yTiCUUNjmFoRMyp1xOXKqDPkqS5UxV8Xjvvwk5M3x/AaKzY1keSN5iIU6GjmKJMHIwFbwP8/LYl6rZSiWAAAAAElFTkSuQmCC","aspectRatio":2.0491803278688523,"src":"/static/d0e1435f0f76fea2822ee40147f12b39/0853f/cover.png","srcSet":"/static/d0e1435f0f76fea2822ee40147f12b39/14156/cover.png 125w,\n/static/d0e1435f0f76fea2822ee40147f12b39/d6e47/cover.png 250w,\n/static/d0e1435f0f76fea2822ee40147f12b39/0853f/cover.png 500w,\n/static/d0e1435f0f76fea2822ee40147f12b39/ce627/cover.png 750w,\n/static/d0e1435f0f76fea2822ee40147f12b39/e8d2a/cover.png 816w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p>대용량 게임로그 수집을 위해 Elastic Stack을 도입하게 되었는데, 중간에 버퍼역할(메시지큐)을 하는 Kafka에 대서 알아보려고 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/984e8ecef47cbcc837ebdc9974fdd564/3f20e/kafka-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABcRAAAXEQHKJvM/AAABT0lEQVQY0wFEAbv+ABISExwWFRQm////AQAAAAD///8AampqDAwMDDMVFhYW////AHugrgLV//8E2v//BP///wFORYEPKRtGMisdSTBnUKAM////ArL//wS4//8EAO7u7dvj5OTf4ObprgAAAADq6elU4uPj3OPj49jt7e3k7e7uhufi4GTpx7re5rmozuvHvdDg483SyNmm1sbVpNjf5c7S79TF0OvNuNHs08LRAOrn5f/d8vz/fM3u/BOr6XrIyst4u7q6/8DAwP/V1NT/1drbr9S6sYX0cUD/5EcK/+lPIf++yXT/jcoW/4vGDv+20G7/+5tp//aEM//1hzz/AO/v7//z9fb/4ert1QAAAADd3t5r5+fn/+fn5/j09PT/5ujopePa1nv3xrP/6a2V+ey0o/zc4MD8x96a/cfdl/3a47/88s26/O/Fp/zvyK38cZDc1MumzL4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/984e8ecef47cbcc837ebdc9974fdd564/c1b63/kafka-1.png\"\n        srcset=\"/static/984e8ecef47cbcc837ebdc9974fdd564/5a46d/kafka-1.png 300w,\n/static/984e8ecef47cbcc837ebdc9974fdd564/0a47e/kafka-1.png 600w,\n/static/984e8ecef47cbcc837ebdc9974fdd564/c1b63/kafka-1.png 1200w,\n/static/984e8ecef47cbcc837ebdc9974fdd564/3f20e/kafka-1.png 1275w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"메시지큐\" style=\"position:relative;\"><a href=\"#%EB%A9%94%EC%8B%9C%EC%A7%80%ED%81%90\" aria-label=\"메시지큐 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>메시지큐?</h3>\n<p>메시지 지향 미들웨어(Message Oriented Middleware: MOM)은 비동기 메시지를 사용하는 다른 응용프로그램 사이의 데이터 송수신을 의미하는데 MOM을 구현한 시스템을 메시지큐(Message Queue:MQ)라 한다.</p>\n<h3 id=\"카프카란\" style=\"position:relative;\"><a href=\"#%EC%B9%B4%ED%94%84%EC%B9%B4%EB%9E%80\" aria-label=\"카프카란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>카프카란?</h3>\n<p>분산형 스트리밍 플랫폼(A distributed streaming platform)이다. LinkedIn에서 여러 구직 및 채용 정보들을 한곳에서 처리(발행/구독)할 수 있는 플래폼으로 개발이 시작 되었다고 한다.</p>\n<p>(발행/구독: pub-sub은 메시지를 특정 수신자에게 직접적으로 보내주는 시스템이 아니고, 메시지를 받기를 원하는 사람이 해당 토픽(topic)을 구독함으로써 메시지를 읽어 올 수 있다.)</p>\n<h4 id=\"카프카의-특징\" style=\"position:relative;\"><a href=\"#%EC%B9%B4%ED%94%84%EC%B9%B4%EC%9D%98-%ED%8A%B9%EC%A7%95\" aria-label=\"카프카의 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>카프카의 특징</h4>\n<p>대용량 실시간 로그처리에 특화되어 설계된 메시징 시스템으로 TPS가 매우 우수하고,</p>\n<p>메시지를 메모리에 저장하는 기존 메시징 시스템과는 달리 파일에 저장을 하는데 그로 인해 카프카를 재시작해도 메시지 유실 우려가 감소된다.</p>\n<p>기본 메시징 시스템(rabbitMQ, ActiveMQ)에서는 브로커(Broker)가 컨슈머(consumer)에게 메시지를 push해 주는 방식인데, 카프카는 컨슈머(Consumer)가 브로커(Broker)로부터 메시지를 직접 가져가는 PULL 방식으로 동작하기 때문에 컨슈머는 자신의 처리 능력만큼의 메시지만 가져와 최적의 성능을 낼 수 있다. 대용량처리에 특화 되었다는 것은 아마도 이러한 구조로 설계가 되어 가능하게 된게 아닌가 싶다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 963px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/31bca4855eb5e365bdf21007dcdf393f/e4a12/kafka-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABcRAAAXEQHKJvM/AAABDElEQVQY0yWQXU+CYBiG+eEdtHXYUf8hR7XVppXVPLCPhRqiOXwTP4akEGAIr0BqR1doB9d279mue7sfJY5CtlnCOo3Z5gnR9wLf98nSFbYzp6F3eNZavDTeitxlYjuEgY+UklTGe2/HpuhYJTGKJmZc6S43hku57WGYFvX6I8PRmP7Q5rp6z2mphKqqVB9qtDomr1oTIQSmHVBpu9x1Pcr6jIEToJw9DTi6NDm5/eDwvEuzP+UrjHC8BYYY0xNDxCTAmoYIa7K/zcMlc8+nqtscXvQ4rggO1A41fYSyjCJkkhDHMSuZFFNT8izjd7PG/nTRDJPmu0WrYJenM5ft+oc8z/Zv2XnLgn9f8gecwRr65NGmXwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/31bca4855eb5e365bdf21007dcdf393f/e4a12/kafka-2.png\"\n        srcset=\"/static/31bca4855eb5e365bdf21007dcdf393f/5a46d/kafka-2.png 300w,\n/static/31bca4855eb5e365bdf21007dcdf393f/0a47e/kafka-2.png 600w,\n/static/31bca4855eb5e365bdf21007dcdf393f/e4a12/kafka-2.png 963w\"\n        sizes=\"(max-width: 963px) 100vw, 963px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>여기서 한가지 의문이 든다. 일반적으로 파일보다 메모리가 성능이 우수한데 왜 카프카가 성능이 좋은 것일까? 그 이유는 카프카의 파일 시스템을 활용한 고성능 디자인에 있다. 일반적으로 하드디스크는 메모리보다 수백배 느리지만 하드디스크의 순차적 읽기에 대한 성능은 메모리보다 크게 떨어지지 않는다고 한다. </p>\n<p>컨슈머(Consumer)와 브로커(Broker)에 대해서는 카프카 구성요소에 대한 설명에서 좀 더 자세히 알아보자.</p>\n<h4 id=\"카프카의-구성요소\" style=\"position:relative;\"><a href=\"#%EC%B9%B4%ED%94%84%EC%B9%B4%EC%9D%98-%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C\" aria-label=\"카프카의 구성요소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>카프카의 구성요소</h4>\n<p>카프카에는 다음과 같이 여러 구성요소가 있다.</p>\n<p><strong>topic, partition, offset</strong></p>\n<p><strong>producer, consumer, consumer group</strong></p>\n<p><strong>broker, zookeeper</strong></p>\n<p><strong>replication</strong></p>\n<p>구성요소 하나씩 살펴보도록 하자.</p>\n<p><strong>Topic, Partition</strong> : 카프카에 저장되는 메시지는 topic으로 분류되고, topic은 여러개의 patition으로 나눠질수 있다. partition안에는 message의 상대적 위치를 내타내는 offset이 있는데 이 offet정보를 이용해 이전에 가져간 메시지의 위치 정보를 알 수 있고 동시에 들어오는 많은 데이터를 여러개의 파티션에 나누어 저장하기 때문에 병렬로 빠르게 처리할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/91c3610af56095bf597662910190cad0/f2b95/kafka-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABcRAAAXEQHKJvM/AAABQ0lEQVQoz2WS6XaCMBCFef8XsmLZoXjcEBH7pxjAsInsD3CbxOJpT3985062OzNJpGEY0Pc9uI7jgK4fQGgj+LzeQcsW0zSy9ZGtTyLuiwRdRdneHm3b/kFK0xRZliE8n3EOApx8H4fDk+3uCM/zxfzR83DY77ExFXwFe5RF/lPEyJJMAh5L3IxSCk1VsZJlvC0WUN5XUFYcWai8XMIyTZEsDEOQOEFZVmiaRjBXxxNIURSBEIIPx4FtWjB0XRzmmIbx0rXr4hJekOf5y6iqKhRFIQqK4/jZ8vUasQGBY1vssAFDU2FxI0OHqWsMnSWzsVm7WH84CE4+M7ihrutXdXProkJ+hyROYdkuNN2CohpMbRHP4+3OA0ko7o8ORfVAVbMWu6fJzGwq8dfjL8lJ8gbpP9h81jAeIr4VrfgBlOls9JtvSaD2OqnS9UgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/91c3610af56095bf597662910190cad0/c1b63/kafka-3.png\"\n        srcset=\"/static/91c3610af56095bf597662910190cad0/5a46d/kafka-3.png 300w,\n/static/91c3610af56095bf597662910190cad0/0a47e/kafka-3.png 600w,\n/static/91c3610af56095bf597662910190cad0/c1b63/kafka-3.png 1200w,\n/static/91c3610af56095bf597662910190cad0/f2b95/kafka-3.png 1515w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><strong>Producer, Consumer</strong> : 말대로 Producer는 생산(메시지를 Write)하는 주체, Consumer는 소비(메시지를 Read)하는 주체이다. Producer와 Consumer간에는 상호 존재 여부를 알지 못한채 자신에게 주어진 역할만 처리 하게 된다. (위 그림에서 보면 Writes가 Producer)</p>\n<p><strong>Consumer Group</strong> : Producer에서 생산(Write)한 메시지는 여러개의 파티션에 저장을 하는데, 그렇다면 소비하는(Consumer)하는 쪽에서도 여러 소비자가 메시지를 읽어가는것이 훨씬 효율적일 것이다. 하나의 목표를 위해 소비를 하는 그룹, 즉 하나의 토픽을 읽어가기 위한 Counsumer들을 Consumer Group라고 한다.</p>\n<p>하지만 이 Consumer Group에는 한가지 룰이 있다. Topic의 파티션은 그 Consumer Group과 1:n 매칭. 즉, 자신이 읽고 있는 파티션에는 같은 그룹내 다른 컨슈머가 읽을 수 없다. (파티션에는 동일한 Consumer Group을 위한 하나의 구멍이 있고, Consumer는 그 구멍에 빨대를 꽂아 읽어간다고 생각하면 쉽게 상상이 될지도….^^;)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/77fd5e51454a353a20d2f770df92d6cc/7575b/kafka-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABcRAAAXEQHKJvM/AAABbUlEQVQY00WRS2/aUBCF/f83WVTdRN1U6oYqiiK1SXEcPwiPygiKmxaCDX4AJn4/Yf/14lbq4tO5M7o6OjMj5XlO0zRUVdXRNDVhlBOEGbafdHrpVXVD3bQURUF4PFKUJaX4XwqtBdWlFkhpmhKGIbvdjvlsxuLHnOl0hmnOGE9MpvMFlmUxkRXGssxkPMJ3txR5RltXmKsDxssR3doTxhlSFEV4nodj22hPT+iaJlA7VfvfUHo9VFGbzwPc3wv22zXRzqVK3jhlb9wMba4eHK6+LnH3EVIcxwRBwGazYWAYPA8Gf3U4RNd1jLtblE8f0eV7piOjMyyTI22R0ArD29Gad/017x+WeIfof0JbJFT/JdRUlcfeZx77snhrTFSF9fIX7nJB6G8o00gYipHzmC/fHa4Vhw/KK/4hRros+XKMLMvwfZ9A4IvE7ouFt/qJ76wIg22X6lymnM9n2tOJtm1pBElWCHKSNBdHqvkDEYinXOLdlHUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/77fd5e51454a353a20d2f770df92d6cc/c1b63/kafka-4.png\"\n        srcset=\"/static/77fd5e51454a353a20d2f770df92d6cc/5a46d/kafka-4.png 300w,\n/static/77fd5e51454a353a20d2f770df92d6cc/0a47e/kafka-4.png 600w,\n/static/77fd5e51454a353a20d2f770df92d6cc/c1b63/kafka-4.png 1200w,\n/static/77fd5e51454a353a20d2f770df92d6cc/7575b/kafka-4.png 1608w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위 그림과 같이 하나의 토픽에 4개의 파티션이 있고 컨슈머그룹내 3개의 컨슈머가 있다면 컨슈머1,2,3은 각 파티션 1,2,3에 순차적으로 배치가 될 것이고, offset정보를 이용해 순차적으로 데이터를 읽게 된다. 문제는 파티션4인데 컨슈머 갯수가 파티션 갯수보다 작다면 컨슈머 1,2,3중 하나가 파티션4에 접근하여 데이터를 읽게 된다. 만약 파티션 갯수와 컨슈머 갯수가 동일하개 4개씩이라면 각 컨슈머들은 하나의 파티션에서 데이터를 읽게 될것 이고, 파티션갯수가 4개고 컨슈머 갯수가 5개이면 컨슈머5는 그냥 아무일도 안하게 된다.(일반적으로 파티션 갯수와 컨슈머 갯수는 동일하게 구성하는 것을 추천한다고 함.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dd1df7bbbc2edce0b70b8f44c48d662b/f33fc/kafka-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABcRAAAXEQHKJvM/AAABG0lEQVQY0xXPTU/CQBgEYH64Z+Mv8KAXE3vwRGoiqUYUJPIpYCA0FGpbWtruu9stXVLw1OxYzzN5JtPIKEJOHg58D0EEKfOqLE8gIlOyQB1lVGeJFpzrQh0hMqk4pUZOAQoR6pynmhNHUSh4foAGhSvETgdlXZg6DK1pVI23ApxzM/2ZqMwbQgmmP5axtuYJRva+HkmNZDtAHky0YFy/zEK0ZjEG3w4aIrKRbnr4FTuYfRcXD/PqvuvWIJnMq0F/iIISffe21pemjeano84HZiRuDe6mOomZvrZWuHq08dxf/IMrsE0XZx6gM/dx+/RVWeMtiDFT5aROSuAgpX6d+bo58tFb+ErlmaEkQ1lfTsJQG+9r3LRdtIdL/AGhgBmE9BJWawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/dd1df7bbbc2edce0b70b8f44c48d662b/c1b63/kafka-5.png\"\n        srcset=\"/static/dd1df7bbbc2edce0b70b8f44c48d662b/5a46d/kafka-5.png 300w,\n/static/dd1df7bbbc2edce0b70b8f44c48d662b/0a47e/kafka-5.png 600w,\n/static/dd1df7bbbc2edce0b70b8f44c48d662b/c1b63/kafka-5.png 1200w,\n/static/dd1df7bbbc2edce0b70b8f44c48d662b/d61c2/kafka-5.png 1800w,\n/static/dd1df7bbbc2edce0b70b8f44c48d662b/f33fc/kafka-5.png 1905w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>컨슈머그룹이 존재하는 또 다른 이유가 있다. 물론 이러한 구조로 데이터를 병렬로 읽게 되어 빠른처리가 가능하다는 부분도 있겠지만, 특정 컨슈머에 문제가 생겼을 경우 다른 그룹내 컨슈머가 대신 읽을 수 있게 리벨런싱이 되어 장애 상황에서도 문제 없이 대처할 수 있게 된다.</p>\n<p><strong>Broker, Zookeeper</strong> : broker는 카프카 서버를 칭한다. 동일한 노드내에서 여러개의 broker서버를 띄울 수 있고, Zookeeper는 이러한 분산 메시지큐의 정보를 관리해주는 역할을 한다. 카프카를 띄우기 위해서는 반드시 주키퍼가 실행되어야 한다.</p>\n<p><strong>Replication</strong> : 카프카에서는 replication 수를 임의로 지정하여 topic를 만들 수 있다. replication-factor에 지정하는데 만약 3으로 하면 replication 수가 3이 된다.</p>\n<p>Kafka Cluster에 3개의 broker가 있고 3개의 Topic이 있다고 가정해보자.</p>\n<p>Topic-1은 replication-factor 1, Topic-2은 replication-factor 2, Topic-3은 replication-factor 3인 경우이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 999px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d7876e7b37b5b7fbfc188e07f96f82d5/20c85/kafka-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABcRAAAXEQHKJvM/AAACF0lEQVQoz0WSW2sTQQCF8ytF/AEiaBVERClVFItFKdbbk9VWrVaLSpFCLQELKZtGoUhNss1lk83uziZ7vyWt7dPnZKvtw+HMnJk5nDMzBT8ICONYIsQPQzw598OIbDhE2H2qtRptrcNutUajpZGkKXGSEMkzUZwQRnG+P82GWJZFQTdtmnpEoxPjuvsk0RH2IKFnO7QNh6rm0hU+bhBjDXyE46MLhx3VQu0MMGxP6h76mE2TQlcabvz6ykrlFas7L1j5OcdWtYghAgaehCuTRAn7wyxPZTvHpsKJZLKULMsYSthuiDk27Bg2nyqLzG9O83hjium1y3xRljHtCCcIGcrqcZoRZyP8KD0xjKX5KEtJZf1EjoUTnBp6a09J310jWbzC8Nk5eusv6fgHCGWV6O0E/psJwudn0BeuyopOniYcHZAdHpH+Ocxhe9GxYdfsY6wvIT7MYr6fwZy/Sav4ma4/wvjxHbH8EFOuiYVbtD4+wey78rEcgvpvskaNtFElru/K+7MxLUFBMwT20jz+3D2cmUnc6+dpLb9GC0dYxW/4j+7izN7Bm7yI9uA2hnyYXrOFff8G/uwU7uQFzEtnaSgKlutRGFfoyu+g11W66l7OWruTV+jp5qmuqrTVBn1X3pXt0q5LrdFE32uijcfmACFkwlKpxFZ5m63tiuTKMStlymUl59J/LV/fRpFJxjjR/qEsUSwW+QuT0nNPJOICnAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/d7876e7b37b5b7fbfc188e07f96f82d5/20c85/kafka-6.png\"\n        srcset=\"/static/d7876e7b37b5b7fbfc188e07f96f82d5/5a46d/kafka-6.png 300w,\n/static/d7876e7b37b5b7fbfc188e07f96f82d5/0a47e/kafka-6.png 600w,\n/static/d7876e7b37b5b7fbfc188e07f96f82d5/20c85/kafka-6.png 999w\"\n        sizes=\"(max-width: 999px) 100vw, 999px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>그렇다면 replication은 왜 필요할까? 단지 데이터의 복제 용도라기 보다는 특정 borker에 문제가 생겼을 경우 해당 broker의 역할을 다른 broker에서 즉각적으로 대신 수행 할 수 있게 하기 위한 용도 일 것이다.</p>\n<h4 id=\"replication---leader--follower\" style=\"position:relative;\"><a href=\"#replication---leader--follower\" aria-label=\"replication   leader  follower permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Replication - leader &#x26; follower</h4>\n<p>replication을 좀더 자세히 들여다보면, 복제요소중 대표인 leader, 그외 요소인 follower로 나누어진다. topic으로 통하는 모든 데이터의 read/write는 오직 leader에서 이루어지고 follower는 leader와 sync를 유지함으로써 leader에 문제가 생겼을 경우 follower들 중 하나가 leader역할을 하게 되는 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 999px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2fe199901b5463354d8122ca24b79a3b/20c85/kafka-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABcRAAAXEQHKJvM/AAACFklEQVQoz02STU8TURSG+3tduDBuWOCGjYiJJu4MGhQSiEaMNSpIBUJpO2CQBlr6NZ22M3em8/3Vorh6PBRiWJyc3Pee897n3HsLYRgRpwlxEhNEEWEUE8UJk8kEZTs0mk16/T5njSadnk6W5aRpRpKms4jiVPoS8skUpRSFgeXQHcR0jBTPv8SLM0ZuwMj26I08znWfgQrwpclyQ2zZGyiPk5aiZbhS52ONpeY6W5YYmg7b9SLvtFcUT15z8auM1TLoKxfXjxh7Qi8Ul9PJjMj2gpmpcmOZJiPPc6aTHFtqTVMMDdPmg7bCy70FlncWOf78nsrBLkMnxAvj2ejJ9ZizKxHDW8pE1tM8I5NDUgnlRTeEfSH0v7wgW3tAvPqQs9I+P8tthm6Gqn4S7T7Bm3uo4gr6t+9CoXCEJpr+Jr/6S/7ninw6vUvoMNpaQ208xdx4RuNriXrlFMNJMY/3Zrq1voSx+Zb6zi4j08ceu4TNM/J2g7R1TmjZons3hPpIYa8tEzxfwH3yiJP1LWo/LjDGCWZpe6YHS/Ocr35kv3iKqSKGnS724znCpTmsxXmaK+u0j+qo8ZiCabsYXZ1BU0xabXRDocv3sP2Y4cC80SX6ondbHXmkAMvx6TVbDKTe6Oj0LuSK5C1s+WaFcvmAw5pGuXYkoXFYqXJYrVGtVCRXb/Wj/3pFckX2ynd6ylWNqqZRKpX4B3xkeV6QnCNQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/2fe199901b5463354d8122ca24b79a3b/20c85/kafka-7.png\"\n        srcset=\"/static/2fe199901b5463354d8122ca24b79a3b/5a46d/kafka-7.png 300w,\n/static/2fe199901b5463354d8122ca24b79a3b/0a47e/kafka-7.png 600w,\n/static/2fe199901b5463354d8122ca24b79a3b/20c85/kafka-7.png 999w\"\n        sizes=\"(max-width: 999px) 100vw, 999px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>만약 카프카 클러스터내 broker 2에서 장애가 발생되었다면, broker 2에 있던 Topic-2(leader)의 역할을 대신 수행하기 위해 아래 그림과 같이 broker 1에 있는 Topic(follower)가 leader역할을 하게 될 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 999px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c060993079c074e7df26548f915d0ff3/20c85/kafka-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABcRAAAXEQHKJvM/AAACKklEQVQoz02RSU9TYRSG+2vc+NtcsHBBIm5wgUAiiTtFg6YMMWICxODQWqXTBZVQob0tLff2zkPv1K8XhNXjV9yweHK+fDnDe95TiKKYJEtJ0oRRHBPFCXGSMplM8F0XVVUZDvp0agdolTLCtUnFhDRNSbNM5mayLkVMcmzbpqBbLud6Qk/LCMJLgmSM7o3wvYCroc51q0XuuYhHD7m5f4/s7UsGseC4baJqHoYTYnkh+jRalmxounw+2eWd8ord369Rj6sYHR3PD7k0hoh2m4lpkvkeSeuYiWViBTGOP91mjBCCfCJwwhjTlA0102FbWeNFZZ7Vrwsc7r2nVqsw6g3I5bqp45EZFqKrMk7H5KMIyx+RSYtyMWYs184kthxyq/BCKgw/PmdcnCFZn8Uo7aOVy8TtHrGyQ7QxQ1x8wGDvDaeVHwjTwAoTkvwKcX2D+HuNyPO7Cl2MT0XsrWXMrWdc7H7gpHqEH4yJfpYxN5exNxbp76zT+l4htHxsN5AD/0jVZ2TqKZHlYJjBf4UDw8YprjJamcdfnOPX5hdq37oEU4/K+/grTwiXHnO6tU21dERoywP0znEWZomWZrGeztFe26R7eILteRRMx0c7H6C3O2hqlwvNot8fEIURYqgRqWfEklA3iaSPV6HP0A3pt1V0ma9Jr/udLkN5C8dxKVSrB9SaCtXmoUShVm9QazSp1+s0JE35vqVek7Fx+z+leqem2lBoKAqlUol/naB12hAcpLoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/c060993079c074e7df26548f915d0ff3/20c85/kafka-8.png\"\n        srcset=\"/static/c060993079c074e7df26548f915d0ff3/5a46d/kafka-8.png 300w,\n/static/c060993079c074e7df26548f915d0ff3/0a47e/kafka-8.png 600w,\n/static/c060993079c074e7df26548f915d0ff3/20c85/kafka-8.png 999w\"\n        sizes=\"(max-width: 999px) 100vw, 999px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>복제된 데이터가 follower들에게 있으니, 메시지의 유실이 없다는 장점이 있지만, 복제를 하기 위한 시간과 네트워크 비용이 들기 때문에 데이터의 중요도에 따라 ack옵션으로 성능과 데이터의 중요도에 따라 다음과 같이 세부설정이 가능하다.</p>\n<p><strong>ack (default:1)</strong></p>\n<blockquote>\n<ul>\n<li>0 : 프로듀서는 서버로부터 어떠한 ack도 기다리지 않음. 유실율 높으나 높은 처리량</li>\n<li>1 : 리더는 데이터를 기록, 모든 팔로워는 확인하지 않음</li>\n<li>-1(또는 all) : 모든 ISR 확인. 무손실</li>\n</ul>\n</blockquote>\n<p>ack값을 설정하여 데이터의 무손실에 더 중요성을 둘 것인지 또는 유실을 어느정도 감수 하더라고 속도에 중요성을 둘 것인지를 셋팅할 수 있다.</p>\n<p>지금까지 설명한 모든 구성요소를 그림으로 표현하면 아래 그림과 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/37c693fab41878c91d8ebad4c63e26b9/fbf76/kafka-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC80lEQVQ4y1WTy4/SUBjF+R818V9wo8aViRsXGmOiieLExGeiC92OiuAAOgrykBkeUwqlHYEWSp/Q90PUxfFrwZlxcXJveu/3u+frPTejv7wC6+UlrBK9ugzz4QWYD86RzkO/fw46jcZW+vbbZv1UxnbUaD1jr5bwPRee68J3HXiOBc9eIfIdsOwAe3tFFItFlEollMslNL+3kNQErgXfOVXg2nBWJgEdB2EYIgiCjWjuej6iOEaHGeBDvoB8/iNpD7lcHpVaEyvbPdlnuxs5NLdsBxnNMDHXlpC3UnRy7BOQCnr9IQ7YEZjxBJIqQdZl1FudtND3Pai01zBWqUzTwkI1kBnPVDwtC3ixP8bdHI/3TQGuZZJbH+xwjN3Gazyr3MTOp2t4U3+A2vc2FE1DHAbo/VDx/POUakU8Lk/QGojITOYqdgocdj7yuL07xLsGjz7DYMAJaDMchONjzOUZxtMJxJmUOmwedsELAlqcjCdlPjWUzQ9RZ8YJUMOTEk8LAu7lRsiRQ8f1sLR9tLosaq0jHBzxYLnj9JBK4wCKYcFyXDQGsxSUzXO4+44l4I9NyzuFER4VBdza5bBb4/Ez9BBHEbr0Dw97Qwx4kRyKmJDq1PLKsrGOQ3I4x/38CNkCjztvB6j2CKhoBiRZxWyhQpwrkBZ6emvJpSTADrU9OpYwESVMxaTlNpYEDCkRw6mKal8izfCVkTAczyk2tp3GxfeD7ejT7RkIo5jcsdivHhCEQfeIRbfXx/63ZurQcrw0Nr/IaaLf64iy7GyACcTzvHR0KJfNRoNalNIYiJoOgeI0UkxMNIoYdWK7AR3AgOM4MhHSP6eHkWSSWBnLsk6A/6SqKpTFApYXIh6x8GtfEDS+Yt1p0Cux0xCbhoHlcvmfmRToEj15KWcV0yuJoxD+7z+wnmfhXr8I7+ZVGDeuwJ7PEa3XiOjSEv2rSeYJKyPLMjQKauLqrBRFgU4uuD6Dw2oF3XoNbZJMwHQ/rZ/dn3xLWH8BD3Dbjy61/54AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img\"\n        title=\"img\"\n        src=\"/static/37c693fab41878c91d8ebad4c63e26b9/c1b63/kafka-9.png\"\n        srcset=\"/static/37c693fab41878c91d8ebad4c63e26b9/5a46d/kafka-9.png 300w,\n/static/37c693fab41878c91d8ebad4c63e26b9/0a47e/kafka-9.png 600w,\n/static/37c693fab41878c91d8ebad4c63e26b9/c1b63/kafka-9.png 1200w,\n/static/37c693fab41878c91d8ebad4c63e26b9/fbf76/kafka-9.png 1252w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Producer에서는 메시지를 입력하고, Consumer에서 메시지를 읽어갈때 Zookeeper에서 broker 및 offset정보를 관리하기 때문에 분산처리가 가능하게 된다.</p>\n<p>카프카를 운영하기에 앞서 기본적인 구성요소나 매커니즘에 대해 충분히 이해를 하면 운영 하는데 많은 도움이 될 것이다.</p>\n<p><strong>참고자료</strong></p>\n<ul>\n<li>공식홈 문서 : <a href=\"http://kafka.apache.org/documentation/\">http://kafka.apache.org/documentation/</a></li>\n</ul>"},{"id":"a22fb1f9-bb07-58b5-8216-18eae65d9ab6","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"ES6 - Spread Operator","path":"/ecma-script06-04","tags":["Web","Typescript","Javascript","ES6"],"excerpt":"전개 연산자(spread operator)는 표현식(expression)은 2개 이상의 인수arguments(함수 호출 용)나 2개 이상의 요소elements(배열 리터럴 용) 또는 2개 이상의 변수(비구조화 할당 용)가 예상되는 곳에 확장될 수 있도록 한다.","created":"2018-06-17T00:00:00.000Z","createdPretty":"17 June, 2018","updated":"2018-06-17T00:00:00.000Z","updatedPretty":"17 June, 2018","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABg0lEQVQoz1WRzS/CcRzHfzWUcTBhubhpLLZUSKXShnnIhS42Ti7u/gMHbuYgc+FmzGbmaWJt2iiMWUOiPMyhJvNUMXPw9v18e+Lw/n0evt+9fu/v5yMg3IKpMQUEQYBYJPBIEqVyqUSME6cWX/cWPPub8RrI6uUyqbcrExf1hH9AcRaYliRPhOMtLWJBE+JMsZTiIRM+bs34vDNn4AT9ByRX5FLCXOXmiHgvXyrGwYYG7uU67DJ51jTYWVTxnnddg/1VNa8DezokbswQfhjQMa7IOOrtKsVQfzkG+uQYtMtRU1XAIdFzI3yuBgQ9OhxtatkY6nHhbuS9kLcJT+w86TBixeRoZQZoayuB3VbGoSPDFVDXFsK1VAfnggoL00rMO5SYnajG4owShwy8zfoPx3okQsmnC98PFqzM1cKiL0KHtRidVhl32d0qQ7ulGD3tJfAzJ7SQxzMjwqcGRHwGDomymnI6yyyFPu/XbMDs/ST6E9U0dMp5zS5Tj0QL+RtJaRjFX/fUTy0kaJslAAAAAElFTkSuQmCC","aspectRatio":2.9069767441860463,"src":"/static/1699f1efb2d3c4c8668402ae6778ef73/0853f/cover.png","srcSet":"/static/1699f1efb2d3c4c8668402ae6778ef73/14156/cover.png 125w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/d6e47/cover.png 250w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/0853f/cover.png 500w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/5a5af/cover.png 700w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h3 id=\"spread-operator의-기본\" style=\"position:relative;\"><a href=\"#spread-operator%EC%9D%98-%EA%B8%B0%EB%B3%B8\" aria-label=\"spread operator의 기본 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread Operator!의 기본</h3>\n<p><strong>전개 연산자 or 펼침 연산자</strong> 많이 쓰게 될 연산자이다.</p>\n<blockquote>\n<p>전개 연산자(spread operator)는 표현식(expression)은 2개 이상의 인수arguments(함수 호출 용)나 2개 이상의 요소elements(배열 리터럴 용) 또는 2개 이상의 변수(비구조화 할당 용)가 예상되는 곳에 확장될 수 있도록 한다.</p>\n</blockquote>\n<h3 id=\"함수에-인자로-전달\" style=\"position:relative;\"><a href=\"#%ED%95%A8%EC%88%98%EC%97%90-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EC%A0%84%EB%8B%AC\" aria-label=\"함수에 인자로 전달 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>함수에 인자로 전달</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//배열을 요소 하나씩 받아야하는 함수가 있다.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">printLog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> hopeArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"게임\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"사서\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"하고싶다.\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token function\">printLog</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> hopeArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 이런 방식으로 하거나</span>\n<span class=\"token function\">printLog</span><span class=\"token punctuation\">(</span>hopeArray<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hopeArray<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hopeArray<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 아니면 printLog 함수를 수정해야했다.</span>\n\n<span class=\"token comment\">//ECMA06에서는 </span>\n<span class=\"token function\">printLog</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>hopeArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//이렇게 간단하게 사용하면 된다.</span>\n\n\n<span class=\"token comment\">//응용</span>\n<span class=\"token keyword\">let</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nMath<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>numbers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">...</code>을 통해서 apply없이 함수를 호출할 수 있다!</p>\n</blockquote>\n<h3 id=\"배열-붙이기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4-%EB%B6%99%EC%9D%B4%EA%B8%B0\" aria-label=\"배열 붙이기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열 붙이기</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> beer <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'시원한 맥주'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'마시러'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> offWork <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'퇴근하고'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>beer<span class=\"token punctuation\">,</span> <span class=\"token string\">'가고싶다.'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> merge <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>beer<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>offWork<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//이런 방법도 가능</span>\n\n<span class=\"token comment\">// 뒤나 앞에 붙이고 싶다면?</span>\narr1<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\narr1<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>그냥 <code class=\"language-text\">...</code>으로 배열을 껍데기를 깐다고 생각하면 쉽다.</p>\n</blockquote>\n<h3 id=\"배열-복사하기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"배열 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열 복사하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>arr1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> arr3 <span class=\"token operator\">=</span> arr1<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\narr1<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1번\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\narr2<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2번\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\narr3<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3번\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \"1 \" [\"1번\", 1, 2, 3]</span>\n<span class=\"token comment\">// \"2 \" [\"2번\", 1, 2, 3]</span>\n<span class=\"token comment\">// \"3 \" [\"3번\", 1, 2, 3]</span></code></pre></div>\n<blockquote>\n<p>참고해야하는 것은 배열 속 객체는 얕은 복사를 한것이다. 객체의 깊은 복사는 스니핏이 따로 있다.</p>\n</blockquote>\n<p><br><br></p>\n<h3 id=\"nodelist를-배열로-변환\" style=\"position:relative;\"><a href=\"#nodelist%EB%A5%BC-%EB%B0%B0%EC%97%B4%EB%A1%9C-%EB%B3%80%ED%99%98\" aria-label=\"nodelist를 배열로 변환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NodeList를 배열로 변환</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> nodeList <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"li\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \"[object NodeList]\"</span>\n\n<span class=\"token comment\">// 변환할 변수에 대입.</span>\n<span class=\"token keyword\">let</span> convertedSpread <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>nodeList<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>  \n<span class=\"token comment\">// \"[object Array]\"</span>\n\n<span class=\"token comment\">//함수에 인자로 넣어줄 때.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">testFunction</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>list</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \"[object Array]\"</span>\n\n<span class=\"token comment\">//from()을 이용한 노드리스트를 배열로 변경.</span>\n<span class=\"token keyword\">let</span> convertedFrom <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>nodeList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \"[object Array]\"</span></code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">node list</code>를 추출하였을 때, 배열로 바꿔야 할 때가 은근 자주있다. 물론 <code class=\"language-text\">from()</code>을 통해 하는 방법도 있지만 보기도 편하고 함수에 직접 때려 박을땐, 이 방법이 가장 깔끔하다.</p>\n</blockquote>"},{"id":"18758027-ff6b-5dae-8417-2a98e44a23f6","headings":[{"depth":3},{"depth":3}],"frontmatter":{"title":"ES6 - for-in for-of의 사용법과 차이점","path":"/ecma-script06-02","tags":["Web","Typescript","Javascript","ES6"],"excerpt":"For문은 알고 있겠지만 반복적인 작업을 위해 쓰게된다. 이전 포스트에서 for문에서 `let`을 이용한다는 것을 알아 두자.","created":"2018-05-07T00:00:00.000Z","createdPretty":"07 May, 2018","updated":"2018-05-07T00:00:00.000Z","updatedPretty":"07 May, 2018","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABg0lEQVQoz1WRzS/CcRzHfzWUcTBhubhpLLZUSKXShnnIhS42Ti7u/gMHbuYgc+FmzGbmaWJt2iiMWUOiPMyhJvNUMXPw9v18e+Lw/n0evt+9fu/v5yMg3IKpMQUEQYBYJPBIEqVyqUSME6cWX/cWPPub8RrI6uUyqbcrExf1hH9AcRaYliRPhOMtLWJBE+JMsZTiIRM+bs34vDNn4AT9ByRX5FLCXOXmiHgvXyrGwYYG7uU67DJ51jTYWVTxnnddg/1VNa8DezokbswQfhjQMa7IOOrtKsVQfzkG+uQYtMtRU1XAIdFzI3yuBgQ9OhxtatkY6nHhbuS9kLcJT+w86TBixeRoZQZoayuB3VbGoSPDFVDXFsK1VAfnggoL00rMO5SYnajG4owShwy8zfoPx3okQsmnC98PFqzM1cKiL0KHtRidVhl32d0qQ7ulGD3tJfAzJ7SQxzMjwqcGRHwGDomymnI6yyyFPu/XbMDs/ST6E9U0dMp5zS5Tj0QL+RtJaRjFX/fUTy0kaJslAAAAAElFTkSuQmCC","aspectRatio":2.9069767441860463,"src":"/static/1699f1efb2d3c4c8668402ae6778ef73/0853f/cover.png","srcSet":"/static/1699f1efb2d3c4c8668402ae6778ef73/14156/cover.png 125w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/d6e47/cover.png 250w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/0853f/cover.png 500w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/5a5af/cover.png 700w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h3 id=\"진짜-짧게-반복문은-무엇\" style=\"position:relative;\"><a href=\"#%EC%A7%84%EC%A7%9C-%EC%A7%A7%EA%B2%8C-%EB%B0%98%EB%B3%B5%EB%AC%B8%EC%9D%80-%EB%AC%B4%EC%97%87\" aria-label=\"진짜 짧게 반복문은 무엇 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>진짜 짧게 반복문은 무엇?</h3>\n<p><strong>기본적인 사용법</strong></p>\n<p>For문은 알고 있겠지만 반복적인 작업을 위해 쓰게된다. 이전 포스트에서 for문에서 <code class=\"language-text\">let</code>을 이용한다는 것을 알아 두자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"배열\"</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">,</span><span class=\"token string\">\": \"</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 배열 0 :  10</span>\n<span class=\"token comment\">// 배열 1 :  11</span>\n<span class=\"token comment\">// 배열 2 :  12</span></code></pre></div>\n<blockquote>\n<ol>\n<li>for문은 i가 0부터 arr배열의 길이만큼 3번 반복한다.</li>\n<li>arr배열의 0번에 접근하여 console.log로 출력한다.</li>\n</ol>\n</blockquote>\n<h3 id=\"신상-반복문-in과-of\" style=\"position:relative;\"><a href=\"#%EC%8B%A0%EC%83%81-%EB%B0%98%EB%B3%B5%EB%AC%B8-in%EA%B3%BC-of\" aria-label=\"신상 반복문 in과 of permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>신상 반복문! in과 of</h3>\n<p><strong>for-in loop</strong></p>\n<p>ES6에서는 2가지 반복문이 추가되었다. 먼저 볼것은 <code class=\"language-text\">for-in</code>이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> objects <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> objects<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> objects<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> key<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// a 1 'a1'</span>\n<span class=\"token comment\">// b 2 'b1'</span>\n<span class=\"token comment\">// c 3 'c1'</span></code></pre></div>\n<blockquote>\n<ol>\n<li>for-in문은 오브젝트에 대해서 반복시킨다. 물론 오브젝트가 아닌 배열에도 사용 할 수 있다.</li>\n<li>가끔 JS엔진마다 순서가 바뀔 수 있어서 <code class=\"language-text\">배열에 쓰는 것은 권장하지 않는다.</code></li>\n<li>받아오는 반복 변수 <code class=\"language-text\">key</code>값은 <code class=\"language-text\">String</code>이다. 그래서 연산작업을 해선 안된다.\n<code class=\"language-text\">key+1</code>를 보면 이해할 수 있다. 그래서? 결론은 <code class=\"language-text\">배열 출입 금지</code>.</li>\n</ol>\n</blockquote>\n<p><strong>for-of loop</strong></p>\n<p>for-of에 들어 갈 수 있는 것은 String, Array, NodeList, TypedArray, Map, Set 등이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"z\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> arr <span class=\"token keyword\">of</span> array<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// x</span>\n<span class=\"token comment\">// y</span>\n<span class=\"token comment\">// z</span></code></pre></div>\n<blockquote>\n<ol>\n<li>오브젝트는 안된다.</li>\n<li><code class=\"language-text\">arr</code>값은 for-in과 다르게 배열 속 값을 그대로 던저준다.</li>\n<li>특이한 점은 array 대신에 <code class=\"language-text\">String</code>이 들어갈 수 있다.</li>\n</ol>\n</blockquote>\n<p>사실은 위 예제말고도 상당히 다른 점이 많다.</p>\n<blockquote>\n<p><code class=\"language-text\">in은 Object. of는 Array</code></p>\n</blockquote>"},{"id":"a0002242-80aa-5b44-b8b4-e8e93079ec12","headings":[{"depth":3},{"depth":3}],"frontmatter":{"title":"ES6 - Function","path":"/ecma-script06-03","tags":["Web","Typescript","Javascript","ES6"],"excerpt":"함수에 대해 알아보자.","created":"2018-05-07T00:00:00.000Z","createdPretty":"07 May, 2018","updated":"2018-05-07T00:00:00.000Z","updatedPretty":"07 May, 2018","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABg0lEQVQoz1WRzS/CcRzHfzWUcTBhubhpLLZUSKXShnnIhS42Ti7u/gMHbuYgc+FmzGbmaWJt2iiMWUOiPMyhJvNUMXPw9v18e+Lw/n0evt+9fu/v5yMg3IKpMQUEQYBYJPBIEqVyqUSME6cWX/cWPPub8RrI6uUyqbcrExf1hH9AcRaYliRPhOMtLWJBE+JMsZTiIRM+bs34vDNn4AT9ByRX5FLCXOXmiHgvXyrGwYYG7uU67DJ51jTYWVTxnnddg/1VNa8DezokbswQfhjQMa7IOOrtKsVQfzkG+uQYtMtRU1XAIdFzI3yuBgQ9OhxtatkY6nHhbuS9kLcJT+w86TBixeRoZQZoayuB3VbGoSPDFVDXFsK1VAfnggoL00rMO5SYnajG4owShwy8zfoPx3okQsmnC98PFqzM1cKiL0KHtRidVhl32d0qQ7ulGD3tJfAzJ7SQxzMjwqcGRHwGDomymnI6yyyFPu/XbMDs/ST6E9U0dMp5zS5Tj0QL+RtJaRjFX/fUTy0kaJslAAAAAElFTkSuQmCC","aspectRatio":2.9069767441860463,"src":"/static/1699f1efb2d3c4c8668402ae6778ef73/0853f/cover.png","srcSet":"/static/1699f1efb2d3c4c8668402ae6778ef73/14156/cover.png 125w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/d6e47/cover.png 250w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/0853f/cover.png 500w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/5a5af/cover.png 700w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h3 id=\"이번은-함수에-대해-알아보자\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%B2%88%EC%9D%80-%ED%95%A8%EC%88%98%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\" aria-label=\"이번은 함수에 대해 알아보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이번은 함수에 대해 알아보자!</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//함수 선언식</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> sum <span class=\"token operator\">=</span> x<span class=\"token operator\">+</span>y<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> sum<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//함수 표현식</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> sum <span class=\"token operator\">=</span> x<span class=\"token operator\">+</span>y<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> sum<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<ol>\n<li>보통은 이 두가지를 사용한다.</li>\n<li>자가 호출 함수라는 것도 있다.</li>\n</ol>\n</blockquote>\n<h3 id=\"ecma06에서의-함수-선언-방식\" style=\"position:relative;\"><a href=\"#ecma06%EC%97%90%EC%84%9C%EC%9D%98-%ED%95%A8%EC%88%98-%EC%84%A0%EC%96%B8-%EB%B0%A9%EC%8B%9D\" aria-label=\"ecma06에서의 함수 선언 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ECMA06에서의 함수 선언 방식</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> sum <span class=\"token operator\">=</span> x<span class=\"token operator\">+</span>y<span class=\"token punctuation\">;</span>  \n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 21</span>\n\n\n<span class=\"token comment\">//더 간단한 방식</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">hi</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"Hello \"</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> <span class=\"token function\">hi</span><span class=\"token punctuation\">(</span><span class=\"token string\">'World!'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//  Hello World!</span></code></pre></div>\n<blockquote>\n<ol>\n<li>보면 알겠지만 이젠 더이상 <code class=\"language-text\">function</code>, <code class=\"language-text\">return</code>을 안써도 된다. </li>\n<li>괄호와 중괄호도 생략할 수 있다. 그냥  <code class=\"language-text\">=&gt;</code> 끝.</li>\n<li>매개변수가 없으면 <code class=\"language-text\">( )</code> 괄호는 써줘야한다.</li>\n</ol>\n</blockquote>\n<p>그냥 다 <code class=\"language-text\">=&gt;</code>로만 쓸까? 정답은 NO다.</p>\n<p>함수가 뭐하는 함수인지 모를 정도로 짧게 쓸 수 도 있으니 읽기 힘든 코드가 될 수 있다. 거기다가 요녀석이 <code class=\"language-text\">=&gt;</code> 좀 보기 힘든 구석도 있다. 그래서 선언을 function으로 하는 추세도 있다. </p>\n<p><code class=\"language-text\">forEach</code>나 <code class=\"language-text\">map</code>같은 함수 내부에서 <code class=\"language-text\">function</code> 키워드 대신에 쓰는 것은 실제로 많이 권장하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//옛날 방식</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>el<span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//ECMA06</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>el<span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//평범한 함수 선언은 이런식으로 하는 것이 협업에 도움된다고 한다.(airbnb)</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">short</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">longUniqueMoreDescriptiveLexicalFoo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>그냥 function 대신에 <code class=\"language-text\">=&gt;</code> 에로우를 쓰면된다.\n매개변수는 먼저쓰고 없으면 <code class=\"language-text\">( )</code>써준다.</p>\n</blockquote>"},{"id":"d8071b37-ff6d-59e2-89da-dba5ee8d2452","headings":[{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"ES6 - 변수 let, const 사용법","path":"/ecma-script06-01","tags":["Web","Typescript","Javascript","ES6"],"excerpt":"JS같은 경우 함수단위로 스코프가 결정된다든지 호이스팅, 동적 타입이라든지 언어 자체가 느슨한 편이다. JAVA나 C#같은 언어는 엄격한면이 있지만 js너무 풀어놔서 좋은 가이드나 배울때 좋은 소스를 안보면 망하기 일수다.","created":"2018-05-06T00:00:00.000Z","createdPretty":"06 May, 2018","updated":"2018-05-06T00:00:00.000Z","updatedPretty":"06 May, 2018","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABg0lEQVQoz1WRzS/CcRzHfzWUcTBhubhpLLZUSKXShnnIhS42Ti7u/gMHbuYgc+FmzGbmaWJt2iiMWUOiPMyhJvNUMXPw9v18e+Lw/n0evt+9fu/v5yMg3IKpMQUEQYBYJPBIEqVyqUSME6cWX/cWPPub8RrI6uUyqbcrExf1hH9AcRaYliRPhOMtLWJBE+JMsZTiIRM+bs34vDNn4AT9ByRX5FLCXOXmiHgvXyrGwYYG7uU67DJ51jTYWVTxnnddg/1VNa8DezokbswQfhjQMa7IOOrtKsVQfzkG+uQYtMtRU1XAIdFzI3yuBgQ9OhxtatkY6nHhbuS9kLcJT+w86TBixeRoZQZoayuB3VbGoSPDFVDXFsK1VAfnggoL00rMO5SYnajG4owShwy8zfoPx3okQsmnC98PFqzM1cKiL0KHtRidVhl32d0qQ7ulGD3tJfAzJ7SQxzMjwqcGRHwGDomymnI6yyyFPu/XbMDs/ST6E9U0dMp5zS5Tj0QL+RtJaRjFX/fUTy0kaJslAAAAAElFTkSuQmCC","aspectRatio":2.9069767441860463,"src":"/static/1699f1efb2d3c4c8668402ae6778ef73/0853f/cover.png","srcSet":"/static/1699f1efb2d3c4c8668402ae6778ef73/14156/cover.png 125w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/d6e47/cover.png 250w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/0853f/cover.png 500w,\n/static/1699f1efb2d3c4c8668402ae6778ef73/5a5af/cover.png 700w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h3 id=\"ecmascript는-뭐냐\" style=\"position:relative;\"><a href=\"#ecmascript%EB%8A%94-%EB%AD%90%EB%83%90\" aria-label=\"ecmascript는 뭐냐 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ECMAScript는 뭐냐?</h3>\n<p>ECMAscript6(ES6)라고도 불리고 ECMA2015라고도 불린다. 자바스크립트의 표준으로 새로운 JS 표준이다. </p>\n<p>JS같은 경우 함수단위로 스코프가 결정된다든지 호이스팅, 동적 타입이라든지 언어 자체가 느슨한 편이다. JAVA나 C#같은 언어는 엄격한면이 있지만 js너무 느슨하여 혼란스러울때가 종종 생긴다.</p>\n<h3 id=\"변수\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EC%88%98\" aria-label=\"변수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변수</h3>\n<p>변수부터 알아보자 앞서서 스코프 이야기를 했는데, 스코프는 변수 범위다. 원래 JS에서는 <code class=\"language-text\">var</code>로 변수를 선언했다. 보통 <code class=\"language-text\">전역변수(global)</code>를 하지말라는 것을 많이 들어봤을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 2</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 2</span></code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">var x = 1</code>에서 x는 전역변수가 되었다. 거기다가 <code class=\"language-text\">var</code>키워드는 범위가 유연성있다. if속에서 새로 만든 변수같지만 같은 변수로 인식한다.\n간단한 예지만 실제로 이런 경우 때문에 원하는 값이 나오지 않아 고생을 많이한다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 2</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 1</span></code></pre></div>\n<h3 id=\"let-const\" style=\"position:relative;\"><a href=\"#let-const\" aria-label=\"let const permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>let, const</h3>\n<p><code class=\"language-text\">var</code>가 별로 좋지 않다는 것을 알았다. let과 const는 무슨 차이지?</p>\n<p><code class=\"language-text\">let</code>은 여러번 할당 할 수 있다. <code class=\"language-text\">const</code>는 한번 뿐이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\nx <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 2</span>\n\n\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\ny <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// \"error\"</span></code></pre></div>\n<blockquote>\n<p>let은 한번 넣고 두번 넣고 할당을 여러번 할 수있지만 const는 그렇지 않다.</p>\n</blockquote>\n<p><strong>당장 어딘가에 let과 const를 사용하고 싶다면?</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//do!!</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">square</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">calculatingSquareArea</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> a<span class=\"token operator\">*</span>b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>for-loop문에 var 대신 let을 써보자. for문 밖에서 i값에 접근하지 못한다.\n함수를 선언할 때, var대신 const를 써보자 어짜피 함수할당은 1번만 하기 때문에 여러모로 좋다.</p>\n</blockquote>\n<p><strong>배열과 객체에도 <code class=\"language-text\">const</code>를 써도 좋다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> car <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  wheels <span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  windows <span class=\"token operator\">:</span> <span class=\"token number\">6</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ncar<span class=\"token punctuation\">.</span>engine <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\ncar<span class=\"token punctuation\">.</span>wheels <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>car<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//   engine: 1,</span>\n<span class=\"token comment\">//   wheels: 4,</span>\n<span class=\"token comment\">//   windows: 6</span>\n<span class=\"token comment\">// }</span>\n\ncar <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;-- Error</span></code></pre></div>\n<blockquote>\n<p>에러가 나야할 것 같지만 <code class=\"language-text\">const</code>로 선언한 배열과 객체 자체를 변경하지 않으면 상관없다.</p>\n</blockquote>"},{"id":"a45f361a-b7c7-59e2-8c47-ce4cdfba7f58","headings":[{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"데이터와 알고리즘","path":"/ml-data-algorithm","tags":["ML-DL","ML"],"excerpt":"머신러닝은 어떤 데이터로 어떤 학습 알고리즘을 사용할 것인가를 결정하는 작업이라고 할수 있다. 여기서 문제가 될수 있는 나쁜 알고리즘과 나쁜 데이터에 대해 알아보도록 하자.","created":"2018-02-14T00:00:00.000Z","createdPretty":"14 February, 2018","updated":"2018-02-14T00:00:00.000Z","updatedPretty":"14 February, 2018","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABkElEQVQY0yWNy07jMBSG88TzArNgNat5gOkalggJDUJcSqHlkjQt05bWiZMmceIkdpzEdtqGgQEhdU5B+i1Z5/++c4zFcrhY2iiwnXDkhGM3+oPJNMpQyrH5ZI2QnRYeyZBHZjB3o0cIYCgYgWJgMvHI1Itn/i7zgC7CFB1dX/jUuTAH/fG9S9Bx/zJmGCrIMpn78RPAoBhfNCTKHJK7JMeFTGw0ubSss+Gwd9U9M3tTfyEUjZkfMw8AIL8UAwQYJdynPEhFlBRRmAcTPEc+Pr27PewPLOd+vsSEhVkZZyVJBaFFSIsAFAN+4OyKKuEyTXj0+6bftR66Y/uk93B8ct69Ns8Hd7CIV1TIjNU0rxKAYYsBGqsor1Mh00rmtWJtK5lgFnJn2DeHo9vxo5Ti+VkrzZVmAABWfG4x4MHBUu00qHUjmlX9763NBd/rHPzoHNRKvb3/XW8UzHVT6qZQ4KtcqMwo6rSUWfUpgwn1utUvr5uPj/dvPzvff+1vt9uX13bT6tVaNqsKGLhRa1bq/D+3opso0JfTNwAAAABJRU5ErkJggg==","aspectRatio":2.358490566037736,"src":"/static/cb51f4dd0c74a5731fc0cf0a40df5d26/0853f/cover.png","srcSet":"/static/cb51f4dd0c74a5731fc0cf0a40df5d26/14156/cover.png 125w,\n/static/cb51f4dd0c74a5731fc0cf0a40df5d26/d6e47/cover.png 250w,\n/static/cb51f4dd0c74a5731fc0cf0a40df5d26/0853f/cover.png 500w,\n/static/cb51f4dd0c74a5731fc0cf0a40df5d26/d7736/cover.png 682w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aa8e1fea0c258efc64c8f1db9c990ce1/bb072/ml-process.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABcRAAAXEQHKJvM/AAABT0lEQVQY0wFEAbv+AIm9PQ2VwU1fisRIaq6PLEfwZili6XIxbORhHVT2rV9P+rVsbP+vXGS1r4xFfMXVZ4fGz2t5vcdRN6bLVUuw0ms4r9ZhU4GRVG9oZmkAAAAAAIy+QLqn0mH/mtNa/6yOKbjybjX8/4tK/+VmJNn1q13M/8yC//+2Zf+yrYm0hdDg/53b5P94vMbSN6bL22HG5/9Bstj/TYOVvXRtav9obG1nAIy+QeSi0Vf/ltFT/62OK7jybDH7/5Za/+VnJdj1q1zM/9KN//+9cv+yrIezjdTj/6rh6f+BwMrSNKXL2m/M6v9Mt9v/SoOWuHhxb/9kZ2icAIW3OzeFtTisfrk6tqiMLXvnWhup32Qhu9tcGpHsplqJ8aldu/mnVq6uqYd4c7zLsnq7xLh2tr+NM6DDkjmjx7kzpsyrT3+Ph2tkYqseOkQJnUO9nyh70EQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ml-1\"\n        title=\"ml-1\"\n        src=\"/static/aa8e1fea0c258efc64c8f1db9c990ce1/c1b63/ml-process.png\"\n        srcset=\"/static/aa8e1fea0c258efc64c8f1db9c990ce1/5a46d/ml-process.png 300w,\n/static/aa8e1fea0c258efc64c8f1db9c990ce1/0a47e/ml-process.png 600w,\n/static/aa8e1fea0c258efc64c8f1db9c990ce1/c1b63/ml-process.png 1200w,\n/static/aa8e1fea0c258efc64c8f1db9c990ce1/bb072/ml-process.png 1318w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>머신러닝은 어떤 <code class=\"language-text\">데이터</code>로 어떤 학습 <code class=\"language-text\">알고리즘</code>을 사용할 것인가를 결정하는 작업이라고 할수 있다. 여기서 문제가 될수 있는 나쁜 알고리즘과 나쁜 데이터에 대해 알아보도록 하자.</p>\n<h3 id=\"충분하지-않은-데이터\" style=\"position:relative;\"><a href=\"#%EC%B6%A9%EB%B6%84%ED%95%98%EC%A7%80-%EC%95%8A%EC%9D%80-%EB%8D%B0%EC%9D%B4%ED%84%B0\" aria-label=\"충분하지 않은 데이터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>충분하지 않은 데이터</h3>\n<p>어린아이에게 사과에 대해 알려주려면 사과를 가리키면서 ‘사과’라고 말하기만 하면 된다(아마도 이 과정을 여러 번 반복해야 하겠지만..). 그러면 아이는 결국 색깔과 모양이 달라도 모든 종류의 사과를 구분할 수 있게 된다. 하지만 머신러닝에서 사과를 구분할 수 있도록 알고리즘이 잘 작동하려면 데이터가 많아야 한다. 아주 간단한 문제에서 조차도 수천 개의 데이터가 필요하고 이미지나 음성 인식 같은 복잡한 문제라면 수백만 개가 필요할지도 모른다.</p>\n<blockquote>\n<p>\"It's not who has the best algorithm that wins. It's who has the most data\"</p>\n</blockquote>\n<p>AI 전문가이자 스탠포드 교수인 앤듀르 응(Andrew Ng)의 말이다. 정교한 알고리즘을 설계하는 것 이상으로 많은 데이터를 이용하는 것이 효과적이다. 정교한 알고리즘과 많은 데이터가 가장 정확한 결과를 얻을 수 있겠지만, 시간과 돈을 알고리즘 개발에 쓰는 것과 데이터를 잘 활용하는것 사이의 트레이드 오프에 대해 다시한번 생각해 봐야 한다는 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 378px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/791b5318b10d5f17c1ee0acb7200fe23/f0991/data.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAABJ0AAASdAHeZh94AAAB/ElEQVQoz22TbW+bMBSF8///z76tqrSprVRta5M0aprQhgLB+IV3CGCMs2PM0jSdZSHr2o+Pz72XmR5027RJnCipjhj6/xPHjlqbtR1jcKa1CaRJiiu+woPSw6BPQCclFeV8lawdgcAMVzaHJiJR13bnsB6OJx3Kq+v7ze2f/a9V8Pvpff64IQGf4En5DAZp45TWqw1dOdHOFyzkOaEt532eqaYZYa2hCWXZSQtbrJfDYsm/3z2HEdPtoY3jNk1VJwc1fHgu8gJ8LGLzbJMUS6rHB/fH7X1Bg74ourLWlrHeBz3By8VTXdWUsm5S1qHj3fycu36omtq8Xx8/XvQ5nbOX9QvyzJmAcpOlZLv7dvXg0Wy8ZzwN5gs2wYv5Em4FF33X+254dbOu6t6QSn+Suhgnz1BGwlQv36IQecEWynshIlXXdS1kJOzB4HmTQBlhRvHRF61iPXsxd0MSBvuIMOTIOjJ1hlsasQblEGgofTmVoYmT+FvKGM2SDE1xqP/VeWySrG3bC0vWqlVmJNn7lDOOGXgBHEwdZpRJRCOajrdiIhFVUZVFiR8mz3IssqzkPC5yjAI8zhjYFtBkQpruwRobYRAihUKIfbBHOjgXLKK7tx0JSZmXOFaVFU7OzithLWRptt1sX53X9fPa3bme6wHzPR9fZ+swyk4t8Bd8VJfF7DbnQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ml-data\"\n        title=\"ml-data\"\n        src=\"/static/791b5318b10d5f17c1ee0acb7200fe23/f0991/data.png\"\n        srcset=\"/static/791b5318b10d5f17c1ee0acb7200fe23/5a46d/data.png 300w,\n/static/791b5318b10d5f17c1ee0acb7200fe23/f0991/data.png 378w\"\n        sizes=\"(max-width: 378px) 100vw, 378px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>(참고 논문 : 믿을 수 없는 데이터의 효과 <a href=\"http://goo.gl/KNZMEA\">http://goo.gl/KNZMEA</a>)</p>\n<h3 id=\"대표성-없는-학습-데이터\" style=\"position:relative;\"><a href=\"#%EB%8C%80%ED%91%9C%EC%84%B1-%EC%97%86%EB%8A%94-%ED%95%99%EC%8A%B5-%EB%8D%B0%EC%9D%B4%ED%84%B0\" aria-label=\"대표성 없는 학습 데이터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>대표성 없는 학습 데이터</h3>\n<p>일반화가 잘되려면 우리가 일반화하기 원하는 새로운 사례를 학습 데이터가 잘 대표하는 것이 중요하다. 대표성을 가지는 데이터를 사용하는 것이 가장 좋지만, 결코 쉬운일은 아니다.\n샘플이 작으면 샘플링 잡음(Sampling Noise)이 생기고, 표본 추출 방법이 잘못되면 대표성을 띄지 못할 수 있습니다. 이를 샘플링 편향(Sampling Bias)이라고 한다.</p>\n<h3 id=\"샘플링-편향-사례\" style=\"position:relative;\"><a href=\"#%EC%83%98%ED%94%8C%EB%A7%81-%ED%8E%B8%ED%96%A5-%EC%82%AC%EB%A1%80\" aria-label=\"샘플링 편향 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>샘플링 편향 사례</h3>\n<p>샘플링 편향에 대한 유명한 사례중 랜던(Randon)과 루즈벨트(Roosevelt)가 경쟁했던 1936년 미국 대통령 선거에서 Literary Digest 잡지사가 천만 명에게 우편물을 보내 수행한 대규모 여론조사가 있다. 그 당시 240만 명의 응답을 받았고 랜던이 선거에서 57% 득표를 얻을 것이라고 높은 신뢰도로 예측했지만, 루즈벨트가 62% 득표로 당선되었다. 문제는 Literary Digest의 샘플링 방법에 있었다고 한다.</p>\n<p>첫째, 여론조사용 주소를 얻기 위해 전화번호부, 자사의 구독자 명부, 클럽 회원 명부 등을 사용했다. 이런 명부는 모두 공화당(따라서 랜던)에 투표할 가능성이 높은 부유한 계층에 편중된 경향이 있다.</p>\n<p>둘째, 우편물 수신자 중 25% 미만의 사람이 응답했다. 이는 정치에 관심 없는 사람, Literary Digest를 싫어하는 사람과 다른 중요한 그룹을 제외시킴으로써 역시 표본을 편향되게 만들게 된 것이다. 특히 이러한 종류의 샘플링 편향을 비응답 편향(nonresponse bias)이라고 한다.</p>\n<h3 id=\"낮은-품질의-데이터\" style=\"position:relative;\"><a href=\"#%EB%82%AE%EC%9D%80-%ED%92%88%EC%A7%88%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0\" aria-label=\"낮은 품질의 데이터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>낮은 품질의 데이터</h3>\n<p>학습 데이터가 에러, 이상치, 잡음으로 가득하다면 머신러닝 시스템이 내재되어 있는 패턴을 찾기 어려울 수 있다. 그 만큼 데이터의 전처리가 매우 중요하다. 한 설문조사에서는 데이터과학자의 <strong>80% 시간을 데이터 수집 및 전처리</strong>에 사용한다고 한다. 아마도 전처리 과정은 특히나 지루하고 반복 작업의 연속이라 고단하고 시간도 많이 들어어가게 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/745511a53e93b4302ada6883fac20917/6a068/cleaning-time.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB0bqugSL/AP/EABgQAAIDAAAAAAAAAAAAAAAAAAEQERJC/9oACAEBAAEFArGVtf/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAABEQIgMf/aAAgBAQAGPwJsmTy3/8QAGhAAAgIDAAAAAAAAAAAAAAAAAREQQQAhcf/aAAgBAQABPyEAFhQ1Azbi3J//2gAMAwEAAgADAAAAEBMP/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQEQ/9oACAEDAQE/EEFuf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAAIDAQEAAAAAAAAAAAAAAAERADFxECH/2gAIAQEAAT8QBBqUn0WsiI7WwBQdH//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"clean-data\"\n        title=\"clean-data\"\n        src=\"/static/745511a53e93b4302ada6883fac20917/6a068/cleaning-time.jpg\"\n        srcset=\"/static/745511a53e93b4302ada6883fac20917/f93b5/cleaning-time.jpg 300w,\n/static/745511a53e93b4302ada6883fac20917/b4294/cleaning-time.jpg 600w,\n/static/745511a53e93b4302ada6883fac20917/6a068/cleaning-time.jpg 960w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"관련-없는-특성\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EB%A0%A8-%EC%97%86%EB%8A%94-%ED%8A%B9%EC%84%B1\" aria-label=\"관련 없는 특성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관련 없는 특성</h3>\n<p>학습 데이터에 관련 없는 특성이 적고 관련 있는 특성이 충분해야 학습을 진행할 수 있다.\n훈련에 사용할 좋은 특성들을 찾아야 하며, 특성을 찾기 위해서는 아래 사항을 고려 해야 한다.</p>\n<ul>\n<li>특성 선택 (Feature Selection) : 가지고 있는 특성 중에서 학습에 가장 유용한 특성을 선택.</li>\n<li>특성 추출 (Feature Extraction) : 특성을 결합하여 더 유용한 특성을 만듬. 혹은 새로운 데이터를 수집하여 새로운 특성을 만듬.</li>\n</ul>\n<p>지금까지 나쁜 데이터의 사례를 살펴보았고 이제 나쁜 알고리즘의 경우를 살펴보자.</p>\n<h3 id=\"학습-데이터의-과대적합\" style=\"position:relative;\"><a href=\"#%ED%95%99%EC%8A%B5-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98-%EA%B3%BC%EB%8C%80%EC%A0%81%ED%95%A9\" aria-label=\"학습 데이터의 과대적합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>학습 데이터의 과대적합</h3>\n<p>모델이 학습 데이터에 너무 잘 맞지만 일반성이 떨어진다는 의미이다.\n훈련 데이터에 있는 잡음의 양에 비해 모델이 너무 복잡할 때 발생하기 때문에 좀더 단순화 시킬 필요가 있다.</p>\n<ul>\n<li>파라미터 수가 적은 모델 선택, 훈련데이터에 특성수를 줄임, 모델에 제약을 가하여 단순화</li>\n<li>훈련 데이터를 더 많이 모음</li>\n<li>훈련 데이터의 잡음을 줄임</li>\n</ul>\n<h3 id=\"학습-데이터-과소적합\" style=\"position:relative;\"><a href=\"#%ED%95%99%EC%8A%B5-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B3%BC%EC%86%8C%EC%A0%81%ED%95%A9\" aria-label=\"학습 데이터 과소적합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>학습 데이터 과소적합</h3>\n<p>모델이 너무 단순해서 데이터의 내재된 구조를 학습하지 못한것을 의미한다.</p>\n<ul>\n<li>파라미터가 더 많은 강력한 모델 선택</li>\n<li>더 좋은 특성 제공(특성 엔지니어링)</li>\n<li>모델의 제약을 줄임(규제 하이퍼파라미터를 감소)</li>\n</ul>\n<p>좋은 모델을 만들기 위해서는 테스트와 검증이 필요하다. 이는 일반화 오류를 최소화 하기위한 방법이기도 하다. 일반적으로 모델을 만들기 위해서는 데이터를 훈련셋, 검증셋, 테스트셋으로 나누어 학습을 진행을 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 647px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04ea6fc48a10d087a00b5c113624406b/63577/data-set.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAAB07qepOIDX//EABoQAQEAAgMAAAAAAAAAAAAAAAECABEDEBL/2gAIAQEAAQUCk9YQnU8LonQGf//EABcRAQADAAAAAAAAAAAAAAAAAAIBEEH/2gAIAQMBAT8BJ2a//8QAFhEBAQEAAAAAAAAAAAAAAAAAARBR/9oACAECAQE/AVyf/8QAHBAAAQMFAAAAAAAAAAAAAAAAAAIQEQEDEiEz/9oACAEBAAY/AtXVHRTVzghv/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARMSFRYf/aAAgBAQABPyFC5Pke6nIZNweUwOAqEDRrbP/aAAwDAQACAAMAAAAQX8//xAAZEQABBQAAAAAAAAAAAAAAAAAhARARcbH/2gAIAQMBAT8QkAbXG//EABcRAQADAAAAAAAAAAAAAAAAAAEQITH/2gAIAQIBAT8QcrEf/8QAGxABAQEAAwEBAAAAAAAAAAAAAREAMVFhQYH/2gAIAQEAAT8QF0WKkTLU1RH05/N3N9k0YFo2nd3IQIlXJhFofV53/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ml-data-set\"\n        title=\"ml-data-set\"\n        src=\"/static/04ea6fc48a10d087a00b5c113624406b/63577/data-set.jpg\"\n        srcset=\"/static/04ea6fc48a10d087a00b5c113624406b/f93b5/data-set.jpg 300w,\n/static/04ea6fc48a10d087a00b5c113624406b/b4294/data-set.jpg 600w,\n/static/04ea6fc48a10d087a00b5c113624406b/63577/data-set.jpg 647w\"\n        sizes=\"(max-width: 647px) 100vw, 647px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며...</h3>\n<p><strong>\"Big Data is the next Natural Resource...\"</strong></p>\n<p>과거 원유가 가장 중요한 자원이었다고 한다면 이제는 데이터가 가장 중요한 자원일 것이다.\n그런데 데이터는 과거의 자원들과는 아주 많이 다르다. 데이터는 지속적인 재생, 고갈되지 않는.. 그리고 스스로 증폭하는 새로운 자원이다. 이렇게 중요한 데이터를 올바르게 잘 활용을 하는것이 정말 중요할 것이다. </p>\n<p><strong>참고한 자료</strong>\n강연 : 4차 산업혁명시대 어떻게 살 것인가? - EBS 미래강연Q</p>\n<p>도서 : Hands-On Machine Learning - 한빛미디어</p>"},{"id":"2191a159-debb-5e78-b5ff-5cc432a5df54","headings":[{"depth":1}],"frontmatter":{"title":"K-최근접 이웃법 (Nearest Neighbor)","path":"/ml-knn","tags":["ML-DL","ML","KNN"],"excerpt":"최근접 이웃법은 새로운 데이터를 입력받았을 때 가장 가까이 있는 것이 무엇이냐를 중심으로 새로운 데이터의 종류를 정해주는 알고리즘이다.","created":"2018-02-14T00:00:00.000Z","createdPretty":"14 February, 2018","updated":"2018-02-14T00:00:00.000Z","updatedPretty":"14 February, 2018","featuredImage":null},"html":"<p>최근접 이웃법은 새로운 데이터를 입력받았을 때 가장 가까이 있는 것이 무엇이냐를 중심으로 새로운 데이터의 종류를 정해주는 알고리즘이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 562px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0174c9019b26347b9a0a374784b2c2a7/6e88f/knn-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACmElEQVQ4y2Oor6vjq6tvMGQAAqeAWBYGKAjsPsAYPuUMS1DvITA/uO8IA1GgqrFdoL26QMNz4kXlyOnn34ZNOZOPria4/ygD0QDJQCWggW+ABhaCxEMnntAIm3K6OLDnoBDEhYfhevYnq8LpfUjsdVHyDAzIXnYMjGMJ6jnIBGIDvduUvf3Pf6DBfmALJp1khhn4usYATL+rNWR4U2PA5KfCAeZfyddiYKirr+cDGmqA7vKQCcekgYZEBXTu5Qbxg3oOgMXPZmuA6fd1hnC1/xc4IjSCDKyFujC4Y6d4xLTzu4BeTUM2PLxnL5i+XazD8L/LjPFOsQ4jiH+3REf6boluDIj9stqA8VqBNtDLYAMbjcCu6NqjHjPv5v/wqeemgvhRs66wBXTtAxt2q9wE4aKJVmD6Xolu9uNyvQenMjWkQfzLeVqMYAORvezduEnMpXwJG4jt07wVLHanRBdMA13A8bBMbwLQVVJQPhcw3DiBBrGC+JfytCAuBGKwgaWtU5iQ0iGYjph2juF6sT5Y/HKhvuHjSsNTN0v03dHD/FyOJoQBMrAOamBdXT0jMCEzApMKPP151KwGs5es386IbsiZTDUhYCQJQl3HCDcQ5kIgzYgtrc6eMwfswpmzZjssXrxo0by5s51B/EcVBpsflestBLF/t5owwrzMD8SGUAOZ6urqGNDxnDlzwGE0d+6ctnv37v1fsHBhB4h/s9zUDxi+rjMidcFpdGplKtgQLqAmHWJyFdBg7Xnz5hXPnj1bF6cioGEKQGwPxNxALAzEQliwYGNjo3BaWhonSE9KaipnY2ODcFdtsUhXbYkIWE19vRAwtQiADLQC4lAg1gBifSDWQ8dAX4DphoYGg6amJmMQjSwOoqFsLQB1EjADPn5x/wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"knn\"\n        title=\"knn\"\n        src=\"/static/0174c9019b26347b9a0a374784b2c2a7/6e88f/knn-1.png\"\n        srcset=\"/static/0174c9019b26347b9a0a374784b2c2a7/5a46d/knn-1.png 300w,\n/static/0174c9019b26347b9a0a374784b2c2a7/6e88f/knn-1.png 562w\"\n        sizes=\"(max-width: 562px) 100vw, 562px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>{: height=\"300px\" }</p>\n<p>그림에서 보는것 처럼 기존 데이터가 파랑색과 주황색으로 데이터가 분류되었다고 한다면 물음표 데이터가 들어왔을때 이 데이터는 어떤 색상으로 분류가 되어야 할까? </p>\n<p>최근접 이웃법 말그대로 가까운 것에 따른 분류이기 때문에 주황색으로 분류할 것이다. 정말 간단하고 직관적인 알고리즘 이다.</p>\n<p>하지만 단순히 가장 가까이에 있는 것으로 분류를 하는것이 문제가 되는 경우도 있다.</p>\n<p>다음의 경우를 살펴 보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 562px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f7b1306f9f79091e0c65e3ae094d1e2f/6e88f/knn-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADcElEQVQ4y42Se0jTURTH72Y+cpp7aSYVYUWr1sqIov4oKCKs/ujpgySx7C0mNpav/X5bVFtBmfmYrLJWM7SyYvmY6/e7m2/dNBXRzMoe2IMKoqggIm73Xt1Y0B8d+HLOPffezz3n3gtYhpnCsLo4gG3TkTNBYMKi1x0GHS1OGr+PB8DhHoxou2WaOXQi/ojLbovim9vkEDojm+w26eCFPUKyrqW+BoBcvUFszD+q2FjUPyfZ1PcjsaRbTSZTrz4J2KYxU2Bz7e1ogBAYyZq/YUyj/Pw4Y/Yykv+yGghLEZpkG/4qRt5K8jDQkJ+liC/qj0029X5IKOnOJPmD14cCiHdyD6XOlrZwEg9ploU9zZgVNpA+LaTwtE5AciOHZ84d0MfHVf1CoRTq3/La7WmTiDf2IroYco4gvrNPWoFjd4ZyGsndfIcCe158EnkLGstZ7HijWXgnDaHgTnuNCDAsOwVDl4B/WEtttZz4l+qFKWM5qmFHaUHMA8+oxFxumnPNYkmsslxZPrg3Kqb7QOx0WFUugs2tEgrUTlS43dg4Nams15FY4tlHxnYHFx2CkOBZ5uy45/krd3ea85Qkb7ly6bjb7UZWq9XgPRy2ewIh5KWApUD9UpLcdpabl1LxBCWV9ZTS9urbYmDdPd/LF973zFh/vm/j2fJKtfWGpbei4mrKt9dDwRTI88EQQgkF+re8SW+L2qKvCSExQssFI33tAcmp2fSBMsytew/V/UQ7irsZMq6ub5I7na7JFAghAY5XiEWB6lOlQi9464WuFammruxqmyPSmzNUOmMPmLuM+8vbF30f5sPtnEvuaxlCGf6XQRTITAA1OqMg9foorSap7NGD9Nsf0fHL/CqEzH89FnraEHqvAYZ4xx18vcjFNY7D/SvEYEFCiYd+mZ1FHaodF7sScgqtAc1NTjkPYXhasYvgfOAeQ5KgYeCNqGwQiX1JDIvAipv4k0Jz5gaQfr5W4F+RYt0uwHGcmOf5KOxlWFLosMsftrplrsriyNcapXVUrVR5gaEMwyjBfxrC3whLiH730/t+kRY2423Ooruvjik20wUYNgtrDZYIS4Yl9Qof5vM6nU6q1Wolubm54nHliRltgQTPyUAmCtyTfy7iFJMnIcBVWDuxFFiLsVT+wht8/l/C9646yRYs0bF4L8su+APklqkStwPgDgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"knn\"\n        title=\"knn\"\n        src=\"/static/f7b1306f9f79091e0c65e3ae094d1e2f/6e88f/knn-2.png\"\n        srcset=\"/static/f7b1306f9f79091e0c65e3ae094d1e2f/5a46d/knn-2.png 300w,\n/static/f7b1306f9f79091e0c65e3ae094d1e2f/6e88f/knn-2.png 562w\"\n        sizes=\"(max-width: 562px) 100vw, 562px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>{: height=\"300px\" }</p>\n<p>이번에는 문제가 약간 복잡해 진다. 이론대로라면 가장 가까운 것은 파란색이기 때문에 파랑색으로 분류를 해야 할것 같지만, 주변을 보면 대부분 주황색이 보인다. 왠지 파랑색으로 분류하면 안될 것 같다는 생각이 든다....</p>\n<p>단순히 가까운 것에 따른 분류에서 이제 <strong>주변에 있는 몇개의 것들 중에 많은 것</strong>으로 분류하게 되면 이 문제는 어느정도 해결이 된다.</p>\n<p>물음표 주변(큰원)에는 4개의 데이터가 있는데 그중 세개가 주황색, 한개가 파란색 이다. 따라서 물음표는 주황색으로 분류한다.</p>\n<p>그렇다면 주변의 범위 즉 주변 데이터의 갯수에 대한 기준이 있어야 할 것 같은데.. 위에서는 4개로 정하였다. 즉 K=4가 되는 최근접 이웃법이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 811px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dc087791fd9aa41cd1aaecd3b7dcd036/fd28b/knn-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACwklEQVQoz2PorM5lYoCCgElnGP7/X82ADML//2c6vG83+8ENSyHq/v+Hy0XEJAhERESoR0RGCoL5ERGMDJUN7RKhU88Hh006IQ1TeGZJF3v6//8sd+rss+7WWMWAxPbvP8A79/9/NhA7auZF1qj1v1kj0wq5IkKDRCIiwlnhthQ0T1UMn3bhaviU054gfvG07cz7Dh7hB7EfFihbPShUNwOxb2fKcF9pD9LtvfWfw731ECuyLyKiomWBrtMDu7S+vk4UWXL7yWs856bm8wENswTxC6GuelSs7vy4VKun8cB7wZM71rGAxGKmneGIWnCfJTI5hyMiPJQrIjKKmaG9ukDIc+ZDHqALw6KbVnGs//+f41aRjtK9KrNZ/2eycG5dPFl12dKl1xYuXmYKMmT+mh0i3evO8lj13mJJmHuVmQEdLMq24A6act4ocvqF+349hyX//9zBzlB4jREcVjMumBRP31G6bPHCi7OWbbAFiW3dtZevfvkZYQYBSORELXzIEJmcyxARFsIQGRXNAPRyPdjLPmVz2EH09JW7JKZsuwK2OWXWmXkR086vAbF37T/CC6IP7N3N8//NSnCMz9x4DGLorCtgDAZ1dfViMNeGTTmbETXj/IUbuxdwgfids9ewL1y9VejE4f08hdHhDBX//zPuOXxCAOyzAzcY/t9Zi2oYCNTX1YnDY2vyCfXQyae9b+xfwb5j1x7hK3uXg11iKcLAsP7cY/YTU4sUTzQGgiPp4aQYhqysLIwgBHlZgAEL+A90zYvX79hv3rzJ/ebNG45rP/+zPivTmvyqWEkfJH+lzIwJmz6QgXp19fViQJdK1TY0SVc3tsk01NdLVVVVSdTU1Eg21NdJ1dQ3SDZXFEivrgw3mlmVppbROIkNqhergWpALASKHBiuq6tDYgNpIB9omUhc8xz+4sYu4ea6KpwGAgA5Nio/CiPTSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"knn\"\n        title=\"knn\"\n        src=\"/static/dc087791fd9aa41cd1aaecd3b7dcd036/fd28b/knn-3.png\"\n        srcset=\"/static/dc087791fd9aa41cd1aaecd3b7dcd036/5a46d/knn-3.png 300w,\n/static/dc087791fd9aa41cd1aaecd3b7dcd036/0a47e/knn-3.png 600w,\n/static/dc087791fd9aa41cd1aaecd3b7dcd036/fd28b/knn-3.png 811w\"\n        sizes=\"(max-width: 811px) 100vw, 811px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>{: height=\"300px\" }</p>\n<p>만약 K=1로 한다면 처음 정의하였던 것처럼 물음표는 가장 가까운 한개의 요소만 바라보게 될 테니 파랑색으로 분류를 하게 될 것이다. 즉, K의 값에 따라 물음표가 어느 범주로 분류 될 것인지가 결정 된다.</p>\n<p>최근접 이웃법 앞에 K라는 단어가 붙어 KNN알고리즘이라고 하는 이유를 이제야 알 것 같다.</p>\n<p>그럼 과연 K는 몇이어야 좋은 것일까? 최선의 K값을 선택하는것은 데이터마다 다르게 접근해야 한다.</p>\n<h1 id=\"실습\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5\" aria-label=\"실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습</h1>\n<p>간단하게 mglearn 라이브러리에 있는 데이터셋을 이용하여 실습해 보자.</p>\n<p>(mglearn : 그래프와 데이터셋을 손쉽게 다루기 위한 샘플데이터 라이브러리)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>matplotlib inline\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt\n<span class=\"token keyword\">import</span> mglearn\n\nmglearn<span class=\"token punctuation\">.</span>plots<span class=\"token punctuation\">.</span>plot_knn_classification<span class=\"token punctuation\">(</span>n_neighbors<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>결과</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 359px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6d2b111709e71a61fc2064407b54e407/f5eb6/code-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/ElEQVQoz21S23LTMBD1//8Ib32HocNDZwKEaYEkphRSO7Ec3y+yJFsXSwory8BM4Twka63Ont09CrTWfdczxsZJDMNAKB1wN44TZYxSQoaBvoC7ySHTdV0wTdM4jldrcJlcFxTRPrx95SJrr/9glhxnEQTACrhQ+ekpfnw43b/lpJ0F54ykX99JMRmt2/T4gqyV5GyY+rJEUQC6A2U3txuU5ekxnEjvJI1Owg+CC44r+199Tvu6CEBdzTr6vr8k8dKpdd1ao5TKskxK6fsHjHLWK2Y4Y9A2rADG9vXMkllLXK8XdA6/bM0iDLXu7g9V3STnMxRFCOV5HgghgOw7S+t+F2W+EGy+ruvZ2Hi30UpA0Z/7T23TAC1JEkhhjJ0y59wYm1S4GygmzI2kzevtN1CDGDYHjUB82O+qqgJmmiL4BHcDzgUscHOI34dxGGePsVM21mpjIOgIIyP3M2vJ4aSsmzfbAwSEEOcz5xPlSi3TGrtu1/89oSo8nrq2qesGbl+yPEFoEnL1eVzgaAvvjzGYTk5zgV0W1uHh4+eDv7yS3cNcvj2t7ClmjnNzt3v4gX7b5FJp1Yen3Hf3l9z3Pewc3jMMH0bpMyr0rGCcWUko7O0ASCGUlGsspXvbTq0s8QIwAHbb1BWki6KA3zRNoToYCwO3LTjVeAv94S+jlRzxTXiOOAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"knn\"\n        title=\"knn\"\n        src=\"/static/6d2b111709e71a61fc2064407b54e407/f5eb6/code-1.png\"\n        srcset=\"/static/6d2b111709e71a61fc2064407b54e407/5a46d/code-1.png 300w,\n/static/6d2b111709e71a61fc2064407b54e407/f5eb6/code-1.png 359w\"\n        sizes=\"(max-width: 359px) 100vw, 359px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">n_neighbors=3</code> 즉 K=3으로 할 경우 테스트 데이터가 어느 분류로 될지를 보여주는 그래프이다.</p>\n<p>앞에서 설명했듯이 가장 가까운 3개의 점들에 의해 분류가 결정이 된다.</p>\n<p>여기서는 세개의 별이 테스트로 들어온 데이터고 결과적으로는 두개는 주황색, 한개는 파랑색으로 분류가 되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">mglearn<span class=\"token punctuation\">.</span>plots<span class=\"token punctuation\">.</span>plot_knn_classification<span class=\"token punctuation\">(</span>n_neighbors<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>결과</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 364px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e25eb7fb009ae6ff044ab64e59a0c867/e45a9/code-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8UlEQVQoz2VSf2+bMBDl+3+JfYpJU/fHVE3aqq1TUq1J0zRjhYABhwAGzr8NO8fdsjYnYdnHvXd37y7qGOuHAbgYTsa6dgTAd++NDRcWIlnXCSEiDJnnqatSZ808z+ORLN6/s1rhfZ6m+cKabDtNDm0cx4hmcbZbxd8+cNYoYM7ZdPEJWopxx2xnlPgfOU0TZ7XiY73fciEjDvDx9oFLLYemP2QhiP5aGqMFOzijL5Nbo5AdOI+UkkVJs6IKxHg6a093BJ6LF8poY4NhGJ6+bOzekzk3+VbsP3qU4Ol+gbWF55e7TUpKkmeEkDRNq6rimBkAwu+Bq6/rJGRCPXzqeU42SzgSdMarH7TY56RAZJ7nXnaAl8wpbbsB6q4PRJ9/xt3I8aKk0MonX69XRUEQliQJYwzLRmBklHxIyqvvmzinN+vfvmDfkvNj4/LIINSCCmOkNfp68dj2g7XG9wwwDkKBUG9GgueeNqvn0tM5/8T+hxGkNu40aA/GLwjmFfu7FUKqbhRnopP/fhtX9TF4XqkdYD1I2nmu67vd1e1jaOFFTqFu1s/ncYbMbdtKKXFRrdZxXi2f0gn7AcAhozP8QsN1wJ31T87xhJNFTdMcDgfc8LIsEUDLAhEFIUiM2uLfuq4ppVggIQU6MQzvWZZprf8AVHwg0OQmAYcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"knn\"\n        title=\"knn\"\n        src=\"/static/e25eb7fb009ae6ff044ab64e59a0c867/e45a9/code-2.png\"\n        srcset=\"/static/e25eb7fb009ae6ff044ab64e59a0c867/5a46d/code-2.png 300w,\n/static/e25eb7fb009ae6ff044ab64e59a0c867/e45a9/code-2.png 364w\"\n        sizes=\"(max-width: 364px) 100vw, 364px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>만약 <code class=\"language-text\">n_neighbors=1</code> 즉 K=1으로 할 경우 다른 결과를 얻게 된다.</p>\n<p>mglearn의 make_forge 함수를 이용하여서 data와 target을 x와 y에 대입하여 해당 데이터로 모델을 만들고 검증해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>model_selection <span class=\"token keyword\">import</span> train_test_split\nx<span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> mglearn<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>make_forge<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n \nx_train<span class=\"token punctuation\">,</span> x_test<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">,</span> y_test <span class=\"token operator\">=</span> train_test_split<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> random_state<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\nmglearn<span class=\"token punctuation\">.</span>discrete_scatter<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>결과</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 361px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/37876135892b5a8718709428b124ca2f/39d76/code-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABpklEQVQoz3VS23LTMBD1/38Ef0EfgQfo9IEphJKBhsRtg+3YrqO7dZfMyio4TemOxl7vOWdvcuG9RxhzLkalGaOcc4IGwVOAM5YjZyakYjNUSKUEZzE4VO9ijNM0Havd6uLN9IoF7/H+5zQlZqGNbe435Y+vD9fvFB3MyJy1zfdLyTHAw+9N8O6ZOHg9ckkH0j4UUkpC6eX6HgCBWkEGcKCFfrcKIUjSxxBe1ndGaUGSeBzHJFhIMQa/EGPM45xG8ruABWRxCCAPzvnntPja8AAVWussBusxu/5Vp0QxGmuzcrhbS4Yz/yzjUrk8IET5kfIMvP+yhV2mRM7+d+wkVlp7az7f7j/elJt9+21b5co5PWIjnNNq4HxYbe08XaHAYGfaGuteTls2w93heDZ87iiJxWzg+ZDsH4kIibk8TaSMHejSRVrYclVz6JEIOOC8vVp/uinzLfyF+Kps8lBPlUFJKYWdQ/ve2s3+AAf+qvTpLKTOEPzF1hrYjpoNggAV6Yb6HiFECGm7zlnTtQegNk0jxFjXdYq3LRAwxl3XQSV4Qsmqqv4APccpih+rpM8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"knn\"\n        title=\"knn\"\n        src=\"/static/37876135892b5a8718709428b124ca2f/39d76/code-3.png\"\n        srcset=\"/static/37876135892b5a8718709428b124ca2f/5a46d/code-3.png 300w,\n/static/37876135892b5a8718709428b124ca2f/39d76/code-3.png 361w\"\n        sizes=\"(max-width: 361px) 100vw, 361px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>neighbors <span class=\"token keyword\">import</span> KNeighborsClassifier\nknn_classifier <span class=\"token operator\">=</span> KNeighborsClassifier<span class=\"token punctuation\">(</span>n_neighbors<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n \nknn_classifier<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>x_train<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"테스트 데이터 예측 : {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>knn_classifier<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>x_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"테스트 데이터 정확도 : {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>knn_classifier<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>x_test<span class=\"token punctuation\">,</span> y_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"result\"><pre class=\"language-result\"><code class=\"language-result\">테스트 데이터 예측 : [1 0 1 0 1 0 0]\n테스트 데이터 정확도 : 0.8571428571428571</code></pre></div>\n<p><code class=\"language-text\">정확도는 약 86%</code></p>\n<p>이 말은 모델이 테스트 데이터셋에 있는 데이터들중 86%를 제대로 맞췄다는 의미이다.</p>\n<p>실제 핵심 로직은 sklearn에서 제공해 주고 있기 때문에 코드는 굉장히 간단해 보일 것이다.</p>\n<p>K-NN알고리즘은 지도학습의 분류 알고리즘의 하나로 로직이 간단하여 구현하기 쉽다. 하지만 학습 모델이 따로 없고, 전체 데이터를 스캔하여 데이터를 분류하기 때문에 데이터의 양이 많아지면 분류 속도가 현저하게 느려진다. 그래서 <code class=\"language-text\">게으른 알고리즘</code> 이라고도 한다.</p>"}],"postsPerPage":6}}}